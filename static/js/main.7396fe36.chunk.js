(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"i",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"g",function(){return d}),n.d(t,"j",function(){return m});var r=!1,a=!0,o=!0,i=!1,c=!0,l=!0,u=function(){return"production"},s="Client",d="VastusMainLambdaFunction",m=["name","username","birthday","profileImagePath","profileImagePaths","challengesWon","friends","friendRequests","scheduledEvents","ownedEvents","completedEvents","challenges","ownedChallenges","completedChallenges","groups","ownedGroups","receivedInvites","invitedChallenges","messageBoards","streaks"]},1059:function(e,t){},1060:function(e,t,n){e.exports=n.p+"static/media/vt_new.40089de9.svg"},1063:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(63),i=n.n(o),c=n(53),l=n.n(c),u=n(11),s=(n(434),n(226),n(437),n(5)),d=n(1095),m=n(1066),f=n(145),g=n(37),b=n(1088),E=n(1076),p=n(1090),A=n(1091),O=n(1079),T=n(1084),h=n(988),I=n(1083),v=n(14),C=n(27),y=n(26),D=n(39),S=n(38),P=n(40),N=n(1086),U=n(1089),R=n(1068),L=n(1078),k=n(8),j=n(58),F=n(10),w=n(31),Q=n.n(w),M=n(1),H=n(33),x=n.n(H),B=n(15),G=n(24);function _(e){M.d&&alert(e)}var Y=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"getItem",value:function(t,n,r,a,o){if(!t)throw Error("Item type cannot be null");if(!n)throw Error("ID cannot be null");if(!r||!(r.length>0))throw Error("Variable list must have at least one variable");for(var i=0;i<r.length;i++)if(!r[i])throw Error("No variables can be null");var c=Object(B.c)(t,e.getClient,e.getTrainer,e.getGym,e.getWorkout,e.getReview,e.getEvent,e.getChallenge,e.getInvite,e.getPost,e.getSubmission,e.getGroup,e.getComment,e.getSponsor,e.getMessage,e.getStreak,e.getDeal,e.getProduct,e.getAdmin,"GraphQL get Fetch function function not implemented");if(c)return c(n,r,a,o);throw Error("Unrecognized item type")}},{key:"getItemByUsername",value:function(t,n,r,a,o){if(!t)throw Error("Item type cannot be null");if(!n)throw Error("Username cannot be null");if(!r||!(r.length>0))throw Error("Variable list must have at least one variable");for(var i=0;i<r.length;i++)if(!r[i])throw Error("No variables can be null");var c=Object(B.c)(t,e.getClientByUsername,e.getTrainerByUsername,e.getGymByUsername,null,null,null,null,null,null,null,null,null,e.getSponsorByUsername,null,null,null,null,e.getAdminByUsername,"GraphQL get Fetch Username function function not implemented");if(c)return c(n,r,a,o);throw Error("Unrecognized item type")}},{key:"getItemByFederatedID",value:function(t,n,r,a,o){if(!t)throw Error("Item type cannot be null");if(!n)throw Error("Federated ID cannot be null");if(!r||!(r.length>0))throw Error("Variable list must have at least one variable");for(var i=0;i<r.length;i++)if(!r[i])throw Error("No variables can be null");var c=Object(B.c)(t,e.getClientByFederatedID,e.getTrainerByFederatedID,e.getGymByFederatedID,null,null,null,null,null,null,null,null,null,e.getSponsorByFederatedID,null,null,null,null,e.getAdminByFederatedID,"GraphQL get Fetch Username function function not implemented");if(c)return c(n,r,a,o);throw Error("Unrecognized item type")}},{key:"getItems",value:function(t,n,r,a,o){if(!t)throw Error("Item type cannot be null");if(!n||!(n.length>0))throw Error("ID list must have at least one ID");for(var i=0;i<n.length;i++)if(!n[i])throw Error("No IDs can be null");if(!r||!(r.length>0))throw Error("Variable list must have at least one variable");for(var c=0;c<r.length;c++)if(!r[c])throw Error("No variables can be null");var l=Object(B.c)(t,e.getClients,e.getTrainers,e.getGyms,e.getWorkouts,e.getReviews,e.getEvents,e.getChallenges,e.getInvites,e.getPosts,e.getSubmissions,e.getGroups,e.getComments,e.getSponsors,e.getMessages,e.getStreaks,e.getDeals,e.getProducts,e.getAdmins,"GraphQL get Batch Fetch function function not implemented");if(G.a.ifTesting&&a){for(var u=[],s=0;s<n.length;s++){for(var d={id:n[s],item_type:t},m=0;m<r.length;m++){var f=r[m];"id"!==f&&"item_type"!==f&&(d[r[m]]="TEST_VALUE")}u.push(d)}a({items:u,unretrievedItems:[]})}if(l)return l(n,r,a,o);throw Error("Unrecognized item type")}},{key:"constructItemQuery",value:function(t,n,r,a,o){if(!t)throw Error("Item type cannot be null");if(!n||!(n.length>0))throw Error("Variable list must have at least one variable");for(var i=0;i<n.length;i++)if(!n[i])throw Error("No variables can be null");if(a<=0)throw Error("Limit must be greater than 0");var c=Object(B.c)(t,e.constructClientQuery,e.constructTrainerQuery,e.constructGymQuery,e.constructWorkoutQuery,e.constructReviewQuery,e.constructEventQuery,e.constructChallengeQuery,e.constructInviteQuery,e.constructPostQuery,e.constructSubmissionQuery,e.constructGroupQuery,e.constructCommentQuery,e.constructSponsorQuery,e.constructMessageQuery,e.constructStreakQuery,e.constructDealQuery,e.constructProductQuery,e.constructAdminQuery,"GraphQL get construct Query function not implemented");if(c)return c(n,r,a,o);throw Error("Unrecognized item type")}},{key:"queryItems",value:function(t,n,r,a){if(!t)throw Error("Item type cannot be null");var o=Object(B.c)(t,e.queryClients,e.queryTrainers,e.queryGyms,e.queryWorkouts,e.queryReviews,e.queryEvents,e.queryChallenges,e.queryInvites,e.queryPosts,e.querySubmissions,e.queryGroups,e.queryComments,e.querySponsors,e.queryMessages,e.queryStreaks,e.queryDeals,e.queryProducts,e.queryAdmins,"GraphQL get Query function function not implemented for type");if(o)return o(n,r,a);throw Error("Unrecognized item type")}},{key:"getClient",value:function(t,n,r,a){return e.execute(e.constructQuery("GetClient","getClient",{id:t},n),"getClient",r,a)}},{key:"getClientByUsername",value:function(t,n,r,a){return e.execute(e.constructQuery("GetClientByUsername","getClientByUsername",{username:t},n),"getClientByUsername",r,a)}},{key:"getClientByFederatedID",value:function(t,n,r,a){return e.execute(e.constructQuery("GetClientByFederatedID","getClientByFederatedID",{federatedID:t},n),"getClientByFederatedID",r,a)}},{key:"getTrainer",value:function(t,n,r,a){return e.execute(e.constructQuery("GetTrainer","getTrainer",{id:t},n),"getTrainer",r,a)}},{key:"getTrainerByUsername",value:function(t,n,r,a){return e.execute(e.constructQuery("GetTrainerByUsername","getTrainerByUsername",{username:t},n),"getTrainerByUsername",r,a)}},{key:"getTrainerByFederatedID",value:function(t,n,r,a){return e.execute(e.constructQuery("GetTrainerByFederatedID","getTrainerByFederatedID",{federatedID:t},n),"getTrainerByFederatedID",r,a)}},{key:"getGym",value:function(t,n,r,a){return e.execute(e.constructQuery("GetGym","getGym",{id:t},n),"getGym",r,a)}},{key:"getGymByUsername",value:function(t,n,r,a){return e.execute(e.constructQuery("GetGymByUsername","getGymByUsername",{username:t},n),"getGymByUsername",r,a)}},{key:"getGymByFederatedID",value:function(t,n,r,a){return e.execute(e.constructQuery("GetGymByFederatedID","getGymByFederatedID",{federatedID:t},n),"getGymByFederatedID",r,a)}},{key:"getWorkout",value:function(t,n,r,a){return e.execute(e.constructQuery("GetWorkout","getWorkout",{id:t},n),"getWorkout",r,a)}},{key:"getReview",value:function(t,n,r,a){return e.execute(e.constructQuery("GetReview","getReview",{id:t},n),"getReview",r,a)}},{key:"getEvent",value:function(t,n,r,a){return e.execute(e.constructQuery("GetEvent","getEvent",{id:t},n),"getEvent",r,a)}},{key:"getChallenge",value:function(t,n,r,a){return e.execute(e.constructQuery("GetChallenge","getChallenge",{id:t},n),"getChallenge",r,a)}},{key:"getInvite",value:function(t,n,r,a){return e.execute(e.constructQuery("GetInvite","getInvite",{id:t},n),"getInvite",r,a)}},{key:"getPost",value:function(t,n,r,a){return e.execute(e.constructQuery("GetPost","getPost",{id:t},n),"getPost",r,a)}},{key:"getSubmission",value:function(t,n,r,a){return e.execute(e.constructQuery("GetSubmission","getSubmission",{id:t},n),"getSubmission",r,a)}},{key:"getGroup",value:function(t,n,r,a){return e.execute(e.constructQuery("GetGroup","getGroup",{id:t},n),"getGroup",r,a)}},{key:"getComment",value:function(t,n,r,a){return e.execute(e.constructQuery("GetComment","getComment",{id:t},n),"getComment",r,a)}},{key:"getSponsor",value:function(t,n,r,a){return e.execute(e.constructQuery("GetSponsor","getSponsor",{id:t},n),"getSponsor",r,a)}},{key:"getSponsorByUsername",value:function(t,n,r,a){return e.execute(e.constructQuery("GetSponsorByUsername","getSponsorByUsername",{username:t},n),"getSponsorByUsername",r,a)}},{key:"getSponsorByFederatedID",value:function(t,n,r,a){return e.execute(e.constructQuery("GetSponsorByFederatedID","getSponsorByFederatedID",{federatedID:t},n),"getSponsorByFederatedID",r,a)}},{key:"getMessage",value:function(t,n,r,a,o){return e.execute(e.constructQuery("GetMessage","getMessage",{board:t,id:n},r),"getMessage",a,o)}},{key:"getStreak",value:function(t,n,r,a){return e.execute(e.constructQuery("GetStreak","getStreak",{id:t},n),"getStreak",r,a)}},{key:"getDeal",value:function(t,n,r,a){return e.execute(e.constructQuery("GetDeal","getDeal",{id:t},n),"getDeal",r,a)}},{key:"getProduct",value:function(t,n,r,a){return e.execute(e.constructQuery("GetProduct","getProduct",{id:t},n),"getProduct",r,a)}},{key:"getAdmin",value:function(t,n,r,a){return e.execute(e.constructQuery("GetAdmin","getAdmin",{id:t},n),"getAdmin",r,a)}},{key:"getAdminByUsername",value:function(t,n,r,a){return e.execute(e.constructQuery("GetAdminByUsername","getAdminByUsername",{username:t},n),"getAdminByUsername",r,a)}},{key:"getAdminByFederatedID",value:function(t,n,r,a){return e.execute(e.constructQuery("GetAdminByFederatedID","getAdminByFederatedID",{federatedID:t},n),"getAdminByFederatedID",r,a)}},{key:"getClients",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrieved Items list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetClients","getClients",null,n,o,!0),"getClients",r,a)}},{key:"getTrainers",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrieved Items list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetTrainers","getTrainers",null,n,o,!0),"getTrainers",r,a)}},{key:"getGyms",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrieved Items list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetGyms","getGyms",null,n,o,!0),"getGyms",r,a)}},{key:"getWorkouts",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrieved Items list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetWorkouts","getWorkouts",null,n,o,!0),"getWorkouts",r,a)}},{key:"getReviews",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetReviews","getReviews",null,n,o,!0),"getReviews",r,a)}},{key:"getEvents",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetEvents","getEvents",null,n,o,!0),"getEvents",r,a)}},{key:"getChallenges",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetChallenges","getChallenges",null,n,o,!0),"getChallenges",r,a)}},{key:"getInvites",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetInvites","getInvites",null,n,o,!0),"getInvites",r,a)}},{key:"getPosts",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetPosts","getPosts",null,n,o,!0),"getPosts",r,a)}},{key:"getSubmissions",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetSubmissions","getSubmissions",null,n,o,!0),"getSubmissions",r,a)}},{key:"getGroups",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetGroups","getGroups",null,n,o,!0),"getGroups",r,a)}},{key:"getComments",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetComments","getComments",null,n,o,!0),"getComments",r,a)}},{key:"getSponsors",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetSponsors","getSponsors",null,n,o,!0),"getSponsors",r,a)}},{key:"getMessages",value:function(t,n,r,a,o){n&&n.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var i=e.generateIDList(n);return e.execute(e.constructQuery("GetMessages","getMessages",{board:t},r,i,!0),"getMessages",a,o)}},{key:"getStreaks",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetStreaks","getStreaks",null,n,o,!0),"getStreaks",r,a)}},{key:"getDeals",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetDeals","getDeals",null,n,o,!0),"getDeals",r,a)}},{key:"getProducts",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetProducts","getProducts",null,n,o,!0),"getProducts",r,a)}},{key:"getAdmins",value:function(t,n,r,a){t&&t.length>e.batchLimit&&M.h&&console.log("Be prepared to have some IDs returned in the unretrievedItems list!!!!");var o=e.generateIDList(t);return e.execute(e.constructQuery("GetAdmins","getAdmins",null,n,o,!0),"getAdmins",r,a)}},{key:"constructClientQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryClients","queryClients",o,t,n,!1,!0)}},{key:"constructTrainerQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryTrainers","queryTrainers",o,t,n,!1,!0)}},{key:"constructGymQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryGyms","queryGyms",o,t,n,!1,!0)}},{key:"constructWorkoutQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryWorkouts","queryWorkouts",o,t,n,!1,!0)}},{key:"constructReviewQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryReviews","queryReviews",o,t,n,!1,!0)}},{key:"constructEventQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryEvents","queryEvents",o,t,n,!1,!0)}},{key:"constructChallengeQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryChallenges","queryChallenges",o,t,n,!1,!0)}},{key:"constructInviteQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryInvites","queryInvites",o,t,n,!1,!0)}},{key:"constructPostQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryPosts","queryPosts",o,t,n,!1,!0)}},{key:"constructSubmissionQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QuerySubmissions","querySubmissions",o,t,n,!1,!0)}},{key:"constructGroupQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryGroups","queryGroups",o,t,n,!1,!0)}},{key:"constructCommentQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryComments","queryComments",o,t,n,!1,!0)}},{key:"constructSponsorQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QuerySponsors","querySponsors",o,t,n,!1,!0)}},{key:"constructMessageQuery",value:function(t,n,r,a,o){var i={board:t};return a&&(i.limit=a),o&&(i.nextToken=o),e.constructQuery("QueryMessages","queryMessages",i,n,r,!1,!0)}},{key:"constructStreakQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryStreaks","queryStreaks",o,t,n,!1,!0)}},{key:"constructDealQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryDeals","queryDeals",o,t,n,!1,!0)}},{key:"constructProductQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryProducts","queryProducts",o,t,n,!1,!0)}},{key:"constructAdminQuery",value:function(t,n,r,a){var o={};return r&&(o.limit=r),a&&(o.nextToken=a),e.constructQuery("QueryAdmins","queryAdmins",o,t,n,!1,!0)}},{key:"queryClients",value:function(t,n,r){return e.execute(t,"queryClients",n,r)}},{key:"queryTrainers",value:function(t,n,r){return e.execute(t,"queryTrainers",n,r)}},{key:"queryGyms",value:function(t,n,r){return e.execute(t,"queryGyms",n,r)}},{key:"queryWorkouts",value:function(t,n,r){return e.execute(t,"queryWorkouts",n,r)}},{key:"queryReviews",value:function(t,n,r){return e.execute(t,"queryReviews",n,r)}},{key:"queryEvents",value:function(t,n,r){return e.execute(t,"queryEvents",n,r)}},{key:"queryChallenges",value:function(t,n,r){return e.execute(t,"queryChallenges",n,r)}},{key:"queryInvites",value:function(t,n,r){return e.execute(t,"queryInvites",n,r)}},{key:"queryPosts",value:function(t,n,r){return e.execute(t,"queryPosts",n,r)}},{key:"querySubmissions",value:function(t,n,r){return e.execute(t,"querySubmissions",n,r)}},{key:"queryGroups",value:function(t,n,r){return e.execute(t,"queryGroups",n,r)}},{key:"queryComments",value:function(t,n,r){return e.execute(t,"queryComments",n,r)}},{key:"querySponsors",value:function(t,n,r){return e.execute(t,"querySponsors",n,r)}},{key:"queryMessages",value:function(t,n,r){return e.execute(t,"queryMessages",n,r)}},{key:"queryStreaks",value:function(t,n,r){return e.execute(t,"queryStreaks",n,r)}},{key:"queryDeals",value:function(t,n,r){return e.execute(t,"queryDeals",n,r)}},{key:"queryProducts",value:function(t,n,r){return e.execute(t,"queryProducts",n,r)}},{key:"queryAdmins",value:function(t,n,r){return e.execute(t,"queryAdmins",n,r)}},{key:"generateFilter",value:function(e,t){return{parameterString:"filter: "+JSON.stringify(e).replace(/['"]+/g,""),parameters:t}}},{key:"generateIDList",value:function(e){for(var t="ids: [",n={},r=0;r<e.length;r++){var a=e[r],o="id"+r;n[o]=a,t+="$"+o+", "}return{parameterString:t+="]",parameters:n}}},{key:"constructQuery",value:function(e,t,n,r){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l="";a=o?Object(F.a)({},n,o.parameters):n;var u=!0;if(l+="query "+e,!x.a.isEmpty(a)){for(var s in l+="(",a)u||(l+=", "),l+="$"+s+": ",l+="limit"===s?"Int":"ids"===s?"[String]!":"String!",u=!1;l+=")"}if(l+=" {\n    "+t,u=!0,!x.a.isEmpty(n)||o){for(var d in l+="(",o&&(l+=o.parameterString),n)u&&!o||(l+=", "),l+=d+": $"+d,u=!1;l+=")"}for(var m in l+=" {\n",(c||i)&&(l+="        items {\n"),r)r.hasOwnProperty(m)&&((c||i)&&(l+="    "),l+="        "+r[m]+"\n");return c?l+="        }\n        nextToken\n":i&&(l+="        }\n        unretrievedItems {\n            id\n        }\n"),{query:l+="    }\n}",variables:a}}},{key:"getNextTokenString",value:function(e){return e||"null"}},{key:"getNormalizedQuery",value:function(e){return{query:e.query,variables:Object(F.a)({},e.variables,{nextToken:"not_defined"})}}},{key:"getNormalizedQueryString",value:function(e){return JSON.stringify(e)}},{key:"getQueryFromNormalizedQuery",value:function(e,t){return{query:e.query,variables:Object(F.a)({},e.variables,{nextToken:t})}}},{key:"getCompressedFromQueryResult",value:function(e){var t=e.items,n=[];if(t)for(var r=0;r<t.length;r++)n.push(t[r].id);return{ids:n,nextToken:e.nextToken}}},{key:"getQueryResultFromCompressed",value:function(e,t){for(var n=e.ids,r=[],a=0;a<n.length;a++){var o=t[n[a]];o&&r.push(o)}return{items:r,nextToken:e.nextToken}}},{key:"execute",value:function(e,t,n,r){if(M.h&&console.log("Sending ql = "+e.query+"\nWith variables = "+JSON.stringify(e.variables)),_("Sending ql = "+e.query+"\nWith variables = "+JSON.stringify(e.variables)),G.a.ifTesting||w.API.graphql(Object(w.graphqlOperation)(e.query,e.variables)).then(function(e){if(M.h&&console.log("GraphQL operation succeeded!"),!e.data||!e.data[t])return M.h&&console.log("Object returned nothing!!! Something wrong?"),void(n&&n(null));M.h&&console.log("Returned: "+JSON.stringify(e.data[t])),_("Returned: "+JSON.stringify(e.data[t])),n&&n(e.data[t])}).catch(function(e){M.b&&console.error("GraphQL operation failed..."),M.b&&console.error(e),r&&r(e)}),G.a.ifTesting)return"query"===t.substring(0,5)?n&&n({nextToken:null,items:[]}):n&&n({}),e}}]),e}();Y.batchLimit=100;var J=Y,z=n(66),q=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"putImage",value:function(t,n,r,a){return e.put(t,n,"image/*",function(e){return console.log(e.loaded+"/"+e.total)},r,a)}},{key:"putVideo",value:function(t,n,r,a,o){return e.multipartPut(t,n,"video/*",function(e){return o(parseInt(100*e.loaded/e.total))},r,a)}},{key:"putVideoOrImage",value:function(t,n,r,a){return e.put(t,n,"video/*;image/*",function(e){return console.log(e.loaded+"/"+e.total)},r,a)}},{key:"ifExists",value:function(t,n,r){G.a.ifTesting?n&&n(!0):new z.S3({params:{Bucket:e.bucketName}}).headObject({Bucket:e.bucketName,Key:t},function(e){e?"NotFound"===e.code?n&&n(!1):(M.b&&console.error("If Exists operation failed... Error: "+e),r&&r(e)):n&&n(!0)});return t}},{key:"get",value:function(e,t,n){return G.a.ifTesting&&t&&t(null),G.a.ifTesting||w.Storage.get(e).then(function(e){M.h&&console.log("Storage successfully retrieved file! URL = "+e),t&&t(e)}).catch(function(t){M.b&&console.error("Storage failed to retrieve file with path = "+e+"... Error: "+t),n&&n(t)}),e}},{key:"put",value:function(e,t,n,r,a,o){return G.a.ifTesting&&a&&a(null),G.a.ifTesting||w.Storage.put(e,t,{contentType:n,progressCallback:r}).then(function(e){M.h&&console.log("Storage successfully put file in! Result: "+JSON.stringify(e)),a&&a(e)}).catch(function(e){M.b&&console.error("Storage failed put function... Error: "+e),o&&o(e)}),e}},{key:"multipartPut",value:function(t,n,r,a,o,i){if(G.a.ifTesting)o&&o(null);else{var c=new z.S3({params:{Bucket:e.bucketName}}),l={Key:"public/"+t,ContentType:r,Body:n},u={partSize:e.multipartSize,queueSize:e.multipartQueueSize};c.upload(l,u).on("httpUploadProgress",a).send(function(e,t){e?(M.b&&console.error("S3Storage failed multipart put!"),M.b&&console.error(e),i&&i(M.b)):(o&&o(t),M.h&&console.log("Video uploaded successfully."))})}return t}},{key:"delete",value:function(e,t,n){return G.a.ifTesting&&t&&t(null),G.a.ifTesting||w.Storage.remove(e).then(function(e){M.h&&console.log("Storage successfully removed file! Result: "+JSON.stringify(e)),t&&t(e)}).catch(function(e){M.b&&console.error("Storage failed remove function... Error: "+e),n&&n(e)}),e}}]),e}();q.bucketName="production"===Object(M.c)()?"vastusofficial":"vastusdevelopmentofficial",q.multipartSize=10485760,q.multipartQueueSize=8;var W=q,V=n(144),X=n.n(V),Z=n(216),K=n.n(Z),$=n(59),ee=n(77),te=function(e){var t="";e.sort(function(e,t){return e>t?1:e<t?-1:0});for(var n=0;n<e.length;n++)0!==n&&(t+="_"),t+=e[n];return t},ne=function(e){return e.split("_")},re=function(e,t){return t.from!==e&&(!t.lastSeenFor||!t.lastSeenFor.includes(e))},ae=n(216),oe=n(144);function ie(e,t,n,r){return function(a){a(Object(k.d)()),a(ce(e,t,!0,n,r))}}function ce(e,t,n,r,a){return function(o,i){var c=i().message.boardIfFirsts[e];if(!1!==c&&(c=!0),n&&!0!==i().message.boardIfSubscribed[e]){var l=!1,u=ne(e);if(1===u.length){var s=u[0],d=i().user;l=!(d.ownedEvents&&d.ownedEvents.includes(s)||d.ownedChallenges&&d.ownedChallenges.includes(s)||d.ownedGroups&&d.ownedGroups.includes(s))}o(Object(j.a)(Object(ee.getBoardChannel)(e),function(t){l&&o(se(e,t.data))},function(t){me(e)}))}var m=i().message.boardNextTokens[e];c||m?J.queryMessages(J.constructMessageQuery(e,["from","name","profileImagePath","message","type","board","id","time_created","lastSeenFor"],null,t,m),function(t){if(t)t.items||(t.items=[]),le(t.items,"message","messageURL",ae,function(e){return e.type},function(a){le(a,"profileImagePath","profilePicture",oe,function(e){return e.profileImagePath},function(a){o(function(e,t,n,r){return{type:ee.ADD_QUERY,payload:{board:e,nextToken:n,messages:t,ifSubscribed:r}}}(e,a,t.nextToken,n)),r&&r(a),o(Object(k.e)())})});else{var i=new Error("query messages came back with null?");M.b&&console.error(JSON.stringify(i)),o(Object(k.c)(i)),o(Object(k.e)()),a&&a(i)}},function(e){M.b&&console.error("ERROR INSIDE GET NEXT MESSAGES"),M.b&&console.error(JSON.stringify(e)),o(Object(k.c)(e)),o(Object(k.e)()),a&&a(e)}):r&&r(null)}}function le(e,t,n,r,a,o){for(var i=e.length,c=0,l=function(){++c>=i&&o(e)},u=0;u<i;u++){ue(e[u],t,n,r,a,l)}0===i&&o(e)}function ue(e,t,n,r,a,o){a(e)?W.get(e[t],function(t){e[n]=t,o(e)},function(t){M.b&&console.error("FAILED TO RECEIVE URL FOR MEDIA IN MESSAGE! ERROR = "+JSON.stringify(t)),e[n]=r,o(e)}):(e[n]=r,o(e))}function se(e,t,n,r){return function(r){r(Object(k.d)()),ue(t,"message","messageURL",ae,function(e){return e.type},function(t){ue(t,"profileImagePath","profilePicture",oe,function(e){return e.profileImagePath},function(t){r(de(e,t)),M.h&&console.log("Successfully received message from Ably! Message = "+JSON.stringify(t)),n&&n(t),r(Object(k.e)())})})}}function de(e,t){return{type:ee.ADD_MESSAGE,payload:{board:e,message:t}}}function me(e){return{type:ee.CLEAR_BOARD,payload:{board:e}}}var fe=n(35);function ge(e,t){function n(e,t){t[e]="profileImage"===e||"profileImages"===e?X.a:[K.a]}var r=0,a=0,o=!1,i=function(){++a>=r&&o&&t(e)},c=function(t,r){t?W.get(t,function(t){e[r]=t,i()},function(t){n(r,e),i()}):n(r,e)},l=function(t,n){if(t&&t.length){e[n]=[];for(var r=function(r){var a=t[r];W.get(a,function(t){e[n][r]=t,i()},function(e){i()})},a=0;a<t.length;a++)r(a)}else e[n]=[]};for(var u in e)if(e.hasOwnProperty(u)){var s=u.length;"Path"===u.substr(s-4,4)?e[u]&&r++:"Paths"===u.substr(s-5,5)&&e[u]&&e[u].length>0&&(r+=e[u].length,e[u].sort())}for(var d in e)if(e.hasOwnProperty(d)){var m=d.length;"Path"===d.substr(m-4,4)?c(e[d],d.substr(0,m-4)):"Paths"===d.substr(m-5,5)&&l(e[d],d.substr(0,m-5)+"s")}r<=a?t(e):o=!0}function be(e,t,n,r,a){return function(o,i){o(Object(k.d)());var c=He(t);if(i().cache[c].hasOwnProperty(e)){var l=i().cache[c][e];if(!l)return void(r&&r(null));var u=Object.keys(l);n=n.filter(function(e){return!u.includes(e)})}Ae(e,t,n,r,a,o,i)}}function Ee(e,t,n,r,a){return function(o,i){o(Object(k.d)()),Ae(e,t,n,r,a,o,i)}}function pe(e,t,n,r,a){return function(o,i){o(Object(k.d)());var c=i().cache[He(t)][e];c&&!1===c.__stale__?o(be(e,t,n,r,a)):(o(function(e,t){return function(n,r){n(Object(j.a)(Object($.getObjectChannelName)(e),function(a){var o=a.data,i=o.CREATE,c=o.SET,l=o.ADD,u=o.REMOVE,s=o.DELETE;s?n(we(t,e)):(i&&i.id&&i.item_type&&("Message"===i.item_type?!0!==r().message.boardIfSubscribed[i.board]&&n(se(i.board,i)):n(je(i.id,i.item_type,i))),c&&(c.id=e,n(je(e,t,c))),l&&n(Le(t,e,l)),u&&n(ke(t,e,u)))},function(n){n(je(e,t,{__stale__:!0}))}))}}(e,t)),o(je(e,t,{__stale__:!1})),o(Ee(e,t,n,r,a)))}}function Ae(e,t,n,r,a,o,i){n.length>0?(n.includes("id")||(n=[].concat(Object(v.a)(n),["id"])),n.includes("item_type")||(n=[].concat(Object(v.a)(n),["item_type"])),r?M.h&&console.log("S H = "+r.toString()):M.h&&console.log("No data handler..."),a?M.h&&console.log("F H = "+a.toString()):M.h&&console.log("No failure handler..."),J.getItem(t,e,n,function(n){n?ge(n,function(n){o(je(e,t,n)),i().user.id===e&&o(ze()),o(Object(k.e)()),r&&r(Me(t,i)[e])}):(o(je(e,t,null)),M.b&&console.error("Couldn't find ID = "+e+" for item type = "+t),o(Object(k.e)()),r&&(M.h&&console.log("D H "+r.toString()),r(null)))},function(e){M.b&&console.error("Error in retrieval"),M.b&&console.error(e),o(Object(k.c)(e)),o(Object(k.e)()),a&&(M.h&&console.log("F H "+a.toString()),a(e))})):(o(je(e,t,null)),o(Object(k.e)()),r&&r(Me(t,i)[e]))}function Oe(e,t,n,r,a,o,i,c,l){if(n.length>0){n.includes("id")||(n=[].concat(Object(v.a)(n),["id"])),n.includes("item_type")||(n=[].concat(Object(v.a)(n),["item_type"]));var u=[],s=0,d=e.slice(r,Math.min(r+a,e.length)),m=d.length,f=Object(v.a)(d),g=[];f.length>J.batchLimit&&(g=f.slice(J.batchLimit),f=f.slice(0,J.batchLimit));var b=function(e){c(je(e.id,t,e)),u.push(l().cache[He(t)][e.id]),++s>=m&&(c(Object(k.e)()),o&&o(u))},E=function(e){M.b&&console.error("Error in retrieval"),c(Object(k.c)(e)),c(Object(k.e)()),i&&i(e)};J.getItems(t,f,n,function(e){return function e(r,a){if(r.hasOwnProperty("unretrievedItems")&&r.unretrievedItems&&r.unretrievedItems.length>0)for(var i=0;i<r.unretrievedItems.length;i++)s>=--m&&(c(Object(k.e)()),o&&o(u));if(a&&a.length>0){var l=a;l.length>J.batchLimit&&(l=a.slice(0,J.batchLimit),a=a.slice(J.batchLimit)),J.getItems(t,l,n,function(t){return e(t,a)},E)}if(r.hasOwnProperty("items")&&r.items&&r.items.length)for(var d=0;d<r.items.length;d++)r.items[d]?ge(r.items[d],b):s>=--m&&(c(Object(k.e)()),o&&o(u))}(e,g)},E)}else{for(var p=[],A=0;A<e.length;A++){var O=e[A];c(je(O,t,{})),p.push(l().cache[He(t)][O])}c(Object(k.e)()),o&&o(p)}}function Te(e,t,n,r,a,o,i){return function(c,l){c(Object(k.d)()),t.includes("id")||t.push("id"),t.includes("item_type")||t.push("item_type");var u=J.constructItemQuery(e,t,n,r,a),s=J.getNextTokenString(a),d=JSON.stringify(J.getNormalizedQuery(u)),m=function(e,t){var n=t().cache;return Object(B.c)(e,n.clientQueries,n.trainerQueries,n.gymQueries,n.workoutQueries,n.reviewQueries,n.eventQueries,n.challengeQueries,n.inviteQueries,n.postQueries,n.submissionQueries,n.groupQueries,n.commentQueries,n.sponsorQueries,null,n.streakQueries,n.dealQueries,n.productQueries,n.adminQueries,"Retrieve query cache not implemented")}(e,l)[d];m&&(m=m[s]),m?(c(Fe(e,d,s,m)),o(J.getQueryResultFromCompressed(m,Me(e,l)))):he(e,u,a,o,i,c)}}function he(e,t,n,r,a,o){J.queryItems(e,t,function(a){if(a&&a.items&&a.items.length)for(var i=function(t){var n=a.items[t],r=n.id;ge(n,function(t){return o(je(r,e,t))})},c=0;c<a.items.length;c++)i(c);o(Fe(e,J.getNormalizedQueryString(J.getNormalizedQuery(t)),J.getNextTokenString(n),J.getCompressedFromQueryResult(a))),o(Object(k.e)()),r&&r(a)},function(n){M.b&&console.error("Error in QUERY retrieval. ItemType = "+e+", query string = "+JSON.stringify(t)),M.b&&console.error(JSON.stringify(n)),o(Object(k.c)(n)),o(Object(k.e)()),a&&a(n)})}function Ie(e,t,n){return function(r,a){r(je(e,Object(B.b)(e),Object(g.a)({},t,n))),e===a().user.id&&r(ze())}}function ve(e,t,n,r){return function(a,o){a(function(e,t,n,r,a){return{type:$.SET_ITEM_ATTRIBUTE_INDEX,payload:{id:t,itemType:e,attributeName:n,index:r,attributeValue:a}}}(Object(B.b)(e),e,t,n,r)),e===o().user.id&&a(ze())}}function Ce(e,t,n){return function(r,a){n.length?(r(Le(Object(B.b)(e),e,Object(g.a)({},t,[n]))),e===a().user.id&&r(ze())):M.b&&console.error("Attribute value must be an array to add to item attribute")}}function ye(e,t,n){return function(r,a){n.length?(r(ke(Object(B.b)(e),e,Object(g.a)({},t,[n]))),e===a().user.id&&r(ze())):M.b&&console.error("Attribute value must be an array to remove from item attribute")}}function De(e,t,n){return function(r,a){r(function(e,t,n,r){return{type:$.REMOVE_ITEM_ATTRIBUTE_INDEX,payload:{id:t,itemType:e,attributeName:n,index:r}}}(Object(B.b)(e),e,t,n)),e===a().user.id&&r(ze())}}function Se(e,t,n,r,a){return be(e,t,n,r,a)}function Pe(e,t,n,r,a){return Ee(e,t,n,r,a)}function Ne(e,t,n,r,a){return pe(e,t,n,r,a)}function Ue(e,t,n,r,a,o,i){return function(e,t,n,r,a,o,i){return function(c,l){c(Object(k.d)());for(var u=[],s=r;s<Math.min(e.length,r+a);s++){var d=e[s],m=Me(t,l)[d];if(!m){u=n;break}var f=Object(v.a)(n);if(Object(fe.h)(f,Object.keys(m)),Object(fe.b)(u,f),Object(fe.f)(n,u)){u=n;break}}Oe(e,t,u,r,a,o,i,c,l)}}(e,t,n,r,a,o,i)}function Re(e,t,n,r,a,o,i){return Te(e,t,n,r,a,o,i)}function Le(e,t,n){return{type:$.ADD_TO_ITEM_ATTRIBUTES,payload:{id:t,itemType:e,attributes:n}}}function ke(e,t,n){return{type:$.REMOVE_FROM_ITEM_ATTRIBUTES,payload:{id:t,itemType:e,attributes:n}}}function je(e,t,n){return{type:$.PUT_ITEM,payload:{id:e,itemType:t,item:n}}}function Fe(e,t,n,r){return{type:$.PUT_ITEM_QUERY,payload:{itemType:e,normalizedQueryString:t,nextToken:n,queryResult:r}}}function we(e,t){return{type:$.REMOVE_ITEM,payload:{id:t,itemType:e}}}var Qe=function(e){return{type:$.CLEAR_ITEM_QUERY_CACHE,payload:{itemType:e}}};function Me(e,t){var n=t().cache;return Object(B.c)(e,n.clients,n.trainers,n.gyms,n.workouts,n.reviews,n.events,n.challenges,n.invites,n.posts,n.submissions,n.groups,n.comments,n.sponsors,null,n.streaks,n.deals,n.products,n.admins,"Retrieve cache not implemented")}function He(e){return Object(B.c)(e,"clients","trainers","gyms","workouts","reviews","events","challenges","invites","posts","submissions","groups","comments","sponsors",null,"streaks","deals","products","admins","Retrieve cache not implemented")}var xe=n(97);function Be(e,t,n){return function(r,a){var o=a().user.id;o&&r(Se(o,M.a,e,t,n))}}function Ge(e,t,n){return function(r,a){var o=a().user.id;o&&r(Pe(o,M.a,e,t,n))}}function _e(e,t,n){return function(r,a){var o=a().user.id;o?r(Ne(o,M.a,e,t,n)):t({})}}function Ye(e,t){return function(n,r){var a=r().user.id;a&&n(Ce(a,e,t))}}function Je(e,t){return function(n,r){var a=r().user.id;a&&n(ye(a,e,t))}}function ze(){return function(e,t){var n=t().user.id;n&&e(qe(Me(M.a,t)[n]))}}function qe(e){return{type:xe.SET_USER,payload:e}}function We(e){return{type:xe.FORCE_SET_USER,payload:e}}function Ve(e,t,n,r){return Se(e,"Client",t,n,r)}function Xe(e,t,n,r){return Se(e,"Trainer",t,n,r)}function Ze(e,t,n,r){return Se(e,"Event",t,n,r)}function Ke(e,t,n,r){return Se(e,"Challenge",t,n,r)}function $e(e,t,n,r){return Se(e,"Invite",t,n,r)}function et(e,t,n,r){return Se(e,"Post",t,n,r)}function tt(e,t,n,r){return Se(e,"Group",t,n,r)}function nt(e,t,n,r){return Se(e,"Sponsor",t,n,r)}function rt(e,t,n,r){return Se(e,"Deal",t,n,r)}function at(e,t,n,r){return Pe(e,"Event",t,n,r)}function ot(e,t,n,r){return Pe(e,"Post",t,n,r)}function it(e,t,n,r,a,o){return Ue(e,"Challenge",t,n,r,a,o)}var ct=function(){Object(M.c)()&&Object(M.c)(),Q.a.configure({aws_appsync_graphqlEndpoint:"https://b42qayvq7jdhzbhadpbefeoola.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AWS_IAM"}),Q.a.configure({Auth:{identityPoolId:"us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9",region:"us-east-1",userPoolId:"us-east-1_MDiyfaGb8",userPoolWebClientId:"5rmff3gs48ak7efl0ngrnad4it"},Storage:{bucket:"vastusbucket"}})},lt=new((Object(M.c)()&&Object(M.c)(),z.config.update({region:"us-east-1"}),z.config.credentials=new z.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9"}),z).Lambda)({region:"us-east-1",apiVersion:"2015-03-31"}),ut=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"create",value:function(t,n,r,a,o){return e.invokeDatabaseLambda(Object(g.a)({fromID:t||"unauthenticated",action:"CREATE",itemType:n,environmentType:Object(M.c)()},e.getCreateRequestName(n),r),a,o)}},{key:"updateSetAttribute",value:function(t,n,r,a,o,i,c){return e.invokeDatabaseLambda({fromID:t||"unauthenticated",action:"UPDATESET",itemType:r,identifiers:[n],attributeName:a,attributeValues:[o],environmentType:Object(M.c)()},i,c)}},{key:"updateAddToAttribute",value:function(t,n,r,a,o,i,c){return e.invokeDatabaseLambda({fromID:t||"unauthenticated",action:"UPDATEADD",itemType:r,identifiers:[n],attributeName:a,attributeValues:[o],environmentType:Object(M.c)()},i,c)}},{key:"updateRemoveFromAttribute",value:function(t,n,r,a,o,i,c){return e.invokeDatabaseLambda({fromID:t||"unauthenticated",action:"UPDATEREMOVE",itemType:r,identifiers:[n],attributeName:a,attributeValues:[o],environmentType:Object(M.c)()},i,c)}},{key:"process",value:function(t,n,r,a,o,i,c){return e.invokeDatabaseLambda({fromID:t||"unauthenticated",action:"PROCESS",itemType:r,identifiers:[n],secondaryIdentifier:a,environmentType:Object(M.c)()},i,c)}},{key:"delete",value:function(t,n,r,a,o){return e.invokeDatabaseLambda({fromID:t||"unauthenticated",action:"DELETE",itemType:r,identifiers:[n],environmentType:Object(M.c)()},a,o)}},{key:"ping",value:function(t,n){return e.invokeDatabaseLambda({action:"PING"},t,n)}},{key:"invokeDatabaseLambda",value:function(t,n,r){return e.invokeLambda(M.g,t,n,r)}},{key:"invokeLambda",value:function(e,t,n,r){M.h&&console.log("Sending lambda payload: "+JSON.stringify(t));var a={FunctionName:e,Payload:JSON.stringify(t)};if(G.a.ifTesting&&n&&n(null),G.a.ifTesting||lt.invoke(a,function(e,t){if(e)M.b&&console.error(e),M.b&&console.error("Lambda failure: "+JSON.stringify(e)),M.f&&console.log("Lambda failure: "+JSON.stringify(e)),r&&r(e);else if(t.Payload){var a=JSON.parse(t.Payload);a.errorMessage?(M.b&&console.error("Error from Lambda!: "+JSON.stringify(a)),M.b&&console.error(a.errorMessage),r&&r(a.errorMessage)):(M.h&&console.log("Successfully invoked lambda function! Received: "+JSON.stringify(a)),_("Successful Lambda, received "+JSON.stringify(a)),n&&n(a))}else M.b&&console.error("Weird error: payload returned with nothing..."),r&&r("Payload returned with null")}),G.a.ifTesting)return t}}]),e}();ut.getCreateRequestName=function(e){return"create"+e+"Request"};var st=ut,dt=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createFriendRequest",value:function(t,n,r,a,o,i){return e.create(t,n,r,"friendRequest",n,null,function(e){i?i.addToItemAttribute&&i.addToUserAttribute?(i.addToItemAttribute(r,"friendRequests",n),i.addToItemAttribute(r,"receivedInvites",e.data),i.addToUserAttribute("sentInvites",e.data)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"createFriendRequestOptional",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"friendRequest",n,a,function(e){c?c.addToItemAttribute&&c.addToUserAttribute?(c.addToItemAttribute(r,"friendRequests",n),c.addToItemAttribute(r,"receivedInvites",e.data),c.addToUserAttribute("sentInvites",e.data)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createEventInvite",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"eventInvite",a,null,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createEventInviteOptional",value:function(t,n,r,a,o,i,c,l){return e.create(t,n,r,"eventInvite",a,o,function(e){l?l.addToUserAttribute&&l.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),i&&i(e)},c)}},{key:"createChallengeInvite",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"challengeInvite",a,null,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createChallengeInviteOptional",value:function(t,n,r,a,o,i,c,l){return e.create(t,n,r,"challengeInvite",a,o,function(e){l?l.addToUserAttribute&&l.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),i&&i(e)},c)}},{key:"createGroupInvite",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"challengeInvite",a,null,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createGroupInviteOptional",value:function(t,n,r,a,o,i,c,l){return e.create(t,n,r,"groupInvite",a,o,function(e){l?l.addToUserAttribute&&l.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),i&&i(e)},c)}},{key:"createEventRequest",value:function(t,n,r,a,o,i){return e.create(t,n,r,"eventRequest",n,null,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"createEventRequestOptional",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"eventRequest",n,a,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createChallengeRequest",value:function(t,n,r,a,o,i){return e.create(t,n,r,"challengeRequest",n,null,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?(i.addToUserAttribute("sentInvites",e.data),i.addToItemAttribute(r,"receivedInvites",e.data),i.addToItemAttribute(r,"memberRequests",n),M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!")):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"createChallengeRequestOptional",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"challengeRequest",n,a,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createGroupRequest",value:function(t,n,r,a,o,i){return e.create(t,n,r,"groupRequest",n,null,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"createGroupRequestOptional",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,"groupRequest",n,a,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"create",value:function(e,t,n,r,a,o,i,c){return st.create(e,"Invite",{from:t,to:n,inviteType:r,about:a,description:o},i,c)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Invite",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Invite",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Invite",n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,t,"Invite",function(e){a?a.removeFromUserAttribute&&a.removeItem?(a.removeFromUserAttribute("receivedInvites",t),a.removeItem("Invite",t)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),n&&n(e)},r)}}]),e}();function mt(e){return new Date(String(e))}function ft(e){var t=-e.getTimezoneOffset(),n=t>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+n+r(t/60)+":"+r(t%60)}function gt(e){var t=String(e),n=new Date(t),r=n.getHours()>12?n.getHours()-12:n.getHours(),a=1===n.getMinutes().toString().length?"0"+n.getMinutes():n.getMinutes(),o=1===r.toString().length?"0"+r:r,i=n.getHours()>=12?"PM":"AM";return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getDay()]+", "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]+" "+n.getDate()+", "+n.getFullYear()+" "+o+":"+a+i}function bt(e){var t=new Date,n=e.getTime()-t.getTime();return Math.round(n/864e5)}function Et(e){var t=new Date;return e.getTime()-t.getTime()}var pt=function(){var e=new Date;return e.setMinutes(e.getMinutes()+(5-e.getMinutes()%5)),ft(e)},At=function(){return pt().substr(11,5)},Ot=function(e,t,n,o,i,c,l,u,s){for(var d=[],m=function(u){d.push(a.a.createElement(r.Fragment,{key:u+1},a.a.createElement(b.a,{fluid:!0,raised:!0},a.a.createElement(b.a.Content,null,a.a.createElement(kr,{challenge:n[u]}),a.a.createElement(p.a,{disabled:i,loading:o,primary:!0,fluid:!0,onClick:function(){return function(e,t,n,r,a,o,i){a(!0),dt.createChallengeInvite(e,e,t,n,function(e){r(),a(!1),o(!0)},function(e){M.b&&console.error(e),a(!1)})}(e,t,n[u].id,s,c,l)}},"Invite to Challenge")))))},f=0;f<n.length;f++)m(f);return d},Tt=Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{fetchUserAttributes:function(t,n,r){e(Be(t,n,r))},fetchChallenges:function(t,n,r,a,o,i){e(it(t,n,r,a,o,i))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(!1),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)([]),p=Object(s.a)(E,2),A=p[0],O=p[1];return Object(r.useEffect)(function(){i(!0),e.fetchUserAttributes(["challenges"],function(t){t.challenges&&t.challenges.length>0?e.fetchChallenges(t.challenges,Ur.fetchList,0,t.challenges.length,function(e){for(var t=function(t){var n=e[t];bt(mt(n.endTime))>=0&&O(function(e){return[].concat(Object(v.a)(e),[n])})},n=0;n<e.length;n++)t(n);i(!1)},function(e){M.b&&console.error(e),d(e),i(!1)}):i(!1)},function(e){M.b&&console.error(e),d(e),i(!1)})},[e.challengeID]),o?a.a.createElement(I.a,{dimmer:"blurring",open:e.open,onClose:function(){return e.onClose()}},a.a.createElement(U.a,null,"Loading...")):A&&A.length>0?a.a.createElement(I.a,{centered:!0,dimmer:"blurring",size:"large",open:e.open,onClose:function(){return e.onClose()},closeIcon:!0},a.a.createElement(I.a.Header,{className:"u-bg--bg"},"Select Challenge"),a.a.createElement(I.a.Content,{className:"u-bg--bg"},Ot(e.user.id,e.friendID,A,o,g,i,b,0,e.onClose)),function(e){if(e)return a.a.createElement(U.a,{color:"red"},a.a.createElement("h1",null,"Error!"),a.a.createElement("p",null,e.substr(102,50)))}(u)):a.a.createElement(I.a,{dimmer:"blurring",open:e.open,onClose:function(){return e.onClose()}},a.a.createElement(U.a,null,"No current challenges..."))}),ht=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createUser",value:function(t,n,r,a,o,i,c){switch(n){case"Client":case"Trainer":return e.create(t,n,r,a,o,null,i,c);default:throw Error("Create User not implemented for user type = "+n)}}},{key:"createFederatedUser",value:function(t,n,r,a,o,i,c,l){switch(n){case"Client":case"Trainer":return e.create(t,n,r,a,o,i,c,l);default:throw Error("Create User not implemented for user type = "+n)}}},{key:"addProfileImage",value:function(e,t,n,r,a,o,i){var c=this;if(W.putImage(r,n,function(){c.updateAdd(e,t,"profileImagePaths",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},function(e){W.delete(r),o&&o(e)})}),G.a.ifTesting)return this.updateAdd(e,t,"profileImagePaths",r)}},{key:"removeProfileImage",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"profileImagePaths",n,function(e){W.delete(n,function(){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)},a)}},{key:"addFriend",value:function(e,t,n,r,a,o,i){return this.updateAdd(e,t,"friends",n,function(e){i?i.addToUserAttribute&&i.addToItemAttribute&&i.removeFromUserAttribute&&i.removeItem?(i.addToUserAttribute("friends",n),i.addToItemAttribute(n,"friends",t),i.removeFromUserAttribute("receivedInvites",r),i.removeItem("Invite",r)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeFriend",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"friends",n,function(e){o?o.removeFromUserAttribute&&o.removeFromItemAttribute?(o.removeFromUserAttribute("friends",n),o.removeFromItemAttribute(n,"friends",t)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addChallenge",value:function(e,t,n,r,a,o,i){return this.updateAdd(e,t,"challenges",n,function(e){i?i.addToUserAttribute&&i.addToItemAttribute&&i.removeFromUserAttribute&&i.removeItem?(i.addToUserAttribute("challenges",n),i.addToItemAttribute(n,"members",t),r&&(i.removeFromUserAttribute("receivedInvites",r),i.removeItem("Invite",r))):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeChallenge",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"challenges",n,function(e){o?o.removeFromUserAttribute&&o.removeFromItemAttribute?(o.removeFromUserAttribute("challenges",n),o.removeFromItemAttribute(n,"members",t)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addEvent",value:function(e,t,n,r,a,o,i){return this.updateAdd(e,t,"scheduledEvents",n,function(e){i?i.addToUserAttribute&&i.addToItemAttribute&&i.removeFromUserAttribute&&i.removeItem?(i.addToUserAttribute("scheduledEvents",n),i.addToItemAttribute(n,"members",t),r&&(i.removeFromUserAttribute("receivedInvites",r),i.removeItem("Invite",r))):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeEvent",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"scheduledEvents",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addGroup",value:function(e,t,n,r,a,o,i){return this.updateAdd(e,t,"groups",n,function(e){i?i.addToUserAttribute&&i.addToItemAttribute&&i.removeFromUserAttribute&&i.removeItem?(i.addToUserAttribute("groups",n),i.addToItemAttribute(n,"members",t),r&&(i.removeFromUserAttribute("receivedInvites",r),i.removeItem("Invite",r))):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeGroup",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"groups",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addMessageBoard",value:function(e,t,n,r,a,o){return this.updateAdd(e,t,"messageBoards",n,function(e){o?o.addToUserAttribute?o.addToUserAttribute("messageBoards",n):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"removeMessageBoard",value:function(e,t,n,r,a,o){return this.updateRemove(e,t,"messageBoards",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateName",value:function(e,t,n,r,a,o){return this.updateSet(e,t,"name",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateGender",value:function(e,t,n,r,a,o){return this.updateSet(e,t,"gender",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateBirthday",value:function(e,t,n,r,a,o){return this.updateSet(e,t,"birthday",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateLocation",value:function(e,t,n,r,a,o){return this.updateSet(e,t,"location",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateBio",value:function(e,t,n,r,a,o){return this.updateSet(e,t,"bio",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateProfileImage",value:function(e,t,n,r,a,o,i){var c=this;return n&&r?(W.putImage(r,n,function(){c.updateSet(e,t,"profileImagePath",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},function(e){W.delete(r),o&&o(e)})},o),G.a.ifTesting?this.updateSet(e,t,"profileImagePath",r):void 0):this.updateSet(e,t,"profileImagePath",null,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"buyDeal",value:function(e,t,n,r,a,o){return this.updateAdd(e,t,"productsOwned",n,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"deleteUser",value:function(t,n,r,a,o){switch(n){case"Client":case"Trainer":return e.delete(t,n,r,a,o);default:throw Error("Create User not implemented for user type = "+n)}}},{key:"create",value:function(e,t,n,r,a,o,i,c){return st.create(e,t,{name:n,username:a,email:r,federatedID:o},i,c)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,Object(B.b)(t),n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,Object(B.b)(t),n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,Object(B.b)(t),n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,n,t,r,a)}}]),e}(),It=n(1075),vt=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createTextMessage",value:function(t,n,r,a,o,i,c,l){return e.create(t,o,n,r,a,null,i,null,c,l)}},{key:"createPictureMessage",value:function(t,n,r,a,o,i,c,l,u){return e.create(t,o,n,r,a,"picture",c,i,l,u)}},{key:"createVideoMessage",value:function(t,n,r,a,o,i,c,l,u){return e.create(t,o,n,r,a,"video",c,i,l,u)}},{key:"addLastSeen",value:function(t,n,r,a,o,i){return e.updateAdd(t,n,r,"lastSeenFor",a,o,i)}},{key:"create",value:function(e,t,n,r,a,o,i,c,l,u){return st.create(e,"Message",{from:n,name:r,profileImagePath:a,board:t,type:o,message:i},function(e){if(e&&o){var t=e.data+"/"+i;"picture"===o?W.putImage(t,c,function(){l(e)},u):"video"===o&&W.putVideo(t,c,function(){l(e)},u)}else l&&l(e)},u)}},{key:"updateAdd",value:function(e,t,n,r,a,o,i){return st.invokeDatabaseLambda({environmentType:Object(M.c)(),fromID:e,action:"UPDATEADD",itemType:"Message",identifiers:[n],secondaryIdentifier:t,attributeName:r,attributeValues:[a]},o,i)}},{key:"updateRemove",value:function(e,t,n,r,a,o,i){return st.invokeDatabaseLambda({environmentType:Object(M.c)(),fromID:e,action:"UPDATEREMOVE",itemType:"Message",identifiers:[n],secondaryIdentifier:t,attributeName:r,attributeValues:[a]},o,i)}},{key:"updateSet",value:function(e,t,n,r,a,o,i){return st.invokeDatabaseLambda({environmentType:Object(M.c)(),fromID:e,action:"UPDATESET",itemType:"Message",identifiers:[n],secondaryIdentifier:t,attributeName:r,attributeValues:[a]},o,i)}},{key:"delete",value:function(e,t,n,r,a){return st.invokeDatabaseLambda({environmentType:Object(M.c)(),fromID:e,action:"DELETE",itemType:"Message",identifiers:[n],secondaryIdentifier:t},r,a)}}]),e}(),Ct=void 0,yt=function(e,t,n,r,a,o){var i=e.target.files[0],c=i.type;["image/gif","image/jpeg","image/png"].includes(c)?function(e,t,n,r,a,o){o(!0),vt.createPictureMessage(n,n,r,a,t,e,"picture",function(){o(!1),M.h&&console.log("Successfully created picture message!")},function(e){o(!1),M.b&&console.error("FAILED ADDING PICTURE. ERROR = "+JSON.stringify(e))})}(i,t,n,r,a,o):["video/mp4","video/mv4","video/avi","video/mpg"].includes(c)?function(e,t,n,r,a,o){Ct.setState({sendLoading:!0}),vt.createVideoMessage(n,n,r,a,t,e,"video",function(){o(!1),M.h&&console.log("Successfully created video message!")},function(e){o(!1),M.b&&console.error("FAILED ADDING VIDEO. ERROR = "+JSON.stringify(e))})}(i,t,n,r,a,o):console.log("PROBLEMATIC FILE TYPE = "+c)},Dt=Object(u.b)(function(e){return{user:e.user,message:e.message}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(0),l=Object(s.a)(c,2),u=l[0],d=l[1];return a.a.createElement(r.Fragment,null,a.a.createElement("form",{onSubmit:function(t){return function(e,t,n,r,a,o,i){e.preventDefault();var c=e.target.elements.message.value.trim();i(50),c&&(o(!0),vt.createTextMessage(n,n,r,a,t,c,function(){M.h&&console.log("Successfully sent message!"),i(100),o(!1)},function(e){i(0),M.b&&console.error("Failed to send message! Error = "+JSON.stringify(e)),o(!1)}),e.target.elements.message.value="")}(t,e.board,e.user.id,e.user.username,e.user.profileImagePath,i,d)},className:"u-margin-top--2"},function(e,t){if(e)return a.a.createElement(It.a,{percent:t,active:!0,color:"purple"})}(o,u),a.a.createElement(E.a,{type:"text",action:!0,fluid:!0,className:"textarea",name:"message",placeholder:"Write Message...",style:{border:"1px solid rebeccapurple",background:"white",color:"purple",borderRadius:"50px, 50px, 50px, 50px"},color:"white"},a.a.createElement("input",{style:{background:"white",border:"none"}}),a.a.createElement(p.a,{as:"label",for:"proPicUpload"},a.a.createElement(f.a,{name:"camera",size:"large",style:{marginLeft:"8px"}}),a.a.createElement("input",{type:"file",accept:"image/*;video/*;capture=camcorder",id:"proPicUpload",hidden:"true",onChange:function(t){return yt(t,e.board,e.user.id,e.user.name,e.user.profileImagePath,i)}})),a.a.createElement(p.a,{loading:o,primary:!0},"Send"))))}),St=n(382),Pt=n(55),Nt=function(e){if(!e.message)return null;var t=e.message.from,n=e.message.name,r=e.message.message,o=e.message.messageURL,i=e.message.profilePicture,c=e.message.type,u=t===e.userID;return c?"picture"===c?u?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(p.a,{labelPosition:"right",floated:"right"},a.a.createElement(St.a,{className:"ui right fluid",pointing:"right",color:"purple"},a.a.createElement("div",{className:"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4",style:{backgroundImage:"url(".concat(o,")")}})))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null)):a.a.createElement(h.a,{class:"ui computer vertically reversed equal width grid"},a.a.createElement(h.a.Column,{width:2},a.a.createElement("div",{align:"center",className:"ui u-avatar tiny",style:{backgroundImage:"url(".concat(i,")"),width:"50px",height:"50px"}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,null,a.a.createElement("strong",null,n)),a.a.createElement(h.a.Row,null,a.a.createElement(St.a,{className:"ui left fluid",pointing:"left"},a.a.createElement("div",{className:"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4",style:{backgroundImage:"url(".concat(o,")")}}))))):"video"===c?u?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(p.a,{labelPosition:"right",floated:"right"},a.a.createElement(St.a,{className:"ui right fluid",pointing:"right",color:"purple"},a.a.createElement(Pt.Player,null,a.a.createElement("source",{src:o,type:"video/mp4"}))))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null)):a.a.createElement(h.a,{class:"ui computer vertically reversed equal width grid"},a.a.createElement(h.a.Column,{width:6},a.a.createElement("div",{align:"center",className:"ui u-avatar tiny",style:{backgroundImage:"url(".concat(i,")"),width:"50px",height:"50px"}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,null,a.a.createElement("strong",null,n)),a.a.createElement(h.a.Row,null,a.a.createElement(St.a,{className:"ui left fluid",pointing:"left"},a.a.createElement(Pt.Player,null,a.a.createElement("source",{src:o,type:"video/mp4"})))))):void alert("Unrecognized message type = "+c):u?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(p.a,{labelPosition:"right",floated:"right"},a.a.createElement(St.a,{pointing:"right",size:"large",color:"purple"},r))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null)):a.a.createElement("div",null,a.a.createElement(l.a,{medium:!0,up:!0},a.a.createElement(h.a,{columns:2},a.a.createElement(h.a.Column,{width:1},a.a.createElement("div",{className:"ui u-avatar mini",style:{backgroundImage:"url(".concat(i,")"),width:"50px",height:"50px"}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,null,a.a.createElement("strong",null,n)),a.a.createElement(h.a.Row,null,a.a.createElement(St.a,{pointing:"left",size:"large"},r))))),a.a.createElement(l.a,{small:!0,down:!0},a.a.createElement(h.a,{columns:2},a.a.createElement(h.a.Column,{width:3,style:{marginRight:"10px"}},a.a.createElement("div",{className:"ui u-avatar mini",style:{backgroundImage:"url(".concat(i,")"),width:"50px",height:"50px"}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,null,a.a.createElement("strong",null,n)),a.a.createElement(h.a.Row,null,a.a.createElement(St.a,{pointing:"left",size:"large",color:"white"},r))))),a.a.createElement("br",null),a.a.createElement("br",null))},Ut=n(1077),Rt=function(e){return a.a.createElement(Ut.a,{style:{width:"85%"}},e.messages.slice(0).reverse().map(function(t,n){return a.a.createElement(Nt,{key:n,message:t,userID:e.userID})}))},Lt=n(162),kt=n.n(Lt),jt=function(e){return e.loading?a.a.createElement(U.a,{icon:!0,style:{background:"white"}},a.a.createElement(f.a,{name:"spinner",size:"small",loading:!0,color:"purple"}),a.a.createElement(U.a.Content,null,a.a.createElement(U.a.Header,{style:{color:"purple"}},"Loading..."))):null};jt.defaultProps={loading:!0};var Ft=jt,wt=function(e,t,n,r,a){n&&a(e,t,function(e){e||r(!1)})},Qt=Object(u.b)(function(e){return{user:e.user,cache:e.cache,message:e.message}},function(e){return{fetchClient:function(t,n,r){e(Ve(t,n,r))},fetchTrainer:function(t,n,r){e(Xe(t,n,r))},queryNextMessagesFromBoard:function(t,n,r,a){e(ie(t,n,r,a))},discardBoard:function(t){e(function(e){return function(t){t(Object(k.d)()),t(me(e)),t(Object(k.e)())}}(t))},unsubscribeFromBoard:function(t){e(function(e){return{type:ee.UNSUBSCRIBE_FROM_BOARD,payload:{board:e}}}(t))}}})(function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!0),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),f=Object(s.a)(m,2),g=f[0],b=f[1];return Object(r.useEffect)(function(){if(e.board){!function(e){e&&e.scrollToBottom()}(g),e.board&&(!e.message.boards[e.board]||e.message.boards[e.board].length<10)&&wt(e.board,10,u,d,e.queryNextMessagesFromBoard);var t=ne(e.board);if(2===t.length)for(var n=0;n<2;n++)e.user.id&&t[n]!==e.user.id&&i(t[n]);return function(){e.unsubscribeFromBoard(e.board)}}},[e.board]),a.a.createElement("div",{className:"u-margin-top--2"},a.a.createElement(kt.a,{class:"chat",width:"100%",height:"300px",ref:function(e){return b(e)},onScroll:function(t){return function(e,t,n,r,a,o){var i=e.scrollTop,c=e.scrollBottom;console.log("scrollTop",i),console.log("scrollBottom",c),i<1&&(a(!0),wt(t,n,r,a,o))}(t,e.board,10,u,d,e.queryNextMessagesFromBoard)}},a.a.createElement(Ft,{loading:e.message.boardIfFirsts[e.board]||e.message.boardNextTokens[e.board]}),a.a.createElement(Rt,{board:e.board,messages:e.board&&e.message.boards[e.board]?e.message.boards[e.board]:[],userID:e.user.id}),function(e,t){return e&&t&&t.from!==e?re(e,t)?a.a.createElement(U.a,null,"Unseen"):a.a.createElement(U.a,null,"Seen"):null}(o,e.message.boards[e.board]?e.message.boards[e.board][0]:null)),a.a.createElement(L.a,{className:"u-margin-top--2"}),a.a.createElement(Dt,{board:e.board}))});function Mt(e,t,n){return function(e,t,n,r){if(t)return Ht(e,n,He(t),r);return null}(e,Object(B.b)(e),t,n)}function Ht(e,t,n,r){if(e&&t&&r&&n){var a=r[n][e];if(a)return xt(a,t)}return null}function xt(e,t){return e&&t?"Length"===t.substr(t.length-6)?e[t=t.substr(0,t.length-6)]&&e[t].length?e[t].length:0:e[t]:null}var Bt=n(400),Gt=n.n(Bt),_t=function(e){var t=Object(r.useState)(0),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1];return a.a.createElement("div",null,a.a.createElement(Gt.a,{ref:d,image:e.imageURL,width:250,height:250,border:50,rotate:o,scale:1.2}),a.a.createElement(p.a,{primary:!0,onClick:function(){return i(function(e){return(e+90)%360})}},a.a.createElement(f.a,{name:"arrow alternate circle right"})),a.a.createElement(p.a,{primary:!0,onClick:function(){return function(e,t){if(e){for(var n=e.getImageScaledToCanvas().toDataURL("image/jpeg"),r=atob(n.split(",")[1]),a=[],o=0;o<r.length;o++)a.push(r.charCodeAt(o));t(new Blob([new Uint8Array(a)],{type:"image/jpeg"}))}}(u,e.callback)}},"Upload"),a.a.createElement(p.a,{onClick:function(){return e.callback(null)}},"Cancel"))},Yt=n(1093),Jt=n(401),zt=n.n(Jt),qt=function(e,t){return"ClientFiles/"+e+"/galleryImages/"+t},Wt=function(e,t,r,o,i,c,l,u,s,d,m){if(t){var f=0;return o&&(f=o.length),x.a.times(f+1,function(f){return a.a.createElement("div",{key:f},a.a.createElement(R.a,{src:0===f?t:o[f-1],style:{height:"300px",width:"300px",margin:"auto",marginTop:"10px"}}),i&&c&&a.a.createElement(h.a,{columns:2,centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{primary:!0,as:"label",htmlFor:"galleryUpload",circular:!0,className:"u-bg--primaryGradient",style:{marginTop:"20px",marginBottom:"20px"}},0===f?"Change Main Profile Image":"Change Gallery Image"),a.a.createElement("input",{type:"file",accept:"image/*",id:"galleryUpload",hidden:!0,onChange:function(e){u({pos:c.getPos(),image:e.target.files[0]}),l(!0)}})),a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{primary:!0,as:"label",circular:!0,className:"u-bg--primaryGradient",onClick:function(){return function(e,t,r,a,o,i){i(!0),0===t?ht.updateProfileImage(e,e,null,null,function(){a(e,"profileImage",n(144)),a(e,"profileImagePath",null),i(!1)},function(e){i(!1)}):ht.removeProfileImage(e,e,r[t-1],function(){o(e,"profileImages",t-1),o(e,"profileImagePaths",t-1),i(!1)},function(e){i(!1)})}(e,c.getPos(),r,s,d,m)},style:{marginTop:"20px",marginBottom:"20px"}},0===f?"Remove Profile Image":"Remove Gallery Image"))))})}return a.a.createElement(Yt.a,null," No gallery images yet! ")},Vt=Object(u.b)(function(e){return{user:e.user}},function(e){return{setItemAttribute:function(t,n,r){e(Ie(t,n,r))},setItemAttributeIndex:function(t,n,r,a){e(ve(t,n,r,a))},removeItemAttributeIndex:function(t,n,r){e(De(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),g=Object(s.a)(m,2),b=g[0],E=g[1],T=Object(r.useState)(null),v=Object(s.a)(T,2),C=v[0],y=v[1];return a.a.createElement("div",null,a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Column,{width:1,style:{marginRight:"10px"},onClick:function(){return C&&C.prev()}},a.a.createElement(f.a,{size:"large",name:"caret left",style:{marginTop:"150px"}})),a.a.createElement(h.a.Column,{width:10},a.a.createElement(zt.a,{className:"carousel",swipeOptions:{continuous:!1},ref:function(e){return y(e)}},Wt(e.userID,e.profileImage,e.profileImagePaths,e.profileImages,e.editable,C,d,E,e.setItemAttribute,e.removeItemAttributeIndex,i),e.editable&&a.a.createElement("div",{style:{width:"50px"},align:"center"},a.a.createElement(p.a,{primary:!0,as:"label",htmlFor:"galleryUpload",circular:!0,className:"u-bg--primaryGradient",style:{marginTop:"140px",marginBottom:"140px"}},a.a.createElement(f.a,{name:"plus"})," Add New Picture"),a.a.createElement("input",{type:"file",accept:"image/*",id:"galleryUpload",hidden:!0,onChange:function(e){E({pos:C.getPos(),image:e.target.files[0]}),d(!0)}}))),a.a.createElement(I.a,{open:u,onClose:function(){}},a.a.createElement(_t,{imageURL:b?b.image:null,callback:function(t){!function(e,t,n,r,a,o,i,c){if(c(!0),0!==r){var l=qt(e);if(r<=a&&a.length)l=a[r-1];else{var u=r;for(l=qt(e,u);a&&l<=a[a.length-1];)l=qt(e,u),u++}ht.addProfileImage(e,e,t,l,function(t){i(e,"profileImages",r-1,n),i(e,"profileImagePaths",l,n),c(!1)},function(e){c(!1)})}else{var s=function(e){return"ClientFiles/"+e+"/profileImage"}(e);ht.updateProfileImage(e,e,t,s,function(t){o(e,"profileImage",n),o(e,"profileImagePath",s),c(!1)},function(e){c(!1)})}}(e.userID,t,URL.createObjectURL(t),b.pos,e.profileImagePaths,e.setItemAttribute,e.setItemAttributeIndex,i),d(!1),E(null)}}))),a.a.createElement(h.a.Column,{width:1,style:{marginRight:"10px",marginLeft:"-10px"},onClick:function(){return C&&C.next()}},a.a.createElement(f.a,{size:"large",name:"caret right",style:{marginTop:"150px"}})),a.a.createElement(A.a,{active:o}),a.a.createElement(O.a,{disabled:!o})))}),Xt=Object(u.b)(null,function(e){return{setItemAttribute:function(t,n,r){e(Ie(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),g=Object(s.a)(m,2),b=g[0],E=g[1];return e.profileImage?a.a.createElement("div",null,a.a.createElement("div",{onClick:function(){return i(!0)},className:"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4",style:{backgroundImage:"url(".concat(e.profileImage,")")}}),a.a.createElement(I.a,{closeIcon:!0,basic:!0,size:"large",open:o,onClose:function(){return i(!1)}},a.a.createElement(Vt,{userID:e.userID,profileImage:e.profileImage,profileImages:e.profileImages,profileImagePaths:e.profileImagePaths,editable:e.editable})),e.editable&&[a.a.createElement(St.a,{key:0,as:"label",htmlFor:"proPicUpload",circular:!0,className:"u-bg--primaryGradient"},a.a.createElement(f.a,{name:"upload",className:"u-margin-right--0",size:"large",inverted:!0})),a.a.createElement("input",{key:1,type:"file",accept:"image/*",id:"proPicUpload",hidden:!0,onChange:function(e){E(e.target.files[0]),d(!0)}}),a.a.createElement(I.a,{key:2,basic:!0,size:"mini",open:u,onClose:function(){}},a.a.createElement(_t,{imageURL:b,callback:function(t){!function(e,t,n,r){if(e&&t){var a="ClientFiles/"+t+"/profileImage";ht.updateProfileImage(t,t,e,a,function(e){r(t,"profileImage",n),r(t,"profileImagePath",a)},function(e){console.log("Failed edit client attribute"),console.log(JSON.stringify(e))})}}(t,e.userID,URL.createObjectURL(t),e.setItemAttribute),d(!1)}}))]):a.a.createElement(A.a,{inverted:!0},a.a.createElement(Ft,{loading:!0}))});var Zt=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n,r,a){e(Ve(t,n,r,a))},fetchInvite:function(t,n,r,a){e($e(t,n,r,a))},fetchUserAttributes:function(t,n,r){e(Be(t,n,r))},forceFetchUserAttributes:function(t){e(Ge(t))},addToUserAttribute:function(t,n){e(Ye(t,n))},addToItemAttribute:function(t,n,r){e(Ce(t,n,r))},removeFromUserAttribute:function(t,n){e(Je(t,n))},removeFromItemAttribute:function(t,n,r){e(ye(t,n,r))}}})(function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(!1),g=Object(s.a)(m,2),b=g[0],E=g[1],O=Object(r.useState)(!1),T=Object(s.a)(O,2),v=T[0],C=T[1],y=Object(r.useState)(!1),D=Object(s.a)(y,2),S=D[0],P=D[1],N=Object(r.useState)(null),R=Object(s.a)(N,2),L=R[0],k=R[1],j=Object(r.useState)(!1),F=Object(s.a)(j,2),w=F[0],Q=F[1],H=Object(r.useState)(!1),x=Object(s.a)(H,2),B=x[0],G=x[1],Y=function(t){return n=o,r=t,a=e.cache,Ht(n,r,"clients",a);var n,r,a};Object(r.useEffect)(function(){e.clientID&&(i(e.clientID),d(null),P(!1),k(null),Q(!1),G(!1))},[e.clientID]),Object(r.useEffect)(function(){},[o]),Object(r.useEffect)(function(){e.open&&o&&(_("Fetching Client for Client Modal!"),e.fetchClient(o,["id","username","gender","birthday","name","friends","challengesWon","scheduledEvents","profileImagePath","profileImagePaths","friendRequests"]))},[e.open]),Object(r.useEffect)(function(){e.user.friends&&e.clientID&&P(e.user.friends.includes(e.clientID)),e.user.friendRequests&&e.clientID&&Q(e.user.friendRequests.includes(e.clientID));var t=Y("friendRequests");t&&e.user.id&&(G(t.includes(e.user.id)),t.includes(e.user.id)&&e.fetchUserAttributes(["receivedInvites"],function(t){if(t.receivedInvites)for(var n=function(n){var r=t.receivedInvites[n];e.fetchInvite(r,["inviteType","to"],function(t){"friendRequest"===t.inviteType&&t.to===e.clientID&&k(r)})},r=0;r<t.receivedInvites.length;r++)n(r);else console.error("Error in getting friend request")},function(e){console.error("Error in getting friend request invite id."+e)}))},[e.user.friends,e.user.friendRequests,Y("friendRequests")]);var J=function(){var t=e.user.id,n=Y("id");t&&n&&(E(!0),dt.createFriendRequest(t,t,n,function(){E(!1)},function(e){E(!1),M.h&&console.log(e),d(e)},e))},z=function(){var t=e.user.id,n=Y("id");alert(t+" "+n+" "+L),t&&n&&L&&(E(!0),ht.addFriend(t,t,n,L,function(){E(!1)},function(e){E(!1),M.h&&console.log(e),d(e)}))},q=function(){var t=e.user.id,n=Y("id");t&&n&&(E(!0),ht.removeFriend(t,t,n,function(t){E(!1),M.h&&console.log("Successfully removed "+Y("name")+" from friends list"),e.forceFetchUserAttributes(["friends"])},function(e){E(!1),M.b&&console.error(e),d(e)},e))};return a.a.createElement(I.a,{open:e.open,onClose:e.onClose},a.a.createElement(f.a,{className:"close",onClick:function(){return e.onClose()}}),(W=e.info.isLoading,W?a.a.createElement(A.a,{active:!0},a.a.createElement(Ft,null)):null),function(e){if(e)return a.a.createElement(U.a,{color:"red"},a.a.createElement("h1",null,"Error!"),a.a.createElement("p",null,e))}(u),a.a.createElement(I.a.Header,null,Y("name")),a.a.createElement(I.a.Content,{image:!0},a.a.createElement(h.a,{columns:"equal"},a.a.createElement(h.a.Column,null,a.a.createElement(Xt,{userID:e.user.id,profileImage:Y("profileImage"),profileImages:Y("profileImages")})),a.a.createElement("div",null,a.a.createElement(f.a,{name:"trophy"}),Y("challengesWonLength")+" challenges won"))),a.a.createElement(I.a.Actions,null,a.a.createElement(h.a,{columns:2},a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{primary:!0,fluid:!0,onClick:function(){return C(!0)}},"Invite to Challenge"),a.a.createElement(Tt,{open:v,onOpen:function(){return C(!0)},onClose:function(){return C(!1)},friendID:Y("id")})),a.a.createElement(h.a.Column,null,S?a.a.createElement(p.a,{inverted:!0,fluid:!0,loading:b,type:"button",onClick:q},"Remove Buddy"):B?a.a.createElement(p.a,{inverted:!0,disabled:!0,fluid:!0,type:"button"},"Sent Request!"):w?a.a.createElement(p.a,{inverted:!0,fluid:!0,loading:b,type:"button",onClick:z},"Accept Buddy Request"):a.a.createElement(p.a,{inverted:!0,fluid:!0,loading:b,type:"button",onClick:J},"Add Buddy")))),a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{primary:!0,fluid:!0},a.a.createElement(f.a,{name:"wechat"})," Chat ")},a.a.createElement(Qt,{board:te([Y("id"),e.user.id])})));var W}),Kt=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createChallenge",value:function(t,n,r,a,o,i,c,l,u,s,d,m){return e.create(t,n,r,a,o,i,null,null,null,u,c,l,null,null,null,null,null,null,function(e){m?m.addToUserAttribute&&m.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),s&&s(e)},d)}},{key:"createChallengeOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f,g,b,E,p,A,O,T){return e.create(t,n,r,a,o,i,c,l,u,s,d,m,f,null,g,b,E,p,function(e){T?T.addToUserAttribute&&T.clearItemQueryCache?(T.addToUserAttribute("ownedChallenges",e.data),T.addToUserAttribute("challenges",e.data),T.clearItemQueryCache("Challenge"),T.clearItemQueryCache("Post")):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),A&&A(e)},O)}},{key:"createGroupChallenge",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f){return e.create(t,r,a,o,i,c,null,null,null,s,l,u,null,n,null,null,null,null,function(e){f?f.addToUserAttribute&&f.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),d&&d(e)},m)}},{key:"createGroupChallengeOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f,g,b,E,p,A,O,T,h){return e.create(t,r,a,o,i,c,l,u,s,d,m,f,g,n,b,E,p,A,function(e){h?h.addToUserAttribute&&h.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),O&&O(e)},T)}},{key:"updateWinner",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"winner",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateToPrivate",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","private",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToPublic",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","public",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToInviteOnly",value:function(t,n,r,a,o){return e.updateAdd(t,n,"restriction","invite",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToUnrestricted",value:function(t,n,r,a,o){return e.updateSet(t,n,"restriction",null,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addTag",value:function(t,n,r,a,o,i){return e.updateAdd(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeTag",value:function(t,n,r,a,o,i){return e.updateRemove(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"addMember",value:function(e,t,n,r,a,o){return ht.addChallenge(e,n,t,null,r,a,o)}},{key:"removeMember",value:function(e,t,n,r,a,o){return ht.removeChallenge(e,n,t,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateEndTime",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"endTime",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateCapacity",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"capacity",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateGoal",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"goal",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updatePrize",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"prize",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateTitle",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"title",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateDescription",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"description",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateDifficulty",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"difficulty",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"create",value:function(e,t,n,r,a,o,i,c,l,u,s,d,m,f,g,b,E,p,A,O){return st.create(e,"Challenge",{owner:t,endTime:n,capacity:r,title:a,goal:o,description:i,tags:u,difficulty:c,prize:m,members:l,access:s,restriction:d,group:f,challengeType:g,streakUpdateSpanType:b,streakUpdateInterval:E,streakN:p},A,O)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Challenge",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Challenge",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Challenge",n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,t,"Challenge",function(e){a?a.addToItemAttribute&&a.addToUserAttribute?(a.removeFromUserAttribute("challenges",t),a.removeItem("Challenge",t)):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),n&&n(e)},r)}}]),e}(),$t=function(e){return function(e,t){switch(t){case"Small":return a.a.createElement("div",{className:"u-avatar u-avatar--small",style:{backgroundImage:"url(".concat(e,")")}});case"LargeCenter":return a.a.createElement("div",{className:"u-avatar u-avatar--large u-margin-bottom--neg2 u-margin-x--auto",style:{backgroundImage:"url(".concat(e,")")}});default:return a.a.createElement("div",{className:"u-avatar u-avatar--small",style:{backgroundImage:"url(".concat(e,")")}})}}(e.profileImage,e.type)},en=n(19),tn=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createEvent",value:function(t,n,r,a,o,i,c,l,u,s,d){return e.create(t,n,r,a,o,i,null,c,null,l,null,null,null,function(e){d?d.addToUserAttribute&&d.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),u&&u(e)},s)}},{key:"createEventOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f,g){return e.create(t,n,r,a,o,i,c,l,u,s,d,null,null,function(e){g?g.addToUserAttribute&&g.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),m&&m(e)},f)}},{key:"createChallengeEvent",value:function(t,n,r,a,o,i,c,l,u,s,d,m){return e.create(t,r,a,o,i,c,null,l,null,u,null,n,null,function(e){m?m.addToUserAttribute&&m.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),s&&s(e)},d)}},{key:"createChallengeEventOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f,g,b){return e.create(t,r,a,o,i,c,l,u,s,d,m,n,null,function(e){b?b.addToUserAttribute&&b.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),f&&f(e)},g)}},{key:"createGroupEvent",value:function(t,n,r,a,o,i,c,l,u,s,d,m){return e.create(t,r,a,o,i,c,null,u,null,l,null,null,n,function(e){m?m.addToUserAttribute&&m.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),s&&s(e)},d)}},{key:"createGroupEventOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f,g,b){return e.create(t,r,a,o,i,c,l,u,s,d,m,null,n,function(e){b?b.addToUserAttribute&&b.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),f&&f(e)},g)}},{key:"updateToPrivate",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","private",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToPublic",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","public",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToInviteOnly",value:function(t,n,r,a,o){return e.updateAdd(t,n,"restriction","invite",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToUnrestricted",value:function(t,n,r,a,o){return e.updateSet(t,n,"restriction",null,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addTag",value:function(t,n,r,a,o,i){return e.updateAdd(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeTag",value:function(t,n,r,a,o,i){return e.updateRemove(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"addMember",value:function(e,t,n,r,a,o){return ht.addEvent(e,n,t,null,r,a,o)}},{key:"removeMember",value:function(e,t,n,r,a,o){return ht.removeEvent(e,n,t,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateAddress",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"address",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateCapacity",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"capacity",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateTitle",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"title",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateDescription",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"description",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"create",value:function(e,t,n,r,a,o,i,c,l,u,s,d,m,f,g){return st.create(e,"Event",{owner:t,time:n,capacity:r,address:a,title:o,description:i,tags:c,members:l,access:u,restriction:s,challenge:d,group:m},f,g)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Event",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Event",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Event",n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,t,"Event",function(e){a?a.addToUserAttribute&&a.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),n&&n(e)},r)}}]),e}(),nn=n(1081),rn=["id","username","gender","birthday","name","friends","challengesWon","scheduledEvents","profileImagePath","friendRequests"],an=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(t){return xt(e.client,t)};return e.client?a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return o||i(!0)}},a.a.createElement(b.a.Content,null,!e.rank&&a.a.createElement(r.Fragment,null,a.a.createElement(b.a.Header,null,a.a.createElement(Xt,{userID:e.client.id,profileImage:e.client.profileImage}),a.a.createElement("div",{className:"u-flex u-flex-justify--center u-margin-bottom--2"},a.a.createElement($t,{profileImage:c("profileImage"),type:"Small"}))),a.a.createElement(b.a.Header,{textAlign:"center"},c("name"))),e.rank&&a.a.createElement(h.a,{divided:!0,verticalAlign:"middle"},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:4},a.a.createElement(Yt.a,{size:"large",textAlign:"center"},e.rank)),a.a.createElement(h.a.Column,{width:12},a.a.createElement("div",{className:"u-flex u-flex-align--center"},a.a.createElement($t,{profileImage:c("profileImage"),type:"Small"}))),a.a.createElement(h.a.Column,{textAlign:"center"},c("name")))),a.a.createElement(Zt,{open:o,onClose:function(){console.log("closing"),i(!1),console.log("closing")},clientID:e.client.id})),a.a.createElement(b.a.Content,{extra:!0},a.a.createElement(b.a.Meta,null,c("challengesWonLength")," challenges won"))):a.a.createElement(A.a,null,a.a.createElement(Ft,null))},on=["id","name","profileImagePath"],cn=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(t){return xt(e.trainer,t)};return e.trainer?a.a.createElement(b.a,{fluid:!0,raised:!0,centered:!0,onClick:function(){return o||i(!0)}},a.a.createElement("div",{className:"u-container"},a.a.createElement($t,{profileImage:c("profileImage"),type:"LargeCenter"})),a.a.createElement(b.a.Content,{textAlign:"center"},a.a.createElement(b.a.Header,null,c("name")),a.a.createElement(b.a.Description,null," Personal Trainer")),a.a.createElement(b.a.Content,{extra:!0,textAlign:"center"},a.a.createElement(p.a.Group,{fluid:!0},a.a.createElement(p.a,null,a.a.createElement(f.a,{name:"globe"})," Boston, MA"),a.a.createElement(p.a,{primary:!0},"Vastus Certified"))),a.a.createElement(cr,{open:o,onClose:function(){return i(!1)},trainerID:c("id")})):a.a.createElement(A.a,{inverted:!0},a.a.createElement(Ft,null))},ln=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createPost",value:function(t,n,r,a,o,i,c){return e.createPostOptional(t,n,r,a,null,null,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createPostOptional",value:function(t,n,r,a,o,i,c,l,u){return e.create(t,n,r,a,null,null,o,i,function(e){u?u.addToUserAttribute&&u.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),c&&c(e)},l)}},{key:"createShareItemPost",value:function(t,n,r,a,o,i,c,l,u){return e.createShareItemPostOptional(t,n,r,a,o,i,null,null,function(e){u?u.addToUserAttribute&&u.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),c&&c(e)},l)}},{key:"createShareItemPostOptional",value:function(t,n,r,a,o,i,c,l,u,s,d){return e.create(t,n,r,a,o,i,c,l,function(e){d?d.addToUserAttribute&&d.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),u&&u(e)},s)}},{key:"updateDescription",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"description",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateAccess",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"access",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"addPicture",value:function(t,n,r,a,o,i,c){if(W.putImage(a,r,function(){e.updateAdd(t,n,"picturePaths",a,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},function(e){W.delete(a),i(e)})},i),G.a.ifTesting)return e.updateAdd(t,n,"picturePaths",a)}},{key:"addVideo",value:function(t,n,r,a,o,i,c){if(W.putVideo(a,r,o,i,function(){e.updateAdd(t,n,"videoPaths",a,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},function(e){W.delete(a),i(e)})},i),G.a.ifTesting)return e.updateAdd(t,n,"videoPaths",a)}},{key:"removePicture",value:function(t,n,r,a,o,i){return e.updateRemove(t,n,"picturePaths",r,function(e){W.delete(r),i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeVideo",value:function(t,n,r,a,o,i){return e.updateRemove(t,n,"videoPaths",r,function(e){W.delete(r),i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"create",value:function(t,n,r,a,o,i,c,l,u,s){var d=null,m=null;c&&(d=Object.keys(c)),l&&(m=Object.keys(l));var f=0,g=0;return d&&(f=d.length),m&&(g=m.length),st.create(t,"Post",{by:n,description:r,access:a,postType:o,about:i,picturePaths:d,videoPaths:m},function(n){if(n){var r=n.data,a=f+g,o=0,i=function(){++o>=a&&u(n)},d=function(n){e.delete(t,r),s(n)};if(0===a)u(n);else{if(c)for(var m in c)c.hasOwnProperty(m)&&c[m]&&W.putImage(r+"/"+m,c[m],i,d);if(l)for(var b in l)l.hasOwnProperty(b)&&l[b]&&W.putVideo(r+"/"+b,l[b],i,d)}}},s)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Post",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Post",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Post",n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,t,"Post",function(e){a?a.addToUserAttribute&&a.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),n&&n(e)},r)}}]),e}(),un=function(e,t,n,r,o){return n?a.a.createElement("div",null,a.a.createElement(p.a,{loading:r,fluid:!0,negative:!0,size:"large",disabled:r,onClick:function(){return function(e,t,n){e&&t&&(n(!0),ln.delete(e,t,function(e){n(!1)},function(e){n(!1)}))}(e,t,o)}},"Delete")):null},sn=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchPost:function(t,n){e(et(t,n))},forceFetchPost:function(t,n){e(ot(t,n))}}})(function(e){var t,n,o,i=Object(r.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1],d=Object(r.useState)(!1),m=Object(s.a)(d,2),f=m[0],g=m[1],b=function(t){return Mt(e.postID,t,e.cache)};return e.postID?a.a.createElement(I.a,{closeIcon:!0,open:e.open,onClose:function(){return e.onClose()},style:{background:"white",color:"purple"}},a.a.createElement(I.a.Header,{style:{background:"white",color:"purple"}},gt(b("time_created"))),a.a.createElement(I.a.Content,{style:{background:"white",color:"purple"}},a.a.createElement(I.a.Description,null,a.a.createElement(Zt,{open:f,onClose:function(){return g(!1)},clientID:b("by")}),a.a.createElement(N.a,{relaxed:!0},a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"user",color:"purple"}),a.a.createElement(N.a.Content,null,"Created by ",a.a.createElement(p.a,{className:"u-button--flat",onClick:function(){return f||g(!0)}},(o="name",Mt(b("by"),o,e.cache))))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"calendar",color:"purple"}),a.a.createElement(N.a.Content,null,gt(b("time_created")))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"description",color:"purple"}),a.a.createElement(N.a.Content,null,b("description"))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"access",color:"purple"}),a.a.createElement(N.a.Content,null,b("access"))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"users",color:"purple"}),a.a.createElement(N.a.Content,null,a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{className:"u-button--flat u-padding-left--1"},"About"),closeIcon:!0},a.a.createElement(I.a.Content,null))))),un(e.user.id,e.postID,e.user.id===Ht("by",t,"posts",n),l,u)))):a.a.createElement(A.a,null,a.a.createElement(Ft,null))}),dn={fetchList:["id","item_type","title","endTime","ifCompleted","tags","difficulty","time_created","capacity","members","prize","goal","owner","access","restriction","submissions"],ifSubscribe:!1},mn=function(e){return a.a.createElement(kr,{challenge:e.challenge})},fn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).state={error:null,postID:null,clientModalOpen:!1,videoURL:null,pictureURL:null,isOwned:null,isDeleteLoading:!1},n.forceUpdate=function(e){},n.handleDeletePostButton=n.handleDeletePostButton.bind(Object(en.a)(Object(en.a)(n))),n.handleDelete=n.handleDelete.bind(Object(en.a)(Object(en.a)(n))),n.isOwned=n.isOwned.bind(Object(en.a)(Object(en.a)(n))),n.getDisplayMedia=n.getDisplayMedia.bind(Object(en.a)(Object(en.a)(n))),n.getPostAttribute=n.getPostAttribute.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.isOwned()}},{key:"componentWillReceiveProps",value:function(e){e.postID&&!this.state.postID&&this.setState({postID:e.postID})}},{key:"getPostAttribute",value:function(e){if(!this.state.postID)return null;var t=this.props.cache.posts[this.state.postID];return t?"Length"===e.substr(e.length-6)?t[e=e.substr(0,e.length-6)]&&t[e].length?t[e].length:0:t[e]:void 0}},{key:"getClientAttribute",value:function(e){if(!this.getPostAttribute("by"))return null;var t=this.props.cache.clients[this.getPostAttribute("by")],n=this.props.cache.trainers[this.getPostAttribute("by")];return t?"Length"===e.substr(e.length-6)?t[e=e.substr(0,e.length-6)]&&t[e].length?t[e].length:0:t[e]:n?"Length"===e.substr(e.length-6)?n[e=e.substr(0,e.length-6)]&&n[e].length?n[e].length:0:t[e]:void 0}},{key:"getOwnerName",value:function(){var e=this.getPostAttribute("by");if(e&&(this.props.cache.clients[e]||this.props.cache.trainers[e])){var t=Object(B.b)(e);if("Trainer"===t)return this.props.cache.trainers[e].name;if("Client"===t)return this.props.cache.clients[e].name}return null}},{key:"profilePicture",value:function(){return this.getClientAttribute("profileImagePaths")!==[]||null!==this.getClientAttribute("profileImagePaths")?a.a.createElement("div",{avatar:!0,align:"center",className:"ui u-avatar tiny",style:{backgroundImage:"url(".concat(this.getClientAttribute("profileImage"),")")}}):a.a.createElement(A.a,{inverted:!0},a.a.createElement(O.a,null))}},{key:"handleDeletePostButton",value:function(){var e=this;this.setState({isLoading:!0}),ln.delete(this.props.user.id,this.getPostAttribute("id"),function(){e.forceUpdate(e.getPostAttribute("id")),e.setState({isDeleteLoading:!1,event:null,isOwned:!1})},function(t){e.setState({isDeleteLoading:!1,error:t})})}},{key:"isOwned",value:function(){this.setState({isOwned:this.props.user.id===this.getPostAttribute("by")})}},{key:"handleDelete",value:function(){this.setState({isDeleteLoading:!0}),this.handleDeleteEventButton()}},{key:"openClientModal",value:function(){this.setState({clientModalOpen:!0})}},{key:"closeClientModal",value:function(){this.setState({clientModalOpen:!1})}},{key:"displayError",value:function(){if("Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!"===this.state.error)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,"That challenge is already filled up!"))}},{key:"getDisplayMedia",value:function(){var e=this,t=this.getPostAttribute("picturePaths"),n=this.getPostAttribute("videoPaths");if(n&&n.length>0||t&&t.length>0)if(!this.state.videoURL&&n){var r=n[0];w.Storage.get(r).then(function(t){e.setState({videoURL:t})}).catch(function(e){M.b&&console.error(e)})}else{if(this.state.pictureURL||!t)return this.state.videoURL&&!this.state.pictureURL?a.a.createElement(Pt.Player,{inline:!0},a.a.createElement("source",{src:this.state.videoURL,type:"video/mp4"})):!this.state.videoURL&&this.state.pictureURL?a.a.createElement(R.a,{src:this.state.pictureURL}):this.state.videoURL&&this.state.pictureURL?a.a.createElement("div",null,a.a.createElement(Pt.Player,{inline:!0},a.a.createElement("source",{src:this.state.videoURL,type:"video/mp4"})),a.a.createElement(R.a,{src:this.state.pictureURL})):null;var o=t[0];w.Storage.get(o).then(function(t){e.setState({pictureURL:t})}).catch(function(e){M.b&&console.error(e)})}}},{key:"render",value:function(){return this.state.canCallChecks&&(this.isOwned(),this.setState({canCallChecks:!1})),a.a.createElement(b.a,null,a.a.createElement(b.a.Content,null,a.a.createElement(b.a.Description,null,this.getPostAttribute("description")),this.getDisplayMedia()),a.a.createElement(b.a.Content,{extra:!0},(e=this.isOwned,t=this.handleDeletePostButton,n=this.state.isDeleteLoading,e?a.a.createElement("div",null,a.a.createElement(p.a,{loading:n,primary:!0,fluid:!0,size:"tiny",disabled:n,onClick:t},a.a.createElement(f.a,{name:"delete"}))):null)));var e,t,n}}]),t}(r.Component);fn.fetchVariableList=["id","time_created","by","item_type","postType","about","description","videoPaths","picturePaths"];var gn=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Xe(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchPost:function(t,n){e(et(t,n))},forceFetchPost:function(t,n){e(ot(t,n))}}})(fn),bn=an,En=function(e){return a.a.createElement(cn,{trainer:e.trainer})},pn=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createGroup",value:function(t,n,r,a,o,i,c){return e.create(t,n,r,null,null,null,null,null,a,null,function(e){c?c.addToUserAttribute&&c.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),o&&o(e)},i)}},{key:"createGroupOptional",value:function(t,n,r,a,o,i,c,l,u,s,d,m,f){return e.create(t,n,r,a,o,i,c,l,u,s,function(e){f?f.addToUserAttribute&&f.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),d&&d(e)},m)}},{key:"updateToPrivate",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","private",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToPublic",value:function(t,n,r,a,o){return e.updateSet(t,n,"access","public",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToInviteOnly",value:function(t,n,r,a,o){return e.updateAdd(t,n,"restriction","invite",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateToUnrestricted",value:function(t,n,r,a,o){return e.updateSet(t,n,"restriction",null,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"addTag",value:function(t,n,r,a,o,i){return e.updateAdd(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"removeTag",value:function(t,n,r,a,o,i){return e.updateRemove(t,n,"tags",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"addMember",value:function(e,t,n,r,a,o){return ht.addGroup(e,n,t,null,r,a,o)}},{key:"removeMember",value:function(e,t,n,r,a,o){return ht.removeGroup(e,n,t,function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"updateTitle",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"title",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateMotto",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"motto",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateDescription",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"description",r,function(e){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)}},{key:"updateGroupImage",value:function(t,n,r,a,o,i){return e.updateSet(t,n,"groupImagePath",r?"groupImage":null,function(e){r&&W.putImage("groupImage",r,function(){i?i.addToUserAttribute&&i.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),a&&a(e)},o)},o)}},{key:"create",value:function(t,n,r,a,o,i,c,l,u,s,d,m){return st.create(t,"Group",{title:n,description:r,motto:a,owners:i,members:c,tags:l,access:u,restriction:s,groupImagePath:o?"groupImage":null},function(n){if(!G.a.ifTesting){var r=n.data;W.putImage(r+"/groupImage",o,d,function(n){e.delete(t,r)})}},m)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Group",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Group",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Group",n,r,a,o)}},{key:"delete",value:function(e,t,n,r,a){return st.delete(e,t,"Group",function(e){a?a.addToUserAttribute&&a.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),n&&n(e)},r)}}]),e}(),An=n(1082),On=n(402),Tn=n.n(On),hn=(n(1031),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).state={checked:!1,checkedRest:!1,isSubmitLoading:!1,showModal:!1,submitError:null,showSuccessModal:!1,showSuccessLabel:!1,showSuccessLabelTimer:0,description:"",title:"",access:"private",picturesLoading:!1,videosLoading:!1,pictures:[],videos:[],tempPictureURLs:[],tempVideoURLs:[]},n.toggle=function(){return n.setState({checked:!n.state.checked})},n.toggleRest=function(){return n.setState({checkedRest:!n.state.checkedRest})},n.handleAccessSwitch=function(){"public"===n.state.access?n.setState({access:"private"}):"private"===n.state.access?n.setState({access:"public"}):M.b&&console.error("Event access should be public or private")},n.setVideo=function(e){var t=n.state.videos.length;n.state.videos.push(e.target.files[0]);var r="/"+n.props.user.id+"/temp/videos/"+t;w.Storage.put(r,e.target.files[0],{contentType:"video/*;image/*"}).then(function(){w.Storage.get(r).then(function(e){n.state.tempVideoURLs.push(e),n.setState({})}).catch(function(e){M.b&&console.error(e)})}).catch(function(e){M.b&&console.error(e)}),n.setState({})},n.setPicture=function(e){var t=n.state.pictures.length;n.state.pictures.push(e.target.files[0]),alert("Pics: "+n.state.pictures[0]);var r="/"+n.props.user.id+"/temp/pictures/"+t;w.Storage.put(r,e.target.files[0],{contentType:"video/*;image/*"}).then(function(){w.Storage.get(r).then(function(e){n.state.tempPictureURLs.push(e),n.setState({})}).catch(function(e){M.b&&console.error(e)})}).catch(function(e){M.b&&console.error(e)}),n.setState({})},n.handleSubmit=function(){n.setState({isSubmitLoading:!0}),n.state.description&&ln.createPostOptional(n.props.user.id,n.props.user.id,n.state.description,n.state.access,n.getLatestPicture(),n.getVideos(),function(e){console.log("Successfully Created Post!"),console.log(JSON.stringify(e)),n.setState({isSubmitLoading:!1}),n.setState({showSuccessLabel:!0})},function(e){M.b&&console.error(e),n.setState({submitError:e}),n.setState({isSubmitLoading:!1})})},n.closeModal=function(){n.setState({showModal:!1})},n.closeSuccessModal=function(){n.setState({showSuccessModal:!1})},n.changeStateText=n.changeStateText.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"changeStateText",value:function(e){this.setState({description:e}),M.h&&console.log(e)}},{key:"getLatestPicture",value:function(){for(var e={},t=0;t<this.state.pictures.length;t++)e["pictures/"+t]=this.state.pictures[t];return this.state.pictures.length>0?[e[e.length-1]]:null}},{key:"getVideos",value:function(){for(var e={},t=0;t<this.state.videos.length;t++)e["videos/"+t]=this.state.videos[t];return this.state.videos.length>0?e:null}},{key:"displaySubmission",value:function(){if(this.state.notifySubmission)return a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You submitted a video to the challenge!"))}},{key:"displayCurrentVideo",value:function(){return this.state.tempVideoURLs&&this.state.tempVideoURLs.length>0?a.a.createElement(Pt.Player,null,a.a.createElement("source",{src:this.state.tempVideoURLs[0],type:"video/mp4"})):null}},{key:"displayCurrentImage",value:function(){return this.state.tempPictureURLs&&this.state.tempPictureURLs.length>0?a.a.createElement(R.a,{src:this.state.tempPictureURLs[0]}):null}},{key:"displayMedia",value:function(){return this.state.tempVideoURLs&&this.state.tempVideoURLs.length>0||this.state.tempPictureURLs&&this.state.tempPictureURLs.length>0?[a.a.createElement(f.a,{name:"plus",inverted:!0}),a.a.createElement(b.a,{style:{maxWidth:200,maxHeight:200,marginBottom:"60px",marginRight:"50px",marginLeft:"50px"}},this.displayCurrentVideo(),this.displayCurrentImage())]:[a.a.createElement(f.a,{name:"plus",inverted:!0}),a.a.createElement(h.a,{columns:2},a.a.createElement(h.a.Column,null,a.a.createElement(f.a,{name:"camera",inverted:!0,style:{marginTop:"10px",marginBottom:"10px",marginRight:"-10px"}})),a.a.createElement(h.a.Column,null,a.a.createElement(f.a,{name:"record",inverted:!0,style:{marginTop:"10px",marginBottom:"10px",marginLeft:"-10px"}})))]}},{key:"createSuccessLabel",value:function(){if(!this.state.showSuccessLabel||!this.state.showModal)return this.state.showSuccessLabel?a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You just created a new post!")):null;this.setState({showSuccessLabel:!1})}},{key:"displayError",value:function(){if(this.state.submitError)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,this.state.submitError))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{align:"center"},a.a.createElement(p.a,{primary:!0,as:"label",htmlFor:"picUpload",style:{marginTop:"10px",marginBottom:"10px"},icon:!0,circular:!0},this.displayMedia()),a.a.createElement("input",{type:"file",accept:"image/*;capture=camcorder",id:"picUpload",hidden:!0,onChange:this.setPicture}),a.a.createElement("div",null,this.displaySubmission()),a.a.createElement("div",{align:"center"},a.a.createElement(Ut.a,{align:"center"},a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:12,className:"segment centered",align:"center"},a.a.createElement(An.a,{onSubmit:this.handleSubmit},a.a.createElement(Tn.a,{value:this.state.description,onChange:this.changeStateText}))))))),a.a.createElement(p.a,{loading:this.state.isSubmitLoading,style:{marginBottom:"10px",marginRight:"10px"},disabled:this.state.isSubmitLoading,primary:!0,size:"big",type:"button",onClick:function(){e.handleSubmit()},icon:!0,floated:"right",circular:!0},a.a.createElement(f.a,{name:"send"})),this.createSuccessLabel(),this.displayError())}}]),t}(r.Component)),In=Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{setError:function(t){e(Object(k.c)(t))},fetchPost:function(t,n){e(et(t,n))}}})(hn);hn.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},hn.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var vn=n(1087),Cn=n(1080),yn=function(e,t,n,r,a,o,i,c,l,u,s,d,m,f,g,b,E){alert("Current user: "+t),alert("Associated Group: "+e);var p=[];for(var A in i)i.hasOwnProperty(A)&&i[A]&&p.push(A);r&&a&&o&&p?Number.isInteger(+r)?Kt.createGroupChallengeOptional(t,e,t,n,r,a,o,null,null,null,p,c,l,null,s,d,m,f,function(e){console.log("Successfully created a group challenge!"),g(!1),E(!0)},function(e){g(!1),b("*"+JSON.stringify(e))}):(g(!1),b("Capacity needs to be an integer!")):(g(!1),b("All fields need to be filled out!"))},Dn=function(e){return e?a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You just created a new Challenge!")):null},Sn=function(e,t,n){return e>1?a.a.createElement(vn.a,{fluid:!0,value:n,selection:!0,options:[{key:"hours",text:"Hours",value:"hourly"},{key:"days",text:"Days",value:"daily"},{key:"weeks",text:"Weeks",value:"weekly"},{key:"months",text:"Months",value:"monthly"},{key:"years",text:"Years",value:"yearly"}],onChange:function(e,n){t(n.value)}}):a.a.createElement(vn.a,{fluid:!0,value:n,selection:!0,options:[{key:"hour",text:"Hour",value:"hourly"},{key:"day",text:"Day",value:"daily"},{key:"week",text:"Week",value:"weekly"},{key:"month",text:"Month",value:"monthly"},{key:"year",text:"Year",value:"yearly"}],onChange:function(e,n){t(n.value)}})},Pn=Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{setError:function(t){e(Object(k.c)(t))},fetchChallenge:function(t,n){e(Ke(t,n))}}})(function(e){var t,o=Object(r.useState)(!1),i=Object(s.a)(o,2),c=i[0],l=i[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),m=d[0],f=d[1],g=Object(r.useState)({HIIT:!1,Strength:!1,Performance:!1,Endurance:!1}),b=Object(s.a)(g,2),E=b[0],A=b[1],O=Object(r.useState)(""),T=Object(s.a)(O,2),v=T[0],C=T[1],y=Object(r.useState)(At()),D=Object(s.a)(y,2),S=D[0],P=D[1],N=Object(r.useState)(25),L=Object(s.a)(N,2),k=L[0],j=L[1],w=Object(r.useState)(""),Q=Object(s.a)(w,2),M=Q[0],H=Q[1],x=Object(r.useState)(""),B=(Object(s.a)(x,1)[0],Object(r.useState)(null)),G=Object(s.a)(B,2),_=G[0],Y=G[1],J=Object(r.useState)("public"),z=Object(s.a)(J,2),q=z[0],W=z[1],V=Object(r.useState)(!1),X=Object(s.a)(V,2),Z=X[0],K=X[1],$=Object(r.useState)("streak"),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(r.useState)(null),ae=Object(s.a)(re,2),oe=ae[0],ie=ae[1],ce=Object(r.useState)(null),le=Object(s.a)(ce,2),ue=le[0],se=le[1],de=Object(r.useState)(null),me=Object(s.a)(de,2),fe=me[0],ge=me[1];return a.a.createElement("div",{align:"center"},a.a.createElement(Yt.a,{align:"center",style:{marginTop:"15px"}},"Challenge Builder"),a.a.createElement("div",{align:"center"},a.a.createElement(h.a,{align:"center"},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:E.HIIT?"purple":"black",inverted:E.HIIT,basic:!E.HIIT},a.a.createElement(R.a,{size:"medium",src:n(373),onClick:function(){return A(function(e){return Object(F.a)({},e,{HIIT:!e.HIIT})})}}),a.a.createElement("div",{style:{color:"white"}},"HIIT"))),a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:E.Strength?"purple":"black",inverted:E.Strength,basic:!E.Strength},a.a.createElement(R.a,{size:"medium",src:n(374),onClick:function(){return A(function(e){return Object(F.a)({},e,{Strength:!e.Strength})})}}),a.a.createElement("div",{style:{color:"white"}},"Strength")))),a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:E.Performance?"purple":"black",inverted:E.Performance,basic:!E.Performance},a.a.createElement(R.a,{size:"medium",src:n(375),onClick:function(){return A(function(e){return Object(F.a)({},e,{Performance:!e.Performance})})}}),a.a.createElement("div",{style:{color:"white"}},"Performance"))),a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:E.Endurance?"purple":"black",inverted:E.Endurance,basic:!E.Endurance},a.a.createElement(R.a,{size:"medium",src:n(376),onClick:function(){return A(function(e){return Object(F.a)({},e,{Endurance:!e.Endurance})})}}),a.a.createElement("div",{style:{color:"white"}},"Endurance"))))),a.a.createElement(Ut.a,{align:"center"},a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,{centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement(An.a,{onSubmit:function(){return yn(e.associatedGroup,e.user.id,S,k,v,M,E,q,_,0,te,oe,ue,fe,l,f,K)}},a.a.createElement(An.a.Input,{fluid:!0,label:"Title",type:"text",name:"title",placeholder:"Title",onChange:function(e){return C(e.target.value)}}),a.a.createElement("div",{className:"field"},a.a.createElement("label",null,"End Date & Time"),a.a.createElement("input",{type:"datetime-local",name:"challengeDate",onChange:function(e){P(e.target.value)}})),a.a.createElement(An.a.Input,{fluid:!0,label:"Capacity",type:"text",name:"capacity",placeholder:"Number of allowed attendees... ",onChange:function(e){return j(e.target.value)}}),a.a.createElement(An.a.Input,{fluid:!0,label:"Goal",type:"text",name:"goal",placeholder:"Criteria the victor is decided on...",onChange:function(e){return H(e.target.value)}}),"streak"===te?[a.a.createElement("div",{key:0,className:"field",align:"center"},a.a.createElement(Yt.a,{as:"h3"},a.a.createElement(h.a,{columns:5},a.a.createElement(h.a.Column,{style:{marginTop:"15px"},width:3},"Complete"),a.a.createElement(h.a.Column,null,a.a.createElement(An.a.Input,{fluid:!0,type:"number",name:"streakUpdateInterval",value:ue||"",onChange:function(e){return""===e.target.value||parseInt(e.target.value)<=0?se(1):se(e.target.value)}})),a.a.createElement(h.a.Column,{style:{marginTop:"15px"},width:3},(t=ue,t>1?"tasks":"task")," every"),a.a.createElement(h.a.Column,null,a.a.createElement(An.a.Input,{fluid:!0,type:"number",name:"streakN",value:fe||"",onChange:function(e){return""===e.target.value||parseInt(e.target.value)<=0?ge(1):ge(e.target.value)}})),a.a.createElement(h.a.Column,null,Sn(fe,ie,oe))))),a.a.createElement("div",{key:1,className:"field"},a.a.createElement("label",null,"Update Span"))]:null,a.a.createElement(An.a.Field,{width:12},a.a.createElement(Cn.a,{toggle:!0,onClick:function(){ne(function(e){return e?null:"streak"}),ge(1),se(1),ie("daily")},checked:"streak"===te,label:te||"streak off"})),a.a.createElement(An.a.Field,{width:12},a.a.createElement(Cn.a,{toggle:!0,onClick:function(){return W(function(e){return"public"===e?"private":"public"})},checked:"public"===q,label:q})),a.a.createElement(An.a.Field,{width:12},a.a.createElement(Cn.a,{toggle:!0,onClick:function(){return Y(function(e){return e?null:"restricted"})},checked:_,label:_||"unrestricted"})),a.a.createElement("div",null,function(e){if(""!==e)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,e))}(m),Dn(Z)))))))),a.a.createElement(I.a.Actions,null,a.a.createElement(p.a,{loading:c,disabled:c,primary:!0,size:"big",type:"button",onClick:function(){return yn(e.associatedGroup,e.user.id,S,k,v,M,E,q,_,0,te,oe,ue,fe,l,f,K)}},"Submit")),Dn(Z))}),Nn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).state={isLoading:!1,isOwned:!1,isJoined:!1,isCompleted:!1,isRequesting:!1,isRestricted:!1,groupID:null,clientModalOpen:!1,completeModalOpen:!1,submitModalOpen:!1,isLeaveLoading:!1,isDeleteLoading:!1,isJoinLoading:!1,isRequestLoading:!1,joinRequestSent:!1,canCallChecks:!0,deleted:!1,fetchedTrainer:!1,isEditing:!1},n.handleDeleteGroupButton=n.handleDeleteGroupButton.bind(Object(en.a)(Object(en.a)(n))),n.handleLeaveGroupButton=n.handleLeaveGroupButton.bind(Object(en.a)(Object(en.a)(n))),n.handleJoinGroupButton=n.handleJoinGroupButton.bind(Object(en.a)(Object(en.a)(n))),n.handleRequestGroupButton=n.handleRequestGroupButton.bind(Object(en.a)(Object(en.a)(n))),n.isJoined=n.isJoined.bind(Object(en.a)(Object(en.a)(n))),n.isRequesting=n.isRequesting.bind(Object(en.a)(Object(en.a)(n))),n.isRestricted=n.isRestricted.bind(Object(en.a)(Object(en.a)(n))),n.isOwned=n.isOwned.bind(Object(en.a)(Object(en.a)(n))),n.isCompleted=n.isCompleted.bind(Object(en.a)(Object(en.a)(n))),n.createCorrectButton=n.createCorrectButton.bind(Object(en.a)(Object(en.a)(n))),n.getGroupAttribute=n.getGroupAttribute.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"resetState",value:function(e){this.setState({isLoading:!1,isOwned:!1,isJoined:!1,isCompleted:!1,isRequesting:!1,isRestricted:!1,groupID:e,clientModalOpen:!1,completeModalOpen:!1,submitModalOpen:!1,isLeaveLoading:!1,isDeleteLoading:!1,isJoinLoading:!1,isRequestLoading:!1,joinRequestSent:!1,canCallChecks:!0})}}]),Object(y.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.getGroupAttribute("members"),r=this.getGroupAttribute("owners");if(!this.props.open&&e.open&&n&&n.length>0){for(var a=0;a<n.length;a++){var o=Object(B.b)(n[a]);"Client"===o?this.props.fetchClient(n[a],["id","name","gender","birthday","profileImagePath"],function(){t.setState({})}):"Trainer"===o&&this.props.fetchTrainer(n[a],["id","name","gender","birthday","profileImagePath"],function(){t.setState({})});for(var i=0;i<r.length;i++)r[i]&&"TR"===r[i].substr(0,2)&&(this.state.fetchedTrainer||(this.props.fetchTrainer(r[i],["id","name","gender","birthday","profileImagePath","profileImagePaths"]),this.setState({fetchedTrainer:!0})))}this.state.canCallChecks&&(this.isJoined(),this.isOwned(),this.isRequesting(),this.isCompleted(),this.isRestricted(),this.setState({canCallChecks:!1}))}}},{key:"handleDeleteGroupButton",value:function(){var e=this;this.setState({isDeleteLoading:!0,isLoading:!0}),pn.delete(this.props.user.id,this.getGroupAttribute("id"),function(t){e.forceUpdate(t.id),e.setState({isLoading:!1,isDeleteLoading:!1,event:null,isOwned:!1,isJoined:!1,deleted:!0}),e.props.onClose()},function(t){e.setState({isLoading:!1,isDeleteLoading:!1,error:t,deleted:!1})})}},{key:"handleLeaveGroupButton",value:function(){var e=this;this.setState({isLeaveLoading:!0,isLoading:!0}),ht.removeGroup(this.props.user.id,this.props.user.id,this.getGroupAttribute("id"),function(t){e.forceUpdate(t.id),e.setState({isLoading:!1,isLeaveLoading:!1,isJoined:!1})},function(t){e.setState({isLoading:!1,isLeaveLoading:!1,error:t})})}},{key:"handleJoinGroupButton",value:function(){var e=this;this.setState({isJoinLoading:!0,isLoading:!0}),ht.addGroup(this.props.user.id,this.props.user.id,this.getGroupAttribute("id"),null,function(){e.forceUpdate(),e.setState({isLoading:!1,isJoinLoading:!1,isJoined:!0})},function(t){e.setState({isLoading:!1,isJoinLoading:!1,error:t})})}},{key:"handleRequestGroupButton",value:function(){var e=this;this.setState({isRequestLoading:!0,isLoading:!0}),dt.createGroupRequest(this.props.user.id,this.props.user.id,this.getGroupAttribute("id"),function(){e.forceUpdate(),e.setState({isLoading:!1,isRequestLoading:!1,isRequesting:!0})},function(t){e.setState({isLoading:!1,isRequestLoading:!1,error:t})})}},{key:"isJoined",value:function(){var e=this.getGroupAttribute("members");if(e){var t=e.includes(this.props.user.id);this.setState({isJoined:t})}else this.setState({isJoined:!1})}},{key:"isRequesting",value:function(){var e=this.getGroupAttribute("memberRequests");e&&this.setState({isRequesting:e.includes(this.props.user.id)})}},{key:"isRestricted",value:function(){this.setState({isRestricted:"invite"===this.getGroupAttribute("restriction")})}},{key:"isOwned",value:function(){this.setState({isOwned:this.getGroupAttribute("owners").includes(this.props.user.id)})}},{key:"isCompleted",value:function(){this.setState({ifCompleted:"true"===this.getGroupAttribute("ifCompleted")})}},{key:"editButton",value:function(e){var t=this;return e?a.a.createElement("div",null,a.a.createElement(p.a,{onClick:function(){t.setState({isEditing:!1})},floated:"left",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"save"})),a.a.createElement(p.a,{onClick:function(){t.setState({isEditing:!1})},floated:"left",circular:!0,icon:!0},a.a.createElement(f.a,{name:"cancel"}))):a.a.createElement(p.a,{onClick:function(){t.setState({isEditing:!0})},floated:"left",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"edit outline"}))}},{key:"createCorrectSettingsButton",value:function(e,t,n){var r=this;return e?a.a.createElement(T.a,{trigger:a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"cog"})),content:a.a.createElement(p.a,{loading:n,fluid:!0,negative:!0,size:"large",disabled:n,onClick:function(){return r.handleDeleteGroupButton()}},"Delete"),on:"click",position:"bottom right"}):t?a.a.createElement(T.a,{trigger:a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"cog"})),content:a.a.createElement(p.a,{loading:n,fluid:!0,inverted:!0,size:"large",disabled:n,onClick:function(){return r.handleLeaveGroupButton()}},"Leave"),on:"click",position:"bottom right"}):void 0}},{key:"createCorrectButton",value:function(e){return this.state.isCompleted?a.a.createElement(p.a,{disabled:!0,fluid:!0,inverted:!0,size:"large"},"This Event is completed"):this.state.isOwned?a.a.createElement(r.Fragment,null,a.a.createElement(L.a,{className:"u-margin-top--4"}),a.a.createElement(b.a,{fluid:!0},a.a.createElement(d.a,{menu:{widths:3,inverted:!0},panes:e,className:"u-challenge u-margin-top--2"}))):this.state.isJoined?a.a.createElement(r.Fragment,null,a.a.createElement(L.a,{className:"u-margin-top--4"}),a.a.createElement(b.a,{fluid:!0},a.a.createElement(d.a,{menu:{widths:3,inverted:!0},panes:e,className:"u-challenge u-margin-top--2"}))):this.state.isRestricted?this.state.isRequesting?a.a.createElement("div",null,a.a.createElement(p.a,{inverted:!0,fluid:!0,size:"large",disabled:!0},"Request Sent!")):a.a.createElement("div",null,a.a.createElement(p.a,{loading:this.state.isRequestLoading,fluid:!0,size:"large",disabled:this.state.isRequestLoading,onClick:this.handleRequestGroupButton},"Send Join Request")):a.a.createElement(p.a,{loading:this.state.isJoinLoading,fluid:!0,size:"large",disabled:this.state.isJoinLoading,onClick:this.handleJoinGroupButton},"Join")}},{key:"getGroupAttribute",value:function(e){if(this.props.groupID){var t=this.props.cache.groups[this.props.groupID];if(t)return"Length"===e.substr(e.length-6)?t[e=e.substr(0,e.length-6)]&&t[e].length?t[e].length:0:t[e]}return null}},{key:"createGroupChallenge",value:function(e){if(e)return a.a.createElement(I.a,{closeIcon:!0,trigger:a.a.createElement(p.a,{fluid:!0,primary:!0},"Create Challenge "," ",a.a.createElement(f.a,{name:"trophy"}))},a.a.createElement(I.a.Content,null,a.a.createElement(Pn,{associatedGroup:this.props.groupID})))}},{key:"render",value:function(){var e=this,t=[{menuItem:"Group Posts",render:function(){return a.a.createElement(d.a.Pane,{basic:!0,className:"u-border--0 u-padding--0 u-margin-top--3"},a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{fluid:!0,primary:!0},"Create Post"),closeIcon:!0},a.a.createElement(In,null)),a.a.createElement(er,{ids:e.state.posts,noObjectsMessage:"No posts yet!",acceptedItemTypes:["Post"],sortFunction:function(e,t){return e.time_created.localeCompare(t.time_created)}}))}},{menuItem:"Group Challenges",render:function(){return a.a.createElement(d.a.Pane,{basic:!0,className:"u-border--0 u-padding--0 u-margin-top--3"},a.a.createElement("div",null,e.createGroupChallenge(e.state.isOwned)),a.a.createElement(er,{ids:e.getGroupAttribute("challenges"),noObjectsMessage:"No challenges yet!",sortFuntion:function(e,t){return e.endTime.localeCompare(t.endTime)}}))}},{menuItem:"Group Chat",render:function(){return a.a.createElement(d.a.Pane,{basic:!0,className:"u-border--0 u-padding--0 u-margin-top--3"},a.a.createElement(Qt,{board:e.state.groupID}))}}];return this.getGroupAttribute("id")?a.a.createElement(I.a,{open:this.props.open,onClose:this.props.onClose.bind(this)},a.a.createElement(f.a,{className:"close",onClick:function(){return e.props.onClose()}}),a.a.createElement(I.a.Header,{align:"center"},this.getGroupAttribute("title")),a.a.createElement(I.a.Content,null,this.editButton(this.state.isEditing),this.createCorrectSettingsButton(this.state.isOwned,this.state.isJoined,this.state.groupID,this.state.isLoading),a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement(R.a,{style:{width:"300px",height:"300px",minWidth:"100px",minHeight:"100px"},circular:!0,src:this.getGroupAttribute("groupImage"),size:"large",centered:!0}))),a.a.createElement(h.a,{centered:!0},a.a.createElement("strong",null,'"',this.getGroupAttribute("motto"),'"')),a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{floated:"left",primary:!0,className:"u-button--flat u-padding-left--1"},a.a.createElement(f.a,{name:"users"})," Owners")},a.a.createElement(I.a.Content,null,a.a.createElement(er,{ids:this.getGroupAttribute("owners"),noObjectsMessage:"No owners yet!"}))),a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{floated:"right",primary:!0,className:"u-button--flat u-padding-left--1"},a.a.createElement(f.a,{name:"users"})," Members")},a.a.createElement(I.a.Content,null,a.a.createElement(er,{ids:this.getGroupAttribute("members"),noObjectsMessage:"No members yet!"})))),this.createCorrectButton(t)):a.a.createElement(I.a,{open:this.props.open,onClose:this.props.onClose.bind(this)},a.a.createElement(U.a,{icon:!0},a.a.createElement(f.a,{name:"spinner",size:"small",loading:!0}),a.a.createElement(U.a.Content,null,a.a.createElement(U.a.Header,null,"Loading..."))))}}]),t}(r.Component),Un=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Ve(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchGroup:function(t,n){e(tt(t,n))},forceFetchGroup:function(t,n){e(function(e,t,n,r){return Pe(e,"Group",t,n,r)}(t,n))}}})(Nn),Rn=["id","item_type","title","description","groupImagePath","motto","restriction","members","owners","time_created","access","challenges"],Ln=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Ve(t,n))}}})(function(e){var t,n=Object(r.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],l=function(t){return xt(e.group,t)};return e.group?a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return i||c(!0)}},a.a.createElement(b.a.Content,{textAlign:"center"},a.a.createElement(b.a.Header,{textAlign:"center",style:{marginBottom:"40px"}},l("title")),a.a.createElement("div",{className:"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4",style:{backgroundImage:"url(".concat(l("groupImage"),")")}}),a.a.createElement(b.a.Meta,{textAlign:"center"},'"',l("motto"),'"'),a.a.createElement(Un,{open:i,onClose:function(){return c(!1)},groupID:l("id")})),a.a.createElement(b.a.Content,{extra:!0},a.a.createElement(b.a.Meta,{textAlign:"center"},a.a.createElement(p.a,{disabled:!0,className:"u-button--flat u-padding-left--1",floated:"left"},a.a.createElement(f.a,{name:"user"}),(t="name",Mt(l("owners")[0],t,e.cache))),a.a.createElement(p.a,{disabled:!0,className:"u-button--flat u-padding-left--1",floated:"right"},a.a.createElement(f.a,{name:"users"}),l("membersLength")," Members")))):a.a.createElement(A.a,null,a.a.createElement(Ft,null))}),kn={fetchList:["id","item_type","title","description","restriction","members","owners","time_created","access"],ifSubscribe:!1},jn={fetchList:["id","title","time","time_created","owner","members","capacity","difficulty","restriction","access"],ifSubscribe:!1},Fn=["id","time_created","by","item_type","postType","about","access","description","videoPaths","picturePaths"],wn=Object(u.b)(function(e){return{cache:e.cache}})(function(e){var t,n=Object(r.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),d=(u[0],u[1],function(t){return xt(e.post,t)});return e.post&&(t="name",Mt(d("by"),t,e.cache))?a.a.createElement(b.a,{color:"gold",fluid:!0,raised:!0,style:{border:"2px solid rebeccapurple"}},a.a.createElement(b.a.Content,null,a.a.createElement("div",{align:"center"},function(e,t){if(e&&e.length&&("new"===e.substr(0,3)&&(e=B.a[e.substring(3,e.length)]),e)){if("Client"===e)return a.a.createElement(bn,{client:t});if("Trainer"===e)return a.a.createElement(En,{trainer:t});if("Gym"===e);else if("Workout"===e);else if("Review"===e);else if("Event"===e);else{if("Challenge"===e)return a.a.createElement(mn,{challenge:t});if("Invite"===e);else if("Post"===e)return a.a.createElement(gn,{postID:t.id})}}return a.a.createElement("div",null)}(d("postType"),function(){return t=d("about"),n=e.cache,t&&n?n[He(Object(B.b)(t))][t]:null;var t,n}()))),a.a.createElement(b.a.Content,{extra:!0,onClick:function(){return i||c(!0)},style:{color:"purple"}},a.a.createElement("div",{align:"center"},gt(d("time_created")).substr(5,12)),a.a.createElement(sn,{open:i,onClose:function(){return c(!1)},postID:e.post.id}))):a.a.createElement(b.a,{color:"gold",fluid:!0,raised:!0},a.a.createElement(Ft,{loading:!0}))}),Qn=["id","item_type","expirationDate","codes","links"],Mn=Object(u.b)(function(e){return{cache:e.cache,user:e.user}})(function(e){var t,n=Object(r.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),d=u[0],m=u[1],f=function(t){return Mt(e.product.deal,t,e.cache)};return a.a.createElement(h.a,{rows:5},a.a.createElement(h.a.Row,null,"Product Name: ",f("productName")),a.a.createElement(h.a.Row,null,"Sponsor Name: ",(t="name",Mt(f("sponsor"),t,e.cache))),a.a.createElement(h.a.Row,null,a.a.createElement(R.a,{src:f("productImage")})),a.a.createElement(h.a.Row,null,"Product Credit Price: ",f("productCreditPrice")),a.a.createElement(h.a.Row,null,"ID: ",e.product.id,a.a.createElement(p.a,{primary:!0,onClick:function(){return c(function(e){return!e})}},i?"Hide Codes":"View Codes"),i?a.a.createElement(h.a,{rows:e.product.codes.length},x.a.times(e.product.codes.length,function(t){return a.a.createElement(h.a.Row,null,a.a.createElement(Yt.a,null,e.product.codes[t]))})):null,a.a.createElement(p.a,{primary:!0,onClick:function(){return m(function(e){return!e})}},d?"Hide Links":"View Links"),d?a.a.createElement(h.a,{rows:e.product.links.length},x.a.times(e.product.links.length,function(t){return a.a.createElement(h.a.Row,null,a.a.createElement(Yt.a,null,e.product.links[t]))})):null))}),Hn=[],xn=Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchSponsor:function(t,n,r,a){e(nt(t,n,r,a))},fetchDeal:function(t,n,r,a){e(rt(t,n,r,a))}}})(function(e){var t=function(t){return n=e.sponsorID,r=t,a=e.cache,Ht(n,r,"sponsors",a);var n,r,a};return Object(r.useEffect)(function(){e.open&&e.sponsorID&&e.fetchSponsor(e.sponsorID,Hn,function(t){if(t&&t.deals)for(var n=0;n<t.deals.length;n++)e.fetchDeal(t.deals[n],Wn.fetchList)})},[e.open]),a.a.createElement(I.a,{open:e.open,onClose:e.onClose,style:{background:"white"}},a.a.createElement(f.a,{className:"close",onClick:e.onClose}),a.a.createElement(I.a.Header,{style:{color:"purple",marginTop:"20px",marginBottom:"20px",background:"white"}},a.a.createElement(h.a,{centered:!0},t("name"))),a.a.createElement(I.a.Content,{style:{background:"white"}},a.a.createElement(Xt,{userID:e.sponsorID,profileImage:t("profileImage"),profileImages:t("profileImages"),editable:!1,style:{marginTop:"20px"}}),a.a.createElement(Yt.a,{style:{background:"white",color:"purple"}},"Deals:"),a.a.createElement(er,{ids:t("deals"),noObjectsMessage:"No Deals Yet...",acceptedItemTypes:["Deal"],randomized:!1})))}),Bn=n(89),Gn=n.n(Bn),_n=["id","item_type"],Yn=["id","item_type"],Jn=function(e){if(e)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"This Deal is Deleted!"))},zn=function(e,t,n,r,a){e&&t&&(n(!0),ht.buyDeal(e,e,t,function(){M.h&&console.log("Successfully bought deal"),n(!1)},function(e){n(!1),r(e)},a))},qn=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchDeal:function(t,n,r,a){e(rt(t,n,r,a))},fetchSponsor:function(t,n,r,a){e(nt(t,n,r,a))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),u=Object(s.a)(c,2),d=(u[0],u[1]),m=Object(r.useState)(!1),g=Object(s.a)(m,2),b=g[0],E=g[1],A=Object(r.useState)(!1),O=Object(s.a)(A,2),T=O[0],v=O[1],C=function(t){return Mt(e.dealID,t,e.cache)},y=function(t){return Mt(C("sponsor"),t,e.cache)};return Object(r.useEffect)(function(){return e.dealID&&(i(!1),d(null),E(!1),v(!1),e.fetchDeal(e.dealID,_n,function(t){t?t.sponsor&&e.fetchSponsor(t.sponsor,Yn):v(!0)},function(e){})),function(){}},[e.dealID]),C("id")?a.a.createElement("div",null,a.a.createElement(l.a,{medium:!0,up:!0},a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0,style:{background:"#FFFFFF"}},a.a.createElement(f.a,{className:"close",onClick:function(){return e.onClose()}}),a.a.createElement(I.a.Header,{align:"center",style:{marginTop:"10px",background:"white",color:"purple"}},a.a.createElement("div",null,C("productName"))),a.a.createElement(I.a.Content,{align:"center",style:{background:"white"}},a.a.createElement(h.a,{centered:!0,columns:"equal"},a.a.createElement(h.a.Column,{floated:"left"},a.a.createElement(R.a,{src:Gn.a,size:"mini",style:{color:"purple",marginLeft:"30px"}}),a.a.createElement(h.a,{style:{color:"purple",marginLeft:"70px",marginTop:"-30px"}},C("productCreditPrice")/1e3)),a.a.createElement(h.a.Column,{style:{color:"purple"}},a.a.createElement(xn,{open:b,onClose:function(){return E(!1)},sponsorID:y("id")}),a.a.createElement(R.a,{src:C("productImage"),centered:!0,style:{width:"200px",height:"200px"},rounded:!0})),a.a.createElement(h.a.Column,{style:{color:"purple"}},a.a.createElement(f.a.Group,{size:"large",style:{marginLeft:"80px"},onClick:function(){return E(!0)}},a.a.createElement(f.a,{name:"user circle outline",color:"purple"})),a.a.createElement("div",{onClick:function(){return E(!0)},style:{marginLeft:"110px",marginTop:"-20px"}},y("name")))),a.a.createElement(I.a.Description,null,a.a.createElement(p.a,{primary:!0,onClick:function(){return zn(e.user.id,C("id"),i,d,e)},style:{marginTop:"10px"}},"Buy")),a.a.createElement(Ft,{loading:o}))),Jn(T)),a.a.createElement(l.a,{medium:!0,down:!0},a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0,style:{background:"#FFFFFF"}},a.a.createElement(f.a,{className:"close",onClick:function(){return e.onClose()}}),a.a.createElement(I.a.Header,{align:"center",style:{marginTop:"10px",background:"white",color:"purple"}},a.a.createElement("div",null,C("productName"))),a.a.createElement(I.a.Content,{align:"center",style:{background:"white"}},a.a.createElement(h.a,{centered:!0,columns:"equal"},a.a.createElement(h.a.Column,{floated:"left"},a.a.createElement(R.a,{src:Gn.a,size:"mini"}),a.a.createElement(h.a,{style:{color:"purple",marginLeft:"40px",marginTop:"-30px"}},C("productCreditPrice")/1e3)),a.a.createElement(h.a.Column,{style:{color:"purple"}},a.a.createElement(xn,{open:b,onClose:function(){return E(!1)},sponsorID:y("id")}),a.a.createElement(R.a,{src:C("productImage"),centered:!0,style:{width:"200px",height:"200px"},rounded:!0})),a.a.createElement(h.a.Column,{style:{color:"purple"}},a.a.createElement(f.a.Group,{size:"large",style:{marginLeft:"5px"},onClick:function(){return E(!0)}},a.a.createElement(f.a,{name:"user circle outline",color:"purple"})),a.a.createElement("div",{onClick:function(){return E(!0)},style:{marginLeft:"35px",marginTop:"-20px"}},y("name")))),a.a.createElement(I.a.Description,null,a.a.createElement(p.a,{primary:!0,onClick:function(){return zn(e.user.id,C("id"),i,d,e)},style:{marginTop:"10px"}},"Buy")),a.a.createElement(Ft,{loading:o}))),Jn(T))):a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0},a.a.createElement(Ft,{loading:!0}))}),Wn={fetchList:["id","sponsor","productImagePath","productImagePaths","productName","productCreditPrice"],ifSubscribe:!1},Vn=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(t){return xt(e.deal,t)};return e.deal?[a.a.createElement(l.a,{medium:!0,up:!0},a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return o||i(!0)},style:{border:"2px solid rebeccapurple"}},a.a.createElement(b.a.Content,null,a.a.createElement(r.Fragment,null,a.a.createElement(b.a.Header,null,a.a.createElement(h.a,{columns:3},a.a.createElement(h.a.Column,{width:1},a.a.createElement(R.a,{src:Gn.a,size:"mini"})),a.a.createElement(h.a.Column,{style:{color:"purple",marginTop:"5px",marginLeft:"-25px"}},c("productCreditPrice")/1e3),a.a.createElement(h.a.Column,{style:{color:"purple"},width:1,floated:"right"},0===c("productsLength")?"Sold Out!":"Only ".concat(c("productsLength")," left!"))),a.a.createElement("div",{className:"u-flex u-flex-justify--center u-margin-bottom--2"},a.a.createElement($t,{profileImage:c("productImage"),type:"Large"}))),a.a.createElement(b.a.Header,{textAlign:"center",style:{color:"purple"}},c("productName")))),a.a.createElement(qn,{open:o,onClose:function(){return i(!1)},dealID:e.deal.id}))),a.a.createElement(l.a,{medium:!0,down:!0},a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return o||i(!0)},style:{border:"2px solid rebeccapurple"}},a.a.createElement(b.a.Content,null,a.a.createElement(r.Fragment,null,a.a.createElement(b.a.Header,null,a.a.createElement(h.a,{columns:3},a.a.createElement(h.a.Column,{style:{marginLeft:"0px",width:"70px"},floated:"left"},a.a.createElement(R.a,{src:Gn.a,size:"mini"})),a.a.createElement(h.a.Column,{style:{color:"purple",marginTop:"5px",marginLeft:"-150px"}},c("productCreditPrice")/1e3),a.a.createElement(h.a.Column,{style:{color:"purple",marginRight:"40px",marginTop:"-5px"},width:1,floated:"right"},0===c("productsLength")?"Sold Out!":"Only ".concat(c("productsLength")," left!"))),a.a.createElement("div",{className:"u-flex u-flex-justify--center u-margin-bottom--2"},a.a.createElement($t,{profileImage:c("productImage"),type:"Large"}))),a.a.createElement(b.a.Header,{textAlign:"center",style:{color:"purple"}},c("productName")))),a.a.createElement(qn,{open:o,onClose:function(){return i(!1)},dealID:e.deal.id})))]:a.a.createElement(A.a,null,a.a.createElement(Ft,null))},Xn=function(e,t){return Object(B.c)(t.item_type,a.a.createElement(an,{rank:e,client:t}),a.a.createElement(cn,{rank:e,trainer:t}),null,null,null,a.a.createElement(ar,{event:t}),a.a.createElement(kr,{challenge:t}),null,a.a.createElement(wn,{postID:t.id}),null,null,null,null,null,null,a.a.createElement(Vn,{deal:t}),a.a.createElement(Mn,{product:t}),"Get database object list object not implemented for item type")},Zn=function(e,t,n,r,a,o,i,c){i(!0);var l=function(l){if(e.hasOwnProperty(l)){var u=e[l],s=t[l],d=Object(B.c)(l,rn,on,null,null,null,ar.fetchVariableList,Ur.fetchList,null,Fn,null,null,null,null,null,null,Wn.fetchList,Qn,"Get variable list from item type not implemented!");u.length>s?c(u,l,d,s,5,function(e){for(var t=0;t<e.length;t++)Kn(e[t],n,r,a,i);o(function(t){return Object(F.a)({},t,Object(g.a)({},l,t[l]+e.length))}),i(!1)}):i(!1)}};for(var u in e)l(u)},Kn=function(e,t,n,r,a){e&&e.id&&(r(function(r){var a=[].concat(Object(v.a)(r),[e]);return t&&Object(fe.g)(a),n&&a.sort(n),a}),a(!1))},$n=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)({}),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)({}),p=Object(s.a)(E,2),A=p[0],O=p[1],T=Object(r.useState)([]),h=Object(s.a)(T,2),I=h[0],C=h[1];Object(r.useEffect)(function(){if(e.ids&&JSON.stringify(e.ids)!==JSON.stringify(u)){i(!0);var t=Object(v.a)(e.ids);!0===e.randomized&&Object(fe.g)(t),d(t),C([]);for(var n={},r={},a=0;a<t.length;a++){var o=t[a],c=Object(B.b)(o);e.acceptedItemTypes&&!e.acceptedItemTypes.includes(c)||(n[c]?n[c].push(o):(n[c]=[o],r[c]=0))}b(n),O(r),Zn(n,r,!0===e.randomized,e.sortFunction,C,O,i,e.fetchItems)}},[e.ids]);return o?a.a.createElement(Ft,null):u&&u.length>0?a.a.createElement("div",null,a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){var r=n.calculations;console.log(r),r.bottomVisible&&Zn(g,A,!0===e.randomized,e.sortFunction,C,O,i,e.fetchItems)},250)},a.a.createElement(N.a,{relaxed:!0,verticalAlign:"middle"},function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(a.a.createElement(N.a.Item,{key:n},Xn(parseInt(n)+1,e[n])));return t}(I),a.a.createElement(Ft,{loading:function(){for(var e in g)if(g.hasOwnProperty(e)&&g[e].length!==A[e])return!0;return!1}()})))):a.a.createElement(U.a,{style:{background:"white",color:"purple"}},e.noObjectsMessage)};$n.defaultProps={randomized:!1};var er=Object(u.b)(function(){return{}},function(e){return{fetchItems:function(t,n,r,a,o,i,c){e(Ue(t,n,r,a,o,i,c))}}})($n),tr=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).state={isOwned:!1,isJoined:!1,eventID:null,clientModalOpen:!1,completeModalOpen:!1,isLeaveLoading:!1,isDeleteLoading:!1,isJoinLoading:!1,joinRequestSent:!1,canCallChecks:!0},n.forceUpdate=function(e){at(e,["owner","time","capacity","address","title","ifChallenge","description","difficulty","memberIDs","access"])},n.handleJoinEventButton=n.handleJoinEventButton.bind(Object(en.a)(Object(en.a)(n))),n.handleLeaveEventButton=n.handleLeaveEventButton.bind(Object(en.a)(Object(en.a)(n))),n.handleDeleteEventButton=n.handleDeleteEventButton.bind(Object(en.a)(Object(en.a)(n))),n.handleLeave=n.handleLeave.bind(Object(en.a)(Object(en.a)(n))),n.handleJoin=n.handleJoin.bind(Object(en.a)(Object(en.a)(n))),n.handleDelete=n.handleDelete.bind(Object(en.a)(Object(en.a)(n))),n.isOwned=n.isOwned.bind(Object(en.a)(Object(en.a)(n))),n.isJoined=n.isJoined.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.isJoined(),this.isOwned()}},{key:"componentWillReceiveProps",value:function(e){e.eventID&&!this.state.eventID&&this.setState({eventID:e.eventID});var t=this.getEventAttribute("members");if(!this.props.open&&e.open&&e.eventID&&t&&t.length>0)for(var n=0;n<t.length;n++)this.props.fetchClient(t[n],["id","name","gender","birthday","profileImagePath"])}},{key:"getEventAttribute",value:function(e){if(!this.state.eventID)return null;var t=this.props.cache.events[this.state.eventID];return t?"Length"===e.substr(e.length-6)?t[e=e.substr(0,e.length-6)]&&t[e].length?t[e].length:0:t[e]:void 0}},{key:"getOwnerName",value:function(){var e=this.getEventAttribute("owner");return e&&this.props.cache.clients[e]?this.props.cache.clients[e].name:null}},{key:"convertFromISO",value:function(e){var t=String(e),n=String(t).split("_"),r=n[0],a=n[1],o=new Date(r),i=new Date(a),c=o.getHours()>12?o.getHours()-12:o.getHours(),l=i.getHours()>12?i.getHours()-12:i.getHours(),u=1===o.getMinutes().toString().length?"0"+o.getMinutes():o.getMinutes(),s=1===c.toString().length?"0"+c:c,d=o.getHours()>=12?"PM":"AM",m=1===i.getMinutes().toString().length?"0"+i.getMinutes():i.getMinutes(),f=1===l.toString().length?"0"+l:l,g=i.getHours()>=12?"PM":"AM";return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][o.getDay()]+", "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()]+" "+o.getDate()+", "+o.getFullYear()+" "+s+":"+u+d+" - "+f+":"+m+g}},{key:"handleDeleteEventButton",value:function(){var e=this;this.setState({isLoading:!0}),tn.delete(this.props.user.id,this.getEventAttribute("id"),function(t){e.forceUpdate(t.id),e.setState({isDeleteLoading:!1,event:null,isOwned:!1,isJoined:!1})},function(t){e.setState({isDeleteLoading:!1,error:t})})}},{key:"handleLeaveEventButton",value:function(){var e=this;this.setState({isLoading:!0}),ht.removeEvent(this.props.user.id,this.props.user.id,this.getEventAttribute("id"),function(t){e.forceUpdate(t.id),e.setState({isLeaveLoading:!1,isJoined:!1})},function(t){e.setState({isLeaveLoading:!1,error:t})})}},{key:"handleJoinEventButton",value:function(){var e=this;this.setState({isLoading:!0}),ht.addEvent(this.props.user.id,this.props.user.id,this.getEventAttribute("id"),null,function(t){e.forceUpdate(t.id),e.setState({isJoinLoading:!1,isJoined:!0})},function(t){e.setState({isJoinLoading:!1,error:t})})}},{key:"isJoined",value:function(){var e=this.getEventAttribute("members");if(e){var t=e.includes(this.props.user.id);this.setState({isJoined:t})}else this.setState({isJoined:!1})}},{key:"isOwned",value:function(){this.setState({isOwned:this.props.user.id===this.getEventAttribute("owner")})}},{key:"handleLeave",value:function(){this.setState({isLeaveLoading:!0}),this.handleLeaveEventButton()}},{key:"handleJoin",value:function(){this.setState({isJoinLoading:!0}),this.handleJoinEventButton()}},{key:"handleDelete",value:function(){this.setState({isDeleteLoading:!0}),this.handleDeleteEventButton()}},{key:"openClientModal",value:function(){this.setState({clientModalOpen:!0})}},{key:"closeClientModal",value:function(){this.setState({clientModalOpen:!1})}},{key:"openCompleteModal",value:function(){this.setState({completeModalOpen:!0})}},{key:"closeCompleteModal",value:function(){this.setState({completeModalOpen:!1})}},{key:"displayError",value:function(){if("Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!"===this.state.error)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,"That challenge is already filled up!"))}},{key:"render",value:function(){if(!this.getEventAttribute("id"))return null;return this.state.canCallChecks&&(this.isJoined(),this.isOwned(),this.setState({canCallChecks:!1})),a.a.createElement(I.a,{open:this.props.open,onClose:this.props.onClose.bind(this)},a.a.createElement(I.a.Header,null,this.getEventAttribute("title")),a.a.createElement(I.a.Content,null,a.a.createElement(I.a.Description,null,a.a.createElement(Zt,{open:this.state.clientModalOpen,onClose:this.closeClientModal.bind(this),clientID:this.getEventAttribute("owner")}),a.a.createElement(dr,{open:this.state.completeModalOpen,onClose:this.closeCompleteModal.bind(this),challengeID:this.getEventAttribute("id")}),a.a.createElement(N.a,{relaxed:!0},a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"user"}),a.a.createElement(N.a.Content,null,"Created by ",a.a.createElement(p.a,{className:"u-button--flat",onClick:this.openClientModal.bind(this)},this.getOwnerName()))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"calendar"}),a.a.createElement(N.a.Content,null,this.convertFromISO(this.getEventAttribute("time")))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"bullseye"}),a.a.createElement(N.a.Content,null,this.getEventAttribute("address"))),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"trophy"}),a.a.createElement(N.a.Content,null)),a.a.createElement(N.a.Item,null,a.a.createElement(N.a.Icon,{name:"users"}),a.a.createElement(N.a.Content,null,a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{className:"u-button--flat u-padding-left--1"},"Members"),closeIcon:!0},a.a.createElement(I.a.Content,null,a.a.createElement(er,{ids:this.getEventAttribute("members"),noObjectsMessage:"No members yet!"})))))),(e=this.state.isOwned,t=this.state.isJoined,n=this.getEventAttribute("ifCompleted"),r=this.getEventAttribute("ifChallenge"),o=this.handleJoin,i=this.handleLeave,c=this.handleDelete,l=this.openCompleteModal.bind(this),u=this.state.isLeaveLoading,s=this.state.isJoinLoading,d=this.state.isDeleteLoading,this.props.user.username,this.getEventAttribute("title"),this.props.user.id,"true"===n?a.a.createElement(p.a,{disabled:!0,fluid:!0,inverted:!0,size:"large"},"This Event is completed"):e?r?a.a.createElement("div",null,a.a.createElement(h.a,{columns:2},a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{loading:d,fluid:!0,negative:!0,size:"large",disabled:d,onClick:c},"Delete")),a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{primary:!0,fluid:!0,size:"large",onClick:l},"Select Winner")))):a.a.createElement("div",null,a.a.createElement(p.a,{loading:d,fluid:!0,negative:!0,size:"large",disabled:d,onClick:c},"Delete")):t?a.a.createElement("div",null,a.a.createElement(p.a,{loading:u,fluid:!0,inverted:!0,size:"large",disabled:u,onClick:i},"Leave")):a.a.createElement(p.a,{loading:s,fluid:!0,size:"large",disabled:s,onClick:o},"Join"))),a.a.createElement("div",null,this.displayError())));var e,t,n,r,o,i,c,l,u,s,d}}]),t}(r.Component),nr=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchEvent:function(t,n){e(Ze(t,n))},forceFetchEvent:function(t,n){e(at(t,n))}}})(tr),rr=["id","title","time","time_created","owner","members","capacity","difficulty","restriction","access"],ar=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(t){return xt(e.event,t)};return e.event?a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:i.bind(!0)},a.a.createElement(b.a.Content,null,a.a.createElement(b.a.Header,{textAlign:"center"},c("title")),a.a.createElement(b.a.Meta,{textAlign:"center"},gt(c("time"))),a.a.createElement(nr,{open:o,onClose:i.bind(!1),eventID:e.event.id})),a.a.createElement(b.a.Content,{extra:!0},a.a.createElement(b.a.Meta,null,gt(c("time_created"))),a.a.createElement(b.a.Meta,{textAlign:"center"},c("membersLength")," of ",c("capacity")," spots taken."))):a.a.createElement(A.a,null,a.a.createElement(Ft,null))},or=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={isLoading:!0,eventIDs:null,events:[],sentRequest:!1},n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.eventIDs&&this.state.eventIDs!==e.eventIDs&&this.setState({isLoading:!0,eventIDs:e.eventIDs,events:[]},function(){t.update(e)})}},{key:"update",value:function(e){for(var t=this,n=0;n<e.eventIDs.length;n++)this.props.fetchEvent(e.eventIDs[n],rr,function(e){e&&t.state.events.push(e),t.setState({isLoading:!1})})}},{key:"render",value:function(){return this.props.isLoading?a.a.createElement(Ft,null):this.state.events.length>0?a.a.createElement(N.a,{relaxed:!0,verticalAlign:"middle"},function(e,t){var n=[],r=[];for(var o in e)e.hasOwnProperty(o)&&n.push(e[o]);for(var i in t&&n.sort(t),n)!0===n.hasOwnProperty(i)&&r.push(a.a.createElement(N.a.Item,{key:i},a.a.createElement(ar,{event:n[i]})));return r}(this.state.events,this.props.sortFunction)):a.a.createElement(U.a,null,this.props.noEventsMessage)}}]),t}(r.Component),ir=Object(u.b)(function(){return{}},function(e){return{fetchEvent:function(t,n,r){e(Ze(t,n,r))}}})(or),cr=Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchTrainer:function(t,n,r){e(Xe(t,n,r))},fetchPost:function(t,n,r){e(et(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=function(t){return n=e.trainerID,r=t,a=e.cache,Ht(n,r,"trainers",a);var n,r,a};return Object(r.useEffect)(function(){e.open&&e.trainerID&&e.fetchTrainer(e.trainerID,["posts","profileImagePath","profileImagePaths"],function(t){if(t.posts)for(var n=0;n<t.posts.length;n++)e.fetchPost(t.posts[n],Fn)})},[e.open]),a.a.createElement(I.a,{open:e.open,onClose:e.onClose},a.a.createElement(f.a,{className:"close",onClick:e.onClose}),a.a.createElement(I.a.Header,{style:{marginTop:"20px",marginBottom:"20px"}},a.a.createElement(h.a,{centered:!0},m("name"))),a.a.createElement(I.a.Content,null,a.a.createElement(Xt,{userID:e.trainerID,profileImage:m("profileImage"),profileImages:m("profileImages"),editable:!1,style:{marginTop:"20px"}}),a.a.createElement(h.a,{centered:!0,columns:2},a.a.createElement(h.a.Column,null,a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,null,a.a.createElement(p.a,{floated:"left",primary:!0,circular:!0,icon:!0,size:"massive",onClick:function(){return i(!0)}},a.a.createElement(f.a,{name:"trophy"}))),a.a.createElement(h.a.Row,{style:{marginTop:"-20px",marginBottom:"20px"}},a.a.createElement(p.a,{floated:"left",className:"u-button--flat u-padding-left--1"},"Current Challenges")),a.a.createElement(I.a,{basic:!0,size:"mini",open:o,onClose:function(){return i(!1)},closeIcon:!0},a.a.createElement(I.a.Content,null,a.a.createElement(Fr,{challengeIDs:m("ownedChallenges"),noChallengesMessage:"No owned challenges yet!"}))))),a.a.createElement(h.a.Column,null,a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,null,a.a.createElement(p.a,{primary:!0,circular:!0,icon:!0,size:"massive",onClick:function(){return d(!0)}},a.a.createElement(f.a,{name:"checked calendar"}))),a.a.createElement(h.a.Row,{style:{marginTop:"-20px",marginBottom:"20px"}},a.a.createElement(p.a,{className:"u-button--flat u-padding-left--1"},"Scheduled Events")),a.a.createElement(I.a,{basic:!0,size:"mini",open:u,onClose:function(){return d(!1)},closeIcon:!0},a.a.createElement(I.a.Content,null,a.a.createElement(ir,{eventIDs:m("scheduledEvents"),noEventsMessage:"No scheduled events yet!"})))))),a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{primary:!0,fluid:!0},a.a.createElement(f.a,{name:"wechat"})," Trainer Chat")},a.a.createElement(Qt,{board:te([m("id"),e.user.id])}))))}),lr=["id","item_type","username","gender","birthday","name","friends","challengesWon","scheduledEvents","profileImagePath","friendRequests"],ur=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(t){return xt(e.user,t)};return e.user?a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return i(!0)}},a.a.createElement(b.a.Content,null,!e.rank&&a.a.createElement(r.Fragment,null,a.a.createElement(b.a.Header,null,a.a.createElement("div",{className:"u-flex u-flex-justify--center u-margin-bottom--2"},a.a.createElement($t,{profileImage:c("profileImage"),type:"Small"}))),a.a.createElement(b.a.Header,{textAlign:"center"},c("name"))),e.rank&&a.a.createElement(h.a,{divided:!0,verticalAlign:"middle"},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:4},a.a.createElement(Yt.a,{size:"large",textAlign:"center"},e.rank)),a.a.createElement(h.a.Column,{width:12},a.a.createElement("div",{className:"u-flex u-flex-align--center"},a.a.createElement($t,{profileImage:c("profileImage"),type:"Small"}))),a.a.createElement(h.a.Column,{textAlign:"center",width:2},c("name")+"   "),"Trainer"===c("item_type")&&a.a.createElement(h.a.Column,{textAlign:"center",width:1},a.a.createElement(Yt.a,{as:"h5",color:"purple"},"Trainer")))),function(e,t,n){return Object(B.c)(Object(B.b)(e),a.a.createElement(Zt,{open:t,onClose:function(){console.log("closing"),n(!1),console.log("closing")},clientID:e}),a.a.createElement(cr,{open:t,onClose:function(){console.log("closing"),n(!1),console.log("closing")},trainerID:e}),null,null,null,null,null,null,null,null,null,null,null,null,null,"USER CARD MODAL")}(e.user.id,o,i)),a.a.createElement(b.a.Content,{extra:!0},a.a.createElement(b.a.Meta,null,c("challengesWonLength")," challenges won"))):a.a.createElement(b.a,{fluid:!0,raised:!0},a.a.createElement("h1",null,"Loading..."))},sr=function(e,t,n,r){for(var o=[],i=function(i){o.push(a.a.createElement(b.a,{raised:!0,key:e[i]},a.a.createElement(b.a.Content,null,a.a.createElement(ur,{user:e[i]}),a.a.createElement(p.a,{primary:!0,fluid:!0,onClick:function(){return function(e,t,n,r){n&&t&&e&&(console.log(e+" "+t+" "+n),Kt.updateWinner(e,t,n,function(e){r()},function(e){M.b&&console.error("Event winner setting failed")}))}(t,n,e[i].id,r)}},"Select"))))},c=0;c<e.length;c++)i(c);return o},dr=Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{fetchChallenge:function(t,n,r,a){e(Ke(t,n,r,a))},fetchItem:function(t,n,r,a,o){e(Se(n,t,r,a,o))}}})(function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(r.useEffect)(function(){e.challengeID&&e.fetchChallenge(e.challengeID,["members"],function(t){if(t.members)for(var n=0;n<t.members.length;n++){var r=t.members[n],a=Object(B.b)(r);e.fetchItem(a,r,lr,function(e){i(function(t){return[].concat(Object(v.a)(t),[e])})})}})},[e.challengeID]),o.length>0?a.a.createElement(I.a,{centered:!0,open:e.open,onClose:function(){return e.onClose()},closeIcon:!0},a.a.createElement(I.a.Header,{className:"u-bg--bg"},"Select Winner"),a.a.createElement(I.a.Content,{className:"u-bg--bg"},a.a.createElement(b.a.Group,{itemsPerRow:2},sr(o,e.user.id,e.challengeID,e.onClose)))):a.a.createElement(I.a,{dimmer:"blurring",open:e.open,onClose:function(){return e.onClose()},closeIcon:!0},a.a.createElement(U.a,null,"No members in the challenge yet!"))}),mr=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"createSubmission",value:function(t,n,r,a,o,i,c,l,u){return e.create(t,n,a,r,o,i,c,l,u)}},{key:"updateDescription",value:function(t,n,r,a,o){return e.updateSet(t,n,"description",r,a,o)}},{key:"addPicture",value:function(t,n,r,a,o,i){if(W.putImage(a,r,function(){e.updateAdd(t,n,"picturePaths",a,o,function(e){W.delete(a),i(e)})},i),G.a.ifTesting)return e.updateAdd(t,n,"picturePaths",a)}},{key:"addVideo",value:function(t,n,r,a,o,i){if(W.putVideo(a,r,o,i,function(){e.updateAdd(t,n,"videoPaths",a,o,function(e){W.delete(a),i(e)})},i),G.a.ifTesting)return e.updateAdd(t,n,"videoPaths",a)}},{key:"removePicture",value:function(t,n,r,a,o){return e.updateRemove(t,n,"picturePaths",r,function(e){W.delete(r,function(){a&&a(e)},o)},o)}},{key:"removeVideo",value:function(t,n,r,a,o){return e.updateRemove(t,n,"videoPaths",r,function(e){W.delete(r,function(){a&&a(e)},o)},o)}},{key:"approveSubmission",value:function(t,n,r,a,o){return e.updateSet(t,n,"approved","true",function(e){o?o.addToUserAttribute&&o.addToItemAttribute?M.b&&console.error("UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!"):M.b&&console.error("NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS"):M.b&&console.error("ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE"),r&&r(e)},a)}},{key:"create",value:function(t,n,r,a,o,i,c,l,u){var s=null,d=null;o&&(s=Object.keys(o)),i&&(d=Object.keys(i));var m=0,f=0;return s&&(m=s.length),d&&(f=d.length),st.create(t,"Submission",{by:n,description:r,about:a,picturePaths:s,videoPaths:d},function(n){if(n){var r=n.data,a=m+f,s=0,d=function(){++s>=a&&c(n)},g=function(n){e.delete(t,r),l(n)};if(0===a)c(n);else{if(o)for(var b in o)o.hasOwnProperty(b)&&o[b]&&W.putImage(r+"/"+b,o[b],d,g);if(i)for(var E in i)i.hasOwnProperty(E)&&i[E]&&W.putVideo(r+"/"+E,i[E],d,g,u)}}},l)}},{key:"updateAdd",value:function(e,t,n,r,a,o){return st.updateAddToAttribute(e,t,"Submission",n,r,a,o)}},{key:"updateRemove",value:function(e,t,n,r,a,o){return st.updateRemoveFromAttribute(e,t,"Submission",n,r,a,o)}},{key:"updateSet",value:function(e,t,n,r,a,o){return st.updateSetAttribute(e,t,"Submission",n,r,a,o)}},{key:"delete",value:function(e,t,n,r){return st.delete(e,t,"Submission",n,r)}}]),e}(),fr=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).state={challengeID:null,isSubmitLoading:!1,showLoadingBar:!1,picturesLoading:!1,videosLoading:!1,pictures:[],videos:[],tempPictureURLs:[],tempVideoURLs:[],notifySubmission:!1,percent:0},n.setPercent=function(e){n.setState({percent:e})},n.handleSubmitButton=n.handleSubmitButton.bind(Object(en.a)(Object(en.a)(n))),n.setVideo=n.setVideo.bind(Object(en.a)(Object(en.a)(n))),n.displayVideo=n.displayVideo.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.setState({challengeID:this.props.challengeID})}},{key:"componentWillReceiveProps",value:function(e,t){this.props.challengeID!==e.challengeID&&this.setState({challengeID:e.challengeID})}},{key:"getChallengeAttribute",value:function(e){if(this.state.challengeID){var t=this.props.cache.events[this.state.challengeID];if(t)return t[e]}return null}},{key:"createSubmission",value:function(e,t){for(var n={},r={},a=0;a<this.state.pictures.length;a++)n["pictures/"+a]=this.state.pictures[a];for(var o=0;o<this.state.videos.length;o++)r["videos/"+o]=this.state.videos[o];console.log(JSON.stringify(n)+" vids: "+JSON.stringify(r)),mr.createSubmission(this.props.user.id,this.props.user.id,this.state.challengeID,"Task Video",n,r,e,function(e){console.error(e)},t)}},{key:"finishTaskPost",value:function(e){mr.createSubmission(this.props.user.id,this.props.user.id,this.state.challengeID,"Completed Task",{},{},e,function(e){console.error(e)})}},{key:"getPicturePaths",value:function(){var e=[];console.log("Pictures: "+this.state.pictures.length);for(var t=0;t<this.state.pictures.length;t++){var n="pictures/"+t;e.push(n),console.log("Added: "+n)}return e.length>0?e:null}},{key:"getVideoPaths",value:function(){var e=[];console.log("Videos: "+this.state.videos.length);for(var t=0;t<this.state.videos.length;t++){var n="videos/"+t;e.push(n),console.log("Added: "+n)}return e.length>0?e:null}},{key:"setVideo",value:function(e){this.state.videos.push(e.target.files[0]),this.state.tempVideoURLs.push(URL.createObjectURL(e.target.files[0])),this.setState({})}},{key:"handleSubmitButton",value:function(){var e=this;this.setState({isSubmitLoading:!0}),this.createSubmission(function(){e.setState({isSubmitLoading:!1,notifySubmission:!0})},this.setPercent)}},{key:"displaySubmission",value:function(){if(this.state.notifySubmission)return a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You submitted a video to the challenge!"))}},{key:"displayVideo",value:function(){return this.state.tempVideoURLs&&this.state.tempVideoURLs.length>0?a.a.createElement("div",null,a.a.createElement(Pt.Player,null,a.a.createElement("source",{src:this.state.tempVideoURLs[0],type:"video/mp4"}))):null}},{key:"loadingBar",value:function(){if(this.state.isSubmitLoading||this.state.showLoadingBar)return this.state.showLoadingBar||this.setState({showLoadingBar:!0}),a.a.createElement(It.a,{percent:this.state.percent,active:!0,color:"purple"})}},{key:"render",value:function(){return this.props.info.isLoading?a.a.createElement(I.a,{dimmer:"blurring",open:this.props.open,onClose:this.props.onClose.bind(this)},a.a.createElement(U.a,null,"Loading...")):a.a.createElement(I.a,{centered:!0,open:this.props.open,onClose:this.props.onClose.bind(this),closeIcon:!0,style:{background:"white"}},a.a.createElement(I.a.Content,{style:{background:"white"}},this.loadingBar(),this.displayVideo(),a.a.createElement(h.a,{centered:!0},a.a.createElement(p.a,{primary:!0,circular:!0,icon:!0,as:"label",size:"massive",htmlFor:"proPicUpload",className:"u-bg--primaryGradient",style:{marginBottom:"10px",marginTop:"20px"}},a.a.createElement(f.a,{name:"video camera"}))),a.a.createElement("input",{type:"file",accept:"video/*;capture=camcorder",id:"proPicUpload",hidden:!0,onChange:this.setVideo}),a.a.createElement("div",null,this.displaySubmission()),a.a.createElement(L.a,null),a.a.createElement(p.a,{primary:!0,floated:"right",circular:!0,icon:!0,loading:this.state.isSubmitLoading,disabled:this.state.isSubmitLoading,style:{marginBottom:"10px"},onClick:this.handleSubmitButton},a.a.createElement(f.a,{name:"send"}))))}}]),t}(r.Component),gr=Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{}})(fr),br=["id","time_created","by","item_type","about","description","videoPaths","picturePaths"],Er=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}})(function(e){return a.a.createElement(b.a,{color:"purple"},a.a.createElement(b.a.Header,{style:{marginTop:"10px",marginLeft:"10px"}},Mt(xt(e.submission,"by"),"name",e.cache)),a.a.createElement(b.a.Content,null,function(e,t,n){return t&&t.length>0?a.a.createElement(Pt.Player,{inline:!0},a.a.createElement("source",{src:t[0],type:"video/mp4"})):xt(n.submission,"description")}(xt(e.submission,"pictures"),xt(e.submission,"videos"),e)))});var pr=function(e,t,n,r){e&&e.id&&(n(function(n){var r=[].concat(Object(v.a)(n),[e]);return t&&r.sort(t),r}),r(!1))},Ar=Object(u.b)(function(){return{}},function(e){return{fetchSubmission:function(t,n,r,a){e(function(e,t,n,r){return Se(e,"Submission",t,n,r)}(t,n,r,a))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)([]),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)(0),p=Object(s.a)(E,2),A=p[0],O=p[1];return Object(r.useEffect)(function(){u&&function(e,t,n,r,a,o,i){for(var c=Math.min(e.length,n+1e7),l=n;l<c;l++)"Submission"!==Object(B.b)(e[l])?M.b&&console.error("Found non-submission: "+e[l]+" in the submission list!"):(o(!0),i(e[l],br,function(e){return pr(e,t,a,o)}));n===c&&o(!1),r(c)}(u,e.sortFunction,A,O,b,i,e.fetchSubmission)},[g]),Object(r.useEffect)(function(){e.ids&&JSON.stringify(e.ids)!==JSON.stringify(u)&&(d(e.ids),O(0),b([]))},[e.ids]),o?a.a.createElement(Ft,null):g&&g.length>0?a.a.createElement("div",null,a.a.createElement(N.a,{relaxed:!0,verticalAlign:"middle"},function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(a.a.createElement(N.a.Item,{key:n,style:{background:"white",color:"purple"}},a.a.createElement(Er,{submission:e[n]})));return t}(g))):a.a.createElement(U.a,{style:{background:"white",color:"purple"}},e.noSubmissionsMessage)}),Or=function(e,t,n,r,a,o,i,c){i(!0);var l=lr,u=function(u){if(e.hasOwnProperty(u)){var s=e[u],d=t[u];s.length>d?c(s,u,l,d,5,function(e){for(var t=0;t<e.length;t++)Tr(e[t],n,r,a,i);o(function(t){return Object(F.a)({},t,Object(g.a)({},u,t[u]+e.length))}),i(!1)}):i(!1)}};for(var s in e)u(s)},Tr=function(e,t,n,r,a){e&&e.id&&(r(function(r){var a=[].concat(Object(v.a)(r),[e]);return t&&Object(fe.g)(a),n&&a.sort(n),a}),a(!1))},hr=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)({}),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)({}),p=Object(s.a)(E,2),A=p[0],O=p[1],T=Object(r.useState)([]),h=Object(s.a)(T,2),I=h[0],C=h[1];Object(r.useEffect)(function(){if(e.userIDs&&JSON.stringify(e.userIDs)!==JSON.stringify(u)){i(!0);var t=Object(v.a)(e.userIDs);!0===e.randomized&&Object(fe.g)(t),d(t),C([]);for(var n={},r={},a=0;a<t.length;a++){var o=t[a],c=Object(B.b)(o);"Client"===c||"Trainer"===c||"Gym"===c||"Sponsor"===c?n[c]?n[c].push(o):(n[c]=[o],r[c]=0):M.b&&console.error("Found a non-user item type in a user list = "+c)}b(n),O(r),Or(n,r,!0===e.randomized,e.sortFunction,C,O,i,e.fetchItems)}},[e.ids]);return o?a.a.createElement(Ft,null):u&&u.length>0?a.a.createElement("div",null,a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){var r=n.calculations;console.log(r),r.bottomVisible&&Or(g,A,!0===e.randomized,e.sortFunction,C,O,i,e.fetchItems)},250)},a.a.createElement(N.a,{relaxed:!0,verticalAlign:"middle"},function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(a.a.createElement(N.a.Item,{key:n},a.a.createElement(ur,{rank:parseInt(n)+1,user:e[n]})));return t}(I),a.a.createElement(Ft,{loading:function(){for(var e in g)if(g.hasOwnProperty(e)&&g[e].length!==A[e])return!0;return!1}()})))):a.a.createElement(U.a,null,e.noObjectsMessage)};hr.defaultProps={randomized:!1};var Ir=Object(u.b)(function(){return{}},function(e){return{fetchItems:function(t,n,r,a,o,i,c){e(Ue(t,n,r,a,o,i,c))}}})(hr),vr=["id","item_type","title","endTime","ifCompleted","tags","time_created","capacity","members","memberRequests","prize","goal","owner","access","restriction","submissions","streaks","challengeType","streakN","streakUpdateSpanType","streakUpdateInterval"],Cr=function(e,t,n,r,a){n(!0),Kt.delete(e,t,function(e){},function(){n(!1)},a)},yr=function(e,t,n,r){n(!0),ht.removeChallenge(e,e,t,function(e){n(!1)},function(e){n(!1)},r)},Dr=function(e,t,n){return e?a.a.createElement(h.a,{columns:2,centered:!0,celled:!0},a.a.createElement(h.a.Column,null,function(e,t){if(e)return a.a.createElement(p.a,{primary:!0,fluid:!0,onClick:t},"Select Winner")}(e,t)),a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{floated:"right",primary:!0,size:"large",circular:!0,icon:!0,onClick:function(){return n(!0)},style:{}},a.a.createElement(f.a,{name:"plus"})))):a.a.createElement(h.a,null,a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{floated:"right",primary:!0,size:"large",circular:!0,icon:!0,onClick:function(){return n(!0)},style:{}},a.a.createElement(f.a,{name:"plus"}))))},Sr=function(e,t,n,o,i,c,l,u,s,f,g,b,E){var A=[{menuItem:a.a.createElement(m.a.Item,{key:0,style:{color:"purple"}},"Submissions"),render:function(){return[a.a.createElement(d.a.Pane,{basic:!0,className:"u-border--0 u-padding--0 u-margin-top--3",style:{background:"white"}},a.a.createElement(kt.a,{class:"chat",width:"100%",height:"300px"},a.a.createElement(Ar,{ids:n,noSubmissionsMessage:"No submissions yet!",sortFunction:function(e,t){return e.time_created.localeCompare(t.time_created)}})),a.a.createElement(L.a,null),Dr(c,b,g))]}},{menuItem:a.a.createElement(m.a.Item,{key:1,style:{color:"purple"}},"Challenge Chat"),render:function(){return a.a.createElement(d.a.Pane,{basic:!0,className:"u-border--0 u-padding--0 u-margin-top--3",style:{background:"white"}},a.a.createElement(Qt,{board:t}))}}];return i?a.a.createElement(p.a,{disabled:!0,fluid:!0,inverted:!0,size:"large"},"This Event is completed"):c?a.a.createElement(r.Fragment,null,a.a.createElement(L.a,{className:"u-margin-top--4",color:"purple"}),a.a.createElement(d.a,{menu:{widths:2,color:"purple"},color:"purple",panes:A,className:"u-challenge u-margin-top--2",style:{background:"white",color:"purple"}})):l?a.a.createElement(r.Fragment,null,a.a.createElement(L.a,{className:"u-margin-top--4"}),a.a.createElement(d.a,{menu:{widths:2,inverted:!0},panes:A,className:"u-challenge u-margin-top--2",style:{background:"white",color:"#ca6dff"}})):u?s?a.a.createElement("div",null,a.a.createElement(p.a,{inverted:!0,fluid:!0,size:"large",disabled:!0},"Request Sent!")):a.a.createElement("div",null,a.a.createElement(p.a,{loading:o,fluid:!0,size:"large",disabled:o,onClick:function(){return function(e,t,n,r){n(!0),dt.createChallengeRequest(e,e,t,function(){n(!1)},function(e){n(!1)},r)}(e,t,f,E)}},"Send Join Request")):a.a.createElement(p.a,{loading:o,fluid:!0,size:"large",disabled:o,onClick:function(){return function(e,t,n,r){n(!0),ht.addChallenge(e,e,t,null,function(){n(!1)},function(){n(!1)},r)}(e,t,f,E)}},"Join")},Pr=function(e){if(e)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"This Challenge is Deleted!"))};var Nr=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Ve(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchChallenge:function(t,n,r,a){e(Ke(t,n,r,a))},subscribeFetchChallenge:function(t,n,r){e(function(e,t,n,r){return Ne(e,"Challenge",t,n,r)}(t,n,r))},forceFetchChallenge:function(t,n){e(function(e,t,n,r){return Pe(e,"Challenge",t,n,r)}(t,n))},fetchStreak:function(t,n,r){e(function(e,t,n,r){return Se(e,"Streak",t,n,r)}(t,n,r))},addToUserAttribute:function(t,n){e(Ye(t,n))},addToItemAttribute:function(t,n,r){e(Ce(t,n,r))},removeFromUserAttribute:function(t,n){e(Je(t,n))},removeFromItemAttribute:function(t,n,r){e(ye(t,n,r))},removeItem:function(t,n){e(we(t,n))},clearItemQueryCache:function(t){e(Qe(t))}}})(function(e){var t,o,i=Object(r.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1],d=Object(r.useState)(null),m=Object(s.a)(d,2),g=(m[0],m[1]),b=Object(r.useState)(null),E=Object(s.a)(b,2),A=(E[0],E[1]),O=Object(r.useState)(!1),v=Object(s.a)(O,2),C=v[0],y=v[1],D=Object(r.useState)(!1),S=Object(s.a)(D,2),P=S[0],N=S[1],L=Object(r.useState)(!1),k=Object(s.a)(L,2),j=(k[0],k[1]),F=Object(r.useState)(!1),w=Object(s.a)(F,2),Q=w[0],H=w[1],x=Object(r.useState)(!1),G=Object(s.a)(x,2),_=G[0],Y=G[1],J=Object(r.useState)(!1),z=Object(s.a)(J,2),q=z[0],W=z[1],V=Object(r.useState)(!1),X=Object(s.a)(V,2),Z=X[0],K=X[1],$=Object(r.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(r.useState)(!1),ae=Object(s.a)(re,2),oe=ae[0],ie=ae[1],ce=Object(r.useState)(!1),le=Object(s.a)(ce,2),ue=(le[0],le[1]),se=function(t){return Mt(e.challengeID,t,e.cache)};return Object(r.useEffect)(function(){return e.challengeID&&(g(null),A(null),y(!1),N(!1),j(!1),H(!1),Y(!1),W(!1),K(!1),ne(!1),ie(!1),ue(!1),e.fetchChallenge(e.challengeID,vr,function(t){if(t){if(t.owner){t.owner===e.user.id&&y(!0);var n=Object(B.b)(t.owner);"Client"===n?e.fetchClient(t.owner,["id","name","profileImagePath","profileImagePaths"]):"Trainer"===n&&e.fetchTrainer(t.owner,["id","name","profileImagePath","profileImagePaths"])}if(t.members&&j(t.members.includes(e.user.id)),t.memberRequests&&N(t.memberRequests.includes(e.user.id)),t.restriction&&Y("invite"===t.restriction),t.completed&&H("true"===t.completed),t.challengeType&&(g(t.challengeType),"streak"===t.challengeType&&t.streaks&&e.user.streaks)){var r=Object(fe.c)(t.streaks,e.user.streaks);r&&r.length&&1===r.length?e.fetchStreak(r[0],["lastUpdated","N","bestN","currentN","updateSpanType","updateInterval","lastAttemptStarted","streakN"],function(e){A(e)}):M.b&&console.error("Could not determine which streak is for this challenge!!")}}else ie(!0)},function(e){})),function(){}},[e.challengeID,se("members")]),se("id")?a.a.createElement("div",null,a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0,style:{background:"#FFFFFF"}},a.a.createElement(f.a,{className:"close",onClick:function(){return e.onClose()}}),a.a.createElement(I.a.Header,{align:"center",style:{marginTop:"10px",background:"white",color:"purple"}},a.a.createElement("div",null,se("title")),function(e,t,n,r,o,i,c,l,u){return e?a.a.createElement(T.a,{trigger:a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"purple",style:{marginLeft:"-30px"}},a.a.createElement(f.a,{name:"cog"})),content:a.a.createElement(p.a,{loading:o,fluid:!0,negative:!0,size:"large",disabled:o,onClick:function(){return Cr(i,n,r,l,u)}},"Delete"),on:"click",position:"bottom right"}):t?a.a.createElement(T.a,{trigger:a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"purple",style:{marginLeft:"-30px"}},a.a.createElement(f.a,{name:"cog"})),content:a.a.createElement(p.a,{loading:o,fluid:!0,inverted:!0,size:"large",disabled:o,onClick:function(){return yr(i,n,r,u)}},"Leave"),on:"click",position:"bottom right"}):null}(C,!0,e.challengeID,u,l,e.user.id,0,e.onClose,e),a.a.createElement("div",null,(o=se("tags"))?1===o.length?a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[0]+"_icon.png")}):2===o.length?a.a.createElement("div",null,a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[0]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[1]+"_icon.png")})):3===o.length?a.a.createElement("div",null,a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[0]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[1]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[2]+"_icon.png")})):4===o.length?a.a.createElement("div",null,a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[0]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[1]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[2]+"_icon.png")}),a.a.createElement(R.a,{avatar:!0,src:n(72)("./"+o[3]+"_icon.png")})):void 0:null),a.a.createElement("div",null,bt(mt(t=se("endTime")))<=0?"Challenge Completed":1===bt(mt(t))?bt(mt(t))+" Day Left":bt(mt(t))+" Days Left")),a.a.createElement(I.a.Content,{align:"center",style:{background:"white"}},a.a.createElement(h.a,{centered:!0,columns:"equal"},a.a.createElement(h.a.Row,{style:{color:"purple"}},a.a.createElement(f.a.Group,{size:"large"},a.a.createElement(f.a,{name:"bullseye",color:"purple"}))," ",se("goal")),a.a.createElement(h.a.Row,{style:{color:"purple"}},a.a.createElement(f.a.Group,{size:"large"},a.a.createElement(f.a,{name:"trophy",color:"purple"}))," ",se("prize")),a.a.createElement(h.a.Row,null,a.a.createElement(I.a,{trigger:a.a.createElement(p.a,{style:{marginTop:"-15px",marginBottom:"20px"},floated:"right",primary:!0,className:"u-button--flat u-padding-left--1"},a.a.createElement(f.a,{name:"users",color:"purple"})," Members"),closeIcon:!0},a.a.createElement(I.a.Content,null,a.a.createElement(Ir,{userIDs:se("members"),noUsersMessage:"No members yet!",randomized:!0}))))),a.a.createElement(I.a.Description,{style:{background:"white"}},function(e,t,n){var r=Object(B.b)(e);return"Client"===r?a.a.createElement(Zt,{open:t,onClose:function(){return n(!1)},clientID:e}):"Trainer"===r?a.a.createElement(cr,{open:t,onClose:function(){return n(!1)},trainerID:e}):null}(se("owner"),q,W),a.a.createElement(dr,{open:Z,onClose:function(){return K(!1)},challengeID:e.challengeID}),a.a.createElement(gr,{open:te,onClose:function(){return ne(!1)},challengeID:e.challengeID}),Sr(e.user.id,e.challengeID,se("submissions"),l,Q,C,!0,_,P,u,ne,K,e)),a.a.createElement("div",null,function(e){if("Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!"===e)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,"That challenge is already filled up!"))}(e.info.error),Pr(oe)))),Pr(oe)):a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0},a.a.createElement(Ft,{loading:!0}))}),Ur={fetchList:["id","item_type","title","endTime","ifCompleted","tags","difficulty","time_created","capacity","members","prize","goal","owner","access","restriction","submissions"],ifSubscribe:!1},Rr={Performance:n(379),Strength:n(380),Endurance:n(377),HIIT:n(378)},Lr=function(e){return bt(mt(e))<=0?"Challenge Completed":1===bt(mt(e))?bt(mt(e))+" Day Left":bt(mt(e))+" Days Left"},kr=function(e){var t,n=Object(r.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],l=function(t){return xt(e.challenge,t)};return e.challenge?a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return i||c(!0)}},a.a.createElement(b.a.Content,{textAlign:"center"},a.a.createElement(b.a.Header,{textAlign:"center",style:{color:"purple"}},l("title")),a.a.createElement(b.a.Meta,{textAlign:"center",style:{color:"#D4AF37"}},Lr(l("endTime"))),(t=l("tags"))?1===t.length?a.a.createElement(R.a,{size:"small",src:Rr[t[0]]}):2===t.length?a.a.createElement("div",null,a.a.createElement(R.a,{size:"tiny",src:Rr[t[0]]}),a.a.createElement(R.a,{size:"tiny",src:Rr[t[1]]})):3===t.length?a.a.createElement("div",null,a.a.createElement(R.a,{avatar:!0,src:Rr[t[0]]}),a.a.createElement(R.a,{avatar:!0,src:Rr[t[1]]}),a.a.createElement(R.a,{avatar:!0,src:Rr[t[2]]})):4===t.length?a.a.createElement("div",null,a.a.createElement(R.a,{avatar:!0,src:Rr[t[0]]}),a.a.createElement(R.a,{avatar:!0,src:Rr[t[1]]}),a.a.createElement(R.a,{avatar:!0,src:Rr[t[2]]}),a.a.createElement(R.a,{avatar:!0,src:Rr[t[3]]})):void 0:null,a.a.createElement(Nr,{open:i,onClose:function(){return c(!1)},challengeID:l("id"),daysLeft:Lr()})),a.a.createElement(b.a.Content,{extra:!0},a.a.createElement(b.a.Meta,{textAlign:"center",style:{color:"#D4AF37"}},l("membersLength")," of ",l("capacity")," spots taken."))):a.a.createElement(U.a,{floating:!0,negative:!0,inverted:!0,color:"purple"},a.a.createElement(U.a.Header,null,"Challenge Deleted..."))},jr=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={isLoading:!0,challengeIDs:null,challenges:[],sentRequest:!1},n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.challengeIDs&&this.state.challengeIDs!==e.challengeIDs&&this.setState({isLoading:!0,challengeIDs:e.challengeIDs,challenges:[]},function(){for(var n=0;n<e.challengeIDs.length;n++)t.props.fetchChallenge(e.challengeIDs[n],["id","tags","title","goal","endTime","time_created","owner","ifCompleted","members","capacity","difficulty","access","restriction","submissions"],function(e){e&&t.state.challenges.push(e),t.setState({isLoading:!1})})})}},{key:"render",value:function(){return this.props.isLoading?a.a.createElement(Ft,null):this.state.challenges.length>0?a.a.createElement(N.a,{relaxed:!0,verticalAlign:"middle"},function(e,t){var n=Object(v.a)(e),r=[];for(var o in t&&n.sort(t),n)n.hasOwnProperty(o)&&r.push(a.a.createElement(N.a.Item,{key:o},a.a.createElement(kr,{challenge:n[o]})));return r}(this.state.challenges,this.props.sortFunction)):a.a.createElement(U.a,null,this.props.noChallengesMessage)}}]),t}(r.Component),Fr=Object(u.b)(function(){return{}},function(e){return{fetchChallenge:function(t,n,r){e(Ke(t,n,r))}}})(jr),wr=n(414),Qr=n.n(wr),Mr=function(){function e(){Object(C.a)(this,e)}return Object(y.a)(e,null,[{key:"getCurrentUser",value:function(e,t){if(G.a.ifTesting||w.Auth.currentCredentials(),G.a.ifTesting||w.Auth.currentAuthenticatedUser().then(function(t){M.h&&console.log("AUTH: Succeeded update user"),e&&e(t)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed to get current user!!!"),M.b&&console.error(e),t&&t(e)}),G.a.ifTesting)return e&&e({}),{}}},{key:"signUp",value:function(e,t,n,r,a,o){if(G.a.ifTesting||w.Auth.signUp({username:e,password:t,attributes:{name:n,email:r,gender:"unspecified",birthdate:"~undefined"}}).then(function(e){M.h&&console.log("AUTH: Succeeded sign up"),a&&a(e)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed to sign up!!!"),M.b&&console.error(e),o&&o(e)}),G.a.ifTesting)return a&&a({}),{username:e,password:t,name:n,email:r}}},{key:"confirmSignUp",value:function(e,t,n,r){if(G.a.ifTesting||w.Auth.confirmSignUp(e,t).then(function(e){M.h&&console.log("AUTH: Succeeded confirm sign up"),n&&n(e)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed to confirm sign up!!!"),M.b&&console.error(e),r&&r(e)}),G.a.ifTesting)return n&&n({}),{username:e,code:t}}},{key:"forgotPassword",value:function(e,t,n){if(G.a.ifTesting||w.Auth.forgotPassword(e).then(function(e){M.h&&console.log("AUTH: Succeeded forgot password"),t&&t(e)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed forgot password!!!"),M.b&&console.error(e),n&&n(e)}),G.a.ifTesting)return t&&t({}),{username:e}}},{key:"confirmForgotPassword",value:function(e,t,n,r,a){if(G.a.ifTesting||w.Auth.forgotPasswordSubmit(e,t,n).then(function(e){M.h&&console.log("AUTH: Succeeded confirm forgot password"),r&&r(e)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed to confirm forgot password!!!"),M.b&&console.error(e),a&&a(e)}),G.a.ifTesting)return r&&r({}),{username:e,code:t,newPassword:n}}},{key:"signIn",value:function(e,t,n,r){if(G.a.ifTesting||w.Auth.signIn(e,t).then(function(e){M.h&&console.log("AUTH: Succeeded sign in"),n&&n(e)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed sign in!!!"),M.b&&console.error(e),r&&r(e)}),G.a.ifTesting)return n&&n({}),{username:e,password:t}}},{key:"googleSignIn",value:function(t,n,r){var a=t.getAuthResponse(),o=a.id_token,i=a.expires_at,c=t.getBasicProfile();return e.federatedSignIn("google",o,i,c.getEmail(),c.getName(),"~undefined","unspecified",Qr()(o).sub,n,r)}},{key:"facebookSignIn",value:function(e,t,n,r){alert("TODO")}},{key:"federatedSignIn",value:function(e,t,n,r,a,o,i,c,l,u){var s={email:r,name:a,birthdate:o,gender:i,sub:c};if(G.a.ifTesting||w.Auth.federatedSignIn("google",{token:t,expires_at:n},s).then(function(e){M.h&&console.log("AUTH: Succeeded federated sign in"),l&&l(e,s)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed federated sign in!!!"),M.b&&console.error(e),u&&u(e)}),G.a.ifTesting)return l&&l({},s),{federation:e,token:t,expires_at:n,email:r,name:a,birthdate:o,gender:i,sub:c}}},{key:"changePassword",value:function(e,t,n,r){G.a.ifTesting||w.Auth.currentAuthenticatedUser().then(function(n){return w.Auth.changePassword(n,e,t)}).then(function(e){M.h&&console.log("User successfully changed password!"),n&&n(e)}).catch(function(e){M.b&&console.error("User failed changed password!"),M.b&&console.error(e),r&&r(e)}),G.a.ifTesting&&n&&n({})}},{key:"signOut",value:function(e,t){if(G.a.ifTesting||w.Auth.signOut({global:!0}).then(function(t){M.h&&console.log("AUTH: Succeeded sign out"),e&&e(t)}).catch(function(e){M.b&&console.error("!!!AUTH: Failed sign out!!!"),M.b&&console.error(e),t&&t(e)}),G.a.ifTesting)return e&&e({}),{}}}]),e}();function Hr(){return function(e){e(Object(k.d)()),Mr.signOut(function(){M.h&&console.log("REDUX: Successfully logged out!"),e({type:"LOG_OUT"}),e(Object(j.b)()),e(Object(k.e)())},function(t){M.b&&console.error("REDUX: Failed log out..."),e(Object(k.c)(t)),e(Object(k.e)())})}}function xr(e){return function(t,n){t(Object(k.d)()),Mr.googleSignIn(e,function(e,r){var a=r.sub,o=r.name,i=r.email;M.h&&console.log("Successfully federated sign in!"),J.getItemByFederatedID(M.a,a,["id","username","federatedID"],function(e){e?(M.h&&console.log("REDUX: Successfully logged in!"),t({type:"FEDERATED_LOG_IN"}),n().user.id!==e.id?t(We(e)):t(qe(e)),t(Object(k.e)())):(M.h&&console.log("User hasn't signed up yet! Generating a new account!"),function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var o=Math.floor(1e7*Math.random()+1);var i=t.replace(/\s+/g,"")+o;J.getItemByUsername(M.a,i,["username"],function(o){o?(M.h&&console.log("Conflicting username = "+i),a>20?r(new Error("Too many tried usernames... Try again!")):e(t,n,r,a+1)):(M.h&&console.log("Username free! Username = "+i),n(i))},function(e){M.b&&console.error("Error querying for username while getting Federated username! Error: "+JSON.stringify(e)),r(e)})}(o.replace(/\s+/g,""),function(r){ht.createFederatedUser(null,M.a,o,i,r,a,function(a){var c=a.data;e={id:c,username:r,name:o,email:i},M.h&&console.log("REDUX: Successfully signed up!"),t({type:"FEDERATED_LOG_IN"}),n().user.id!==e.id?t(We(e)):t(qe(e)),t(Object(k.e)())},function(e){M.b&&console.error("REDUX: Could not create the federated client!"),M.b&&console.error(e),t(Object(k.c)(e)),t(Object(k.e)()),Mr.signOut()})},function(e){M.b&&console.error("REDUX: Could not generate the client username!"),M.b&&console.error(e),t(Object(k.c)(e)),t(Object(k.e)()),Mr.signOut()}))},function(e){M.b&&console.error("REDUX: Could not fetch the client by federated ID!"),M.b&&console.error(e),t(Object(k.c)(e)),t(Object(k.e)()),Mr.signOut()})},function(e){M.b&&console.error("Error while federation sign in!"),M.b&&console.error(e),t(Object(k.c)(e)),t(Object(k.e)())})}}var Br=Object(u.b)(function(e){return{}},function(e){return{logOut:function(){e(Hr())}}})(function(e){return a.a.createElement(p.a,{circular:!0,primary:!0,style:{color:"white"},size:"large",onClick:function(){return e.logOut()},width:5},"Log Out")});n(1059);var Gr=Object(u.b)(function(e){return{user:e.user}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1];return e.user?a.a.createElement(b.a,{fluid:!0,raised:!0,style:{marginTop:"50px"}},a.a.createElement(b.a.Content,{textAlign:"center"},function(e,t){return e?a.a.createElement("div",null,a.a.createElement(p.a,{onClick:function(){return t(function(e){return!e})},floated:"left",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"save"})),a.a.createElement(p.a,{onClick:function(){return t(function(e){return!e})},floated:"left",circular:!0,icon:!0},a.a.createElement(f.a,{name:"cancel"}))):a.a.createElement(p.a,{onClick:function(){return t(function(e){return!e})},floated:"left",circular:!0,icon:!0,color:"purple"},a.a.createElement(f.a,{name:"edit outline"}))}(o,i),a.a.createElement(T.a,Object(g.a)({style:{marginTop:"-70px"},trigger:a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"#7F47AE"},a.a.createElement(f.a,{name:"cog"})),content:a.a.createElement(Br,null),on:"click",position:"bottom right",basic:!0},"style",{background:"white",color:"white"})),a.a.createElement(Xt,{userID:e.user.id,profileImage:e.user.profileImage,profileImagePaths:e.user.profileImagePaths,profileImages:e.user.profileImages,editable:o}),a.a.createElement(h.a,{columns:1},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,null,function(e,t){return e?a.a.createElement(E.a,{color:"white",style:{color:"white",background:"white"},defaultValue:t}):a.a.createElement(b.a.Header,{as:"h2",style:{margin:"12px 0 0",color:"purple"}},t)}(o,e.user.name),a.a.createElement(b.a.Meta,{style:{marginBottom:"20px",color:"#D4AF37"}},"Challenge Wins: ",e.user.challengesWon?e.user.challengesWon.length:0),a.a.createElement(I.a,{basic:!0,size:"mini",closeIcon:!0,trigger:a.a.createElement(p.a,{primary:!0,circular:!0,icon:!0,size:"massive"},a.a.createElement(f.a,{name:"bookmark outline"}))},a.a.createElement(I.a.Content,null,a.a.createElement(Fr,{challengeIDs:e.user.completedChallenges,noChallengesMessage:"No completed challenges yet!"})))))))):a.a.createElement(A.a,null,a.a.createElement(O.a,null))}),_r=function(e,t,n,r,a,o,i,c,l){n||(o(!0),_("Fetching Trainer Feed Query"),a(on,e,10,t,function(e){if(e.nextToken||i(!0),e.items){for(var t=function(t){var n=e.items[t];l(function(e){return[].concat(Object(v.a)(e),[n])})},n=0;n<e.items.length;n++)t(n);c(e.nextToken)}o(!1)},function(e){M.b&&console.error("Querying Groups failed!"),M.b&&console.error(e),o(!1)}))},Yr=(Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchTrainerQuery:function(t,n,r,a,o,i){e(function(e,t,n,r,a,o){return Re("Trainer",e,t,n,r,a,o)}(t,n,r,a,o,i))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)([]),p=Object(s.a)(E,2),A=p[0],O=p[1];Object(r.useEffect)(function(){e.user.id&&(O([]),_r(e.filter,g,u,e.user.friends,e.fetchTrainerQuery,i,d,b,O))},[e.user.id]);return a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){var r=n.calculations;M.h&&console.log(r.bottomVisible),r.bottomVisible&&!o&&(M.h&&console.log("Next Token: "+g),_r(e.filter,g,u,e.user.friends,e.fetchTrainerQuery,i,d,b,O))},250)},x.a.times(A.length,function(e){return a.a.createElement(r.Fragment,{key:e+1},a.a.createElement(cn,{trainer:A[e]}))}),!u&&a.a.createElement(Ft,null))}),function(e,t,n,r,a,o,i,c,l,u,s,d,m,f,g,b){_("Querying posts! NT = "+t+", isFinished = "+n),n||(m(!0),_("Fetching Post Feed Query"),o(Fn,e,5,t,function(e){if(e.nextToken||f(!0),e.items&&e.items.length>0)for(var t=function(t){var n=e.items[t];if("public"===n.access||n.by===r||a&&a.includes(n.by)){var o=n.by,m=Object(B.b)(o);"Client"===m?(_("Fetching Client for BY in post for Post Feed"),i(o,["name","profileImagePath"])):"Trainer"===m&&(_("Fetching Trainer for BY in post for Post Feed"),c(o,["name","profileImagePath"]));var f=n.about,g=Object(B.b)(f);"Client"===g?(_("Fetching Client for ABOUT in post for Post Feed"),i(f,bn.fetchVariableList)):"Trainer"===g?(_("Fetching Trainer for ABOUT in post for Post Feed"),c(f,En.fetchVariableList)):"Event"===g?l(f,jn.fetchList):"Challenge"===g?(_("Fetching Challenge for ABOUT in post for Post Feed"),u(f,dn.fetchList)):"Post"===g?(_("Fetching Post for ABOUT in post for Post Feed"),s(f,gn.fetchVariableList)):"Group"===g&&(_("Fetching Group for ABOUT in post for Post Feed"),d(f,kn.fetchList)),b(function(e){return[].concat(Object(v.a)(e),[n])})}else _("NOT SHOWING: "+JSON.stringify(n))},n=0;n<e.items.length;n++)t(n);g(e.nextToken),m(!1)},function(e){M.b&&console.error("Querying Posts failed!"),M.b&&console.error(e),m(!1)}))}),Jr=Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Xe(t,n))},fetchPost:function(t,n){e(et(t,n))},fetchGroup:function(t,n){e(tt(t,n))},fetchPostQuery:function(t,n,r,a,o,i){e(function(e,t,n,r,a,o){return Re("Post",e,t,n,r,a,o)}(t,n,r,a,o,i))},fetchChallenge:function(t,n){e(Ke(t,n))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)([]),p=Object(s.a)(E,2),A=p[0],O=p[1];Object(r.useEffect)(function(){e.user.id&&(O([]),b(null),d(!1),Yr(e.filter,null,!1,e.user.id,e.user.friends,e.fetchPostQuery,e.fetchClient,e.fetchTrainer,e.fetchEvent,e.fetchChallenge,e.fetchPost,e.fetchGroup,i,d,b,O))},[e.user.id,e.user.ownedChallenges]);return a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){n.calculations.bottomVisible&&!o&&(M.h&&console.log("Next Token: "+g),Yr(e.filter,g,u,e.user.id,e.user.friends,e.fetchPostQuery,e.fetchClient,e.fetchTrainer,e.fetchEvent,e.fetchChallenge,e.fetchPost,e.fetchGroup,i,d,b,O))},250)},x.a.times(A.length,function(e){return a.a.createElement(r.Fragment,{key:e+1},a.a.createElement(wn,{post:A[e]}))}),!u&&a.a.createElement(Ft,null))}),zr=(Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},fetchChallenges:function(t,n,r,a,o,i){e(it(t,n,r,a,o,i))}}})(function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1];return Object(r.useEffect)(function(){i(null),d(!0),e.user.challenges&&e.user.challenges.length>0?e.fetchChallenges(e.user.challenges,Ur.fetchList,0,e.user.challenges.length,function(e){for(var t=function(t){var n=e[t];n&&n.endTime&&i(function(e){var t=Et(mt(n.endTime));return e?Et(mt(e.endTime))<t&&t>0?n:e:t>0?n:null})},n=0;n<e.length;n++)t(n);d(!1)},function(e){}):d(!1)},[e.user.challenges]),u?a.a.createElement(Ft,null):o?a.a.createElement(r.Fragment,{key:0},a.a.createElement(U.a,null,a.a.createElement(kr,{challenge:o}))):a.a.createElement(U.a,{style:{color:"purple",background:"white",border:"1px solid purple"}},"Join a challenge below!")}),function(e,t,n,r,a,o,i,c,l,u,s,d,m,f,g,b,E){alert("Current user: "+e);var p=[];for(var A in o)o.hasOwnProperty(A)&&o[A]&&p.push(A);n&&r&&a&&p&&l?Number.isInteger(+n)?(alert(l),Kt.createChallengeOptional(e,e,t,n,r,a,null,null,null,p,i,c,l,null,null,null,m,function(){console.log("Successfully created a challenge!"),f(!1),b(!0)},function(e){f(!1),g("*"+JSON.stringify(e))},E)):(f(!1),g("Capacity needs to be an integer!")):(f(!1),g("All fields need to be filled out!"))}),qr=function(e){return e?a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You just created a new Challenge!")):null},Wr=function(e,t,n,r,a){var o=a.length;a.push(e.target.files[0]),alert("Just Pushed: "+a[0]);var i="/"+t+"/temp/pictures/"+o;w.Storage.put(i,e.target.files[0],{contentType:"video/*;image/*"}).then(function(){w.Storage.get(i).then(function(e){n(e)}).catch(function(e){M.b&&console.error(e)})}).catch(function(e){M.b&&console.error(e)})},Vr=(Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{setError:function(t){e(Object(k.c)(t))},fetchChallenge:function(t,n){e(Ke(t,n))},addToUserAttribute:function(t,n){e(Ye(t,n))},clearItemQueryCache:function(t){e(Qe(t))}}})(function(e){var t,o=Object(r.useState)(!1),i=Object(s.a)(o,2),c=i[0],l=i[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),m=d[0],g=d[1],b=Object(r.useState)({HIIT:!1,Strength:!1,Performance:!1,Endurance:!1}),E=Object(s.a)(b,2),A=E[0],O=E[1],T=Object(r.useState)(""),v=Object(s.a)(T,2),C=v[0],y=v[1],D=Object(r.useState)(At()),S=Object(s.a)(D,2),P=S[0],N=S[1],L=Object(r.useState)(25),k=Object(s.a)(L,2),j=k[0],w=(k[1],Object(r.useState)("")),Q=Object(s.a)(w,2),M=Q[0],H=Q[1],x=Object(r.useState)([]),B=Object(s.a)(x,2),G=B[0],_=B[1],Y=Object(r.useState)(null),J=Object(s.a)(Y,2),z=J[0],q=(J[1],Object(r.useState)("public")),W=Object(s.a)(q,2),V=W[0],X=W[1],Z=Object(r.useState)(!1),K=Object(s.a)(Z,2),$=K[0],ee=K[1],te=Object(r.useState)("streak"),ne=Object(s.a)(te,2),re=(ne[0],ne[1],Object(r.useState)(null)),ae=Object(s.a)(re,2),oe=(ae[0],ae[1],Object(r.useState)(null)),ie=Object(s.a)(oe,2),ce=(ie[0],ie[1],Object(r.useState)(null)),le=Object(s.a)(ce,2),ue=le[0],se=(le[1],Object(r.useState)(null)),de=Object(s.a)(se,2),me=de[0],fe=de[1];return a.a.createElement("div",{align:"center"},a.a.createElement(An.a,{onSubmit:function(){return zr(e.user.id,P,j,C,M,A,V,z,G[0],0,0,0,ue,l,g,ee)}},a.a.createElement(Yt.a,{as:"h3"},a.a.createElement(An.a.Input,{fluid:!0,type:"text",name:"title",placeholder:e.user.name+"'s Challenge",onChange:function(e){return y(e.target.value)}})),a.a.createElement("div",{align:"center"},a.a.createElement(h.a,{align:"center"},a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:A.HIIT?"purple":"black",inverted:A.HIIT,basic:!A.HIIT},a.a.createElement(R.a,{size:"medium",src:n(373),onClick:function(){return O(function(e){return Object(F.a)({},e,{HIIT:!e.HIIT})})}}),a.a.createElement("div",{style:{color:"white"}},"HIIT"))),a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:A.Strength?"purple":"black",inverted:A.Strength,basic:!A.Strength},a.a.createElement(R.a,{size:"medium",src:n(374),onClick:function(){return O(function(e){return Object(F.a)({},e,{Strength:!e.Strength})})}}),a.a.createElement("div",{style:{color:"white"}},"Strength")))),a.a.createElement(h.a.Row,null,a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:A.Performance?"purple":"black",inverted:A.Performance,basic:!A.Performance},a.a.createElement(R.a,{size:"medium",src:n(375),onClick:function(){return O(function(e){return Object(F.a)({},e,{Performance:!e.Performance})})}}),a.a.createElement("div",{style:{color:"white"}},"Performance"))),a.a.createElement(h.a.Column,{width:8},a.a.createElement(p.a,{color:A.Endurance?"purple":"black",inverted:A.Endurance,basic:!A.Endurance},a.a.createElement(R.a,{size:"medium",src:n(376),onClick:function(){return O(function(e){return Object(F.a)({},e,{Endurance:!e.Endurance})})}}),a.a.createElement("div",{style:{color:"white"}},"Endurance")))),a.a.createElement(h.a.Row,null,(t=me)?a.a.createElement(R.a,{src:t}):null,a.a.createElement(p.a,{as:"label",for:"picUpload"},a.a.createElement(f.a,{name:"camera",size:"large",style:{marginLeft:"8px"}}),a.a.createElement("input",{type:"file",accept:"image/*;video/*;capture=camcorder",id:"picUpload",hidden:"true",onChange:function(t){return Wr(n=t,e.user.id,fe,_,G),void alert("Image URL: "+n);var n}})))),a.a.createElement(Ut.a,{align:"center"},a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,{centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement("div",{className:"field"},a.a.createElement("label",null,"End Date & Time"),a.a.createElement("input",{type:"datetime-local",name:"challengeDate",onChange:function(e){N(e.target.value)}})),a.a.createElement(An.a.Input,{fluid:!0,type:"text",name:"goal",placeholder:"Challenge Goal...",onChange:function(e){return H(e.target.value)}}),a.a.createElement("div",{key:0,className:"field",align:"center"},a.a.createElement(Yt.a,{as:"h3"},a.a.createElement(h.a,{columns:5}))),a.a.createElement(An.a.Field,{width:12},a.a.createElement(Cn.a,{toggle:!0,onClick:function(){return X(function(e){return"public"===e?"private":"public"})},checked:"public"===V,label:V})),a.a.createElement("div",null,function(e){if(""!==e)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,e))}(m),qr($))))))),a.a.createElement(I.a.Actions,null,a.a.createElement(p.a,{loading:c,disabled:c,primary:!0,size:"big",type:"button",onClick:function(){return zr(e.user.id,P,1e3,C,M,A,V,z,G,0,0,0,ue,l,g,ee,e)}},"Submit")),qr($)))}),function(){return a.a.createElement("div",null,a.a.createElement(Yt.a,{sub:!0,style:{color:"purple",marginBottom:"10px",marginTop:"10px"}},"Upcoming Challenges:"),a.a.createElement(Jr,{filter:J.generateFilter({and:[{or:[{postType:{eq:"$postType1"}},{postType:{eq:"$postType2"}}]}]},{postType1:"Challenge",postType2:"newChallenge"})}))}),Xr=function(e){return e.unread?a.a.createElement(I.a,{trigger:a.a.createElement(b.a,{fluid:!0,color:"purple",raised:!0,onClick:function(){return e.onClickCard()}},a.a.createElement(b.a.Content,null,a.a.createElement(h.a,{columns:3,verticalAlign:"middle"},a.a.createElement(h.a.Column,{width:1},e.unread?a.a.createElement(St.a,{empty:!0,size:"mini",circular:!0,color:"purple"}):null),a.a.createElement(h.a.Column,{width:2},a.a.createElement("div",{className:"u-avatar u-avatar--small",style:{backgroundImage:"url(".concat(e.messageBoardProPic,")")}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,{style:{marginBottom:"10px"}},a.a.createElement(Yt.a,{size:"medium"},e.messageBoardTitle)),a.a.createElement(h.a.Row,null,a.a.createElement("div",null,e.messageBoardLastMessage)))))),closeIcon:!0},a.a.createElement(Qt,{board:e.messageBoardID})):a.a.createElement(I.a,{trigger:a.a.createElement(b.a,{fluid:!0,raised:!0,onClick:function(){return e.onClickCard()}},e.unread?a.a.createElement(St.a,{circular:!0,color:"purple",floating:!0}):null,a.a.createElement(b.a.Content,null,a.a.createElement(h.a,{columns:3},a.a.createElement(h.a.Column,{width:1}),a.a.createElement(h.a.Column,{width:2},a.a.createElement("div",{className:"u-avatar u-avatar--small",style:{backgroundImage:"url(".concat(e.messageBoardProPic,")")}})),a.a.createElement(h.a.Column,null,a.a.createElement(h.a.Row,{style:{marginBottom:"10px"}},a.a.createElement(Yt.a,{size:"medium"},e.messageBoardTitle)),a.a.createElement(h.a.Row,null,a.a.createElement("div",null,e.messageBoardLastMessage)))))),closeIcon:!0},a.a.createElement(Qt,{board:e.messageBoardID}))},Zr=function(e,t){var n=t[e];return n&&n.length>0?n[0].message:""},Kr=function(e,t,n){var r=ne(t);if(1===r.length);else if(2===r.length)for(var a in r)if(r.hasOwnProperty(a)&&e!==r[a])return Mt(r[a],"name",n);return""},$r=function(e,t,n){var r=ne(t);if(1===r.length);else if(2===r.length)for(var a in r)if(r.hasOwnProperty(a)&&e!==r[a])return Mt(r[a],"profileImage",n);return""},ea=function(e,t,n){return!!(t&&n[t]&&n[t].length>0)&&re(e,n[t][0])},ta=function(e,t,n,r,o){for(var i=[],c=function(c){var l=t[c];i.push(a.a.createElement(Xr,{messageBoardProPic:$r(e,l,n),messageBoardTitle:Kr(e,l,n),messageBoardLastMessage:Zr(l,r),messageBoardID:l,unread:ea(e,l,r),onClickCard:function(){return function(e,t,n,r){_("Reading boardID = "+t),ea(e,t,n)&&(_("Actually Reading boardID = "+t),vt.addLastSeen(e,t,n[t][0].id,e,function(){r(t,e),M.h&&console.log("Updated message board read status successfully!")},function(e){M.b&&console.error("Could not update read status for message board!"),M.b&&console.error(e)}))}(e,l,r,o)}}))},l=0;l<t.length;l++)c(l);return i},na=Object(u.b)(function(e){return{user:e.user,cache:e.cache,info:e.info,message:e.message}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},fetchItem:function(t,n,r,a,o){e(Se(t,n,r,a,o))},queryNextMessagesFromBoard:function(t,n,r,a){e(ie(t,n,r,a))},setBoardRead:function(t,n){e(function(e,t){return{type:ee.SET_BOARD_READ,payload:{board:e,userID:t}}}(t,n))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)([]),l=Object(s.a)(c,2),u=l[0],d=l[1];return Object(r.useEffect)(function(){i(!0),e.fetchUserAttributes(["messageBoards"],function(e){i(!1)})},[e.userID]),Object(r.useEffect)(function(){var t=e.user;if(t.messageBoards)for(var n in d(t.messageBoards),t.messageBoards)if(t.messageBoards.hasOwnProperty(n)){var r=t.messageBoards[n],a=ne(r);for(var o in a)if(a.hasOwnProperty(o)&&a[o]!==e.user.id){var i=a[o],c=Object(B.b)(i);"Client"!==c&&"Trainer"!==c||e.fetchItem(i,c,["name","profileImagePath"])}}},[e.user.messageBoards]),o?a.a.createElement(Ft,null):u&&u.length>0?a.a.createElement(h.a,{fluid:!0},a.a.createElement(Yt.a,null," Message Boards: "),ta(e.user.id,u,e.cache,e.message.boards,e.setBoardRead)):a.a.createElement("div",null,a.a.createElement(Yt.a,null," No Message Boards Yet! "))}),ra=function(e,t,n){return t.includes(e)?a.a.createElement(p.a,{negative:!0,onClick:function(){return n(function(t){return t=Object(v.a)(t),Object(fe.e)(t,e),t})}}," Remove "):a.a.createElement(p.a,{primary:!0,onClick:function(){return n(function(t){return t=Object(v.a)(t),Object(fe.a)(t,e),t})}}," Add ")},aa=Object(u.b)(function(e){return{user:e.user}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},addToUserAttribute:function(t,n){e(Ye(t,n))},fetchItem:function(t,n,r,a,o){e(Se(t,n,r,a,o))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)([]),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)([]),f=Object(s.a)(m,2),g=f[0],b=f[1];return Object(r.useEffect)(function(){i(!0),e.fetchUserAttributes(["friends"],function(t){if(t&&t.friends)for(var n=0;n<t.friends.length;n++){var r=Object(B.b)(t.friends[n]);e.fetchItem(t.friends[n],r,lr,function(e){e&&d(function(t){return[].concat(Object(v.a)(t),[e])})},function(e){M.b&&console.error(e)})}i(!1)},function(e){M.b&&console.error(e),i(!1)})},[e.user.id]),o?a.a.createElement(Ft,null):u&&u.length>0?a.a.createElement(I.a,{open:e.open,onClose:function(){return e.onClose()},closeIcon:!0,fluid:!0},a.a.createElement(I.a.Header,null," Choose friends to start the chat with! "),a.a.createElement(I.a.Content,{fluid:!0},function(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(a.a.createElement(h.a,{key:o,centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement(ur,{user:e[o]})),a.a.createElement(h.a.Column,null,ra(e[o].id,t,n))));return r}(u,g,b),a.a.createElement(h.a,{fluid:!0,centered:!0,width:3},a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{primary:!0,fluid:!0,onClick:function(){return function(e,t,n,r){_("Creating chat with "+JSON.stringify(t));var a=te([e].concat(Object(v.a)(t)));_(a),ht.addMessageBoard(e,e,a,function(){console.log("Successfully added message board to chat"),n("messageBoards",a),r()},function(e){M.b&&console.error(e)})}(e.user.id,g,e.addToUserAttribute,e.onClose)}}," Create ")),a.a.createElement(h.a.Column,null),a.a.createElement(h.a.Column,null,a.a.createElement(p.a,{inverted:!0,fluid:!0,onClick:function(){return e.onClose()}}," Cancel "))))):a.a.createElement(U.a,{color:"red"}," Add a buddy to start a message board! ")}),oa=(Object(u.b)(function(e){return{user:e.user}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1];return a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Row,null,a.a.createElement(p.a,{primary:!0,onClick:function(){return o||i(!0)}},"Start New Chat")),a.a.createElement(h.a.Row,null,a.a.createElement(aa,{open:o,onClose:function(){return i(!1)}})),a.a.createElement(h.a.Row,null,a.a.createElement(na,{userID:e.user.id})))}),Object(u.b)(function(e){return{user:e.user,message:e.message}},function(e){return{peekAtFirstMessageFromBoard:function(t){e(function(e,t,n){return function(r,a){r(Object(k.d)()),a().message.boards[e]&&a().message.boards[e].length>0?(t&&t(a().message.boards[e][0]),r(Object(k.e)())):r(ce(e,1,!1,function(e){t&&(e&&e.length>0?t(e[0]):t(null))},n))}}(t))}}})(function(e){Object(r.useEffect)(function(){var t=e.user.messageBoards;if(t)for(var n=t.length,r=0;r<n;r++){var a=t[r];e.peekAtFirstMessageFromBoard(a)}},[]);var t=function(e,t,n){var r=0;if(n)for(var a=n.length,o=0;o<a;o++){var i=t[n[o]];i&&i.length>0&&re(e,i[0])&&r++}return r}(e.user.id,e.message.boards,e.user.messageBoards);return t>0?a.a.createElement("div",null,a.a.createElement(f.a,{name:"comment",size:"large"}),t):a.a.createElement("div",null,a.a.createElement(f.a,{name:"comment outline",size:"large"}))}),function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={checked:!1,checkedRest:!1,title:"",motto:"",isSubmitLoading:!1,showModal:!1,submitError:"",showSuccessModal:!1,showSuccessLabel:!1,tags:[],performancePressed:!1,endurancePressed:!1,hiitPressed:!1,strengthPressed:!1,restriction:null,access:"Client"===M.a?"private":"public",pictures:[],videos:[],tempPictureURLs:[],tempVideoURLs:[]},n.toggle=function(){return n.setState({checked:!n.state.checked})},n.toggleRest=function(){return n.setState({checkedRest:!n.state.checkedRest})},n.handleAccessSwitch=function(){"public"===n.state.access?n.setState({access:"private"}):"private"===n.state.access?n.setState({access:"public"}):console.error("Event access should be public or private")},n.handleRestrictionSwitch=function(){"invite"===n.state.restriction?n.setState({restriction:null}):n.setState({restriction:"invite"})},n.handleSubmit=function(){n.setState({isSubmitLoading:!0}),n.state.title&&n.state.motto&&n.state.tags?(alert("Title: "+n.state.title+"Motto: "+n.state.motto),pn.createGroupOptional(n.props.user.id,n.state.title,"Default Description",n.state.motto,n.state.pictures[0],[n.props.user.id],[n.props.user.id],n.state.tags,n.state.access,n.state.restriction,function(e){console.log("Successfully created a group!"),n.setState({isSubmitLoading:!1}),n.closeModal(),n.setState({showSuccessLabel:!0}),n.setState({showModal:!1})},function(e){n.setState({submitError:"*"+JSON.stringify(e)}),n.setState({isSubmitLoading:!1})})):n.setState({isSubmitLoading:!1,submitError:"All fields need to be filled out!"})},n.handleDurationChange=function(e,t){n.eventState.duration=t.value},n.closeModal=function(){n.setState({showModal:!1})},n.closeSuccessModal=function(){n.setState({showSuccessModal:!1})},n.setPicture=function(e){n.state.pictures.push(e.target.files[0]),n.setState({})},n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"showRestriction",value:function(){return this.state.restriction?this.state.restriction:"unrestricted"}},{key:"handleTag",value:function(e){var t=this;"HIIT"!==e||this.state.hiitPressed?"Performance"!==e||this.state.performancePressed?"Endurance"!==e||this.state.endurancePressed?"Strength"!==e||this.state.strengthPressed?"HIIT"===e&&this.state.hiitPressed?(this.setState({tags:Object(fe.e)(this.state.tags,e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({hiitPressed:!1})):"Performance"===e&&this.state.performancePressed?(this.setState({tags:Object(fe.e)(this.state.tags,e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({performancePressed:!1})):"Endurance"===e&&this.state.endurancePressed?(this.setState({tags:Object(fe.e)(this.state.tags,e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({endurancePressed:!1})):"Strength"===e&&this.state.strengthPressed&&(this.setState({tags:Object(fe.e)(this.state.tags,e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({strengthPressed:!1})):(this.setState({tags:this.state.tags.concat(e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({strengthPressed:!0})):(this.setState({tags:this.state.tags.concat(e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({endurancePressed:!0})):(this.setState({tags:this.state.tags.concat(e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({performancePressed:!0})):(this.setState({tags:this.state.tags.concat(e)},function(){return console.log(JSON.stringify(t.state.tags))}),this.setState({hiitPressed:!0}))}},{key:"createSuccessModal",value:function(){if(this.state.showSuccessModal)return a.a.createElement(I.a,{open:this.state.showSuccessModal},a.a.createElement(I.a.Header,{align:"center"},"You Just Created A New Group!"),a.a.createElement(I.a.Content,null,a.a.createElement(p.a,{fluid:!0,negative:!0,size:"small",onClick:this.closeSuccessModal},"Ok")))}},{key:"createSuccessLabel",value:function(){if(!this.state.showSuccessLabel||!this.state.showModal)return this.state.showSuccessLabel?a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You just created a new Group!")):null;this.setState({showSuccessLabel:!1})}},{key:"getPictures",value:function(){for(var e={},t=0;t<this.state.pictures.length;t++)e["pictures/"+t]=this.state.pictures[t];return this.state.pictures.length>0?e:null}},{key:"displaySubmission",value:function(){if(this.state.notifySubmission)return a.a.createElement(U.a,{positive:!0},a.a.createElement(U.a.Header,null,"Success!"),a.a.createElement("p",null,"You uploaded a group image!"))}},{key:"displayCurrentImage",value:function(){return this.state.tempPictureURLs&&this.state.tempPictureURLs.length>0?a.a.createElement(b.a,null,a.a.createElement(R.a,{src:this.state.tempPictureURLs[0]})):null}},{key:"displayError",value:function(){if(""!==this.state.submitError)return a.a.createElement(U.a,{negative:!0},a.a.createElement(U.a.Header,null,"Sorry!"),a.a.createElement("p",null,this.state.submitError))}},{key:"setMotto",value:function(e){this.setState({motto:e.target.value}),console.log("New Motto is equal to "+e.target.value)}},{key:"setTitle",value:function(e){this.setState({title:e.target.value}),console.log("New Title is equal to "+e.target.value)}},{key:"render",value:function(){var e=this;return a.a.createElement(Ut.a,{style:{marginBottom:"50px",marginTop:"10px"}},a.a.createElement(Yt.a,{align:"center"},"Group Builder"),a.a.createElement(h.a,{centered:!0},a.a.createElement(h.a.Column,null,a.a.createElement(An.a,{onSubmit:this.handleSubmit},a.a.createElement(An.a.Input,{fluid:!0,label:"Title",type:"text",name:"title",placeholder:"Title",onChange:function(t){return e.setTitle(t)}}),a.a.createElement(An.a.Input,{fluid:!0,label:"Group Motto",type:"text",name:"motto",placeholder:"Add Motto Here...",onChange:function(t){return e.setMotto(t)}}),a.a.createElement(h.a,{centered:!0,rows:"equal"},a.a.createElement(h.a.Row,null,this.displayCurrentImage()),a.a.createElement(h.a.Row,null,a.a.createElement(h.a,{centered:!0},a.a.createElement("div",{className:"uploadImage u-flex u-flex-align--center u-margin-top--2",align:"center"},a.a.createElement("div",{floated:"center"},a.a.createElement(p.a,{primary:!0,fluid:!0,as:"label",htmlFor:"picUpload",className:"u-bg--primaryGradient"},a.a.createElement(f.a,{name:"camera",className:"u-margin-right--0",inverted:!0}),"Upload Group Photo"),a.a.createElement("input",{type:"file",accept:"image/*;capture=camcorder",id:"picUpload",hidden:!0,onChange:this.setPicture}))))),a.a.createElement(h.a.Row,null,a.a.createElement("div",null,this.displaySubmission()))),a.a.createElement(h.a,{centered:!0},a.a.createElement(An.a.Field,{width:12},a.a.createElement(Cn.a,{toggle:!0,onClick:this.handleRestrictionSwitch,onChange:this.toggleRest,checked:this.state.checkedRest,label:this.showRestriction()})),a.a.createElement("div",null,this.displayError()))))),a.a.createElement(h.a,{centered:!0},a.a.createElement(I.a.Actions,null,a.a.createElement(p.a,{loading:this.state.isSubmitLoading,disabled:this.state.isSubmitLoading,primary:!0,size:"big",type:"button",onClick:function(){e.handleSubmit()}},"Submit")),this.createSuccessLabel()))}}]),t}(r.Component)),ia=(Object(u.b)(function(e){return{user:e.user,info:e.info,cache:e.cache}},function(e){return{setError:function(t){e(Object(k.c)(t))},fetchChallenge:function(t,n){e(Ke(t,n))}}})(oa),function(e,t,n,r,a,o,i,c,l,u){n||(i(!0),_("Fetching Group Feed Query"),o(Rn,e,50,t,function(e){if(e.nextToken||c(!0),e.items){for(var t=function(t){var n=e.items[t];"public"===n.access||n.owner&&n.owners.includes(r)||a&&Object(fe.d)(a,n.owners)?u(function(e){return[].concat(Object(v.a)(e),[n])}):_("NOT SHOWING: "+JSON.stringify(n))},n=0;n<e.items.length;n++)t(n);l(e.nextToken)}i(!1)},function(e){M.b&&console.error("Querying Groups failed!"),M.b&&console.error(e),i(!1)}))}),ca=(Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchGroupQuery:function(t,n,r,a,o,i){e(function(e,t,n,r,a,o){return Re("Group",e,t,n,r,a,o)}(t,n,r,a,o,i))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)([]),p=Object(s.a)(E,2),A=p[0],O=p[1];Object(r.useEffect)(function(){e.user.id&&(O([]),ia(e.filter,g,u,e.user.id,e.user.friends,e.fetchGroupQuery,i,d,b,O))},[e.user.id]);return a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){var r=n.calculations;M.h&&console.log(r.bottomVisible),r.bottomVisible&&!o&&(M.h&&console.log("Next Token: "+g),ia(e.filter,g,u,e.user.id,e.user.friends,e.fetchGroupQuery,i,d,b,O))},250),style:{minWidth:"300px",marginTop:"40px"}},x.a.times(A.length,function(e){return a.a.createElement(r.Fragment,{key:e+1},a.a.createElement(Ln,{group:A[e]}))}),!u&&a.a.createElement(Ft,null))}),function(e,t,n,r,a,o,i,c,l){_("Querying deals! NT = "+t+", isFinished = "+a),a||(o(!0),_("Fetching Post Feed Query"),n(Wn.fetchList,e,5,t,function(e){if(e.nextToken||c(!0),e.items&&e.items.length>0)for(var t=function(t){var n=e.items[t],a=n.sponsor;r(a,["name","profileImagePath"]),l(function(e){return[].concat(Object(v.a)(e),[n])})},n=0;n<e.items.length;n++)t(n);i(e.nextToken),o(!1)},function(e){M.b&&console.error("Querying Deals failed!"),M.b&&console.error(e),o(!1)}))}),la=(Object(u.b)(function(e){return{user:e.user,cache:e.cache}},function(e){return{fetchDealQuery:function(t,n,r,a,o,i){e(function(e,t,n,r,a,o){return Re("Deal",e,t,n,r,a,o)}(t,n,r,a,o,i))},fetchSponsor:function(t,n,r,a){e(nt(t,n,r,a))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(null),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)([]),p=Object(s.a)(E,2),A=p[0],O=p[1];Object(r.useEffect)(function(){e.user.id&&(O([]),b(null),d(!1),ca(e.filter,g,e.fetchDealQuery,e.fetchSponsor,u,i,b,d,O))},[e.user.id]);return a.a.createElement(nn.a,{onUpdate:x.a.debounce(function(t,n){n.calculations.bottomVisible&&!o&&(M.h&&console.log("Next Token: "+g),ca(e.filter,g,e.fetchDealQuery,e.fetchSponsor,u,i,b,d,O))},250)},x.a.times(A.length,function(e){return a.a.createElement(r.Fragment,{key:e+1},a.a.createElement(Vn,{deal:A[e]}))}),!u&&a.a.createElement(Ft,null))}),function(){return a.a.createElement(d.a,{menu:{color:"white",fixed:"bottom",widths:2,size:"large",inverted:!0},panes:[{menuItem:a.a.createElement(m.a.Item,{key:0},a.a.createElement(f.a,{name:"home",color:"violet",size:"large"})),render:function(){return a.a.createElement(d.a.Pane,{basic:!0,attached:!1},a.a.createElement(Vr,null))}},{menuItem:a.a.createElement(m.a.Item,{key:1},a.a.createElement(f.a,{name:"user circle",color:"violet",size:"large"})),render:function(){return a.a.createElement(d.a.Pane,{basic:!0,attached:!1},a.a.createElement(Gr,null))}}]})}),ua=(n(415),n(60));function sa(e,t,n){return function(r){var a;r({type:ua.RESET_QUERY}),e&&e.length>0?(r((a=e,{type:ua.SET_SEARCH_QUERY,payload:a})),r(function e(t,n,r){return function(a,o){o().search.searchQuery===t&&o().search.results.length<n&&!o().search.ifFinished?(a(Object(k.d)()),function(e,t,n,r){if(e&&e.length>0){var a=0,o=[],i=n().search.numTypesEnabled,c=n().search.typeQueries,l=function(e,n){n.hasOwnProperty("items")&&n.hasOwnProperty("nextToken")?(t(function(e,t){return{type:ua.ADD_TYPE_RESULTS,payload:{type:e,results:t}}}(e,n.items)),t(ma(e,n.nextToken)),o.push.apply(o,Object(v.a)(n.items))):M.b&&console.error("Received a weird value from query in the newSearch search redux function. Value = "+JSON.stringify(n)),i<=++a&&r&&r(o)},u=function(){i<=++a&&r&&r(o)};for(var s in c)c.hasOwnProperty(s)&&da(s,t,n,l,u)}}(t,a,o,function(){a(Object(k.e)()),a(e(t,n,r))})):r&&r(o().search.results)}}(e,t,function(e){n&&n(e)}))):(M.h&&console.log("I refuse to search for an empty string"),n&&n([]))}}function da(e,t,n,r,a){var o=n().search.searchQuery,i=n().search.typeQueries[e];if(i.enabled){var c=i.variableList,l=i.filterJSON,u=Object(F.a)({},i.filterParameters,{searchQuery:o}),s=i.limit,d=i.nextToken,m=i.ifFirst;M.h&&console.log("nextToken = "+d),d||m?Re(e,c,J.generateFilter(l,u),s,d,function(n){if(n){if(t(ma(e,n.nextToken)),r(e,n),n&&n.items)for(var a=0;a<n.items.length;a++)t(je(n.items[a],e))}else M.b&&console.error("Query function returned null?")},function(e){a&&a(e)})(t,n):r(e,{items:[],nextToken:null})}}function ma(e,t){return{type:ua.SET_TYPE_NEXT_TOKEN,payload:{type:e,nextToken:t}}}var fa=n(110),ga=n.n(fa),ba=(n(1060),x.a.debounce(function(e,t,n){t(e,6,function(){n(!1)})},500),Object(u.b)(function(e){return{user:e.user,cache:e.cache,search:e.search}},function(e){return{fetchClient:function(t,n){e(Ve(t,n))},fetchEvent:function(t,n){e(Ze(t,n))},newSearch:function(t,n,r){e(sa(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=(n[0],n[1],Object(r.useState)("")),i=Object(s.a)(o,2),c=(i[0],i[1],Object(r.useState)(null)),l=Object(s.a)(c,2),u=(l[0],l[1],Object(r.useState)(!1)),d=Object(s.a)(u,2);d[0],d[1];return a.a.createElement(R.a,{src:ga.a,centered:!0,size:"tiny",style:{marginTop:"-10px",marginBottom:"-10px"}})})),Ea=n(989),pa=(Object(u.b)(function(e){return{user:e.user,info:e.info}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchEvent:function(t,n,r){e(Ze(t,n,r))},fetchChallenge:function(t,n,r){e(Ke(t,n,r))},fetchGroup:function(t,n,r){e(tt(t,n,r))},fetchInvite:function(t,n,r){e($e(t,n,r))}}})(function(e){var t=Object(r.useState)(0),n=Object(s.a)(t,2),o=n[0],i=n[1];Object(r.useEffect)(function(){var t=function(t,n){var r;"Event"===t&&(r=e.fetchEvent),"Challenge"===t&&(r=e.fetchChallenge),"Group"===t&&(r=e.fetchGroup),r(n,["receivedInvites"],function(e){e.hasOwnProperty("receivedInvites")&&e.receivedInvites&&i(function(t){return t+e.receivedInvites.length})})},n=e.user;if(n){if(n.hasOwnProperty("receivedInvites")&&n.receivedInvites&&i(function(e){return e+n.receivedInvites.length}),n.hasOwnProperty("ownedEvents")&&n.ownedEvents)for(var r=0;r<n.ownedEvents.length;r++)t("Event",n.ownedEvents[r]);if(n.hasOwnProperty("ownedChallenges")&&n.ownedChallenges)for(var a=0;a<n.ownedChallenges.length;a++)t("Challenge",n.ownedChallenges[a]);if(n.hasOwnProperty("ownedGroups")&&n.ownedGroups)for(var o=0;o<n.ownedGroups.length;o++)t("Group",n.ownedGroups[o])}return function(){i(0)}},[e.user.receivedInvites,e.user.ownedEvents,e.user.ownedChallenges,e.user.ownedGroups]);e.fetchInvite,e.fetchGroup,e.fetchChallenge,e.fetchEvent,e.forceFetchUserAttributes,e.fetchUserAttributes;var c=Object(Ea.a)(e,["fetchInvite","fetchGroup","fetchChallenge","fetchEvent","forceFetchUserAttributes","fetchUserAttributes"]);return o>0?a.a.createElement(h.a,{style:{marginTop:"6px"},centered:!0},a.a.createElement("div",c,a.a.createElement(f.a,{name:"bell",size:"big"}),o)):a.a.createElement(h.a,{style:{marginTop:"6px"},centered:!0},a.a.createElement("div",c,a.a.createElement(f.a,{name:"bell outline",size:"big"})))}),n(1085)),Aa=["time_created","from","to","inviteType","about","description"],Oa={clientFetchList:["id","name","friends","challengesWon","scheduledEvents","profileImagePath"],trainerFetchList:["id","name","gender","birthday","profileImagePath","profileImagePaths"]},Ta={clientFetchList:["id","name","friends","challengesWon","scheduledEvents","profileImagePath"],trainerFetchList:["id","name","gender","birthday","profileImagePath","profileImagePaths"],eventFetchList:["id","title","time","time_created","owner","members","capacity","difficulty","restriction"],challengeFetchList:["id","title","endTime","time_created","owner","members","capacity","difficulty","restriction"],groupFetchList:["id","title"]},ha={clientFetchList:["id","name","friends","challengesWon","scheduledEvents","profileImagePath"],trainerFetchList:["id","name","gender","birthday","profileImagePath","profileImagePaths"],eventFetchList:["id","title","time","time_created","owner","members","capacity","difficulty","restriction"],challengeFetchList:["id","title","endTime","time_created","owner","members","capacity","difficulty","restriction"],groupFetchList:["id","title"]},Ia=function(e,t,n,r,a,o,i,c){o(!0),!function(e,t,n,r,a){return e&&t&&n&&r&&a}(e,t,n,r,a)?(M.b&&console.error("Request doesn't have all the necessary props!"),o(!1)):i(function(){c&&o(!1)},function(e){console.log(e),o(!1)})},va=function(e,t,n,r){Ia(e,t,{},{},{},n,function(n,a){dt.delete(e,t,n,a,r)},!0)},Ca=va,ya=va,Da=va,Sa=va,Pa=va,Na=va,Ua=va,Ra=function(e,t,n){var r=Object(B.b)(e);return Object(B.c)(r,a.a.createElement(Zt,{open:t,onClose:function(){return n(!1)},clientID:e}),a.a.createElement(cr,{trainerID:e,open:t,onClose:function(){return n(!1)}}),null,null,null,null,null,null,null,null,null,null,null,null,"INVITE FROM MODAL")},La=function(e,t,n){var r=Object(B.b)(e);return Object(B.c)(r,a.a.createElement(Zt,{open:t,onClose:function(){return t(!1)},clientID:e}),a.a.createElement(cr,{trainerID:e,open:t,onClose:function(){return n(!1)}}),null,null,null,a.a.createElement(nr,{eventID:e,open:t,onClose:function(){return n(!1)}}),a.a.createElement(Nr,{challengeID:e,open:t,onClose:function(){return n(!1)}}),null,null,null,a.a.createElement(Un,{open:t,onClose:function(){return n(!1)},groupID:e}),null,null,null,null,"INVITE TO MODAL")},ka=function(e,t,n){var r=Object(B.b)(e);return Object(B.c)(r,a.a.createElement(Zt,{open:t,onClose:function(){return t(!1)},clientID:e}),a.a.createElement(cr,{trainerID:e,open:t,onClose:function(){return n(!1)}}),null,null,null,a.a.createElement(nr,{eventID:e,open:t,onClose:function(){return n(!1)}}),a.a.createElement(Nr,{challengeID:e,open:t,onClose:function(){return n(!1)}}),null,null,null,a.a.createElement(Un,{open:t,onClose:function(){return n(!1)},groupID:e}),null,null,null,null,"INVITE ABOUT MODAL")},ja=function(e,t,n,r,o,i,c,l,u,s,d,m,f,g,E,A){var O=t("inviteType");return"friendRequest"===O?[a.a.createElement(b.a.Content,{key:0,textAlign:"center"},a.a.createElement(b.a.Header,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),a.a.createElement(b.a.Description,null,"has sent you a buddy request ")),a.a.createElement(b.a.Content,{key:1,extra:!0,textAlign:"center"},a.a.createElement(p.a.Group,{fluid:!0},a.a.createElement(p.a,{loading:g,disabled:g,onClick:function(){return Ca(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{loading:m,disabled:m,primary:!0,onClick:function(){return function(e,t,n,r,a){Ia(e,t,n,{},{},r,function(r,o){ht.addFriend(e,e,n,t,r,o,a)})}(e,t("id"),t("about"),f,A)}},"Accept")))]:"eventInvite"===O?[a.a.createElement(b.a.Content,null,a.a.createElement(pa.a,null,a.a.createElement(pa.a.Event,null,a.a.createElement(pa.a.Content,null,a.a.createElement(pa.a.Summary,null,"You were invited to"," ",a.a.createElement(pa.a.User,{onClick:function(){return d(!0)}},o("title")),ka(t("about"),s,d)," ","by"," ",a.a.createElement(pa.a.User,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),a.a.createElement(pa.a.Date,null)),a.a.createElement(L.a,null),a.a.createElement(pa.a.Extra,null,a.a.createElement(p.a,{inverted:!0,loading:g,disabled:g,floated:"right",size:"small",onClick:function(){return ya(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{primary:!0,loading:m,disabled:m,floated:"right",size:"small",onClick:function(){return function(e,t,n,r,a){Ia(e,t,n,{},{},r,function(t,r){ht.addEvent(e,e,n,t,r,a)},!1)}(e,t("id"),t("about"),f,A)}},"Accept"))))))]:"challengeInvite"===O?[a.a.createElement(b.a.Content,{key:0,textAlign:"center"},a.a.createElement(b.a.Header,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),a.a.createElement(b.a.Description,null,"has invited you to ",a.a.createElement(pa.a.User,{onClick:d(!0)},o("title")),ka(t("about"),s,d))),a.a.createElement(b.a.Content,{key:1,extra:!0,textAlign:"center"},a.a.createElement(p.a.Group,{fluid:!0},a.a.createElement(p.a,{loading:g,disabled:g,onClick:function(){return Da(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{loading:m,disabled:m,primary:!0,onClick:function(){return function(e,t,n,r,a){Ia(e,t,n,{},{},r,function(r,o){ht.addChallenge(e,e,n,t,r,o,a)},!1)}(e,t("id"),t("about"),f,A)}},"Accept")))]:"groupInvite"===O?[a.a.createElement(b.a.Content,{key:0,textAlign:"center"},a.a.createElement(b.a.Header,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),a.a.createElement(b.a.Description,null,"has invited you to ",a.a.createElement(pa.a.User,{onClick:function(){return d(!0)}},o("title")),ka(t("about"),s,d))),a.a.createElement(b.a.Content,{key:1,extra:!0,textAlign:"center"},a.a.createElement(p.a.Group,{fluid:!0},a.a.createElement(p.a,{loading:g,disabled:g,onClick:function(){return Sa(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{loading:m,disabled:m,primary:!0,onClick:function(){return function(e,t,n,r,a){Ia(e,t,n,{},{},r,function(r,o){ht.addGroup(e,e,n,t,r,o,a)},!1)}(e,t("id"),t("about"),f,A)}},"Accept")))]:"eventRequest"===O?[a.a.createElement(b.a.Content,null,a.a.createElement(pa.a,null,a.a.createElement(pa.a.Event,null,a.a.createElement(pa.a.Content,null,a.a.createElement(pa.a.Summary,null,a.a.createElement(pa.a.User,{onClick:function(){return c(!0)}},o("name")),ka(t("about"),s,d),"Would like to join "," ",a.a.createElement(pa.a.User,{onClick:function(){return u(!0)}},r("title")),La(t("to"),l,u),a.a.createElement(pa.a.Date,null)),a.a.createElement(L.a,null),a.a.createElement(pa.a.Extra,null,a.a.createElement(p.a,{inverted:!0,loading:g,disabled:g,floated:"right",size:"small",onClick:function(){return Pa(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{primary:!0,loading:m,disabled:m,floated:"right",size:"small",onClick:function(){return function(e,t,n,r,a,o){Ia(e,t,r,{},n,a,function(a,i){ht.addEvent(e,r,n,t,a,i,o)},!1)}(e,t("id"),t("to"),t("about"),f,A)}},"Accept"))))))]:"challengeRequest"===O?[a.a.createElement(b.a.Content,{key:0,textAlign:"center"},a.a.createElement(b.a.Header,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),a.a.createElement(b.a.Description,null,"would like to join ",a.a.createElement(pa.a.User,{onClick:function(){return u(!0)}},r("title")),La(t("to"),l,u))),a.a.createElement(b.a.Content,{key:1,extra:!0,textAlign:"center"},a.a.createElement(p.a.Group,{fluid:!0},a.a.createElement(p.a,{loading:g,disabled:g,onClick:function(){return Na(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{primary:!0,loading:m,disabled:m,onClick:function(){return function(e,t,n,r,a,o){Ia(e,t,r,{},n,a,function(a,i){ht.addChallenge(e,r,n,t,a,i,o)},!1)}(e,t("id"),t("to"),t("about"),f,A)}},"Accept")))]:"groupRequest"===O?[a.a.createElement(b.a.Content,null,a.a.createElement(pa.a,null,a.a.createElement(pa.a.Event,null,a.a.createElement(pa.a.Content,null,a.a.createElement(pa.a.Summary,null,a.a.createElement(pa.a.User,{onClick:function(){return c(!0)}},n("name")),Ra(t("from"),i,c),"Would like to join "," ",a.a.createElement(pa.a.User,{onClick:function(){return u(!0)}},r("title")),La(t("to"),l,u),a.a.createElement(pa.a.Date,null)),a.a.createElement(L.a,null),a.a.createElement(pa.a.Extra,null,a.a.createElement(p.a,{inverted:!0,loading:g,disabled:g,floated:"right",size:"small",onClick:function(){return Ua(e,t("id"),E,A)}},"Deny"),a.a.createElement(p.a,{primary:!0,loading:m,disabled:m,floated:"right",size:"small",onClick:function(){return function(e,t,n,r,a,o){Ia(e,t,r,{},n,a,function(t,a){ht.addGroup(e,r,n,t,a,o)},!1)}(e,t("id"),t("to"),t("about"),f,A)}},"Accept"))))))]:null},Fa=Object(u.b)(function(e){return{cache:e.cache,user:e.user}},function(e){return{removeItem:function(t,n){e(we(t,n))},addToUserAttribute:function(t,n){e(Ye(t,n))},removeFromUserAttribute:function(t,n){e(Je(t,n))},addToItemAttribute:function(t,n,r){e(Ce(t,n,r))},removeFromItemAttribute:function(t,n,r){e(ye(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(!1),f=Object(s.a)(m,2),g=f[0],E=f[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),T=O[0],h=O[1],I=Object(r.useState)(!1),v=Object(s.a)(I,2),C=v[0],y=v[1],D=function(t){return xt(e.invite,t)},S=function(t){return Mt(D("from"),t,e.cache)};return e.invite?a.a.createElement(b.a,{fluid:!0,raised:!0,centered:!0},a.a.createElement("div",{className:"u-container"},a.a.createElement("div",{className:"u-avatar u-avatar--large u-margin-bottom--neg2 u-margin-x--auto",style:{backgroundImage:"url(".concat(S("profileImage"),")")}})),ja(e.user.id,D,S,function(t){return Mt(D("to"),t,e.cache)},function(t){return Mt(D("about"),t,e.cache)},o,i,u,d,g,E,T,h,C,y,e)):a.a.createElement(A.a,null,a.a.createElement(Ft,null))}),wa=(Object(u.b)(function(e){return{user:e.user}},function(e){return{fetchUserAttributes:function(t,n){e(Be(t,n))},forceFetchUserAttributes:function(t){e(Ge(t))},fetchInvite:function(t,n,r){e($e(t,n,r))},fetchClient:function(t,n){e(Ve(t,n))},fetchTrainer:function(t,n){e(Xe(t,n))},fetchEvent:function(t,n,r){e(Ze(t,n,r))},fetchChallenge:function(t,n,r){e(Ke(t,n,r))},fetchGroup:function(t,n,r){e(tt(t,n,r))}}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)([]),l=Object(s.a)(c,2),u=l[0],d=l[1];return Object(r.useEffect)(function(){e.user.id&&(i(!0),e.fetchUserAttributes(["receivedInvites","ownedEvents","ownedChallenges","ownedGroups"],function(){i(!1)}))},[e.user.id]),Object(r.useEffect)(function(){var t=function(t){e.fetchInvite(t,Aa,function(t){d(function(e){return[].concat(Object(v.a)(e),[t])}),function(e,t,n,r,a,o){if(e&&e.from&&e.to&&e.inviteType&&e.about){var i=Object(B.b)(e.from);"Client"===i?t(e.from,Oa.clientFetchList):"Trainer"===i?n(e.from,Oa.trainerFetchList):"Gym"===i?M.h&&console.log("not implemented!"):M.h&&console.error("ITEM TYPE NOT RECOGNIZED FOR INVITE?");var c=Object(B.b)(e.to);"Client"===c?t(e.to,Ta.clientFetchList):"Trainer"===c?n(e.to,Ta.trainerFetchList):"Gym"===c?M.h&&console.log("not implemented!"):"Event"===c?r(e.to,Ta.eventFetchList):"Challenge"===c?a(e.to,Ta.challengeFetchList):"Group"===c?o(e.to,Ta.groupFetchList):M.b&&console.error("ITEM TYPE NOT RECOGNIZED FOR INVITE?");var l=Object(B.b)(e.about);"Client"===l?t(e.about,ha.clientFetchList):"Trainer"===l?n(e.about,ha.trainerFetchList):"Gym"===l?M.h&&console.log("not implemented!"):"Event"===l?r(e.about,ha.eventFetchList):"Challenge"===l?a(e.about,ha.challengeFetchList):"Group"===l?o(e.about,ha.groupFetchList):M.b&&console.error("ITEM TYPE NOT RECOGNIZED FOR INVITE?")}}(t,e.fetchClient,e.fetchTrainer,e.fetchEvent,e.fetchChallenge,e.fetchGroup),i(!1)})},n=function(n,r){var a;"Event"===n&&(a=e.fetchEvent),"Challenge"===n&&(a=e.fetchChallenge),"Group"===n&&(a=e.fetchGroup),a(r,["receivedInvites"],function(e){if(e.receivedInvites&&e.receivedInvites.length>0){for(var n=0;n<e.receivedInvites.length;n++)t(e.receivedInvites[n]);i(!1)}else i(!1)})};d([]);var r=e.user;if(r.hasOwnProperty("receivedInvites")&&r.receivedInvites)for(var a=0;a<r.receivedInvites.length;a++)i(!0),t(r.receivedInvites[a]);if(r.hasOwnProperty("ownedEvents")&&r.ownedEvents)for(var o=0;o<r.ownedEvents.length;o++)i(!0),n("Event",r.ownedEvents[o]);if(r.hasOwnProperty("ownedChallenges")&&r.ownedChallenges)for(var c=0;c<r.ownedChallenges.length;c++)i(!0),n("Challenge",r.ownedChallenges[c]);if(r.hasOwnProperty("ownedGroups")&&r.ownedGroups)for(var l=0;l<r.ownedGroups.length;l++)i(!0),n("Group",r.ownedGroups[l])},[e.user.receivedInvites,e.user.ownedEvents,e.user.ownedChallenges,e.user.ownedGroups]),o?a.a.createElement(A.a,null,a.a.createElement(Ft,null)):u&&u.length&&u.length>0?a.a.createElement(r.Fragment,null,x.a.times(u.length,function(e){return a.a.createElement(Fa,{key:e,invite:u[e]})})):a.a.createElement(U.a,null,a.a.createElement("div",{align:"center"},"No Notifications!"))}),function(e,t,n,r){t(function(t){return t[e]?r(e):n(e),Object(F.a)({},t,Object(g.a)({},e,!t[e]))})}),Qa=Object(u.b)(function(e){return{search:e.search}},function(e){return{enableType:function(t){e(function(e){return{type:ua.ENABLE_TYPE,payload:e}}(t))},disableType:function(t){e(function(e){return{type:ua.DISABLE_TYPE,payload:e}}(t))}}})(function(e){var t=Object(r.useState)({}),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(r.useEffect)(function(){i({});var t=e.search.typeQueries,n=function(e){t.hasOwnProperty(e)&&["Client","Trainer","Event","Challenge","Group"].includes(e)&&i(function(n){return Object(F.a)({},n,Object(g.a)({},e,t[e].enabled))})};for(var r in t)n(r)},[e.search]),a.a.createElement(I.a.Content,null,a.a.createElement(h.a,{rows:2},a.a.createElement(h.a.Row,null,"Choose which item types show up in the search!"),a.a.createElement(h.a.Row,null,a.a.createElement(r.Fragment,null,a.a.createElement(h.a,{centered:!0,stackable:!0,columns:4},function(e,t,n,r){var o=[],i=function(i){e.hasOwnProperty(i)&&o.push(a.a.createElement(h.a.Column,{key:i},a.a.createElement(Cn.a,{label:i,checked:e[i],onChange:function(){return wa(i,t,n,r)}})))};for(var c in e)i(c);return o}(o,i,e.enableType,e.disableType))))))}),Ma=function(e){return a.a.createElement(I.a,{size:"large",open:e.open,onClose:e.onClose,closeIcon:!0},a.a.createElement(I.a.Header,{align:"center"},"Filter"),a.a.createElement(Qa,null))},Ha=Object(u.b)(function(e){return{user:e.user}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1];return[a.a.createElement(m.a,{borderless:!0,inverted:!0,vertical:!0,fluid:!0,widths:1,fixed:"top",style:{background:"rgba(256, 256, 256, 0.5)"}},a.a.createElement(m.a.Item,{style:{background:"rgba(256, 256, 256, 0.5)"}},a.a.createElement(Ut.a,{fluid:!0},a.a.createElement(h.a,{columns:"equal",centered:!0,style:{background:"rgba(256, 256, 256, 0.5)",border:"2px solid rebeccapurple"}},a.a.createElement(h.a.Row,{stretched:!0},a.a.createElement(h.a.Column,{style:{minWidth:"401px"}},a.a.createElement(ba,null)))),a.a.createElement(p.a,{floated:"right",primary:!0,circular:!0,style:{marginRight:"20px",marginTop:"-25px"}},a.a.createElement(R.a,{src:Gn.a,size:"mini",style:{marginRight:"-5px",marginBottom:"-2px",marginTop:"-2px"}}),"7")))),a.a.createElement(Ma,{open:o,onClose:function(){return i(!1)}}),a.a.createElement(la,{user:e.user})]}),xa=n(1067),Ba=function(e,t,n){var r=n[e];r?r(t.target.value):M.b&&console.error("Setting non-handled set state case: "+e)},Ga=function(e,t,n,r,a,o){if(e&&t&&n&&r&&a)if(t!==n)o(new Error("Password and confirm password do not match!"));else if(a.includes("@")&&a.includes("."))if(e.includes(" "))o(new Error("Username cannot contain spaces!"));else{if(_a(t))return!0;o(new Error("Password must be longer than 8 characters, must need a number, a lower case letter, and an upper case letter"))}else o(new Error("Email needs to be properly formed!"));else o(new Error("All fields need to be filled in!"));return!1},_a=function(e){return e.length>8&&/\d/.test(e)&&e.toUpperCase()!==e&&e.toLowerCase()!==e},Ya=function(e){if(e&&e.message)return a.a.createElement(I.a.Description,null,a.a.createElement(U.a,{color:"red"},a.a.createElement("h1",null,"Error!"),a.a.createElement("p",null,e.message)))},Ja=function(e){return e?a.a.createElement(A.a,{active:!0},a.a.createElement(O.a,null)):null},za=Object(u.b)(function(e){return{auth:e.auth,info:e.info}},function(e){return{signUp:function(t,n,r,a,o,i){e(function(e,t,n,r,a){return function(a){a(Object(k.d)()),ht.createUser(null,M.a,n,r,e,function(o){Mr.signUp(e,t,n,r,function(){a({type:"SIGN_UP"}),a(Object(k.e)())},function(e){a(Object(k.c)(e)),a(Object(k.e)()),ht.deleteUser(o.data,M.a,o.data)})},function(e){M.b&&console.error("REDUX: Creating new client failed..."),a(Object(k.c)(e)),a(Object(k.e)())})}}(t,n,r,a))},confirmSignUp:function(t,n){e(function(e,t){return function(n){n(Object(k.d)()),Mr.confirmSignUp(e,t,function(){n({type:"CLOSE_SIGN_UP_MODAL"}),n({type:"CONFIRM_SIGN_UP"}),n(Object(k.e)())},function(e){n(Object(k.c)(e)),n(Object(k.e)())})}}(t,n))},setError:function(t){e(Object(k.c)(t))},clearError:function(){e(Object(k.a)())},openSignUpModal:function(){e({type:"OPEN_SIGN_UP_MODAL"})},closeSignUpModal:function(){e({type:"CLOSE_SIGN_UP_MODAL"})}}})(function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(""),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(""),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)(""),A=Object(s.a)(E,2),O=A[0],h=A[1],v=Object(r.useState)(""),C=Object(s.a)(v,2),y=C[0],D=C[1],S=Object(r.useState)(""),P=Object(s.a)(S,2),N=P[0],U=P[1],R=Object(r.useState)(""),k=Object(s.a)(R,2),j=k[0],F={username:i,password:d,confirmPassword:b,name:h,email:D,confirmationCode:U,enterpriseID:k[1]};return e.auth.confirmingSignUp?a.a.createElement("div",null,a.a.createElement(I.a,{open:e.auth.signUpModalOpen,onClose:function(){return!1},trigger:a.a.createElement(p.a,{fluid:!0,color:"red",onClick:function(){return e.openSignUpModal()},inverted:!0}," Sign Up "),size:"tiny"},Ja(e.info.isLoading),a.a.createElement(I.a.Header,null,"Check your email to confirm the sign up!"),Ya(e.info.error),a.a.createElement(I.a.Actions,null,a.a.createElement("div",null,a.a.createElement(An.a,null,a.a.createElement("label",null,"Confirm Username!"),a.a.createElement(An.a.Input,{type:"text",name:"username",placeholder:" Username ",onChange:function(e){return Ba("username",e,F)}}),a.a.createElement("label",null,"Confirmation Code"),a.a.createElement(An.a.Input,{type:"text",name:"confirmationCode",placeholder:" XXXXXX ",onChange:function(e){return Ba("confirmationCode",e,F)}}))),a.a.createElement("div",null,a.a.createElement(p.a,{onClick:function(){return function(e,t,n,r){t?n(e,t):r(new Error("Confirmation code cannot be empty"))}(o,N,e.confirmSignUp,e.setError)},color:"blue"},"Confirm Your Account"))))):a.a.createElement(I.a,{open:e.auth.signUpModalOpen,trigger:a.a.createElement(p.a,{size:"large",fluid:!0,inverted:!0,onClick:function(){return e.openSignUpModal()},primary:!0,style:{color:"white"}}," Sign Up "),size:"tiny",style:{background:"white"}},Ja(e.info.isLoading),a.a.createElement(I.a.Header,{style:{background:"white",color:"purple"}},"Create Account to Join"),Ya(e.info.error),a.a.createElement(I.a.Actions,{style:{borderTop:"none",background:"white"}},a.a.createElement(An.a,{style:{background:"white"}},a.a.createElement(An.a.Input,{type:"text",iconPosition:"left",icon:"user",name:"username",placeholder:"Username",onChange:function(e){return Ba("username",e,F)},style:{background:"white",color:"purple"},color:"white"}),a.a.createElement(T.a,{position:"left center",trigger:a.a.createElement(An.a.Input,{iconPosition:"left",icon:"lock",type:"password",name:"password",placeholder:"Password",onChange:function(e){return Ba("password",e,F)},color:"white"})},"Password must be at least 8 characters long, contains lower and upper case letters, contain at least one number."),a.a.createElement(An.a.Input,{type:"password",iconPosition:"left",icon:"lock",name:"confirmPassword",placeholder:"Confirm Password",onChange:function(e){return Ba("confirmPassword",e,F)},style:{background:"white",color:"purple"}}),a.a.createElement(L.a,null),a.a.createElement(T.a,{position:"left center",trigger:a.a.createElement(An.a.Input,{type:"text",iconPosition:"left",icon:"user circle",name:"name",placeholder:"Screen Name",onChange:function(e){return Ba("name",e,F)}})},"This will be what your friends will see your name as."),a.a.createElement(An.a.Input,{type:"text",iconPosition:"left",icon:"mail",name:"email",placeholder:"Email",onChange:function(e){return Ba("email",e,F)},style:{background:"white",color:"purple"}}),a.a.createElement("div",{className:"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2"},a.a.createElement(p.a,{negative:!0,onClick:function(){return t=e.clearError,n=e.closeSignUpModal,t(),void n();var t,n}},"Cancel"),a.a.createElement(p.a,{positive:!0,color:"green",onClick:function(){return function(e,t,n,r,a,o,i,c){Ga(e,t,n,r,a,i)&&c(e,t,r,a,o)}(o,u,g,O,y,j,e.setError,e.signUp)}},"Create")))))}),qa=function(e,t,n){n[e](t.target.value)},Wa=function(e){e()};function Va(e){if(e)return a.a.createElement(I.a.Description,null,a.a.createElement(U.a,{color:"red"},a.a.createElement("h1",null,"Error!"),a.a.createElement("p",null,JSON.stringify(e))))}function Xa(e){return e?a.a.createElement(A.a,{active:!0},a.a.createElement(Ft,null)):null}var Za=Object(u.b)(function(e){return{auth:e.auth,info:e.info}},function(e){return{forgotPassword:function(t){e(function(e){return function(t){t(Object(k.d)()),Mr.forgotPassword(e,function(){t({type:"FORGOT_PASSWORD"}),t(Object(k.e)())},function(e){t(Object(k.c)(e)),t(Object(k.e)())})}}(t))},confirmForgotPassword:function(t,n,r){e(function(e,t,n){return function(r){r(Object(k.d)()),Mr.confirmForgotPassword(e,t,n,function(){M.h&&console.log("REDUX: Successfully submitted forgot password!"),r({type:"CONFIRM_FORGOT_PASSWORD"}),r(Object(k.e)())},function(e){M.b&&console.error("REDUX: Failed submitting forgot password..."),r(Object(k.c)(e)),r(Object(k.e)())})}}(t,n,r))},setError:function(t){e(Object(k.c)(t))},openForgotPasswordModal:function(){e({type:"OPEN_FORGOT_PASSWORD_MODAL"})},closeForgotPasswordModal:function(){e({type:"CLOSE_FORGOT_PASSWORD_MODAL"})}}})(function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(""),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(""),f=Object(s.a)(m,2),g=f[0],b=f[1],E=Object(r.useState)(""),A=Object(s.a)(E,2),O=A[0],T={username:i,confirmationCode:d,newPassword:b,confirmNewPassword:A[1]};return e.auth.confirmingForgotPassword?a.a.createElement(I.a,{open:e.auth.forgotPasswordModalOpen,onClose:function(){return!1},trigger:a.a.createElement(p.a,{onClick:function(){return e.openForgotPasswordModal()},primary:!0,style:{color:"white"}},"Forgot Password?"),size:"tiny"},Xa(e.info.isLoading),a.a.createElement(I.a.Header,null,"Confirm your email and choose your new password!"),Va(e.info.error),a.a.createElement(I.a.Content,null,a.a.createElement("p",null,"Enter your username to retrieve your information")),a.a.createElement(I.a.Actions,{style:{borderTop:"none"}},a.a.createElement(An.a,null,a.a.createElement(An.a.Input,{type:"text",label:"Confirmation Code from your Email",name:"confirmationCode",placeholder:"XXXXXX",onChange:function(e){return qa("confirmationCode",e,T)}}),a.a.createElement(An.a.Input,{type:"password",label:"New Password",name:"newPassword",placeholder:"new password",onChange:function(e){return qa("newPassword",e,T)}}),a.a.createElement(An.a.Input,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",onChange:function(e){return qa("confirmNewPassword",e,T)}}),a.a.createElement("div",{className:"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2"},a.a.createElement(p.a,{negative:!0,onClick:function(){return Wa(e.closeForgotPasswordModal)}},"Cancel"),a.a.createElement(p.a,{positive:!0,color:"green",onClick:function(){return function(e,t,n,r,a,o){n!==r?(console.log("Failed to make a new password :("),console.log("Passwords did not match"),a(new Error("Password and confirm password do not match!"))):e&&t&&n&&r?o(e,t,n):a(new Error("All fields need to be filled in!"))}(o,u,g,O,e.setError,e.confirmForgotPassword)}},"Confirm"))))):a.a.createElement(I.a,{open:e.auth.forgotPasswordModalOpen,onClose:function(){return!1},trigger:a.a.createElement(p.a,{size:"large",fluid:!0,inverted:!0,onClick:function(){return e.openForgotPasswordModal()},primary:!0,style:{color:"white"}},"Forgot Password?"),size:"tiny"},Xa(e.info.isLoading),a.a.createElement(I.a.Header,{style:{borderBottom:"none",color:"purple",background:"white"}},"Forgot Password?"),Va(e.info.error),a.a.createElement(I.a.Content,{style:{background:"white",color:"purple"}},a.a.createElement("p",null,"Enter your username to retrieve your information")),a.a.createElement(I.a.Actions,{style:{borderTop:"none",background:"white",color:"purple"}},a.a.createElement(An.a,null,a.a.createElement(An.a.Input,{type:"text",name:"username",placeholder:"username",onChange:function(e){return qa("username",e,T)}}),a.a.createElement("div",{className:"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2"},a.a.createElement(p.a,{negative:!0,onClick:function(){return Wa(e.closeForgotPasswordModal)}},"Cancel"),a.a.createElement(p.a,{positive:!0,color:"green",onClick:function(){return function(e,t){t(e)}(o,e.forgotPassword)}},"Submit")))))}),Ka=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(S.a)(t).call(this,e))).signIn=n.signIn.bind(Object(en.a)(Object(en.a)(n))),n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){(window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance():null)||this.createScript()}},{key:"signIn",value:function(){var e=this;window.gapi.auth2.getAuthInstance().signIn().then(function(t){e.props.googleSignIn(t)},function(e){console.error(e)})}},{key:"createScript",value:function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js",e.async=!0,e.onload=this.initGapi,document.body.appendChild(e)}},{key:"initGapi",value:function(){var e=window.gapi;e.load("auth2",function(){e.auth2.init({client_id:"308108761903-qfc4dsbnjicjs0dpqao5ofh2c5u2636k.apps.googleusercontent.com",scope:"profile email openid"})})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(p.a,{fluid:!0,color:"green",onClick:this.signIn}," ",a.a.createElement(f.a,{name:"google"}," "),"Google Sign In"))}}]),t}(a.a.Component),$a=Object(u.b)(function(e){return{user:e.user}},function(e){return{googleSignIn:function(t){e(xr(t))}}})(Ka),eo=function(e,t,n){n[e](t.target.value)},to=Object(u.b)(function(e){return{auth:e.auth,info:e.info}},function(e){return{logIn:function(t,n){e(function(e,t){return function(n,r){n(Object(k.d)()),Mr.signIn(e,t,function(){J.getItemByUsername(M.a,e,["id","username"],function(e){e?(M.h&&console.log("REDUX: Successfully logged in!"),r().user.id!==e.id?n(We(e)):n(qe(e)),n(_e(M.j,function(){n({type:"LOG_IN"}),n(Object(k.e)()),n(Object(k.b)())}))):(M.h&&console.log("REDUX: Could not fetch the client"),n(Object(k.c)(Error("User not found in the database"))),n(Object(k.e)()))},function(e){M.h&&console.log("REDUX: Could not fetch the client"),n(Object(k.c)(e)),n(Object(k.e)())})},function(e){"UserNotConfirmedException"===e.code?(n({type:"SIGN_UP"}),n({type:"OPEN_SIGN_UP_MODAL"}),n(Object(k.e)())):(M.h&&console.log("REDUX: Failed log in..."),M.b&&console.error(e),n(Object(k.c)(e)),n(Object(k.e)()))})}}(t,n))},setError:function(t){e(Object(k.c)(t))},openSignUpModal:function(){e({type:"OPEN_SIGN_UP_MODAL"})},openForgotPasswordModal:function(){e({type:"OPEN_FORGOT_PASSWORD_MODAL"})}}})(function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(""),l=Object(s.a)(c,2),u=l[0],d={username:i,password:l[1]};return a.a.createElement(Ut.a,{className:"login-form",style:{color:"#FFFFFF",background:"white"}},e.info.isLoading?a.a.createElement(A.a,{active:!0},a.a.createElement(O.a,null)):null,a.a.createElement(h.a,{centered:!0,textAlign:"center",style:{background:"white"}},a.a.createElement(xa.a,{raised:!0,padded:!0,inverted:!0,style:{minWidth:340,maxWidth:570,marginBottom:"-60px",background:"white",border:"1px solid purple"}},a.a.createElement(p.a,{floated:"right",circular:!0,icon:!0,color:"purple",onClick:function(){return window.open("https://vastustech.com","_blank")}},a.a.createElement(f.a,{name:"info"})),a.a.createElement(xa.a,{basic:!0},a.a.createElement(R.a,{src:ga.a,size:"small",centered:!0}),a.a.createElement(Yt.a,{as:"h2",inverted:!0,textAlign:"center",style:{color:"purple"}},"Join Below")),a.a.createElement(An.a,{size:"large"},a.a.createElement(An.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",onChange:function(e){return eo("username",e,d)}}),a.a.createElement(An.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",onChange:function(e){return eo("password",e,d)}}),a.a.createElement(p.a,{primary:!0,fluid:!0,size:"large",onClick:function(){return function(e,t,n,r){e&&t?n(e,t):r(new Error("Username and password must be filled!"))}(o,u,e.logIn,e.setError)}},"Log in")),a.a.createElement(L.a,{horizontal:!0,inverted:!0},"or"),a.a.createElement(N.a,null,a.a.createElement(N.a.Item,null,a.a.createElement(za,null)),a.a.createElement(N.a.Item,null,a.a.createElement(Za,null)),a.a.createElement($a,null)))),function(e){if(e)return a.a.createElement(U.a,{color:"red",style:{marginTop:"100px"}},a.a.createElement("h1",null,"Error!"),a.a.createElement("p",null,e.message))}(e.info.error))}),no=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).state={visible:!0,slideNum:0,reactSwipeEl:null,circles:["circle","circle outline","circle outline"],active:!0},n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(l.a,{small:!0,down:!0},a.a.createElement("div",null,a.a.createElement(h.a,{textAlign:"center",centered:!0,style:{marginLeft:"30px",marginRight:"30px",marginTop:"5px",height:610}},a.a.createElement(xa.a,{inverted:!0,style:{maxWidth:430,background:"white"}},a.a.createElement(to,null))))),a.a.createElement(l.a,{medium:!0,up:!0},a.a.createElement("div",null,a.a.createElement(h.a,{textAlign:"center",centered:!0,style:{marginLeft:"30px",marginRight:"30px",marginTop:"5px",marginBottom:"50px"}},a.a.createElement(xa.a,{inverted:!0,style:{marginTop:"10px",maxWidth:430,minHeight:660,background:"white"}},a.a.createElement(to,null))))))}}]),t}(r.Component),ro=Object(u.b)(function(e){return{user:e.user}},function(e){return{logOut:function(){e(Hr())}}})(no),ao=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).authenticate=function(e){},n}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(ro,null))}}]),t}(r.Component),oo=Object(u.b)(function(e){return{auth:e.auth}})(function(e){return e.auth.loggedIn?a.a.createElement(Ha,null):a.a.createElement(ao,null)}),io=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function co(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){M.b&&console.error("Error during service worker registration:",e)})}var lo,uo=n(74),so=n(146),mo=n(416),fo=n.n(mo),go=n(147),bo=n(214),Eo=n(76),po=n(84);lo=M.i?Object(uo.applyMiddleware)(fo.a,so.a,go.a):Object(uo.applyMiddleware)(so.a,go.a);var Ao=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||uo.compose,Oo=Object(uo.createStore)(Object(uo.combineReducers)({user:xe.default,cache:$.default,info:Eo.default,auth:bo.default,search:ua.default,ably:po.default,message:ee.default}),Ao(lo)),To=Object(u.b)(function(e){return{info:e.info}},function(e){return{updateAuth:function(){e(function(e){Mr.getCurrentUser(function(t){M.h&&console.log("UPDATING AUTH WITH USER:"),M.h&&console.log(JSON.stringify(t)),t.username?J.getItemByUsername(M.a,t.username,["id","username"],function(t){t?(M.h&&console.log("REDUX: Successfully updated the authentication credentials"),e(qe(t)),e(_e(M.j,function(){e({type:"LOG_IN"}),e(Object(k.e)()),e(Object(k.b)())}))):(M.h&&console.log("REDUX: Could not fetch the client"),e(Object(k.c)(Error("User not found in the database"))),e(Object(k.e)()),e(Object(k.b)()),Mr.signOut())},function(t){M.b&&console.error("REDUX: Could not fetch the user, not logged in"),M.b&&console.error(t),e(Object(k.e)()),e(Object(k.b)()),Mr.signOut()}):t.sub&&J.getItemByFederatedID(M.a,t.sub,["id","username","federatedID"],function(t){M.h&&console.log("REDUX: Successfully updated the authentication credentials for federated identity"),t?(e(qe(t)),e(_e(M.j,function(){e({type:"LOG_IN"}),e(Object(k.e)()),e(Object(k.b)())}))):(M.b&&console.error("REDUX: Could not find the federated identity user"),e(Object(k.c)(Error("Could not find the federated identity user"))),e(Object(k.e)()),e(Object(k.b)()),Mr.signOut())},function(t){M.b&&console.error("REDUX: Could not fetch the federated identity user"),e(Object(k.c)(t)),e(Object(k.e)()),e(Object(k.b)()),Mr.signOut()})},function(t){M.b&&console.error(t),e(Object(k.e)()),e(Object(k.b)())})})}}})(function(e){return Object(r.useEffect)(function(){e.updateAuth()},[]),e.info.appIsLoading?a.a.createElement(h.a,{verticalAlign:"middle",centered:!0,textAlign:"center"},a.a.createElement(h.a.Row,null,a.a.createElement(xa.a,{raised:!0,padded:!0,inverted:!0,style:{minWidth:340,maxWidth:800,marginBottom:"-60px",marginTop:"120px",background:"white",color:"purple"}},a.a.createElement(xa.a,{basic:!0},a.a.createElement(R.a,{src:ga.a,size:"medium",centered:!0}),a.a.createElement(Yt.a,{as:"h2",inverted:!0,textAlign:"center",style:{color:"purple"}},"Loading..."))))):e.children}),ho=n(417),Io=n.n(ho);n(161),ct(),M.e&&st.ping(),i.a.render(a.a.createElement(c.BreakpointProvider,null,a.a.createElement(u.a,{store:Oo},a.a.createElement(To,null,a.a.createElement("div",{style:Io.a},a.a.createElement(oo,null))))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/VastusOfficial",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/VastusOfficial","/service-worker.js");io?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):co(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):co(e)})}}()},110:function(e,t,n){e.exports=n.p+"static/media/vt_gold_even_thicker_border.5c686307.svg"},144:function(e,t,n){e.exports=n.p+"static/media/roundProfile.7bc5f809.png"},147:function(e,t,n){"use strict";t.a=function(e){return function(t){return function(n){var r=!1,a=[];function o(){a.forEach(function(t){return e.dispatch(t)}),a=[]}var i=Object.assign({},n,{asyncDispatch:function(e){a=a.concat([e]),r&&o()}});t(i),r=!0,o()}}}},15:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return s});var r=n(1),a={Client:"Client",Trainer:"Trainer",Gym:"Gym",Workout:"Workout",Review:"Review",Event:"Event",Challenge:"Challenge",Invite:"Invite",Post:"Post",Submission:"Submission",Group:"Group",Comment:"Comment",Sponsor:"Sponsor",Message:"Message",Streak:"Streak",Deal:"Deal",Product:"Product",Admin:"Admin"},o=2,i={};for(var c in a)if(a.hasOwnProperty(c)){var l=a[c];i[l.substring(0,o).toUpperCase()]=l}function u(e){if(e){var t=i[e.substring(0,o)];return t||null}return null}function s(e,t,n,a,o,i,c,l,u,s,d,m,f,g,b,E,p,A,O,T){var h=null;switch(e){case"Client":h=t;break;case"Trainer":h=n;break;case"Gym":h=a;break;case"Workout":h=o;break;case"Review":h=i;break;case"Event":h=c;break;case"Challenge":h=l;break;case"Invite":h=u;break;case"Post":h=s;break;case"Submission":h=d;break;case"Group":h=m;break;case"Comment":h=f;break;case"Sponsor":h=g;break;case"Message":h=b;break;case"Streak":h=E;break;case"Deal":case"Product":h=p;break;case"Admin":h=O;break;default:h=null}return h||(r.b&&console.error(T+" ~ itemType = "+e+" not recognized..."),null)}t.a=a},161:function(e,t,n){"use strict";n.r(t);var r=n(27),a=n(26),o=n(385),i=n(1),c=n(24),l=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"subscribeToChannel",value:function(t,n){return c.a.ifTesting||e.ablyRef.channels.get(t).subscribe(n,function(e){e?(i.b&&console.error("Failed to subscribe to the channel "+t+"!"),i.b&&console.error(e)):i.h&&console.log("SUCCESSFULLY SUBSCRIBED TO CHANNEL = "+t)}),t}},{key:"unsubscribeFromChannel",value:function(t,n,r){return c.a.ifTesting||e.ablyRef.channels.get(t).unsubscribe(function(e){e?(i.b&&console.error("Ably could not unsubscribe from "+t+"!"),i.b&&console.error(e),r&&r()):(i.h&&console.log("Ably successfully unsubscribed from "+t+"!"),n&&n())}),t}},{key:"sendMessageToChannel",value:function(t,n,r,a,o){c.a.ifTesting||e.ablyRef.channels.get(t).publish(n,r,function(e){e?o&&o():a&&a()})}},{key:"close",value:function(){c.a.ifTesting||e.ablyRef.close()}}]),e}();l.ablyRef=c.a.ifTesting?null:new o.Realtime("RP1cGg.cc8qow:DdzJi7vkBxuLzK03"),t.default=l},172:function(e,t){},214:function(e,t,n){"use strict";n.r(t),n.d(t,"LOG_IN",function(){return a}),n.d(t,"FEDERATED_LOG_IN",function(){return o}),n.d(t,"LOG_OUT",function(){return i}),n.d(t,"SIGN_UP",function(){return c}),n.d(t,"CONFIRM_SIGNUP",function(){return l}),n.d(t,"FORGOT_PASSWORD",function(){return u}),n.d(t,"CONFIRM_FORGOT_PASSWORD",function(){return s}),n.d(t,"OPEN_SIGN_UP_MODAL",function(){return d}),n.d(t,"CLOSE_SIGN_UP_MODAL",function(){return m}),n.d(t,"OPEN_FORGOT_PASSWORD_MODAL",function(){return f}),n.d(t,"CLOSE_FORGOT_PASSWORD_MODAL",function(){return g});var r=n(10),a="LOG_IN",o="FEDERATED_LOG_IN",i="LOG_OUT",c="SIGN_UP",l="CONFIRM_SIGNUP",u="FORGOT_PASSWORD",s="CONFIRM_FORGOT_PASSWORD",d="OPEN_SIGN_UP_MODAL",m="CLOSE_SIGN_UP_MODAL",f="OPEN_FORGOT_PASSWORD_MODAL",g="CLOSE_FORGOT_PASSWORD_MODAL",b={loggedIn:!1,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;switch((arguments.length>1?arguments[1]:void 0).type){case a:e={loggedIn:!0,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};break;case o:e={loggedIn:!0,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!0};break;case i:e={loggedIn:!1,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};break;case c:e={loggedIn:!1,confirmingSignUp:!0,confirmingForgotPassword:!1,signUpModalOpen:!0,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};break;case l:e={loggedIn:!1,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};break;case u:e={loggedIn:!1,confirmingSignUp:!1,confirmingForgotPassword:!0,signUpModalOpen:!1,forgotPasswordModalOpen:!0,ifFederatedSignIn:!1};break;case s:e={loggedIn:!1,confirmingSignUp:!1,confirmingForgotPassword:!1,signUpModalOpen:!1,forgotPasswordModalOpen:!1,ifFederatedSignIn:!1};break;case d:e=Object(r.a)({},e,{signUpModalOpen:!0});break;case m:e=Object(r.a)({},e,{signUpModalOpen:!1});break;case f:e=Object(r.a)({},e,{forgotPasswordModalOpen:!0});break;case g:e=Object(r.a)({},e,{forgotPasswordModalOpen:!1})}return e}},216:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU0AAAFNCAYAAACE8D3EAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABI/SURBVHhe7d2NbxTHGQfgMTYQoBiMcYkDJSEN+VASJa2qSv3/pVSJilS1SUpDgoFCgGDiYoMJYKAep1Ypwb59fbt7O7vPSagfeW9n5pmXX/bu9vam1u6vP08eBAgQIFBJYF+lKkUECBAgsCUgNDUCAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJCM4CllAABAkJTDxAgQCAgIDQDWEoJECAgNPUAAQIEAgJTa/fXnwfqlTYgsLr2ID1Y/yk9ebKx9cejHwL7pvel1w4eSEcOv7b551Ca3vzfHuULCM0J7eHTp8/SD8sr6eatu+mnR48nNAvDtiWwf2YmnTx5LJ1+/WQ6cGB/W8MapwEBodkA6qhD5jPLby/fEJajoHr4z6f2TaV3zp1OC/PHe7i6YSxJaLa8z3fu/jtd+u56y6MarmsCi6/Pp3NnF7s2LfOpIOBNlgpIdZUIzLokyz9Oflvm2vXb5S9kgCsQmi1t+uPHT9K3SzdaGs0wJQhc//5OWrm3VsJUzfEFAaHZUjtcvnozPX/mQoWWuIsZZunKzWLmaqI/CwjNFjph/eGj9OPKagsjGaI0gXzlRH7bxqMcAaHZwl4t+0vRgnK5Q9y+s1Lu5Ac4c5+et7DpX15cSqurD0aOlC+EPjZ7ZGSdgjIEHm6eRVbZ93wZ0p/+8GEZizLLJDRbaII//+Wrke9nnpibTe+fP9vCbAzRpkD+hDx/4DPq8enH59PhQwdHlfnnHRDw8ryFTajyAdAbm9ftefRP4PTiQqVFbWz4+mwlqA4UCc2GNyF/XbLKY2bza3Ye/RPwffP+7anQ7N+eWhEBAg0KCM0GcR2aAIH+CQjN/u2pFREg0KCA0GwQ16EJEOifgNDs355aEQECDQoIzQZxJ3no/Kl9vm9nviFE/pP/e75piAcBAuMJuLh9PL+Rz87h9fmFr0fW1XFxc/6Oe/7K5vLdezve4Dh/62hu7mg6tXDCxdQjd6Wegs+++HLkgT764FyaPerbYCOhOlDgTLMDmzDuFPIZ5MVL19Jf/35p69snu/18Rv5n+V6OuTY/x9nnuPqePzQBoVn4juc75Fz42zd7uotSvvNSfq677BTeBKbfqoDQbJW73sFu3r679dMZVb6mudPI+bn5GO4iXu/eOFp/BYRmoXubA3Np88bGdT3yy/p8TA8CBHYXEJoFdkj+JPzKv27VPvMcwvnYHgQI7CwgNAvsjvzzv+O8JN9tyfnYVW8yUiCdKRMYW0Bojk3Y7gHyhza7fTo+7mzysX9YdifxcR09v78CQrOwvW3jpxHyJUkeBAi8WkBoFtQZ+eL1Kj+fMO6S8tlmHsuDAIFfCgjNgrri3ur91mbb5litLcpABGoQEJo1ILZ1iCbfy3x5DevrP7W1rLHHyZ/4u850bEYHqCggNCtCdaHs0aP2brjxZONpF5Y8cg45ML/655Wtr48uXavvutWRAysYrIDQHOzW777wjafdD83twNy+/Cp/gCU4NXTTAkKzaeFCjz8zPd3pmb8cmNuTFZyd3rZeTE5oFrSNBw/ub222bY4VXdROgSk4o5Lq9yIgNPeiNqHn/OrIodZGzvfd7OIj31A5v4c56htRzji7uHv9mJPQLGgfj7V4k9r5udnOyeTAzPcAHRWYzjg7t3W9mpDQLGg7DxzYn2Znm7+7dx4jj9WlRzQwBWeXdq9fcxGahe3n6cWTjc/41MJc42NEBthrYArOiLLaqgJCs6pUR+rmjh1t9Gwzn2UuzB/vyGrT1o/CRV6S7zRx73F2ZkuLn4jQLHAL337zjTS1b6r2medj5mN35VFXYDrj7MqO9mMeQrPAfTx86GB6//zZ2mf+zrnTnfmFyroDU3DW3i6DPaDQLHTr88v08789U9sZZz5WV16WNxWYgrPQZu/YtIVmxzYkMp0cch++91Ya55rK/Nz8m9tDCUzBGekwta8SEJqF98Xs5rWbn3z0TjrzxkLorDO/f5mfk5+bj9GFR9NnmC+v0YdDXdj18uYgNMvbs1/MeHp6Xzp75lT64+8+2HrJfmLzwvT9MzO/qMv/X/5n595c3KrNz8nP7cKj7cB0xtmFXS9zDlNr99eflzn1Mmadf6Ts8wtfj5zspx+fr/1DmDz20827FW1s/ufMZjh27YL1bZRJBeaLm7L4+nw6d3Zx5D7tpeCzL74c+bT8FklXzvhHTnbgBd04zRj4JjS1/HwWmYMyf9ouMHdX9lK9qS7s33GFZv/2tJgVdeEM80UswVlM60x0okJzovzDHbxrgek9zuH2YnTlQjMqpn5sga4GpuAce2sHcQChOYht7s4iux6YgrM7vdLVmQjNru5MD+dVSmAKzh42X41LEpo1YjrUzgKlBabg1M07CQhNvdG4QKmBKTgbb40iBxCaRW5bvZNef/go3bx9t96D/vdopQem4GykLYo+qNAsevvGn3wOzK/+sZSWrt6sPTj7EpiCc/w+69MRhGafdjO4lu3AfLKxsfXMOoOzb4EpOIPN1eNyodnjzd1taS8H5nZtHcHZ18AUnAP9y/LSsoXmAPtgp8CsIzj7HpiCc4B/YYTmsDd9VGCOE5xDCcxto+Xle8NupoGu3pnmgDa+amDuJTiHFpgDahtLdaY5zB6IBmYkOAXmMHtqqKt2pjmAnd9rYFYJToE5gAayxP8TEJo9b4hxA3O34BSYPW8ey3ulgNDscWPUFZivCk6B2ePGsbRdBYRmTxuk7sB8MTi/W7qRLl66lp4/8/NSPW0fy9pFQGj2sD2aCsxtqtt3VgRmD/vGkqoJCM1qTsVUNR2YxUCYKIGGBIRmQ7CTOKzAnIS6MYcmIDR7suMCsycbaRmdFxCand+i0RMUmKONVBCoS0Bo1iU5oeMIzAnBG3awAkKz4K0XmAVvnqkXKyA0C906gVnoxpl28QJCs8AtFJgFbpop90ZAaBa2lQKzsA0z3d4JCM2CtlRgFrRZptpbAaFZ0NZevvp92v4RtIKmbaoEeiUgNHu1nRZDgEDTAkKzaWHHJ0CgVwJCs1fbaTEECDQtIDSbFnZ8AgR6JSA0e7WdFkOAQNMCQrNpYccnQKBXAkKzV9tpMQQINC0gNJsWdnwCBHolIDR7tZ0WQ4BA0wJCs2lhxydAoFcCQrNX22kxBAg0LSA0mxZ2fAIEeiUwtXZ//XmvVtSxxTx9+ix9fuHrkbP69OPz6fChg7vWfbd0I91bfTDyWAraE/j9J++OHOyzL74cWfPRB+fS7NEjI+sUTF5AaDa8B3WGZsNTdfiGBIRmQ7ATOqyX5xOCNywBAmUKCM0y982sCRCYkIDQnBC8YQkQKFNAaJa5b2ZNgMCEBITmhOANS4BAmQJCs8x9M2sCBCYkIDQbhp+erkb8YP1hwzNx+EkI5F8QrfKYmZmpUqamAwLV/kZ3YKIlT+G1gwdGTv/K1Vtp5d5aytd1evRDYHXtQbr4zdVKi5mp+C/XSgdT1KiAi9sb5f354BcvXUs/rqy2MJIhShTI/1Kt8s2iEtfWxzk702xhV+dPzLYwiiFKFZibO1rq1Ac5b6HZwrafOD6b9nvPqgXpMoc4tXCizIkPdNZCs4WNzx8GnTm90MJIhihN4NTC3MgbtZS2pr7PV2i2tMOLp+bT7Ky72LTEXcQw+dXHb07/uoi5muT/BIRmi93w7ttnUpVP0luckqEmJDC1byq9d/436cCB/ROagWH3KuDT873K7fF5jx8/Sd9cvp5W3Rdzj4LlPy3/i/P9d9/0srzQrRSaE9q4a9dvpxu3ltPzZ+4BPaEtmMiw+T3Mt84upqpfepjIJA26q4DQnGCD5AvZf1heSXc3r+HcvIO+AJ3gXjQ5dD6zPDl/bPPPcWeXTUK3dGyh2RJ0lWHyS/cN3wiqQlVETf6Wz/T0tLPKInar+iSFZnUrlQQIEEg+PdcEBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECAhNPUCAAIGAgNAMYCklQICA0NQDBAgQCAgIzQCWUgIECPwH3+K0Nko1+5IAAAAASUVORK5CYII="},226:function(e,t,n){},24:function(e,t,n){"use strict";var r=n(27),a=n(26);n(218),n(146),n(147);n.d(t,"a",function(){return o});var o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"setTest",value:function(){e.ifTesting=!0}},{key:"unsetTest",value:function(){e.ifTesting=!1}}]),e}();o.ifTesting=!1},35:function(e,t,n){"use strict";n.d(t,"h",function(){return a}),n.d(t,"i",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"j",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return m}),n.d(t,"f",function(){return f});var r=n(14);function a(e,t){for(var n=t.length-1;n>=0;n--)i(e,t[n]);return e}function o(e,t){return a(Object(r.a)(e),t)}function i(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e}function c(e,t){for(var n=0;n<t.length;n++){u(e,t[n])}return e}function l(e,t){return c(Object(r.a)(e),t)}function u(e,t){-1===e.indexOf(t)&&e.push(t)}function s(e,t){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}function d(e,t){return Object(r.a)(e).filter(function(e){return t.includes(e)})}var m=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},f=function(e,t){return g(e,t)&&g(t,e)},g=function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}},373:function(e,t,n){e.exports=n.p+"static/media/vastus-tech-icons-03.29489f5b.svg"},374:function(e,t,n){e.exports=n.p+"static/media/vastus-tech-icons-04.79abcccc.svg"},375:function(e,t,n){e.exports=n.p+"static/media/vastus-tech-icons-02.c1906ff5.svg"},376:function(e,t,n){e.exports=n.p+"static/media/vastus-tech-icons-01.3cbad399.svg"},377:function(e,t,n){e.exports=n.p+"static/media/Endurance_icon.9bb9149b.png"},378:function(e,t,n){e.exports=n.p+"static/media/HIIT_icon.1019cd01.png"},379:function(e,t,n){e.exports=n.p+"static/media/Performance_icon.9f5a7a08.png"},380:function(e,t,n){e.exports=n.p+"static/media/Strength_icon.f874a811.png"},417:function(e,t,n){},425:function(e,t,n){e.exports=n(1063)},434:function(e,t,n){},437:function(e,t,n){},58:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var r=n(8),a=n(1),o=n(84);function i(e,t,n){return function(a,i){a(Object(r.d)()),a(function(e,t,n,r){return{type:o.ADD_HANDLER,payload:{channel:e,handler:t,unsubscriptionHandler:n,messageHandler:r}}}(e,t,n,u(e,i))),a(Object(r.e)())}}function c(e){return function(t,n){var i;t(Object(r.d)()),n().ably.subscribedChannels[e]?t((i=e,{type:o.REMOVE_CHANNEL,payload:{channel:i}})):a.h&&console.log("No channel to remove!"),t(Object(r.e)())}}function l(){return function(e){e(Object(r.d)()),e({type:o.CLEAR_CHANNELS}),e(Object(r.e)())}}function u(e,t){return function(n){a.h&&console.log("RECEIVED ABLY MESSAGE = "+JSON.stringify(n));var r=t().ably.notificationHandlers[e];if(r&&r.length>0)for(var o=0;o<r.length;o++)r[o](n)}}},59:function(e,t,n){"use strict";n.r(t),n.d(t,"getObjectChannelName",function(){return u}),n.d(t,"PUT_ITEM",function(){return s}),n.d(t,"SET_ITEM_ATTRIBUTE_INDEX",function(){return d}),n.d(t,"ADD_TO_ITEM_ATTRIBUTES",function(){return m}),n.d(t,"REMOVE_FROM_ITEM_ATTRIBUTES",function(){return f}),n.d(t,"REMOVE_ITEM_ATTRIBUTE_INDEX",function(){return g}),n.d(t,"REMOVE_ITEM",function(){return b}),n.d(t,"PUT_ITEM_QUERY",function(){return E}),n.d(t,"CLEAR_NORMALIZED_ITEM_QUERY",function(){return p}),n.d(t,"CLEAR_ITEM_CACHE",function(){return A}),n.d(t,"CLEAR_ITEM_QUERY_CACHE",function(){return O});var r=n(14),a=n(10),o=n(1),i=n(58),c=n(35),l=n(15);function u(e){return e+"-Updates"}var s="PUT_ITEM",d="SET_ITEM_ATTRIBUTE_INDEX",m="ADD_TO_ITEM_ATTRIBUTES",f="REMOVE_FROM_ITEM_ATTRIBUTES",g="REMOVE_ITEM_ATTRIBUTE_INDEX",b="REMOVE_ITEM",E="PUT_ITEM_QUERY",p="CLEAR_NORMALIZED_ITEM_QUERY",A="CLEAR_ITEM_CACHE",O="CLEAR_ITEM_QUERY_CACHE",T={clients:{},trainers:{},gyms:{},workouts:{},reviews:{},events:{},challenges:{},invites:{},posts:{},submissions:{},groups:{},comments:{},sponsors:{},streaks:{},deals:{},products:{},admins:{},clientLRUHandler:[],trainerLRUHandler:[],gymLRUHandler:[],workoutLRUHandler:[],reviewLRUHandler:[],eventLRUHandler:[],challengeLRUHandler:[],inviteLRUHandler:[],postLRUHandler:[],submissionLRUHandler:[],groupLRUHandler:[],commentLRUHandler:[],sponsorLRUHandler:[],streakLRUHandler:[],dealLRUHandler:[],productLRUHandler:[],adminLRUHandler:[],clientQueries:{},trainerQueries:{},gymQueries:{},workoutQueries:{},reviewQueries:{},eventQueries:{},challengeQueries:{},inviteQueries:{},postQueries:{},submissionQueries:{},groupQueries:{},commentQueries:{},sponsorQueries:{},streakQueries:{},dealQueries:{},productQueries:{},adminQueries:{},clientQueryLRUHandler:[],trainerQueryLRUHandler:[],gymQueryLRUHandler:[],workoutQueryLRUHandler:[],reviewQueryLRUHandler:[],eventQueryLRUHandler:[],challengeQueryLRUHandler:[],inviteQueryLRUHandler:[],postQueryLRUHandler:[],submissionQueryLRUHandler:[],groupQueryLRUHandler:[],commentQueryLRUHandler:[],sponsorQueryLRUHandler:[],streakQueryLRUHandler:[],dealQueryLRUHandler:[],productQueryLRUHandler:[],adminQueryLRUHandler:[]},h=function(e){return{clients:Object(a.a)({},e.clients),trainers:Object(a.a)({},e.trainers),gyms:Object(a.a)({},e.gyms),workouts:Object(a.a)({},e.workouts),reviews:Object(a.a)({},e.reviews),events:Object(a.a)({},e.events),challenges:Object(a.a)({},e.challenges),invites:Object(a.a)({},e.invites),posts:Object(a.a)({},e.posts),submissions:Object(a.a)({},e.submissions),groups:Object(a.a)({},e.groups),comments:Object(a.a)({},e.comments),sponsors:Object(a.a)({},e.sponsors),streaks:Object(a.a)({},e.streaks),deals:Object(a.a)({},e.deals),products:Object(a.a)({},e.products),admins:Object(a.a)({},e.admins),clientLRUHandler:Object(r.a)(e.clientLRUHandler),trainerLRUHandler:Object(r.a)(e.trainerLRUHandler),gymLRUHandler:Object(r.a)(e.gymLRUHandler),workoutLRUHandler:Object(r.a)(e.workoutLRUHandler),reviewLRUHandler:Object(r.a)(e.reviewLRUHandler),eventLRUHandler:Object(r.a)(e.eventLRUHandler),challengeLRUHandler:Object(r.a)(e.challengeLRUHandler),inviteLRUHandler:Object(r.a)(e.inviteLRUHandler),postLRUHandler:Object(r.a)(e.postLRUHandler),submissionLRUHandler:Object(r.a)(e.submissionLRUHandler),groupLRUHandler:Object(r.a)(e.groupLRUHandler),commentLRUHandler:Object(r.a)(e.commentLRUHandler),sponsorLRUHandler:Object(r.a)(e.sponsorLRUHandler),streakLRUHandler:Object(r.a)(e.streakLRUHandler),dealLRUHandler:Object(r.a)(e.dealLRUHandler),productLRUHandler:Object(r.a)(e.productLRUHandler),adminLRUHandler:Object(r.a)(e.adminLRUHandler),clientQueries:Object(a.a)({},e.clientQueries),trainerQueries:Object(a.a)({},e.trainerQueries),gymQueries:Object(a.a)({},e.gymQueries),workoutQueries:Object(a.a)({},e.workoutQueries),reviewQueries:Object(a.a)({},e.reviewQueries),eventQueries:Object(a.a)({},e.eventQueries),challengeQueries:Object(a.a)({},e.challengeQueries),inviteQueries:Object(a.a)({},e.inviteQueries),postQueries:Object(a.a)({},e.postQueries),submissionQueries:Object(a.a)({},e.submissionQueries),groupQueries:Object(a.a)({},e.groupQueries),commentQueries:Object(a.a)({},e.commentQueries),sponsorQueries:Object(a.a)({},e.sponsorQueries),streakQueries:Object(a.a)({},e.streakQueries),dealQueries:Object(a.a)({},e.dealQueries),productQueries:Object(a.a)({},e.productQueries),adminQueries:Object(a.a)({},e.adminQueries),clientQueryLRUHandler:Object(r.a)(e.clientQueryLRUHandler),trainerQueryLRUHandler:Object(r.a)(e.trainerQueryLRUHandler),gymQueryLRUHandler:Object(r.a)(e.gymQueryLRUHandler),workoutQueryLRUHandler:Object(r.a)(e.workoutQueryLRUHandler),reviewQueryLRUHandler:Object(r.a)(e.reviewQueryLRUHandler),eventQueryLRUHandler:Object(r.a)(e.eventQueryLRUHandler),challengeQueryLRUHandler:Object(r.a)(e.challengeQueryLRUHandler),inviteQueryLRUHandler:Object(r.a)(e.inviteQueryLRUHandler),postQueryLRUHandler:Object(r.a)(e.postQueryLRUHandler),submissionQueryLRUHandler:Object(r.a)(e.submissionQueryLRUHandler),groupQueryLRUHandler:Object(r.a)(e.groupQueryLRUHandler),commentQueryLRUHandler:Object(r.a)(e.commentQueryLRUHandler),sponsorQueryLRUHandler:Object(r.a)(e.sponsorQueryLRUHandler),streakQueryLRUHandler:Object(r.a)(e.streakQueryLRUHandler),dealQueryLRUHandler:Object(r.a)(e.dealQueryLRUHandler),productQueryLRUHandler:Object(r.a)(e.productQueryLRUHandler),adminQueryLRUHandler:Object(r.a)(e.adminQueryLRUHandler)}},I=function(e,t){return Object(l.c)(t,e.clients,e.trainers,e.gyms,e.workouts,e.reviews,e.events,e.challenges,e.invites,e.posts,e.submissions,e.groups,e.comments,e.sponsors,null,e.streaks,e.deals,e.products,e.admins,"GET ITEM CACHE CACHE REDUCER")},v=function(e,t){return Object(l.c)(t,e.clientLRUHandler,e.trainerLRUHandler,e.gymLRUHandler,e.workoutLRUHandler,e.reviewLRUHandler,e.eventLRUHandler,e.challengeLRUHandler,e.inviteLRUHandler,e.postLRUHandler,e.submissionLRUHandler,e.groupLRUHandler,e.commentLRUHandler,e.sponsorLRUHandler,null,e.streakLRUHandler,e.dealLRUHandler,e.productLRUHandler,e.adminLRUHandler,"GET ITEM LRU HANDLER")},C=function(e,t){return Object(l.c)(t,e.clientQueries,e.trainerQueries,e.gymQueries,e.workoutQueries,e.reviewQueries,e.eventQueries,e.challengeQueries,e.inviteQueries,e.postQueries,e.submissionQueries,e.groupQueries,e.commentQueries,e.sponsorQueries,null,e.streakQueries,e.dealQueries,e.productQueries,e.adminQueries,"GET ITEM QUERY CACHE CACHE REDUCER")},y=function(e,t){return Object(l.c)(t,"clientQueries","trainerQueries","gymQueries","workoutQueries","reviewQueries","eventQueries","challengeQueries","inviteQueries","postQueries","submissionQueries","groupQueries","commentQueries","sponsorQueries",null,"streakQueries","dealQueries","productQueries","adminQueries","GET ITEM QUERY CACHE CACHE REDUCER")},D=function(e,t){return Object(l.c)(t,e.clientQueryLRUHandler,e.trainerQueryLRUHandler,e.gymQueryLRUHandler,e.workoutQueryLRUHandler,e.reviewQueryLRUHandler,e.eventQueryLRUHandler,e.challengeQueryLRUHandler,e.inviteQueryLRUHandler,e.postQueryLRUHandler,e.submissionQueryLRUHandler,e.groupQueryLRUHandler,e.commentQueryLRUHandler,e.sponsorQueryLRUHandler,null,e.streakQueryLRUHandler,e.dealQueryLRUHandler,e.productQueryLRUHandler,e.adminQueryLRUHandler,"GET ITEM QUERY LRU HANDLER CACHE REDUCER")},S=function(e,t){return Object(l.c)(t,"clientQueryLRUHandler","trainerQueryLRUHandler","gymQueryLRUHandler","workoutQueryLRUHandler","reviewQueryLRUHandler","eventQueryLRUHandler","challengeQueryLRUHandler","inviteQueryLRUHandler","postQueryLRUHandler","submissionQueryLRUHandler","groupQueryLRUHandler","commentQueryLRUHandler","sponsorQueryLRUHandler",null,"streakQueryLRUHandler","dealQueryLRUHandler","productQueryLRUHandler","adminQueryLRUHandler","GET ITEM QUERY LRU HANDLER CACHE REDUCER")};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:e=h(e),P(e,t.payload.id,t.payload.itemType,t.payload.item,t.asyncDispatch);break;case d:(function(e,t,n,a,i,c){var l=I(e,n);if(!l[t])return void(o.b&&console.error("Cannot update an item not yet in the database!"));var u=l[t][a];if(!u)return void(o.b&&console.error("The item does not have the attribute to update yet!"));if(!Array.isArray(u))return void(o.b&&console.error("TRYING TO SET ATTRIBUTE OF A NOT ARRAY!!!! PROBLEM. AttributeName: "+a));var s=Object(r.a)(u);s[i]=c,l[t][a]=s})(e=h(e),t.payload.id,t.payload.itemType,t.payload.attributeName,t.payload.index,t.payload.attributeValue);break;case m:(function(e,t,n,r){var a=I(e,n);if(!a[t])return void(o.b&&console.error("Cannot update an item not yet in the database!"));for(var i in r)if(r.hasOwnProperty(i)){var l=a[t][i],u=r[i];l?Array.isArray(l)?a[t][i]=Object(c.j)(l,u):o.b&&console.error("TRYING TO ADD ATTRIBUTES TO A NOT ARRAY!!!! PROBLEM. AttributeName: "+i):a[t][i]=u}})(e=h(e),t.payload.id,t.payload.itemType,t.payload.attributes);break;case f:e=h(e),U(e,t.payload.id,t.payload.itemType,t.payload.attributes);break;case g:(function(e,t,n,a,i){var c=I(e,n);if(!c[t])return void(o.b&&console.error("Cannot update an item not yet in the database!"));var l=c[t][a];if(!l)return void(o.b&&console.error("The item does not have the attribute to update yet!"));if(!Array.isArray(l))return void(o.b&&console.error("TRYING TO REMOVE ATTRIBUTES TO A NOT ARRAY!!!! PROBLEM. AttributeName: "+a));var u=Object(r.a)(l);u.splice(i,1),c[t][a]=u})(e=h(e),t.payload.id,t.payload.itemType,t.payload.attributeName,t.payload.index);break;case b:e=h(e),R(e,t.payload.id,t.payload.itemType,t.asyncDispatch);break;case E:e=h(e),N(e,t.payload.itemType,t.payload.normalizedQueryString,t.payload.nextToken,t.payload.queryResult);break;case p:(function(e,t,n){var r=D(e,t),a=C(e,t)[n];for(var o in a)if(a.hasOwnProperty(o)){for(var i=-1,c=0;c<r.length;c++){var l=r[c];if(l.normalizedQueryString===n&&l.nextToken===o){i=c;break}}i>-1&&r.splice(i,1)}delete C(e,t)[n]})(e=h(e),t.payload.itemType,t.payload.normalizedQueryString);break;case A:(function(e,t,n){var r=I(e,t);for(var a in r)r.hasOwnProperty(a)&&R(e,a,t,n)})(e=h(e),t.payload.itemType,t.asyncDispatch);break;case O:(function(e,t){e[y(e,t)]={},e[S(e,t)]=[]})(e=h(e),t.payload.itemType)}return e};var P=function(e,t,n,r,c){t&&n||o.b&&console.error("Adding item to cache does not include the id and/or itemType!!!");var s=I(e,n),d=v(e,n);if(s[t]){var m=d.indexOf(t);m>-1&&d.splice(m,1),d.unshift(t),s[t]=Object(a.a)({},s[t],r)}else if(d.unshift(t),s[t]=r,d.length>=function(e){return Object(l.c)(e,100,100,100,100,100,2e3,2e3,100,2e3,1e3,100,1e3,100,null,100,100,100,100,"GET ITEM CACHE SIZE CACHE REDUCER")}(n)){var f=d.pop();c(Object(i.c)(u(f)))}},N=function(e,t,n,r,a){var o=C(e,t),i=D(e,t);o[n]||(o[n]={});var c=o[n];if(o[n][r]){for(var u={normalizedQueryString:n,nextToken:r},s=-1,d=0;d<i.length;d++){var m=i[d];if(m.normalizedQueryString===n&&m.nextToken===r){s=d;break}}s>-1&&i.splice(s,1),i.unshift(u),o[n][r]=a}else if(i.unshift({normalizedQueryString:n,nextToken:r}),c[r]=a,i.length>=function(e){return Object(l.c)(e,5,5,5,5,5,10,5,5,5,5,5,5,5,null,10,10,10,10,"GET ITEM QUERY CACHE SIZE")}(t)){var f=i.pop();delete o[f.normalizedQueryString][f.nextToken]}};var U=function(e,t,n,r){var a=I(e,n);if(a[t]){for(var i in r)if(r.hasOwnProperty(i)){var l=a[t][i],u=r[i];l?Array.isArray(l)?a[t][i]=Object(c.i)(l,u):o.b&&console.error("TRYING TO REMOVE ATTRIBUTES FROM A NOT ARRAY!!!! PROBLEM. AttributeName: "+i):o.b&&console.error("Attribute not recognized in item, cannot remove from it.")}}else o.b&&console.error("Cannot update an item not yet in the database!")},R=function(e,t,n,r){r(Object(i.c)(u(t)));var a=v(e,n),o=a.indexOf(t);-1!==o&&a.splice(o,1),delete I(e,n)[t]}},60:function(e,t,n){"use strict";n.r(t),n.d(t,"ENABLE_TYPE",function(){return c}),n.d(t,"DISABLE_TYPE",function(){return l}),n.d(t,"SET_SEARCH_QUERY",function(){return u}),n.d(t,"SET_TYPE_FILTER",function(){return s}),n.d(t,"SET_TYPE_NEXT_TOKEN",function(){return d}),n.d(t,"ADD_TYPE_RESULTS",function(){return m}),n.d(t,"RESET_TYPE_QUERY",function(){return f}),n.d(t,"RESET_QUERY",function(){return g}),n.d(t,"ENABLE_SEARCH_BAR",function(){return b}),n.d(t,"DISABLE_SEARCH_BAR",function(){return E});var r=n(37),a=n(14),o=n(10),i=n(35),c="ENABLE_TYPE",l="DISABLE_TYPE",u="SET_SEARCH_QUERY",s="SET_TYPE_FILTER",d="SET_TYPE_NEXT_TOKEN",m="ADD_TYPE_RESULTS",f="RESET_TYPE_QUERY",g="RESET_QUERY",b="ENABLE_SEARCH_BAR",E="DISABLE_SEARCH_BAR",p={enabled:!1,variableList:[],filterJSON:{},filterParameters:{},nextToken:null,ifFirst:!0,limit:100,results:[]},A=function(e){return(e=Object(o.a)({},e)).filterParameters=Object(o.a)({},e.filterParameters),e.results=Object(a.a)(e.results),e},O={searchQuery:"",results:[],limit:100,numTypesEnabled:3,ifFinished:!1,searchBarEnabled:!0,typeQueries:{Client:Object(o.a)({},A(p),{enabled:!0,variableList:["id","item_type","username","gender","birthday","name","friends","challengesWon","scheduledEvents","profileImagePath","friendRequests"],filterJSON:{or:[{username:{contains:"$searchQuery"}},{name:{contains:"$searchQuery"}},{email:{contains:"$searchQuery"}}]},limit:100}),Trainer:Object(o.a)({},A(p),{enabled:!0,variableList:["id","name","username","item_type","gender","birthday","profileImagePath","profileImagePaths","subscribers","friendlinessRating","effectivenessRating","posts"],filterJSON:{or:[{username:{contains:"$searchQuery"}},{name:{contains:"$searchQuery"}},{email:{contains:"$searchQuery"}}]},limit:100}),Gym:Object(o.a)({},A(p),{enabled:!1,variableList:[],filterJSON:{or:[{username:{contains:"$searchQuery"}},{name:{contains:"$searchQuery"}},{email:{contains:"$searchQuery"}}]},limit:100}),Workout:Object(o.a)({},A(p),{enabled:!1}),Review:Object(o.a)({},A(p),{enabled:!1}),Event:Object(o.a)({},A(p),{enabled:!1,variableList:[],filterJSON:{and:[{or:[{title:{contains:"$searchQuery"}},{description:{contains:"$searchQuery"}}]},{access:{eq:"$access"}}]},filterParameters:{access:"public"},limit:100}),Challenge:Object(o.a)({},A(p),{enabled:!0,variableList:["id","item_type","title","endTime","time_created","owner","ifCompleted","members","capacity","goal","access","description","restriction","tags","prize","submissions"],filterJSON:{and:[{or:[{title:{contains:"$searchQuery"}},{description:{contains:"$searchQuery"}}]},{access:{eq:"$access"}}]},filterParameters:{access:"public"},limit:100}),Invite:Object(o.a)({},A(p),{enabled:!1}),Post:Object(o.a)({},A(p),{enabled:!1})}};function T(e){var t=0;for(var n in e.typeQueries)e.typeQueries.hasOwnProperty(n)&&!0===e.typeQueries[n].enabled&&t++;return t}function h(e){for(var t in e.typeQueries)if(e.typeQueries.hasOwnProperty(t)){var n=e.typeQueries[t];if(n.enabled&&(!0===n.ifFirst||null!==n.nextToken))return!1}return!0}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:(e=Object(o.a)({},e,{typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload,Object(o.a)({},e.typeQueries[t.payload],{enabled:!0})))})).numTypesEnabled=T(e);break;case l:(e=Object(o.a)({},e,{typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload,Object(o.a)({},e.typeQueries[t.payload],{enabled:!1})))})).numTypesEnabled=T(e);break;case u:e=Object(o.a)({},e,{searchQuery:t.payload});break;case s:e=Object(o.a)({},e,{typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload.type,Object(o.a)({},e.typeQueries[t.payload.type],{filterJSON:t.payload.filterJSON,filterParameters:t.payload.filterParameters})))});break;case d:(e=Object(o.a)({},e,{typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload.type,Object(o.a)({},e.typeQueries[t.payload.type],{nextToken:t.payload.nextToken,ifFirst:!1})))})).ifFinished=h(e);break;case m:var n=t.payload.results?t.payload.results:[];(e=Object(o.a)({},e,{results:[].concat(Object(a.a)(e.results),Object(a.a)(n)),typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload.type,Object(o.a)({},e.typeQueries[t.payload.type],{results:[].concat(Object(a.a)(e.typeQueries[t.payload.type].results),Object(a.a)(n))})))})).ifFinished=h(e);break;case g:for(var p in(e=Object(o.a)({},e,{results:[],ifFinished:!1})).typeQueries)e.typeQueries.hasOwnProperty(p)&&(e.typeQueries[p].results=[],e.typeQueries[p].nextToken=null,e.typeQueries[p].ifFirst=!0);break;case f:e=Object(o.a)({},e,{results:Object(i.i)(e.results,e.typeQueries[t.payload].results),typeQueries:Object(o.a)({},e.typeQueries,Object(r.a)({},t.payload,Object(o.a)({},e.typeQueries[t.payload],{results:[],nextToken:null,ifFirst:!0})))});break;case b:e=Object(o.a)({},e,{searchBarEnabled:!0});break;case E:e=Object(o.a)({},e,{searchBarEnabled:!1})}return e}},72:function(e,t,n){var r={"./Endurance_icon.png":377,"./HIIT_icon.png":378,"./Performance_icon.png":379,"./Strength_icon.png":380};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=72},76:function(e,t,n){"use strict";n.r(t),n.d(t,"SET_ERROR",function(){return o}),n.d(t,"CLEAR_ERROR",function(){return i}),n.d(t,"SET_IS_LOADING",function(){return c}),n.d(t,"SET_IS_NOT_LOADING",function(){return l}),n.d(t,"TOGGLE_IS_LOADING",function(){return u}),n.d(t,"SET_APP_IS_NOT_LOADING",function(){return s});var r=n(10),a=n(1),o="SET_ERROR",i="CLEAR_ERROR",c="SET_IS_LOADING",l="SET_IS_NOT_LOADING",u="TOGGLE_IS_LOADING",s="SET_APP_IS_NOT_LOADING",d={isLoading:!1,appIsLoading:!0,error:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:a.b&&console.error("Error inside a redux action/reducer! (Leo wrote this) "+t.payload),e=Object(r.a)({},e,{error:t.payload});break;case i:e=Object(r.a)({},e,{error:null});break;case c:e=Object(r.a)({},e,{isLoading:!0});break;case l:e=Object(r.a)({},e,{isLoading:!1});break;case u:e=Object(r.a)({},e,{isLoading:!e.isLoading});break;case s:e=Object(r.a)({},e,{appIsLoading:!1})}return e}},77:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_MESSAGE",function(){return c}),n.d(t,"ADD_QUERY",function(){return l}),n.d(t,"SET_BOARD_READ",function(){return u}),n.d(t,"CLEAR_BOARD",function(){return s}),n.d(t,"CLEAR_ALL_BOARDS",function(){return d}),n.d(t,"UNSUBSCRIBE_FROM_BOARD",function(){return m}),n.d(t,"getBoardChannel",function(){return f});var r=n(14),a=n(10),o=n(58),i=n(1),c="ADD_MESSAGE",l="ADD_QUERY",u="SET_BOARD_READ",s="CLEAR_BOARD",d="CLEAR_ALL_BOARDS",m="UNSUBSCRIBE_FROM_BOARD";function f(e){return e+"-Board"}var g=1e3,b={boards:{},boardLRUHandler:[],boardNextTokens:{},boardIfFirsts:{},boardIfSubscribed:{},numMessages:0},E=function(e){return(e=Object(a.a)({},e)).boards=Object(a.a)({},e.boards),e.boardLRUHandler=Object(r.a)(e.boardLRUHandler),e.boardNextTokens=Object(a.a)({},e.boardNextTokens),e.boardIfFirsts=Object(a.a)({},e.boardIfFirsts),e.boardIfSubscribed=Object(a.a)({},e.boardIfSubscribed),e};function p(e,t,n,r){for(;g<n+e.numMessages&&(1!==e.boardLRUHandler.length||e.boardLRUHandler[0]!==t);)O(e,r)}function A(e,t){var n=e.boardLRUHandler.indexOf(t);-1!==n&&e.boardLRUHandler.splice(n,1),e.boardLRUHandler.unshift(t)}function O(e,t){var n=e.boardLRUHandler.pop();e.numMessages-=e.boards[n].length,delete e.boardNextTokens[n],delete e.boardIfFirsts[n],delete e.boards[n],t(Object(o.c)(f(n)))}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:(function(e,t,n,r){p(e,t,1,r),e.boards[t]?e.boards[t].unshift(n):e.boards[t]=[n];e.numMessages+=1,A(e,t)})(e=E(e),t.payload.board,t.payload.message,t.asyncDispatch);break;case l:(function(e,t,n,a,o,i){e.boardIfFirsts[t]=!1,e.boardNextTokens[t]=a,e.boardIfSubscribed[t]=o,p(e,t,n.length,i),e.boards[t]?e.boards[t]=[].concat(Object(r.a)(e.boards[t]),Object(r.a)(n)):e.boards[t]=n;e.numMessages+=n.length,A(e,t)})(e=E(e),t.payload.board,t.payload.messages,t.payload.nextToken,t.payload.ifSubscribed,t.asyncDispatch);break;case u:(function(e,t,n){var a=e.boards[t];if(a&&a.length>0){var o=a[0];o.lastSeenFor?o.lastSeenFor=[].concat(Object(r.a)(a[0].lastSeenFor),[n]):o.lastSeenFor=[n]}})(e=E(e),t.payload.board,t.payload.userID);break;case s:(function(e,t,n){var r=e.boardLRUHandler.indexOf(t);if(-1===r)return void(i.b&&console.error("Clearing board that isn't here?"));e.boardLRUHandler.splice(r,1);e.numMessages-=e.boards[t].length,delete e.boardNextTokens[t],delete e.boardIfFirsts[t],delete e.boards[t],delete e.boardIfSubscribed[t],n(Object(o.c)(f(t)))})(e=E(e),t.payload.board,t.asyncDispatch);break;case d:(function(e,t){for(;e.boardLRUHandler.length>0;)O(e,t)})(e=E(e),t.asyncDispatch);break;case m:(function(e,t,n){e.boardIfSubscribed[t]=!1,n(Object(o.c)(f(t)))})(e=E(e),t.payload.board,t.asyncDispatch)}return e}},8:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return l});var r=n(76);function a(e){return{type:r.SET_ERROR,payload:e}}function o(){return{type:r.CLEAR_ERROR}}function i(){return{type:r.SET_IS_LOADING}}function c(){return{type:r.SET_IS_NOT_LOADING}}function l(){return{type:r.SET_APP_IS_NOT_LOADING}}},84:function(e,t,n){"use strict";n.r(t),n.d(t,"ADD_HANDLER",function(){return c}),n.d(t,"SET_HANDLER",function(){return l}),n.d(t,"SET_PERMANENT_HANDLER",function(){return u}),n.d(t,"REMOVE_CHANNEL",function(){return s}),n.d(t,"CLEAR_CHANNELS",function(){return d});var r=n(14),a=n(10),o=n(161),i=n(1),c="ADD_HANDLER",l="SET_HANDLER",u="ADD_PERMANENT_CHANNEL",s="REMOVE_CHANNEL",d="CLEAR_CHANNELS",m=10,f={subscribedChannels:{},subscribedChannelLRUHandler:[],notificationHandlers:{},unsubscriptionHandlers:{},numPermanentHandlers:0},g=function(e){return(e=Object(a.a)({},e)).subscribedChannels=Object(a.a)({},e.subscribedChannels),e.subscribedChannelLRUHandler=Object(r.a)(e.subscribedChannelLRUHandler),e.notificationHandlers=Object(a.a)({},e.notificationHandlers),e.unsubscriptionHandlers=Object(a.a)({},e.unsubscriptionHandlers),e};function b(e,t){var n=e.subscribedChannelLRUHandler;n.length>=m-e.numPermanentHandlers&&p(e,n.pop()),n.unshift(t)}function E(e,t){var n=e.subscribedChannelLRUHandler,r=n.indexOf(t);-1!==r?(n.splice(r,1),n.unshift(t)):i.b&&console.error("ABLY CHANNEL NOT FOUND IN LRU, PROBLEM WITH IMPL.")}function p(e,t,n){!function(e,t,n){o.default.unsubscribeFromChannel(t,function(){if(n)for(var r=0;r<n.length;r++)n[r](e);else i.b&&console.error("Channel "+t+" did not specify any unsubscribe handlers????")})}(n,t,e.unsubscriptionHandlers[t]),delete e.subscribedChannels[t],delete e.notificationHandlers[t],delete e.unsubscriptionHandlers[t]}function A(e,t){o.default.subscribeToChannel(e,t)}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:(function(e,t,n,r,a){e.subscribedChannels[t]?(e.notificationHandlers[t].push(n),e.unsubscriptionHandlers[t].push(r),E(e,t)):(A(t,a),e.subscribedChannels[t]=t,e.notificationHandlers[t]=[n],e.unsubscriptionHandlers[t]=[r],b(e,t))})(e=g(e),t.payload.channel,t.payload.handler,t.payload.unsubscriptionHandler,t.payload.messageHandler);break;case l:(function(e,t,n,r,a){e.subscribedChannels[t]?(e.notificationHandlers[t]=[n],e.unsubscriptionHandlers[t]=[r],E(e,t)):(A(t,a),e.subscribedChannels[t]=t,e.notificationHandlers[t]=[n],e.unsubscriptionHandlers[t]=[r],b(e,t))})(e=g(e),t.payload.channel,t.payload.handler,t.payload.unsubscriptionHandler,t.payload.messageHandler);break;case u:(function(e,t,n,r,a){e.subscribedChannels[t]?(e.notificationHandlers[t]=[n],e.unsubscriptionHandlers[t]=[r]):(A(t,a),e.subscribedChannels[t]=t,e.notificationHandlers[t]=[n],e.unsubscriptionHandlers[t]=[r],e.numPermanentHandlers++)})(e=g(e),t.payload.channel,t.payload.handler,t.payload.unsubscriptionHandler,t.payload.messageHandler);break;case s:(function(e,t,n){p(e,t,n);var r=e.subscribedChannelLRUHandler.indexOf(t);-1!==r?e.subscribedChannelLRUHandler.splice(r,1):i.b&&console.error("REMOVING CHANNEL THAT DOESN'T EXIST!")})(e=g(e),t.payload.channel,t.asyncDispatch);break;case d:(function(e,t){var n=e.subscribedChannels;for(var r in n)n.hasOwnProperty(r)&&p(e,r,t);e.subscribedChannelLRUHandler=[],e.numPermanentHandlers=0})(e=g(e),t.asyncDispatch)}return e}},89:function(e,t,n){e.exports=n.p+"static/media/VC_logo.798ed7fc.svg"},97:function(e,t,n){"use strict";n.r(t),n.d(t,"SET_USER",function(){return a}),n.d(t,"FORCE_SET_USER",function(){return o}),n.d(t,"CLEAR_USER",function(){return i});var r=n(10),a="SET_USER",o="FORCE_SET_USER",i="CLEAR_USER",c={id:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:e=Object(r.a)({},e,t.payload);break;case o:e=Object(r.a)({},c,t.payload);break;case i:e=Object(r.a)({},c)}return e}}},[[425,2,1]]]);
//# sourceMappingURL=main.7396fe36.chunk.js.map