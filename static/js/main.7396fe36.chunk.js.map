{"version":3,"sources":["Constants.js","vastuscomponents/img/vt_new.svg","vastuscomponents/logic/DebuggingHelper.js","vastuscomponents/api/GraphQL.js","vastuscomponents/api/S3Storage.js","vastuscomponents/logic/MessageHelper.js","vastuscomponents/redux/actions/messageActions.js","vastuscomponents/redux/actions/cacheActions.js","vastuscomponents/redux/actions/userActions.js","vastuscomponents/redux/convenience/cacheItemTypeActions.js","AppConfig.js","vastuscomponents/api/Lambda.js","vastuscomponents/database_functions/InviteFunctions.js","vastuscomponents/logic/TimeHelper.js","vastuscomponents/components/manager/InviteToChallengeModal.js","vastuscomponents/database_functions/UserFunctions.js","vastuscomponents/database_functions/MessageFunctions.js","vastuscomponents/components/messaging/MessageInput.js","vastuscomponents/components/messaging/Message.js","vastuscomponents/components/messaging/Messages.js","vastuscomponents/components/props/Spinner.js","vastuscomponents/components/messaging/MessageBoard.js","vastuscomponents/logic/CacheRetrievalHelper.js","vastuscomponents/components/manager/UploadImage.js","vastuscomponents/components/props/ProfileImageGallery.js","vastuscomponents/components/props/ProfileImage.js","vastuscomponents/components/modals/ClientModal.js","vastuscomponents/database_functions/ChallengeFunctions.js","vastuscomponents/components/props/StyledProfileImage.js","vastuscomponents/database_functions/EventFunctions.js","vastuscomponents/components/cards/ClientCard.js","vastuscomponents/components/cards/TrainerCard.js","vastuscomponents/database_functions/PostFunctions.js","vastuscomponents/components/modals/PostDescriptionModal.js","vastuscomponents/components/cards/post_detail_cards/ChallengeDetailCard.js","vastuscomponents/components/cards/post_detail_cards/PostDetailCard.js","vastuscomponents/components/cards/post_detail_cards/ClientDetailCard.js","vastuscomponents/components/cards/post_detail_cards/TrainerDetailCard.js","vastuscomponents/database_functions/GroupFunctions.js","vastuscomponents/components/manager/CreatePost.js","vastuscomponents/components/manager/CreateGroupChallenge.js","vastuscomponents/components/modals/GroupDescriptionModal.js","vastuscomponents/components/cards/GroupCard.js","vastuscomponents/components/cards/post_detail_cards/GroupDetailCard.js","vastuscomponents/components/cards/post_detail_cards/EventDetailCard.js","vastuscomponents/components/cards/PostCard.js","vastuscomponents/components/cards/ProductCard.js","vastuscomponents/components/modals/SponsorModal.js","vastuscomponents/components/modals/DealModal.js","vastuscomponents/components/cards/DealCard.js","vastuscomponents/components/lists/DatabaseObjectList.js","vastuscomponents/components/modals/EventDescriptionModal.js","vastuscomponents/components/cards/EventCard.js","vastuscomponents/components/lists/EventList.js","vastuscomponents/components/modals/TrainerModal.js","vastuscomponents/components/cards/UserCard.js","vastuscomponents/components/manager/CompleteChallengeModal.js","vastuscomponents/database_functions/SubmissionFunctions.js","vastuscomponents/components/manager/CreateSubmissionModal.js","vastuscomponents/components/cards/SubmissionCard.js","vastuscomponents/components/lists/SubmissionList.js","vastuscomponents/components/lists/UserList.js","vastuscomponents/components/modals/ChallengeDescriptionModal.js","vastuscomponents/components/cards/ChallengeCard.js","vastuscomponents/components/lists/ChallengeList.js","vastuscomponents/api/Auth.js","vastuscomponents/redux/actions/authActions.js","vastuscomponents/components/manager/LogOutButton.js","screens/profile_tab/ProfileTab.js","vastuscomponents/components/feeds/TrainerFeed.js","vastuscomponents/components/feeds/PostFeed.js","vastuscomponents/components/manager/CreateChallenge.js","vastuscomponents/components/info/NextChallenge.js","screens/main_tab/MainTab.js","vastuscomponents/components/messaging/MessageBoardCard.js","vastuscomponents/components/messaging/MessageBoardFeed.js","vastuscomponents/components/manager/StartChatModal.js","vastuscomponents/components/manager/CreateGroup.js","screens/messaging_tab/MessageTab.js","vastuscomponents/components/messaging/MessageIcon.js","vastuscomponents/components/feeds/GroupFeed.js","vastuscomponents/components/feeds/DealFeed.js","screens/Tabs.js","vastuscomponents/redux/actions/searchActions.js","vastuscomponents/components/props/SearchBar.js","vastuscomponents/components/info/NotificationBell.js","vastuscomponents/components/cards/InviteCard.js","vastuscomponents/components/props/FilterScreen.js","vastuscomponents/components/feeds/InviteFeed.js","screens/filter/FilterModal.js","AuthApp.js","authscreens/SignUpModal.js","authscreens/ForgotPasswordModal.js","authscreens/GoogleSignUp.js","authscreens/SignInPage.js","authscreens/OpeningScreen.js","UnauthApp.js","App.js","registerServiceWorker.js","vastuscomponents/redux/store.js","authscreens/SplashScreen.js","index.js","vastuscomponents/img/vt_gold_even_thicker_border.svg","vastuscomponents/img/roundProfile.png","vastuscomponents/redux/middleware/AsyncDispatchMiddleware.js","vastuscomponents/logic/ItemType.js","vastuscomponents/api/Ably.js","vastuscomponents/redux/reducers/authReducer.js","vastuscomponents/img/not_found.png","vastuscomponents/testing/TestHelper.js","vastuscomponents/logic/ArrayHelper.js","vastuscomponents/img/vastus-tech-icons-03.svg","vastuscomponents/img/vastus-tech-icons-04.svg","vastuscomponents/img/vastus-tech-icons-02.svg","vastuscomponents/img/vastus-tech-icons-01.svg","vastuscomponents/img/Endurance_icon.png","vastuscomponents/img/HIIT_icon.png","vastuscomponents/img/Performance_icon.png","vastuscomponents/img/Strength_icon.png","vastuscomponents/redux/actions/ablyActions.js","vastuscomponents/redux/reducers/cacheReducer.js","vastuscomponents/redux/reducers/searchReducer.js","vastuscomponents/img sync /^/.*_icon/.png$","vastuscomponents/redux/reducers/infoReducer.js","vastuscomponents/redux/reducers/messageReducer.js","vastuscomponents/redux/actions/infoActions.js","vastuscomponents/redux/reducers/ablyReducer.js","vastuscomponents/img/VC_logo.svg","vastuscomponents/redux/reducers/userReducer.js"],"names":["__webpack_require__","d","__webpack_exports__","ifDebug","log","err","ifAlert","reduxLog","ifCallLambdaAtStart","getEnvironmentType","appUserItemType","lambdaFunctionName","userInitialFetchList","module","exports","p","debugAlert","message","alert","GraphQL","itemType","id","variableList","successHandler","failureHandler","Error","length","i","func","switchReturnItemType","getClient","getTrainer","getGym","getWorkout","getReview","getEvent","getChallenge","getInvite","getPost","getSubmission","getGroup","getComment","getSponsor","getMessage","getStreak","getDeal","getProduct","getAdmin","username","getClientByUsername","getTrainerByUsername","getGymByUsername","getSponsorByUsername","getAdminByUsername","federatedID","getClientByFederatedID","getTrainerByFederatedID","getGymByFederatedID","getSponsorByFederatedID","getAdminByFederatedID","ids","getClients","getTrainers","getGyms","getWorkouts","getReviews","getEvents","getChallenges","getInvites","getPosts","getSubmissions","getGroups","getComments","getSponsors","getMessages","getStreaks","getDeals","getProducts","getAdmins","TestHelper","ifTesting","items","obj","item_type","j","varName","push","unretrievedItems","filter","limit","nextToken","constructClientQuery","constructTrainerQuery","constructGymQuery","constructWorkoutQuery","constructReviewQuery","constructEventQuery","constructChallengeQuery","constructInviteQuery","constructPostQuery","constructSubmissionQuery","constructGroupQuery","constructCommentQuery","constructSponsorQuery","constructMessageQuery","constructStreakQuery","constructDealQuery","constructProductQuery","constructAdminQuery","query","queryClients","queryTrainers","queryGyms","queryWorkouts","queryReviews","queryEvents","queryChallenges","queryInvites","queryPosts","querySubmissions","queryGroups","queryComments","querySponsors","queryMessages","queryStreaks","queryDeals","queryProducts","queryAdmins","execute","constructQuery","board","batchLimit","console","idList","generateIDList","inputVariables","filterJSON","variableValues","parameterString","JSON","stringify","replace","parameters","idListString","idName","queryName","queryFunction","outputVariables","finalInputVariables","arguments","undefined","ifBatch","ifQuery","Object","objectSpread","ifFirst","_","isEmpty","variable","hasOwnProperty","variables","normalizedQuery","queryResult","compressedResult","itemTypeCache","item","queryFunctionName","API","graphql","graphqlOperation","then","data","catch","error","substring","S3Storage","path","image","put","progress","loaded","total","video","progressHandler","multipartPut","parseInt","media","AWS","params","Bucket","bucketName","headObject","Key","code","Storage","get","url","file","contentType","progressCallback","result","bucket","ContentType","Body","options","partSize","multipartSize","queueSize","multipartQueueSize","upload","on","send","remove","getMessageBoardName","sort","a","b","getIDsFromMessageBoard","split","ifMessageUnreadFor","userID","from","lastSeenFor","includes","notFoundPicture","require","defaultProfilePicture","queryNextMessagesFromBoard","dataHandler","dispatch","setIsLoading","queryNextMessagesFromBoardOptionalSubscribe","ifSubscribe","getStore","boardIfFirsts","boardIfSubscribed","ifAddMessageFromBoardNotification","boardIDs","boardID","user","ownedEvents","ownedChallenges","ownedGroups","addHandlerAndUnsubscription","getBoardChannel","addMessageFromNotification","state","clearBoard","boardNextTokens","QL","addURLToMessages","type","messages","profileImagePath","ifSubscribed","ADD_QUERY","payload","addQueryToBoard","setIsNotLoading","setError","messagePathField","messageURLField","defaultURL","fetchChecker","messagesLength","messagesReturned","returnMessage","addURLToMessage","S3","addMessageToBoard","ADD_MESSAGE","CLEAR_BOARD","addS3MediaToData","callback","addDefaultImage","mediaKey","asyncWaiting","asyncReturned","isWaiting","finishUpdatingObject","getSingleMedia","getMultipleMedia","paths","_loop","key","keyLen","substr","fetch","cacheName","getCacheName","cache","currentObject","objectKeyList","keys","v","overwriteFetch","forceFetch","subscribeFetch","__stale__","getObjectChannelName","createJSON","CREATE","setJSON","SET","addJSON","ADD","removeJSON","REMOVE","ifDelete","DELETE","removeItem","putItem","addItemAttributes","removeItemAttributes","asyncDispatch","subscribeCacheUpdatesToObject","concat","toConsumableArray","toString","getItem","updatedData","updateUserFromCache","getCache","batchOverwriteFetch","startIndex","maxFetch","retrievedItems","numFetched","fetchIDs","slice","Math","min","totalFetch","firstFetchIDs","restFetchIDs","finishProcessItem","batchGetFailHandler","getItems","batchGetDataHandler","restFetch","fetchQuery","queryString","constructItemQuery","nextTokenString","getNextTokenString","normalizedQueryString","getNormalizedQuery","clientQueries","trainerQueries","gymQueries","workoutQueries","reviewQueries","eventQueries","challengeQueries","inviteQueries","postQueries","submissionQueries","groupQueries","commentQueries","sponsorQueries","streakQueries","dealQueries","productQueries","adminQueries","getQueryCache","putItemQuery","getQueryResultFromCompressed","overwriteFetchQuery","queryItems","_loop2","getNormalizedQueryString","getCompressedFromQueryResult","setItemAttribute","attributeName","attributeValue","getItemTypeFromID","defineProperty","setItemAttributeIndex","index","SET_ITEM_ATTRIBUTE_INDEX","setItemAttributeAtIndex","addToItemAttribute","removeFromItemAttribute","removeFromItemAttributeAtIndex","REMOVE_ITEM_ATTRIBUTE_INDEX","removeItemAttributeIndex","fetchItem","forceFetchItem","subscribeFetchItem","fetchItems","filteredVariablesList","missingVariableList","subtractArray","addUniqueToArray","setEquals","batchFetch","fetchItemQuery","attributes","ADD_TO_ITEM_ATTRIBUTES","REMOVE_FROM_ITEM_ATTRIBUTES","PUT_ITEM","PUT_ITEM_QUERY","REMOVE_ITEM","clearItemQueryCache","CLEAR_ITEM_QUERY_CACHE","clients","trainers","gyms","workouts","reviews","events","challenges","invites","posts","submissions","groups","comments","sponsors","streaks","deals","products","admins","fetchUserAttributes","forceFetchUserAttributes","subscribeFetchUserAttributes","addToUserAttribute","removeFromUserAttribute","setUser","SET_USER","forceSetUser","FORCE_SET_USER","fetchClient","fetchTrainer","fetchEvent","fetchChallenge","fetchInvite","fetchPost","fetchGroup","fetchSponsor","fetchDeal","forceFetchEvent","forceFetchPost","fetchChallenges","setupAWS","Amplify","configure","aws_appsync_graphqlEndpoint","aws_appsync_region","aws_appsync_authenticationType","Auth","identityPoolId","region","userPoolId","userPoolWebClientId","lambda","update","credentials","IdentityPoolId","Lambda","apiVersion","fromID","createRequest","invokeDatabaseLambda","action","environmentType","getCreateRequestName","objectID","objectItemType","identifiers","attributeValues","secondaryIdentifier","specifyAction","invokeLambda","functionName","request","FunctionName","Payload","invoke","parse","errorMessage","InviteFunctions","to","props","create","eventID","challengeID","groupID","inviteType","about","description","inviteID","updateAddToAttribute","updateRemoveFromAttribute","updateSetAttribute","delete","parseISOString","s","Date","String","convertToISOString","date","tzo","getTimezoneOffset","dif","pad","num","norm","floor","abs","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertFromISO","dateTime","dateTimeString","hourInt","minutes","hours","ampm","getDay","daysLeft","now","difference_ms","getTime","round","timeLeft","getTodayDateTimeString","setMinutes","getNowTimeString","challengeButtons","friendID","isLoading","isDisabled","setIsDisabled","onClose","rowProps","react_default","createElement","react","Card","fluid","raised","Content","cards_ChallengeCard","challenge","Button","disabled","loading","primary","onClick","createChallengeInvite","handleInviteToChallenge","connect","info","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","setChallenges","useEffect","ChallengeCardInfo","fetchList","endTime","Modal","dimmer","open","Message","centered","size","closeIcon","Header","className","color","errorHandler","UserFunctions","name","email","_this","this","putImage","updateAdd","updateRemove","messageBoard","updateSet","gender","birthday","location","bio","profileImage","_this2","dealID","MessageFunctions","picture","picturePath","videoPath","messageID","putVideo","addPictureOrVideo","event","userProfileImagePath","target","files","fileType","createPictureMessage","addPicture","MessageInput_this","setState","sendLoading","createVideoMessage","addVideo","percent","setPercent","onSubmit","e","preventDefault","elements","value","trim","createTextMessage","addMessage","Progress","active","loadingBar","Input","placeholder","style","border","background","borderRadius","as","for","Icon","marginLeft","accept","hidden","onChange","messaging_Message","messageURL","profilePicture","ifSelf","labelPosition","floated","Label","pointing","backgroundImage","Grid","class","Column","width","align","height","Row","video_react_lib","src","dist_default","medium","up","columns","small","down","marginRight","Messages","Container","reverse","map","Spinner","icon","defaultProps","fetchLimit","canFetch","setCanFetch","variablesList","discardBoard","unsubscribeFromBoard","UNSUBSCRIBE_FROM_BOARD","otherID","setOtherID","scrollViewRef","setScrollViewRef","scrollToBottom","boards","react_inverted_scrollview_lib_default","ref","onScroll","scrollTop","scrollBottom","handleScroll","props_Spinner","messaging_Messages","firstMessage","getOtherReadStatus","Divider","messaging_MessageInput","getObjectAttribute","cacheReducer","getObjectAttributeFromCache","getObjectAttributeWithItemType","subCacheName","object","getAttributeFromObject","UploadImage","rotation","setRotation","editorRef","setEditorRef","react_avatar_editor_dist_default","imageURL","rotate","scale","editor","dataURI","getImageScaledToCanvas","toDataURL","binary","atob","array","charCodeAt","Blob","Uint8Array","onClickSave","getGalleryImageS3Name","pos","getImageComponents","profileImagePaths","profileImages","editable","swipeRef","setUploadModalOpen","setTempImageInfo","profileImagesLength","times","Image","margin","marginTop","htmlFor","circular","marginBottom","getPos","updateProfileImage","removeProfileImage","removeGalleryPicture","uploadModalOpen","tempImageInfo","reactSwipeElement","setReactSwipeElement","prev","react_swipe_lib_default","swipeOptions","continuous","el","manager_UploadImage","displayImage","profilePosID","addProfileImage","getProfileImageS3Name","setGalleryPicture","URL","createObjectURL","next","Dimmer","Loader","galleryModalOpen","setGalleryModalOpen","tempProfilePicture","setTempProfilePicture","basic","props_ProfileImageGallery","inverted","displayPicture","ClientFunctions","uploadProfilePicture","clientID","setClientID","isActionButtonLoading","setIsActionButtonLoading","inviteModalOpen","setInviteModalOpen","_useState9","_useState10","isFriend","setIsFriend","_useState11","_useState12","friendRequestID","setFriendRequestID","_useState13","_useState14","hasFriendRequest","setHasFriendRequest","_useState15","_useState16","pendingFriendRequest","setPendingFriendRequest","getAttribute","attribute","friends","friendRequests","clientFriendRequests","receivedInvites","invite","handleAddFriendButton","createFriendRequest","handleAcceptFriendRequestButton","addFriend","handleRemoveFriendButton","removeFriend","props_ProfileImage","Actions","InviteToChallengeModal","onOpen","trigger","messaging_MessageBoard","ChallengeFunctions","owner","capacity","title","goal","access","restriction","tags","difficulty","memberIDs","prize","challengeType","streakUpdateSpanType","streakUpdateInterval","streakN","winnerID","tag","addChallenge","removeChallenge","members","group","StyledProfileImage","switchImageType","EventFunctions","time","address","addEvent","removeEvent","ClientCardInfo","ClientCard","modalOpen","setModalOpen","getClientAttribute","client","rank","props_StyledProfileImage","textAlign","divided","verticalAlign","modals_ClientModal","extra","Meta","TrainerCardInfo","TrainerCard","getTrainerAttribute","trainer","Description","Group","modals_TrainerModal","trainerID","PostFunctions","by","createPostOptional","pictures","videos","itemID","createShareItemPostOptional","postID","postType","picturePaths","videoPaths","numPictures","numVideos","numVideosAndPictures","numFinished","finish","createCorrectButton","isOwned","isDeleteLoading","negative","handleDeletePostButton","attributeList","clientModalOpen","setClientModalOpen","List","relaxed","Item","ChallengeDetailCardInfo","ChallengeDetailCard","PostDetailCard","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","videoURL","pictureURL","forceUpdate","bind","assertThisInitialized","handleDelete","getDisplayMedia","getPostAttribute","newProps","post","avatar","handleDeleteEventButton","_this3","inline","canCallChecks","deleteHandler","Component","fetchVariableList","TrainerDetailCard","cards_TrainerCard","GroupFunctions","motto","groupImage","owners","addGroup","removeGroup","groupImagePath","CreatePostProp","checked","checkedRest","isSubmitLoading","showModal","submitError","showSuccessModal","showSuccessLabel","showSuccessLabelTimer","picturesLoading","videosLoading","tempPictureURLs","tempVideoURLs","toggle","toggleRest","handleAccessSwitch","setVideo","setPicture","handleSubmit","getLatestPicture","getVideos","returnValue","closeModal","closeSuccessModal","changeStateText","notifySubmission","positive","maxWidth","maxHeight","displayCurrentVideo","displayCurrentImage","displayMedia","displaySubmission","Form","react_quill_lib_default","createSuccessLabel","displayError","modules","toolbar","header","font","list","indent","clipboard","matchVisual","formats","endDate","tagsPressed","setShowSuccessModal","Number","isInteger","createGroupChallengeOptional","show","intervalsPlural","setStreakUpdateSpanType","Dropdown","selection","text","HIIT","Strength","Performance","Endurance","setTagsPressed","setTitle","setEndTime","setCapacity","setGoal","_useState17","_useState18","setRestriction","_useState19","_useState20","setAccess","_useState21","_useState22","setShowSuccessLabel","_useState23","_useState24","setChallengeType","_useState25","_useState26","_useState27","_useState28","setStreakUpdateInterval","_useState29","_useState30","setStreakN","associatedGroup","label","Field","Checkbox","GroupDescriptionModal","isJoined","isCompleted","isRequesting","isRestricted","completeModalOpen","submitModalOpen","isLeaveLoading","isJoinLoading","isRequestLoading","joinRequestSent","deleted","fetchedTrainer","isEditing","handleDeleteGroupButton","handleLeaveGroupButton","handleJoinGroupButton","handleRequestGroupButton","getGroupAttribute","_this4","_this5","_this6","createGroupRequest","isMembers","memberRequests","ifCompleted","_this7","_this8","Popup","content","position","panes","Tab","menu","widths","CreateGroupChallenge","_this9","menuItem","render","Pane","CreatePost","lists_DatabaseObjectList","noObjectsMessage","acceptedItemTypes","sortFunction","time_created","localeCompare","createGroupChallenge","sortFuntion","editButton","createCorrectSettingsButton","minWidth","minHeight","forceFetchGroup","GroupCardInfo","modals_GroupDescriptionModal","GroupDetailCardInfo","EventDetailCardInfo","PostCardInfo","postModalOpen","setPostModalOpen","ItemType","ClientDetailCard","post_detail_cards_TrainerDetailCard","post_detail_cards_ChallengeDetailCard","post_detail_cards_PostDetailCard","getCorrectDetailCard","getAbout","modals_PostDescriptionModal","ProductCardInfo","codesVisible","setCodesVisible","linksVisible","setLinksVisible","getDealAttribute","product","deal","rows","codes","links","SponsorModalInfo","sponsorID","sponsor","DealCardInfo","randomized","DealModalInfo","deletedMessage","isDeleted","userBuyDeal","buyDeal","sponsorModalOpen","setSponsorModalOpen","setDeleted","getSponsorAttribute","Logo","modals_SponsorModal","rounded","DealCard","modals_DealModal","getObjectComponent","cards_ClientCard","cards_EventCard","cards_PostCard","cards_DealCard","cards_ProductCard","batchFetchMoreObjects","typeIDs","typeHiddenIDIndex","setVisibleObjects","setTypeHiddenIDIndex","hiddenIndex","EventCard","addObject","shuffleArray","DatabaseObjectList","setIDs","setTypeIDs","visibleObjects","idsTemp","typeIDsTemp","typeHiddenIDIndexTemp","Visibility","onUpdate","debounce","_ref","calculations","bottomVisible","objects","components","objectComponents","EventDescriptionModal","handleJoinEventButton","handleLeaveEventButton","handleLeave","handleJoin","getEventAttribute","dateTimes","fromDateString","toDateString","fromDate","toDate","fromHourInt","toHourInt","fromminutes","fromhours","fromampm","tominutes","tohours","toampm","closeClientModal","manager_CompleteChallengeModal","closeCompleteModal","openClientModal","getOwnerName","ifChallenge","joinHandler","leaveHandler","completeHandler","openCompleteModal","EventCardInfo","modals_EventDescriptionModal","EventList","eventIDs","sentRequest","componentWillReceiveProps","row","noEventsMessage","ownedModalOpen","setOwnedModalOpen","scheduledModalOpen","setScheduledModalOpen","lists_ChallengeList","challengeIDs","noChallengesMessage","lists_EventList","UserCardInfo","UserCard","getUserAttribute","getModal","winnerButtons","cards_UserCard","updateWinner","declareWinnerButtonHandler","setMembers","itemsPerRow","SubmissionFunctions","submissionID","CreateSubmissionModal","showLoadingBar","handleSubmitButton","displayVideo","nextContext","finishHandler","createSubmission","SubmissionCardInfo","submission","setVisibleSubmissions","fetchSubmission","visibleSubmissions","hiddenIDIndex","setHiddenIDIndex","endIndex","o","fetchMoreObjects","cards_SubmissionCard","submissionComponents","noSubmissionsMessage","UserList","userIDs","ChallengeDescriptionModalInfo","handleDeleteChallengeButton","handleLeaveChallengeButton","displaySelectionOptions","setSubmitModalOpen","celled","selectWinner","Menu","lists_SubmissionList","createChallengeRequest","handleRequestChallengeButton","handleJoinChallengeButton","challengeDeleted","subscribeFetchChallenge","forceFetchChallenge","fetchStreak","setStreak","setIsOwned","setIsRequesting","setIsJoined","setIsCompleted","setIsRestricted","ownerModalOpen","setOwnerModalOpen","setCompleteModalOpen","setIsEditing","getChallengeAttribute","completed","intersection","arrayIntersection","streak","lists_UserList","noUsersMessage","ownerID","createCorrectModal","manager_CreateSubmissionModal","getDaysLeft","ChallengeCard","modals_ChallengeDescriptionModal","floating","ChallengeList","challengeList","challengeComponents","AuthAPI","currentCredentials","currentAuthenticatedUser","password","signUp","birthdate","confirmSignUp","authUser","forgotPassword","newPassword","forgotPasswordSubmit","signIn","googleUser","_googleUser$getAuthRe","getAuthResponse","id_token","expires_at","profile","getBasicProfile","federatedSignIn","getEmail","getName","jwt_decode","sub","token","federation","federatedUser","oldPassword","changePassword","signOut","global","logOut","removeAllHandlers","googleSignIn","getItemByFederatedID","generateGoogleUsername","usernameHandler","depth","randomInt","random","randomGoogleUsername","getItemByUsername","createFederatedUser","manager_LogOutButton","defaultValue","displayName","challengesWon","completedChallenges","isFinished","fetchTrainerQuery","setIsFinished","setNextToken","setTrainers","fetchPostQuery","setPosts","byItemType","aboutItemType","nextChallenge","setNextChallenge","challengeTimeLeft","createChallengeOptional","setPictureURL","setTempPictures","setPrize","prizes","MainTab","_useState31","_useState32","tempPictures","feeds_PostFeed","generateFilter","and","or","eq","postType1","postType2","MessageBoardCard","unread","onClickCard","empty","messageBoardProPic","messageBoardTitle","messageBoardLastMessage","messageBoardID","lastMessage","cacheBoards","boardTitle","boardProfilePicture","unreadFor","messageBoardCards","messageBoardIDs","setBoardRead","cards","messaging_MessageBoardCard","addLastSeen","clickCard","SET_BOARD_READ","messageBoards","setMessageBoards","createButton","selectedFriends","setSelectedFriends","removeFromArray","addUniqueElementToArray","setFriends","friend","selectChatIDButtons","selectedIDs","addMessageBoard","createChat","CreateGroupProp","chatModalOpen","setChatModalOpen","manager_StartChatModal","messaging_MessageBoardFeed","peekAtFirstMessageFromBoard","numBoards","boardsCache","userBoards","numUnread","performancePressed","endurancePressed","hiitPressed","strengthPressed","handleRestrictionSwitch","createGroupOptional","handleDurationChange","eventState","duration","setMotto","showRestriction","fetchGroupQuery","setGroups","arraysIntersect","cards_GroupCard","fetchDealQuery","setDeals","Tabs","fixed","attached","main_tab_MainTab","profile_tab_ProfileTab","newSearch","minResults","searchQuery","RESET_QUERY","SET_SEARCH_QUERY","loadMoreResults","search","results","ifFinished","numResults","numTypesEnabled","typeQueries","getData","ADD_TYPE_RESULTS","addTypeResults","setTypeNextToken","apply","failData","performQuery","performAllQueries","typeQuery","enabled","filterParameters","SET_TYPE_NEXT_TOKEN","attributesList","numNotifications","setNumNotifications","fetchAndAddReceivedInvites","fetchFunction","prevNumNotifications","otherProps","objectWithoutProperties","InviteCardInfo","clientFetchList","trainerFetchList","eventFetchList","challengeFetchList","groupFetchList","checkResponse","aboutID","toID","responseHandler","isValidRequest","deleteRequest","handleDeclineFriendRequest","handleDeclineEventInvite","handleDeclineChallengeInvite","handleDeclineGroupInvite","handleDeclineEventRequest","handleDeclineChallengeRequest","handleDeclineGroupRequest","fromModal","fromModalOpen","setFromModalOpen","fromItemType","toModal","toModalOpen","setToModalOpen","toItemType","aboutModal","aboutModalOpen","setAboutModalOpen","getInviteDetails","getInviteAttribute","getFromAttribute","getToAttribute","getAboutAttribute","acceptLoading","setAcceptLoading","denyLoading","setDenyLoading","handleAcceptFriendRequest","Feed","Event","Summary","User","Extra","handleAcceptEventInvite","handleAcceptChallengeInvite","handleAcceptGroupInvite","handleAcceptEventRequest","handleAcceptChallengeRequest","handleAcceptGroupRequest","toggleTypeCheckbox","notifications","setNotifications","fetchAndAddInvite","fetchAboutAndFromInfo","cards_InviteCard","setFilterTypes","enableType","disableType","ENABLE_TYPE","DISABLE_TYPE","filterTypes","types","stackable","checkBoxes","getCheckBoxes","FilterModal","props_FilterScreen","filterModalOpen","setFilterModalOpen","borderless","vertical","stretched","SearchBar","filter_FilterModal","setStateText","setStates","fieldsAreFilledCorrectly","confirmPassword","properlyFormedPassword","test","toUpperCase","toLowerCase","loadingProp","auth","enterpriseID","createUser","deleteUser","confirmationCode","clearError","openSignUpModal","closeSignUpModal","setUsername","setPassword","setConfirmPassword","setName","setEmail","setConfirmationCode","confirmingSignUp","signUpModalOpen","handleConfirmButton","borderTop","iconPosition","handleCreateButton","handleCancelButton","closeForgotPasswordModal","confirmForgotPassword","openForgotPasswordModal","setNewPassword","confirmNewPassword","confirmingForgotPassword","forgotPasswordModalOpen","borderBottom","GoogleSignUp","window","gapi","auth2","getAuthInstance","createScript","script","document","async","onload","initGapi","body","appendChild","g","load","init","client_id","scope","React","logIn","setAppIsNotLoading","Segment","padded","vastusSignIn","horizontal","authscreens_SignUpModal","authscreens_ForgotPasswordModal","authscreens_GoogleSignUp","OpeningScreen","visible","slideNum","reactSwipeEl","circles","authscreens_SignInPage","UnauthApp","authenticate","authscreens_OpeningScreen","loggedIn","src_AuthApp","src_UnauthApp","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","middleware","applyMiddleware","logger","thunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","ably","updateAuth","getCurrentUser","appIsLoading","children","AWSConfig","ping","ReactDOM","dist","es","authscreens_SplashScreen","lightTheme","src_App_0","getElementById","process","origin","addEventListener","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","syncActivityFinished","actionQueue","flushQueue","forEach","actionWithAsyncDispatch","assign","asyncAction","_Constants__WEBPACK_IMPORTED_MODULE_0__","Client","Trainer","Gym","Workout","Review","Challenge","Invite","Post","Submission","Comment","Sponsor","Streak","Deal","Product","Admin","numPrefix","prefixes","prefix","clientValue","trainerValue","gymValue","workoutValue","reviewValue","eventValue","challengeValue","inviteValue","postValue","submissionValue","groupValue","commentValue","sponsorValue","messageValue","streakValue","dealValue","productValue","adminValue","Ably","channel","messageHandler","ablyRef","channels","subscribe","unsubscribe","messageName","publish","close","Realtime","LOG_IN","FEDERATED_LOG_IN","LOG_OUT","SIGN_UP","CONFIRM_SIGNUP","FORGOT_PASSWORD","CONFIRM_FORGOT_PASSWORD","OPEN_SIGN_UP_MODAL","CLOSE_SIGN_UP_MODAL","OPEN_FORGOT_PASSWORD_MODAL","CLOSE_FORGOT_PASSWORD_MODAL","initialState","ifFederatedSignIn","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","originalArray","minusArray","subtractedArray","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","element","splice","newArray","withUniqueAdded","array1","array2","isSubset","subsetArray","removeChannelSubscription","_infoActions__WEBPACK_IMPORTED_MODULE_0__","_Constants__WEBPACK_IMPORTED_MODULE_1__","_reducers_ablyReducer__WEBPACK_IMPORTED_MODULE_2__","channelName","handler","unsubscriptionHandler","ADD_HANDLER","addHandler","getMessageHandler","subscribedChannels","REMOVE_CHANNEL","CLEAR_CHANNELS","handlers","notificationHandlers","CLEAR_NORMALIZED_ITEM_QUERY","CLEAR_ITEM_CACHE","clientLRUHandler","trainerLRUHandler","gymLRUHandler","workoutLRUHandler","reviewLRUHandler","eventLRUHandler","challengeLRUHandler","inviteLRUHandler","postLRUHandler","submissionLRUHandler","groupLRUHandler","commentLRUHandler","sponsorLRUHandler","streakLRUHandler","dealLRUHandler","productLRUHandler","adminLRUHandler","clientQueryLRUHandler","trainerQueryLRUHandler","gymQueryLRUHandler","workoutQueryLRUHandler","reviewQueryLRUHandler","eventQueryLRUHandler","challengeQueryLRUHandler","inviteQueryLRUHandler","postQueryLRUHandler","submissionQueryLRUHandler","groupQueryLRUHandler","commentQueryLRUHandler","sponsorQueryLRUHandler","streakQueryLRUHandler","dealQueryLRUHandler","productQueryLRUHandler","adminQueryLRUHandler","copyState","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","getItemCache","getItemLRUHandler","getItemQueryCache","getItemQueryCacheName","getItemQueryLRUHandler","getItemQueryLRUHandlerName","addItemToCache","itemCache","Array","isArray","newAttribute","setAttributeIndex","addAttribute","addToAttributes","removeFromAttributes","removeAttributeIndex","addQueryToCache","queryLRUHandler","queryResults","entry","clearNormalizedCache","clearCache","clearQueryCache","LRUHandler","unshift","getItemCacheSize","deleteObjectID","pop","queryCache","addingEntry","getItemQueryCacheSize","removeAttribute","SET_TYPE_FILTER","RESET_TYPE_QUERY","ENABLE_SEARCH_BAR","DISABLE_SEARCH_BAR","initialTypeState","copyTypeState","typeState","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","searchBarEnabled","contains","getNumTypesEnabled","getIfFinished","C_Users_leoni_ComputerScienceFiles_Sets_vastusofficial_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","./Endurance_icon.png","./HIIT_icon.png","./Performance_icon.png","./Strength_icon.png","webpackContext","req","webpackContextResolve","resolve","SET_ERROR","CLEAR_ERROR","SET_IS_LOADING","SET_IS_NOT_LOADING","TOGGLE_IS_LOADING","SET_APP_IS_NOT_LOADING","CLEAR_ALL_BOARDS","messageCacheSize","boardLRUHandler","numMessages","clearBoardsForMessages","removeLastBoard","updateLRUBoard","addQuery","boardName","clearAllBoards","_reducers_infoReducer__WEBPACK_IMPORTED_MODULE_0__","SET_HANDLER","SET_PERMANENT_HANDLER","channelCacheSize","subscribedChannelLRUHandler","unsubscriptionHandlers","numPermanentHandlers","addLRUChannel","lru","removeChannel","updateLRUChannel","unsubscribeFromChannel","subscribeToChannel","setHandler","setPermanentHandler","removeChannelAndHandlers","clearAllChannels","CLEAR_USER"],"mappings":"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","file":"static/js/main.7396fe36.chunk.js","sourcesContent":["export const ifDebug = false;\nexport let log = true;\nexport let err = true;\nexport const ifAlert = false;\nexport const reduxLog = true;\nexport const ifCallLambdaAtStart = true;\nexport const theme = \"light\";\n\nexport const setLog = l => log = l;\nexport const setErr = e => err = e;\n\nexport const getEnvironmentType = () => \"production\";\n// export const getEnvironmentType = () => process.env.NODE_ENV;\n\n// Don't touch this\nexport const appUserItemType = \"Client\";\n\nexport const lambdaFunctionName = \"VastusMainLambdaFunction\";\n\nexport const userInitialFetchList = [\"name\", \"username\", \"birthday\", \"profileImagePath\",\n  \"profileImagePaths\", \"challengesWon\", \"friends\", \"friendRequests\", \"scheduledEvents\",\n  \"ownedEvents\", \"completedEvents\", \"challenges\", \"ownedChallenges\", \"completedChallenges\",\n  \"groups\", \"ownedGroups\", \"receivedInvites\", \"invitedChallenges\", \"messageBoards\", \"streaks\"];","module.exports = __webpack_public_path__ + \"static/media/vt_new.40089de9.svg\";","import {ifAlert} from \"../../Constants\";\r\n\r\nexport function debugAlert(message) {\r\n  if (ifAlert) {\r\n    alert(message);\r\n  }\r\n}\r\n\r\n// TODO I forget what this was supposed to be doing?\r\n// export function getMethods(obj) {\r\n//     const result = [];\r\n//     for (let id in obj) {\r\n//         try {\r\n//             if (typeof(obj[id]) === \"function\") {\r\n//                 result.push(id + \": \" + obj[id].toString());\r\n//             }\r\n//         } catch (err) {\r\n//             result.push(id + \": inaccessible\");\r\n//         }\r\n//     }\r\n//     return result;\r\n// }\r\n","import {API, graphqlOperation} from 'aws-amplify';\r\nimport {log, err} from \"../../Constants\";\r\nimport _ from 'lodash';\r\nimport {switchReturnItemType} from \"../logic/ItemType\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {debugAlert} from \"../logic/DebuggingHelper\";\r\n\r\n\r\n/**\r\n * This class handles all of the GraphQL Query Library logic, like sending queries and fetch requests to our AWS AppSync\r\n * GraphQL endpoint.\r\n */\r\nclass GraphQL {\r\n  // Represents the amount of items that can be fetched before a batch fetch operation will definitely send items back\r\n  static batchLimit = 100;\r\n\r\n  // =================================================================================================================\r\n  // ~ Public GraphQL Using Methods\r\n  // =================================================================================================================\r\n\r\n  /**\r\n   * Gets a single item from the database using its name and calls on the GraphQL endpoint.\r\n   *\r\n   * @param {string} itemType The item type for the item to retrieve.\r\n   * @param {string} id The id of the item to get.\r\n   * @param {[string]} variableList The list of attributes to receive as the item data.\r\n   * @param {function({})} successHandler The function to handle the successfully received item.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static getItem(itemType, id, variableList, successHandler, failureHandler) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    if (!id) throw Error(\"ID cannot be null\");\r\n    if (!variableList || !(variableList.length > 0)) throw Error(\"Variable list must have at least one variable\");\r\n    for (let i = 0; i < variableList.length; i++) {\r\n      if (!variableList[i]) throw Error(\"No variables can be null\");\r\n    }\r\n    const func = switchReturnItemType(itemType, GraphQL.getClient, GraphQL.getTrainer, GraphQL.getGym, GraphQL.getWorkout, GraphQL.getReview,\r\n      GraphQL.getEvent, GraphQL.getChallenge, GraphQL.getInvite, GraphQL.getPost, GraphQL.getSubmission,\r\n      GraphQL.getGroup, GraphQL.getComment, GraphQL.getSponsor, GraphQL.getMessage, GraphQL.getStreak, GraphQL.getDeal,\r\n      GraphQL.getProduct, GraphQL.getAdmin, \"GraphQL get Fetch function function not implemented\");\r\n    if (func) {\r\n      return func(id, variableList, successHandler, failureHandler);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets an item from the database using its username and calls on the GraphQl endpoint. Should only work for users.\r\n   *\r\n   * @param {string} itemType The item type for the item to retrieve.\r\n   * @param {string} username The username of the item to retrieve.\r\n   * @param {[string]} variableList The list of attributes to receive as the item data.\r\n   * @param {function(DatabaseObject)} successHandler The function to handle the successfully received item.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static getItemByUsername(itemType, username, variableList, successHandler, failureHandler) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    if (!username) throw Error(\"Username cannot be null\");\r\n    if (!variableList || !(variableList.length > 0)) throw Error(\"Variable list must have at least one variable\");\r\n    for (let i = 0; i < variableList.length; i++) {\r\n      if (!variableList[i]) throw Error(\"No variables can be null\");\r\n    }\r\n    const func = switchReturnItemType(itemType, GraphQL.getClientByUsername, GraphQL.getTrainerByUsername,\r\n      GraphQL.getGymByUsername, null, null, null, null, null,\r\n      null, null, null, null, GraphQL.getSponsorByUsername,\r\n      null, null, null, null, GraphQL.getAdminByUsername,\r\n      \"GraphQL get Fetch Username function function not implemented\");\r\n    if (func) {\r\n      return func(username, variableList, successHandler, failureHandler);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets an item from the database using its federated ID (Google or Facebook) and calls on the GraphQL endpoint.\r\n   * Should only work for users.\r\n   *\r\n   * @param {string} itemType The item type for the item to retrieve.\r\n   * @param {string} federatedID The federated identities ID of the item to retrieve.\r\n   * @param {[string]} variableList The list of attributes to receive as the item data.\r\n   * @param {function({})} successHandler The function to handle the successfully received item.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static getItemByFederatedID(itemType, federatedID, variableList, successHandler, failureHandler) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    if (!federatedID) throw Error(\"Federated ID cannot be null\");\r\n    if (!variableList || !(variableList.length > 0)) throw Error(\"Variable list must have at least one variable\");\r\n    for (let i = 0; i < variableList.length; i++) {\r\n      if (!variableList[i]) throw Error(\"No variables can be null\");\r\n    }\r\n    const func = switchReturnItemType(itemType, GraphQL.getClientByFederatedID, GraphQL.getTrainerByFederatedID,\r\n      GraphQL.getGymByFederatedID, null, null, null, null, null,\r\n      null, null, null, null, GraphQL.getSponsorByFederatedID,\r\n      null, null, null, null, GraphQL.getAdminByFederatedID,\r\n      \"GraphQL get Fetch Username function function not implemented\");\r\n    if (func) {\r\n      return func(federatedID, variableList, successHandler, failureHandler);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Batch fetches a list of items from the database using their IDs and calls on the GraphQL endpoint.\r\n   *\r\n   * @param {string} itemType The item type for the item to retrieve.\r\n   * @param {[string]} ids The list of ids to retrieve the items for.\r\n   * @param {[string]} variableList The list of attributes to receive as the item data.\r\n   * @param {function({items: [{}], unretrievedItems: [string]})} successHandler The function to handle the\r\n   * successfully received items and return the unretrieved items as a string.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static getItems(itemType, ids, variableList, successHandler, failureHandler) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    if (!ids || !(ids.length > 0)) throw Error(\"ID list must have at least one ID\");\r\n    for (let i = 0; i < ids.length; i++) {\r\n      if (!ids[i]) throw Error(\"No IDs can be null\");\r\n    }\r\n    if (!variableList || !(variableList.length > 0)) throw Error(\"Variable list must have at least one variable\");\r\n    for (let i = 0; i < variableList.length; i++) {\r\n      if (!variableList[i]) throw Error(\"No variables can be null\");\r\n    }\r\n    const func = switchReturnItemType(itemType, GraphQL.getClients, GraphQL.getTrainers, GraphQL.getGyms, GraphQL.getWorkouts,\r\n      GraphQL.getReviews, GraphQL.getEvents, GraphQL.getChallenges, GraphQL.getInvites, GraphQL.getPosts,\r\n      GraphQL.getSubmissions, GraphQL.getGroups, GraphQL.getComments, GraphQL.getSponsors, GraphQL.getMessages, GraphQL.getStreaks,\r\n      GraphQL.getDeals, GraphQL.getProducts, GraphQL.getAdmins, \"GraphQL get Batch Fetch function function not implemented\");\r\n    if (TestHelper.ifTesting && successHandler) {\r\n      const items = [];\r\n      for (let i = 0; i < ids.length; i++) {\r\n        const id = ids[i];\r\n        const obj = {id, item_type: itemType,};\r\n        for (let j = 0; j < variableList.length; j++) {\r\n          const varName = variableList[j];\r\n          if (varName !== \"id\" && varName !== \"item_type\") {\r\n            obj[variableList[j]] = \"TEST_VALUE\";\r\n          }\r\n        }\r\n        items.push(obj);\r\n      }\r\n      successHandler({items, unretrievedItems: []});\r\n    }\r\n    if (func) {\r\n      return func(ids, variableList, successHandler, failureHandler);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Constructs a query object using the given parameters that define the query.\r\n   *\r\n   * @param {string} itemType The item type to construct the query for.\r\n   * @param {[string]} variableList The list of attributes to receive as the item data.\r\n   * @param {{}} filter The {@link generateFilter} filter to dictate how the query filters the objects.\r\n   * @param {number} limit The maximum number of items to SEARCH for in the query. Items length <= limit.\r\n   * @param {string} nextToken The next token for the query, so that it can be separated into multiple queries.\r\n   * @return {{query: string, variables: {}}} The item query to use in the {@link queryItems} method.\r\n   */\r\n  static constructItemQuery(itemType, variableList, filter, limit, nextToken) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    if (!variableList || !(variableList.length > 0)) throw Error(\"Variable list must have at least one variable\");\r\n    for (let i = 0; i < variableList.length; i++) {\r\n      if (!variableList[i]) throw Error(\"No variables can be null\");\r\n    }\r\n    if (limit <= 0) throw Error(\"Limit must be greater than 0\");\r\n    const func = switchReturnItemType(itemType, GraphQL.constructClientQuery, GraphQL.constructTrainerQuery, GraphQL.constructGymQuery,\r\n      GraphQL.constructWorkoutQuery, GraphQL.constructReviewQuery, GraphQL.constructEventQuery, GraphQL.constructChallengeQuery,\r\n      GraphQL.constructInviteQuery, GraphQL.constructPostQuery, GraphQL.constructSubmissionQuery, GraphQL.constructGroupQuery,\r\n      GraphQL.constructCommentQuery, GraphQL.constructSponsorQuery, GraphQL.constructMessageQuery, GraphQL.constructStreakQuery,\r\n      GraphQL.constructDealQuery, GraphQL.constructProductQuery, GraphQL.constructAdminQuery, \"GraphQL get construct Query function not implemented\");\r\n    if (func) {\r\n      return func(variableList, filter, limit, nextToken);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetches a list of items that fit a query based on the inputs of that query.\r\n   *\r\n   * @param {string} itemType The item type to perform the query on.\r\n   * @param {{query: string, variables: {}}} query The query payload to send through the query function.\r\n   * @param {function({nextToken: string, items: [DatabaseObject]})} successHandler The function to handle the successfully\r\n   * received items.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static queryItems(itemType, query, successHandler, failureHandler) {\r\n    if (!itemType) throw Error(\"Item type cannot be null\");\r\n    const func = switchReturnItemType(itemType, GraphQL.queryClients, GraphQL.queryTrainers, GraphQL.queryGyms, GraphQL.queryWorkouts,\r\n      GraphQL.queryReviews, GraphQL.queryEvents, GraphQL.queryChallenges, GraphQL.queryInvites, GraphQL.queryPosts,\r\n      GraphQL.querySubmissions, GraphQL.queryGroups, GraphQL.queryComments, GraphQL.querySponsors, GraphQL.queryMessages,\r\n      GraphQL.queryStreaks, GraphQL.queryDeals, GraphQL.queryProducts, GraphQL.queryAdmins,\r\n      \"GraphQL get Query function function not implemented for type\");\r\n    if (func) {\r\n      return func(query, successHandler, failureHandler);\r\n    } else {\r\n      throw Error(\"Unrecognized item type\");\r\n    }\r\n  }\r\n\r\n  // =================================================================================================================\r\n  // ~ GraphQL Specific Item Type Functions\r\n  // =================================================================================================================\r\n\r\n  // ~ Single Fetch Functions\r\n  static getClient(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetClient\", \"getClient\", {id}, variableList),\r\n      \"getClient\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getClientByUsername(username, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetClientByUsername\", \"getClientByUsername\", {username}, variableList),\r\n      \"getClientByUsername\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getClientByFederatedID(federatedID, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetClientByFederatedID\", \"getClientByFederatedID\", {federatedID}, variableList),\r\n      \"getClientByFederatedID\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getTrainer(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetTrainer\", \"getTrainer\", {id}, variableList),\r\n      \"getTrainer\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getTrainerByUsername(username, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetTrainerByUsername\", \"getTrainerByUsername\", {username}, variableList),\r\n      \"getTrainerByUsername\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getTrainerByFederatedID(federatedID, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetTrainerByFederatedID\", \"getTrainerByFederatedID\", {federatedID}, variableList),\r\n      \"getTrainerByFederatedID\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGym(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGym\", \"getGym\", {id}, variableList),\r\n      \"getGym\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGymByUsername(username, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGymByUsername\", \"getGymByUsername\", {username}, variableList),\r\n      \"getGymByUsername\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGymByFederatedID(federatedID, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGymByFederatedID\", \"getGymByFederatedID\", {federatedID}, variableList),\r\n      \"getGymByFederatedID\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getWorkout(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetWorkout\", \"getWorkout\", {id}, variableList),\r\n      \"getWorkout\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getReview(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetReview\", \"getReview\", {id}, variableList),\r\n      \"getReview\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getEvent(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetEvent\", \"getEvent\", {id}, variableList),\r\n      \"getEvent\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getChallenge(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetChallenge\", \"getChallenge\", {id}, variableList),\r\n      \"getChallenge\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getInvite(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetInvite\", \"getInvite\", {id}, variableList),\r\n      \"getInvite\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getPost(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetPost\", \"getPost\", {id}, variableList),\r\n      \"getPost\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSubmission(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSubmission\", \"getSubmission\", {id}, variableList),\r\n      \"getSubmission\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGroup(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGroup\", \"getGroup\", {id}, variableList),\r\n      \"getGroup\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getComment(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetComment\", \"getComment\", {id}, variableList),\r\n      \"getComment\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSponsor(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSponsor\", \"getSponsor\", {id}, variableList),\r\n      \"getSponsor\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSponsorByUsername(username, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSponsorByUsername\", \"getSponsorByUsername\", {username}, variableList),\r\n      \"getSponsorByUsername\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSponsorByFederatedID(federatedID, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSponsorByFederatedID\", \"getSponsorByFederatedID\", {federatedID}, variableList),\r\n      \"getSponsorByFederatedID\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getMessage(board, id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetMessage\", \"getMessage\", {board, id}, variableList),\r\n      \"getMessage\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getStreak(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetStreak\", \"getStreak\", {id}, variableList),\r\n      \"getStreak\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getDeal(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetDeal\", \"getDeal\", {id}, variableList),\r\n      \"getDeal\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getProduct(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetProduct\", \"getProduct\", {id}, variableList),\r\n      \"getProduct\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getAdmin(id, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetAdmin\", \"getAdmin\", {id}, variableList),\r\n      \"getAdmin\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getAdminByUsername(username, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetAdminByUsername\", \"getAdminByUsername\", {username}, variableList),\r\n      \"getAdminByUsername\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getAdminByFederatedID(federatedID, variableList, successHandler, failureHandler) {\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetAdminByFederatedID\", \"getAdminByFederatedID\", {federatedID}, variableList),\r\n      \"getAdminByFederatedID\", successHandler, failureHandler);\r\n  }\r\n\r\n  // ~ Batch Fetch Functions\r\n  static getClients(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrieved Items list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetClients\", \"getClients\", null, variableList, idList, true),\r\n      \"getClients\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getTrainers(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrieved Items list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetTrainers\", \"getTrainers\", null, variableList, idList, true),\r\n      \"getTrainers\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGyms(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrieved Items list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGyms\", \"getGyms\", null, variableList, idList, true),\r\n      \"getGyms\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getWorkouts(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrieved Items list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetWorkouts\", \"getWorkouts\", null, variableList, idList, true),\r\n      \"getWorkouts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getReviews(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetReviews\", \"getReviews\", null, variableList, idList, true),\r\n      \"getReviews\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getEvents(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetEvents\", \"getEvents\", null, variableList, idList, true),\r\n      \"getEvents\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getChallenges(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetChallenges\", \"getChallenges\", null, variableList, idList, true),\r\n      \"getChallenges\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getInvites(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetInvites\", \"getInvites\", null, variableList, idList, true),\r\n      \"getInvites\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getPosts(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetPosts\", \"getPosts\", null, variableList, idList, true),\r\n      \"getPosts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSubmissions(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSubmissions\", \"getSubmissions\", null, variableList, idList, true),\r\n      \"getSubmissions\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getGroups(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetGroups\", \"getGroups\", null, variableList, idList, true),\r\n      \"getGroups\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getComments(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetComments\", \"getComments\", null, variableList, idList, true),\r\n      \"getComments\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getSponsors(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetSponsors\", \"getSponsors\", null, variableList, idList, true),\r\n      \"getSponsors\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getMessages(board, ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetMessages\", \"getMessages\", {board}, variableList, idList, true),\r\n      \"getMessages\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getStreaks(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetStreaks\", \"getStreaks\", null, variableList, idList, true),\r\n      \"getStreaks\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getDeals(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetDeals\", \"getDeals\", null, variableList, idList, true),\r\n      \"getDeals\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getProducts(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetProducts\", \"getProducts\", null, variableList, idList, true),\r\n      \"getProducts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static getAdmins(ids, variableList, successHandler, failureHandler) {\r\n    if (ids && ids.length > GraphQL.batchLimit) {\r\n      // TODO Make sure we actually test GraphQL so that GraphQL error will pop up!\r\n      log && console.log(\"Be prepared to have some IDs returned in the unretrievedItems list!!!!\");\r\n    }\r\n    const idList = GraphQL.generateIDList(ids);\r\n    return GraphQL.execute(GraphQL.constructQuery(\"GetAdmins\", \"getAdmins\", null, variableList, idList, true),\r\n      \"getAdmins\", successHandler, failureHandler);\r\n  }\r\n\r\n  // ~ Construct Query Functions\r\n  static constructClientQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryClients\", \"queryClients\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructTrainerQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryTrainers\", \"queryTrainers\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructGymQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryGyms\", \"queryGyms\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructWorkoutQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryWorkouts\", \"queryWorkouts\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructReviewQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryReviews\", \"queryReviews\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructEventQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryEvents\", \"queryEvents\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructChallengeQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryChallenges\", \"queryChallenges\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructInviteQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryInvites\", \"queryInvites\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructPostQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryPosts\", \"queryPosts\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructSubmissionQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QuerySubmissions\", \"querySubmissions\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructGroupQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryGroups\", \"queryGroups\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructCommentQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryComments\", \"queryComments\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructSponsorQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QuerySponsors\", \"querySponsors\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructMessageQuery(board, variableList, filter, limit, nextToken) {\r\n    const inputVariables = {board};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryMessages\", \"queryMessages\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructStreakQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryStreaks\", \"queryStreaks\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructDealQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryDeals\", \"queryDeals\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructProductQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryProducts\", \"queryProducts\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  static constructAdminQuery(variableList, filter, limit, nextToken) {\r\n    const inputVariables = {};\r\n    if (limit) {\r\n      inputVariables.limit = limit;\r\n    }\r\n    if (nextToken) {\r\n      inputVariables.nextToken = nextToken;\r\n    }\r\n    return GraphQL.constructQuery(\"QueryAdmins\", \"queryAdmins\", inputVariables, variableList, filter, false, true);\r\n  }\r\n\r\n  // ~ Query Fetch Functions\r\n  static queryClients(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryClients\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryTrainers(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryTrainers\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryGyms(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryGyms\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryWorkouts(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryWorkouts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryReviews(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryReviews\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryEvents(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryEvents\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryChallenges(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryChallenges\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryInvites(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryInvites\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryPosts(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryPosts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static querySubmissions(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"querySubmissions\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryGroups(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryGroups\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryComments(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryComments\", successHandler, failureHandler);\r\n  }\r\n\r\n  static querySponsors(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"querySponsors\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryMessages(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryMessages\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryStreaks(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryStreaks\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryDeals(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryDeals\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryProducts(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryProducts\", successHandler, failureHandler);\r\n  }\r\n\r\n  static queryAdmins(query, successHandler, failureHandler) {\r\n    return GraphQL.execute(query, \"queryAdmins\", successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {{}} filterJSON The filter in JSON format using $ in front of variable names, and using and, or, and not\r\n   * to consolidate.\r\n   * @param {{}} variableValues The exact values for the variables in the JSON.\r\n   * @return {{parameterString: string, parameters: {}}} The object to use in the actual usage of the filter.\r\n   * @example\r\n   *      const filter = generateFilter({\r\n   *          and: [\r\n   *              {\r\n   *                  ifCompleted: {\r\n   *                      eq: \"$ifCompleted\"\r\n   *                  }\r\n   *              },\r\n   *              {\r\n   *                  or: [\r\n   *                      {\r\n   *                          access: {\r\n   *                              eq: \"$access\"\r\n   *                          }\r\n   *                      },\r\n   *                      {\r\n   *                          friends: {\r\n   *                              contains: \"$id\"\r\n   *                          }\r\n   *                      }\r\n   *                  ]\r\n   *              }\r\n   *          ]\r\n   *      },{\r\n   *          ifCompleted: \"false\",\r\n   *          access: \"public\",\r\n   *          id: GraphQL.props.user.id\r\n   *      });\r\n   */\r\n  static generateFilter(filterJSON, variableValues) {\r\n    return {\r\n      // Add the parameter value and also take out all the quotation marks from the JSON\r\n      parameterString: \"filter: \" + JSON.stringify(filterJSON).replace(/['\"]+/g, ''),\r\n      parameters: variableValues\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generates an ID List object that is usable by the query string generator in order to properly use the IDs in a\r\n   * query.\r\n   *\r\n   * @param {[string]} ids The IDs to reference in the query.\r\n   * @return {{parameterString: string, parameters: {}}} The properly formatted object for the query string generator\r\n   * to use.\r\n   */\r\n  static generateIDList(ids) {\r\n    let idListString = \"ids: [\";\r\n    const parameters = {};\r\n    for (let i = 0; i < ids.length; i++) {\r\n      const id = ids[i];\r\n      const idName = \"id\" + i;\r\n      parameters[idName] = id;\r\n      idListString += (\"$\" + idName + \", \");\r\n    }\r\n    idListString += \"]\";\r\n    return {\r\n      parameterString: idListString,\r\n      parameters\r\n    }\r\n  }\r\n\r\n  // TODO GraphQL only supports input String! regular types. Reason to change?\r\n  // TODO Make GraphQL more resilient to an empty filter?\r\n  /**\r\n   * Constructs a query object in order to be able to send through the payload of the request using the parameters to\r\n   * specifically define the query expression.\r\n   *\r\n   * @param {string} queryName The name of this specific query to send.\r\n   * @param {string} queryFunction The name of the query function to use in the GraphQL endpoint.\r\n   * @param {Object<string, string>} inputVariables The names and values of all the input variables for the query.\r\n   * @param {[string]} outputVariables The variables to receive from the GraphQL query.\r\n   * @param {{parameterString: string, parameters: {}}} filter The defined filter to receive only wanted elements.\r\n   * @param {boolean} ifBatch If this query is a batch fetch operation as opposed to a regular fetch.\r\n   * @param {boolean} ifQuery If this query function is an actual query as opposed to a fetch.\r\n   * @return {{query: string, variables: {}}} The properly formatted query object for executing the payload.\r\n   */\r\n  static constructQuery(queryName, queryFunction, inputVariables, outputVariables, filter = null, ifBatch = false, ifQuery = false) {\r\n    let query = '';\r\n    // Filter out the null'ed variables\r\n    let finalInputVariables;\r\n    if (filter) {\r\n      finalInputVariables = {...inputVariables, ...filter.parameters};\r\n    } else {\r\n      finalInputVariables = inputVariables;\r\n    }\r\n    let ifFirst = true;\r\n    query += 'query ' + queryName;\r\n    if (!_.isEmpty(finalInputVariables)) {\r\n      query += '(';\r\n      for (let variable in finalInputVariables) {\r\n        if (!ifFirst) {\r\n          query += \", \";\r\n        }\r\n        query += '$' + variable + ': ';\r\n        if (variable === \"limit\") {\r\n          query += 'Int';\r\n        } else if (variable === \"ids\") {\r\n          query += '[String]!';\r\n        } else {\r\n          query += 'String!';\r\n        }\r\n        ifFirst = false;\r\n      }\r\n      query += ')';\r\n    }\r\n    query += ' {\\n    ' + queryFunction;\r\n    ifFirst = true;\r\n    if (!_.isEmpty(inputVariables) || filter) {\r\n      query += '(';\r\n      if (filter) {\r\n        query += filter.parameterString;\r\n      }\r\n      for (let variable in inputVariables) {\r\n        if (!ifFirst || filter) {\r\n          query += ', ';\r\n        }\r\n        query += variable + \": $\" + variable;\r\n        ifFirst = false;\r\n      }\r\n      query += ')';\r\n    }\r\n    query += ' {\\n';\r\n    if (ifQuery || ifBatch) {\r\n      query += '        items {\\n';\r\n    }\r\n    for (let i in outputVariables) {\r\n      if (outputVariables.hasOwnProperty(i)) {\r\n        if (ifQuery || ifBatch) {\r\n          query += '    ';\r\n        }\r\n        query += '        ' + outputVariables[i] + '\\n';\r\n      }\r\n    }\r\n    if (ifQuery) {\r\n      query += '        }\\n        nextToken\\n';\r\n    } else if (ifBatch) {\r\n      query += '        }\\n        unretrievedItems {\\n            id\\n        }\\n';\r\n    }\r\n    query += '    }\\n}';\r\n\r\n    return {\r\n      query: query,\r\n      variables: finalInputVariables\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Gets the next token String from the next token object.\r\n   *\r\n   * TODO I don't remember what this does actually...\r\n   *\r\n   * @param {string} nextToken The next token received from the query.\r\n   * @return {string} TODO The next token but never null?\r\n   */\r\n  static getNextTokenString(nextToken) {\r\n    return nextToken ? nextToken : \"null\";\r\n  }\r\n\r\n  /**\r\n   * Gets a normalized query (which defines the entire query for the operation, making sure the next token simply\r\n   * defines which part of the query to get instead of the whole query). This allows us to better organize the query\r\n   * operations in the cache.\r\n   *\r\n   * @param {{query: string, variables: {}}} query The query object for the operation.\r\n   * @return {{query: string, variables: {nextToken: string}}}\r\n   */\r\n  static getNormalizedQuery(query) {\r\n    return {\r\n      query: query.query,\r\n      variables: {\r\n        ...query.variables,\r\n        nextToken: \"not_defined\"\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Gets the normalized query string given the normalized query object.\r\n   *\r\n   * @param {{variables: {nextToken: \"not_defined\"}}} normalizedQuery The normalized query object.\r\n   * @return {string} The string which defines the key for this query.\r\n   */\r\n  static getNormalizedQueryString(normalizedQuery) {\r\n    return JSON.stringify(normalizedQuery);\r\n  }\r\n\r\n  /**\r\n   * Gets the actual properly formatted query from the normalized query and the next token to use.\r\n   *\r\n   * @param {{query: string, variables: {nextToken: \"not_defined\"}}} normalizedQuery The query minus the nextToken.\r\n   * @param {string} nextToken The next token that defines the query.\r\n   * @return {{query: string, variables: {nextToken: string|null}}}\r\n   */\r\n  static getQueryFromNormalizedQuery(normalizedQuery, nextToken) {\r\n    return {\r\n      query: normalizedQuery.query,\r\n      variables: {\r\n        ...normalizedQuery.variables,\r\n        nextToken\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Compresses the query results by only including the ids of the objects, as opposed to the entire objects\r\n   * themselves.\r\n   *\r\n   * @param {{items: [{}], nextToken: string}} queryResult The direct query result object from the query.\r\n   * @return {{ids: [string], nextToken: string}} The compressed query results.\r\n   */\r\n  static getCompressedFromQueryResult(queryResult) {\r\n    const items = queryResult.items;\r\n    const ids = [];\r\n    if (items) {\r\n      for (let i = 0; i < items.length; i++) {\r\n        ids.push(items[i].id);\r\n      }\r\n    }\r\n    return {\r\n      ids,\r\n      nextToken: queryResult.nextToken\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Gets the query results from the compressed query placed into the cache.\r\n   *\r\n   * @param {{ids: [string], nextToken: string}} compressedResult The compressed query result placed in the database.\r\n   * @param itemTypeCache\r\n   * @return {{items: Array, nextToken: *}}\r\n   */\r\n  static getQueryResultFromCompressed(compressedResult, itemTypeCache) {\r\n    const ids = compressedResult.ids;\r\n    const items = [];\r\n    for (let i = 0; i < ids.length; i++) {\r\n      const item = itemTypeCache[ids[i]];\r\n      if (item) {\r\n        items.push(item);\r\n      }\r\n    }\r\n    return {\r\n      items,\r\n      nextToken: compressedResult.nextToken\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Executes a given query using the payload given.\r\n   *\r\n   * @param {{query: string, variables: {}}} query\r\n   * @param {string} queryFunctionName The name of the query function to execute within the GraphQL endpoint.\r\n   * @param {function(*)} successHandler The function that handles the successful results of the query request.\r\n   * @param {function(error)} failureHandler The function that handles any errors that may arise.\r\n   * @return {*} Debugging information from the GraphQL query.\r\n   */\r\n  static execute(query, queryFunctionName, successHandler, failureHandler) {\r\n    log && console.log(\"Sending ql = \" + query.query + \"\\nWith variables = \" + JSON.stringify(query.variables));\r\n    debugAlert(\"Sending ql = \" + query.query + \"\\nWith variables = \" + JSON.stringify(query.variables));\r\n    TestHelper.ifTesting || API.graphql(graphqlOperation(query.query, query.variables)).then((data) => {\r\n      log && console.log(\"GraphQL operation succeeded!\");\r\n      if (!data.data || !data.data[queryFunctionName]) {\r\n        log && console.log(\"Object returned nothing!!! Something wrong?\");\r\n        if (successHandler) {\r\n          successHandler(null);\r\n        }\r\n        return;\r\n      }\r\n      log && console.log(\"Returned: \" + JSON.stringify(data.data[queryFunctionName]));\r\n      debugAlert(\"Returned: \" + JSON.stringify(data.data[queryFunctionName]));\r\n      if (successHandler) {\r\n        successHandler(data.data[queryFunctionName]);\r\n      }\r\n    }).catch((error) => {\r\n      err && console.error(\"GraphQL operation failed...\");\r\n      err && console.error(error);\r\n      if (failureHandler) {\r\n        failureHandler(error);\r\n      }\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      if (queryFunctionName.substring(0, 5) === \"query\") {\r\n        successHandler && successHandler({nextToken: null, items: []});\r\n      } else {\r\n        successHandler && successHandler({});\r\n      }\r\n      return query;\r\n    }\r\n  }\r\n}\r\n\r\nexport default GraphQL;\r\n","import * as AWS from \"aws-sdk\";\r\nimport {Storage} from \"aws-amplify\";\r\nimport {err, getEnvironmentType, log} from \"../../Constants\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\n\r\n/**\r\n * Class for handling all the interactions with our S3 Bucket files.\r\n */\r\nclass S3Storage {\r\n  static bucketName = getEnvironmentType() === \"production\" ? 'vastusofficial' : 'vastusdevelopmentofficial';\r\n  static multipartSize = 10 * 1024 * 1024;\r\n  static multipartQueueSize = 8;\r\n\r\n  // ======================================================================================================\r\n  // S3 Storage High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Puts an image into the S3 bucket at a specific path (using file structure syntax).\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {*} image The file to place into the S3 bucket.\r\n   * @param {function(*)} successHandler The function to handle the result of the S3 placement.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static putImage(path, image, successHandler, failureHandler) {\r\n    return S3Storage.put(path, image, \"image/*\", progress => console.log(progress.loaded + \"/\" + progress.total),\r\n      successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Puts a video into the S3 bucket at a specific path (using file structure syntax).\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {*} video The file to place into the S3 bucket.\r\n   * @param {function(*)} successHandler The function to handle the result of the S3 placement.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static putVideo(path, video, successHandler, failureHandler, progressHandler) {\r\n    return S3Storage.multipartPut(path, video, \"video/*\", progress => progressHandler(parseInt((progress.loaded * 100) / progress.total)), successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Puts either a picture or a video into the S3 bucket at a specific path (using file structure syntax).\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {*} media The file to place into the S3 bucket.\r\n   * @param {function(*)} successHandler The function to handle the result of the S3 placement.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static putVideoOrImage(path, media, successHandler, failureHandler) {\r\n    return S3Storage.put(path, media, \"video/*;image/*\", progress => console.log(progress.loaded + \"/\" + progress.total),\r\n      successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Determines whether or not the given path actually corresponds to a file in S3 or not.\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {function(boolean)} successHandler The function to handle the answer of whether or not the path exists.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static ifExists(path, successHandler, failureHandler) {\r\n    if (TestHelper.ifTesting) {\r\n      if (successHandler) {\r\n        successHandler(true);\r\n      }\r\n    } else {\r\n      let bucket = new AWS.S3({params: {Bucket: S3Storage.bucketName}});\r\n      bucket.headObject({\r\n        Bucket: S3Storage.bucketName,\r\n        Key: path\r\n      }, (error) => {\r\n        if (error) {\r\n          if (error.code === \"NotFound\") {\r\n            if (successHandler) {\r\n              successHandler(false);\r\n            }\r\n          } else {\r\n            err && console.error(\"If Exists operation failed... Error: \" + error);\r\n            if (failureHandler) {\r\n              failureHandler(error);\r\n            }\r\n          }\r\n        } else {\r\n          if (successHandler) {\r\n            successHandler(true);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return path;\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // S3 Storage Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Gets the media from the S3 bucket for a file at a specific path.\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {function(*)} successHandler The function to handle the successfully received file.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static get(path, successHandler, failureHandler) {\r\n    // returns URL\r\n    if (TestHelper.ifTesting && successHandler) {\r\n      successHandler(null);\r\n    }\r\n    TestHelper.ifTesting || Storage.get(path).then((url) => {\r\n      log && console.log(\"Storage successfully retrieved file! URL = \" + url);\r\n      if (successHandler) {\r\n        successHandler(url);\r\n      }\r\n    }).catch((error) => {\r\n      err && console.error(\"Storage failed to retrieve file with path = \" + path + \"... Error: \" + error);\r\n      if (failureHandler) {\r\n        failureHandler(error);\r\n      }\r\n    });\r\n    return path;\r\n  }\r\n\r\n  /**\r\n   * Puts a file into S3 using the Amplify Storage module.\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {*} file The file to place into the S3 bucket.\r\n   * @param {string} contentType The type of the content to place into the bucket.\r\n   * @param {function({loaded: number, total: number})} progressHandler\r\n   * @param {function(*)} successHandler The function to handle the result of the S3 placement.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static put(path, file, contentType, progressHandler, successHandler, failureHandler) {\r\n    if (TestHelper.ifTesting && successHandler) {\r\n      successHandler(null);\r\n    }\r\n    TestHelper.ifTesting || Storage.put(path, file, {contentType, progressCallback: progressHandler}).then((result) => {\r\n      log && console.log(\"Storage successfully put file in! Result: \" + JSON.stringify(result));\r\n      if (successHandler) {\r\n        successHandler(result);\r\n      }\r\n    }).catch((error) => {\r\n      err && console.error(\"Storage failed put function... Error: \" + error);\r\n      if (failureHandler) {\r\n        failureHandler(error);\r\n      }\r\n    });\r\n    return path;\r\n  }\r\n\r\n  /**\r\n   * Uses the AWS S3 Module's Multipart put to make a put operation go faster. Uses multi-threading to speed up the\r\n   * upload.\r\n   *\r\n   * @param {string} path The key path for the file.\r\n   * @param {*} file The file to place into the S3 bucket.\r\n   * @param {string} contentType The type of the content to place into the bucket.\r\n   * @param {function({loaded: number, total: number})} progressHandler\r\n   * @param {function(*)} successHandler The function to handle the result of the S3 placement.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static multipartPut(path, file, contentType, progressHandler, successHandler, failureHandler) {\r\n    if (TestHelper.ifTesting) {\r\n      if (successHandler) {\r\n        successHandler(null);\r\n      }\r\n    } else {\r\n      let bucket = new AWS.S3({params: {Bucket: S3Storage.bucketName}});\r\n      let params = {Key: \"public/\" + path, ContentType: contentType, Body: file};\r\n      let options = {partSize: S3Storage.multipartSize, queueSize: S3Storage.multipartQueueSize};\r\n      bucket.upload(params, options).on('httpUploadProgress', progressHandler).send((error, data) => {\r\n        if (error) {\r\n          err && console.error(\"S3Storage failed multipart put!\");\r\n          err && console.error(error);\r\n          if (failureHandler) {\r\n            failureHandler(err);\r\n          }\r\n        } else {\r\n          if (successHandler) {\r\n            successHandler(data);\r\n          }\r\n          log && console.log(\"Video uploaded successfully.\");\r\n        }\r\n      });\r\n    }\r\n    return path;\r\n  }\r\n\r\n  /**\r\n   * Deletes a file from the S3 bucket at the given path.\r\n   *\r\n   * @param {string} path The key path of the file.\r\n   * @param {function(*)} successHandler The function to handle the result of the successful deletion.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the S3 operation.\r\n   */\r\n  static delete(path, successHandler, failureHandler) {\r\n    if (TestHelper.ifTesting && successHandler) {\r\n      successHandler(null);\r\n    }\r\n    TestHelper.ifTesting || Storage.remove(path).then((result) => {\r\n      log && console.log(\"Storage successfully removed file! Result: \" + JSON.stringify(result));\r\n      if (successHandler) {\r\n        successHandler(result);\r\n      }\r\n    }).catch((error) => {\r\n      err && console.error(\"Storage failed remove function... Error: \" + error);\r\n      if (failureHandler) {\r\n        failureHandler(error);\r\n      }\r\n    });\r\n    return path;\r\n  }\r\n}\r\n\r\nexport default S3Storage;\r\n","// Helper functions for dealing with messages.\r\n\r\n/**\r\n * Gets the Message Board name from a list of ids that are associated with the Message Board.\r\n *\r\n * @param {[string]} ids The string list of ids to use to get the board name.\r\n * @return {string} The name of the Message Board for those IDs.\r\n */\r\nexport const getMessageBoardName = (ids) => {\r\n  // TODO Do some checking?\r\n  let board = \"\";\r\n  // Sort the ids alphabetically\r\n  ids.sort((a, b) => {\r\n    if (a > b) {\r\n      return 1;\r\n    } else if (a < b) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  });\r\n  for (let i = 0; i < ids.length; i++) {\r\n    if (i !== 0) {\r\n      board += \"_\";\r\n    }\r\n    board += ids[i];\r\n  }\r\n  return board;\r\n};\r\n/**\r\n * Gets the IDs associated with a Message Board name.\r\n *\r\n * @param {string} board The Message Board name.\r\n * @return {[string]} The list of IDs associated with the board.\r\n */\r\nexport const getIDsFromMessageBoard = (board) => {\r\n  return board.split(\"_\");\r\n};\r\n\r\n/**\r\n * Finds if the message of a message was unread for a given user. Because of chronological nature of Messages, this does\r\n * not guarantee that the User definitely did NOT see this Message if this comes back false, but if it comes back true,\r\n * then that means that the user saw this and ALL earlier sent messages. This will find out the board's unread status if\r\n * you check the first message of the board.\r\n *\r\n * @param {string} userID The user to get the unread status for.\r\n * @param {{from: string, lastSeenFor: [string]}} message The message object to check the unread status of.\r\n * @return {boolean} Whether the message has been seen by the user last at any point.\r\n */\r\nexport const ifMessageUnreadFor = (userID, message) => {\r\n  return message.from !== userID && (!message.lastSeenFor || !message.lastSeenFor.includes(userID));\r\n};\r\n","import QL from \"../../api/GraphQL\";\r\nimport S3 from \"../../api/S3Storage\";\r\nimport {setError, setIsLoading, setIsNotLoading} from \"./infoActions\";\r\nimport {addHandlerAndUnsubscription} from \"./ablyActions\";\r\nimport {err, log} from \"../../../Constants\";\r\nimport {\r\n  getBoardChannel,\r\n  SET_BOARD_READ,\r\n  CLEAR_BOARD,\r\n  ADD_QUERY,\r\n  ADD_MESSAGE,\r\n  UNSUBSCRIBE_FROM_BOARD\r\n} from \"../reducers/messageReducer\";\r\nimport {getIDsFromMessageBoard} from \"../../logic/MessageHelper\";\r\n\r\nconst notFoundPicture = require('../../img/not_found.png');\r\nconst defaultProfilePicture = require(\"../../img/roundProfile.png\");\r\n\r\n// =========================================================================================================\r\n// ~ High-Level Message Actions\r\n// =========================================================================================================\r\n\r\n/**\r\n * Fetches the first message in a board. Primarily used for previews of boards.\r\n *\r\n * @param {string} board The name of the board to get the first message of.\r\n * @param {function({})} dataHandler The function to handle the fetched first message.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function peekAtFirstMessageFromBoard(board, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    if (getStore().message.boards[board] && getStore().message.boards[board].length > 0) {\r\n      if (dataHandler) {\r\n        dataHandler(getStore().message.boards[board][0]);\r\n      }\r\n      dispatch(setIsNotLoading());\r\n    } else {\r\n      // Fetch it\r\n      dispatch(queryNextMessagesFromBoardOptionalSubscribe(board, 1, false, (messages) => {\r\n        if (dataHandler) {\r\n          if (messages && messages.length > 0) {\r\n            dataHandler(messages[0]);\r\n          } else {\r\n            dataHandler(null);\r\n          }\r\n        }\r\n      }, failureHandler));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Fetches another batch of messages from a board. For actually looking at the messages in the board viewer.\r\n *\r\n * @param {string} board The board to receive the messages for.\r\n * @param {number} limit The number of messages to receive from the query.\r\n * @param {function([{}])} dataHandler The function to handle the number of messages received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*))} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function queryNextMessagesFromBoard(board, limit, dataHandler, failureHandler) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(queryNextMessagesFromBoardOptionalSubscribe(board, limit, true, dataHandler, failureHandler));\r\n  }\r\n}\r\n\r\n/**\r\n * Queries the next messages from the board, potentially also subscribing to the board's updates.\r\n *\r\n * @param {string} board The board to query the next messages from.\r\n * @param {number} limit The limit of messages to receive from the query.\r\n * @param {boolean} ifSubscribe If the query should also subscribe to the board.\r\n * @param {function([{}])} dataHandler The function to handle the fetched messages.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction queryNextMessagesFromBoardOptionalSubscribe(board, limit, ifSubscribe, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    let ifFirst = getStore().message.boardIfFirsts[board];\r\n    if (ifFirst !== false) {\r\n      ifFirst = true;\r\n    }\r\n    // If this is the first time querying the board, Ably subscribe to it.\r\n    if (ifSubscribe && getStore().message.boardIfSubscribed[board] !== true) {\r\n      let ifAddMessageFromBoardNotification = false;\r\n      const boardIDs = getIDsFromMessageBoard(board);\r\n      if (boardIDs.length === 1) {\r\n        const boardID = boardIDs[0];\r\n        const user = getStore().user;\r\n        // You subscribe to a Challenge/Event/Group only if you're not an owner of that thing.\r\n        ifAddMessageFromBoardNotification = !((user.ownedEvents && user.ownedEvents.includes(boardID)) ||\r\n          (user.ownedChallenges && user.ownedChallenges.includes(boardID)) ||\r\n          (user.ownedGroups && user.ownedGroups.includes(boardID)));\r\n      }\r\n      // If the board has more than one ID, then that means that it's a person chat / multiple person chat, and you\r\n      // don't subscribe to it, because you'll be notified about it anyways.\r\n      dispatch(addHandlerAndUnsubscription(getBoardChannel(board), (message) => {\r\n        // Handle event types of message\r\n        // TODO EVENT TYPES FOR READ AND TYPING\r\n        if (ifAddMessageFromBoardNotification) {\r\n          dispatch(addMessageFromNotification(board, message.data));\r\n        }\r\n      }, (state) => {\r\n        // When it unsubscribes, we clear the board\r\n        clearBoard(board, dispatch);\r\n      }));\r\n    }\r\n    let nextToken = getStore().message.boardNextTokens[board];\r\n    // console.log(\"IF FIRST = \" + ifFirst + \", NEXT TOKEN = \" + nextToken);\r\n    if (ifFirst || nextToken) {\r\n      // Then you do the query\r\n      QL.queryMessages(QL.constructMessageQuery(board, [\"from\", \"name\", \"profileImagePath\", \"message\", \"type\", \"board\", \"id\", \"time_created\", \"lastSeenFor\"], null, limit, nextToken), (data) => {\r\n        if (data) {\r\n          // console.log(JSON.stringify(data));\r\n          if (!data.items) {\r\n            data.items = [];\r\n          }\r\n          addURLToMessages(data.items, \"message\", \"messageURL\", notFoundPicture, (message) => {\r\n            return message.type\r\n          }, (messages) => {\r\n            addURLToMessages(messages, \"profileImagePath\", \"profilePicture\", defaultProfilePicture, (message) => {\r\n              return message.profileImagePath\r\n            }, (messages) => {\r\n              dispatch(addQueryToBoard(board, messages, data.nextToken, ifSubscribe, dispatch));\r\n              if (dataHandler) {\r\n                dataHandler(messages);\r\n              }\r\n              dispatch(setIsNotLoading());\r\n            });\r\n          });\r\n        } else {\r\n          const error = new Error(\"query messages came back with null?\");\r\n          err && console.error(JSON.stringify(error));\r\n          dispatch(setError(error));\r\n          dispatch(setIsNotLoading());\r\n          if (failureHandler) {\r\n            failureHandler(error);\r\n          }\r\n        }\r\n      }, (error) => {\r\n        err && console.error(\"ERROR INSIDE GET NEXT MESSAGES\");\r\n        err && console.error(JSON.stringify(error));\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n        if (failureHandler) {\r\n          failureHandler(error);\r\n        }\r\n      });\r\n    } else {\r\n      if (dataHandler) {\r\n        dataHandler(null);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * This function takes in a list of messages and fetches all of their image attributes from AWS S3.\r\n *\r\n * @param {[{}]} messages The list of messages to fetch the image attribute of.\r\n * @param {string} messagePathField The field in the Message object that contains the S3 path for the image.\r\n * @param {string} messageURLField The field in the Message object to put the URL in.\r\n * @param {string} defaultURL The default URL to put into the URL field (if fails or not applicable).\r\n * @param {function({})} fetchChecker {boolean} The checker that takes in a Message object and returns a boolean for\r\n * if the message should be fetched\r\n * @param {function([{}])} dataHandler The handler that returns the updated messages.\r\n */\r\nfunction addURLToMessages(messages, messagePathField, messageURLField, defaultURL, fetchChecker, dataHandler) {\r\n  const messagesLength = messages.length;\r\n  let messagesReturned = 0;\r\n  const returnMessage = () => {\r\n    messagesReturned++;\r\n    if (messagesReturned >= messagesLength) {\r\n      dataHandler(messages);\r\n    }\r\n  };\r\n  for (let i = 0; i < messagesLength; i++) {\r\n    const message = messages[i];\r\n    addURLToMessage(message, messagePathField, messageURLField, defaultURL, fetchChecker, returnMessage);\r\n  }\r\n  if (messagesLength === 0) {\r\n    dataHandler(messages);\r\n  }\r\n}\r\n\r\n/**\r\n * Adds S3 data to the message based on the fields given.\r\n *\r\n * @param {{}} message The message object to update.\r\n * @param {string} messagePathField The field in the Message object that contains the S3 path for the image.\r\n * @param {string} messageURLField The field in the Message object to put the URL in.\r\n * @param {string} defaultURL The default URL to put into the URL field (if fails or not applicable).\r\n * @param {function({message: string})} fetchChecker {boolean} The checker that takes in a Message object and returns a boolean for\r\n * if the message should be fetched\r\n * @param {function({})} dataHandler The handler that returns the updated message.\r\n */\r\nfunction addURLToMessage(message, messagePathField, messageURLField, defaultURL, fetchChecker, dataHandler) {\r\n  if (fetchChecker(message)) {\r\n    S3.get(message[messagePathField], (url) => {\r\n      message[messageURLField] = url;\r\n      dataHandler(message);\r\n    }, (error) => {\r\n      err && console.error(\"FAILED TO RECEIVE URL FOR MEDIA IN MESSAGE! ERROR = \" + JSON.stringify(error));\r\n      message[messageURLField] = defaultURL;\r\n      dataHandler(message);\r\n    });\r\n  } else {\r\n    message[messageURLField] = defaultURL;\r\n    dataHandler(message);\r\n  }\r\n}\r\n\r\n/**\r\n * Adds a message to its board from an Ably notification that comes in.\r\n *\r\n * @param {string} board The board to update with the newly received message.\r\n * @param {{message: string}} message The message received from the Ably notification.\r\n * @param {function({})} dataHandler The function to handle the successfully placed message.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*))} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function addMessageFromNotification(board, message, dataHandler, failureHandler) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    addURLToMessage(message, \"message\", \"messageURL\", notFoundPicture, (message) => {\r\n      return message.type\r\n    }, (message) => {\r\n      addURLToMessage(message, \"profileImagePath\", \"profilePicture\", defaultProfilePicture, (message) => {\r\n        return message.profileImagePath\r\n      }, (message) => {\r\n        dispatch(addMessageToBoard(board, message));\r\n        log && console.log(\"Successfully received message from Ably! Message = \" + JSON.stringify(message));\r\n        if (dataHandler) {\r\n          dataHandler(message);\r\n        }\r\n        dispatch(setIsNotLoading());\r\n      }, (error) => {\r\n        message.message = \"\";\r\n        err && console.error(\"Error getting media for message from notification! Error = \" + JSON.stringify(error));\r\n        dispatch(addMessageToBoard(board, message));\r\n        if (failureHandler) {\r\n          failureHandler(error);\r\n        }\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n      });\r\n    });\r\n  };\r\n}\r\n\r\n// =========================================================================================================\r\n// ~ Low-Level Message Actions\r\n// =========================================================================================================\r\n\r\nexport function setBoardRead(board, userID) {\r\n  return {\r\n    type: SET_BOARD_READ,\r\n    payload: {\r\n      board,\r\n      userID\r\n    }\r\n  }\r\n}\r\n\r\nexport function discardBoard(board) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(clearBoard(board));\r\n    dispatch(setIsNotLoading());\r\n  };\r\n}\r\n\r\nexport function addMessageToBoard(board, message) {\r\n  return {\r\n    type: ADD_MESSAGE,\r\n    payload: {\r\n      board,\r\n      message,\r\n    }\r\n  };\r\n}\r\n\r\nfunction addQueryToBoard(board, messages, nextToken, ifSubscribed) {\r\n  return {\r\n    type: ADD_QUERY,\r\n    payload: {\r\n      board,\r\n      nextToken,\r\n      messages,\r\n      ifSubscribed,\r\n    }\r\n  };\r\n}\r\n\r\nfunction clearBoard(board) {\r\n  return {\r\n    type: CLEAR_BOARD,\r\n    payload: {\r\n      board\r\n    }\r\n  }\r\n}\r\n\r\nexport function unsubscribeFromBoard(board) {\r\n  return {\r\n    type: UNSUBSCRIBE_FROM_BOARD,\r\n    payload: {\r\n      board\r\n    }\r\n  }\r\n}","import {setIsNotLoading, setError, setIsLoading} from \"./infoActions\";\r\nimport {addHandlerAndUnsubscription} from \"./ablyActions\";\r\nimport QL from \"../../api/GraphQL\";\r\nimport S3 from \"../../api/S3Storage\";\r\nimport defaultProfilePicture from \"../../img/roundProfile.png\";\r\nimport notFoundPicture from \"../../img/not_found.png\";\r\nimport {getItemTypeFromID, switchReturnItemType} from \"../../logic/ItemType\";\r\nimport {\r\n  getObjectChannelName,\r\n  PUT_ITEM, PUT_ITEM_QUERY, REMOVE_ITEM_ATTRIBUTE_INDEX,\r\n  REMOVE_FROM_ITEM_ATTRIBUTES, ADD_TO_ITEM_ATTRIBUTES, SET_ITEM_ATTRIBUTE_INDEX, REMOVE_ITEM, CLEAR_ITEM_QUERY_CACHE\r\n} from \"../reducers/cacheReducer\";\r\nimport {err, log} from \"../../../Constants\";\r\nimport {addMessageFromNotification} from \"./messageActions\";\r\nimport {updateUserFromCache} from \"./userActions\";\r\nimport {addUniqueToArray, setEquals, subtractArray} from \"../../logic/ArrayHelper\";\r\n// import type DatabaseObject from \"../../types/DatabaseObject\";\r\n\r\n// ======================================================================================================\r\n// Fetching S3 Data ~\r\n// ======================================================================================================\r\n\r\n// TODO =================================================================================================\r\n// TODO =                         USE THE HAS_KEY METHOD IN S3 FETCHES                                  =\r\n// TODO =================================================================================================\r\n\r\n/**\r\n * Adds any S3 images to the collected data. The S3 images are specified by ending in either \"Path\" or \"Paths\" for a\r\n * single picture and an array of pictures respectively. The new images will be put into the same key but minus the\r\n * \"Path\". (Ex. \"profileImagePath\" -> \"profileImage\"). \"Paths\" the \"s\" just gets put onto the end. I don't give a flying\r\n * fuck if that makes it an incorrect spelling, that's how I'm doing it.\r\n * (Ex. \"profileImageWigglyPaths\" -> \"profileImageWigglys\")\r\n *\r\n * @param {{}} data The data of the object to add S3 images/videos into.\r\n * @param {function({})} callback The callback for the newly updated data.\r\n */\r\nfunction addS3MediaToData(data, callback) {\r\n  function addDefaultImage(mediaKey, data) {\r\n    if (mediaKey === \"profileImage\" || mediaKey === \"profileImages\") {\r\n      data[mediaKey] = defaultProfilePicture;\r\n    } else {\r\n      data[mediaKey] = [notFoundPicture];\r\n    }\r\n  }\r\n\r\n  let asyncWaiting = 0;\r\n  let asyncReturned = 0;\r\n  let isWaiting = false;\r\n  // This will be if any async function finishes and has properly updated the object\r\n  const finishUpdatingObject = () => {\r\n    asyncReturned++;\r\n    if (asyncReturned >= asyncWaiting && isWaiting) {\r\n      callback(data);\r\n    }\r\n  };\r\n  // Define an arrow function for getting a single URL from a path and adding it to the object\r\n  const getSingleMedia = (path, mediaKey) => {\r\n    if (path) {\r\n      // Get from S3 and add a waiting\r\n      S3.get(path, (url) => {\r\n        data[mediaKey] = url;\r\n        finishUpdatingObject();\r\n      }, (error) => {\r\n        addDefaultImage(mediaKey, data);\r\n        finishUpdatingObject();\r\n      });\r\n    } else {\r\n      // No image\r\n      addDefaultImage(mediaKey, data);\r\n    }\r\n  };\r\n  // Define an arrow function for getting multiple URLs from a path and adding it to the object's array\r\n  const getMultipleMedia = (paths, mediaKey) => {\r\n    if (paths && paths.length) {\r\n      data[mediaKey] = [];\r\n      for (let i = 0; i < paths.length; i++) {\r\n        const path = paths[i];\r\n        S3.get(path, (url) => {\r\n          data[mediaKey][i] = url;\r\n          // data[mediaKey].push(url);\r\n          finishUpdatingObject();\r\n        }, (error) => {\r\n          // Just don't put it in if it fails\r\n          finishUpdatingObject();\r\n        });\r\n      }\r\n    } else {\r\n      // Empty list of urls\r\n      data[mediaKey] = [];\r\n    }\r\n  };\r\n  // First set the async waiting\r\n  for (const key in data) {\r\n    if (data.hasOwnProperty(key)) {\r\n      const keyLen = key.length;\r\n      // This is 0 or a single Media grab\r\n      if (key.substr(keyLen - 4, 4) === \"Path\") {\r\n        // Get the media\r\n        if (data[key]) {\r\n          asyncWaiting++;\r\n        }\r\n      }\r\n      // This is 0 or more media grabs\r\n      else if (key.substr(keyLen - 5, 5) === \"Paths\") {\r\n        // Get the multiple media\r\n        if (data[key] && data[key].length > 0) {\r\n          asyncWaiting += data[key].length;\r\n          // TODO Sort it with something other than by string sort?\r\n          data[key].sort();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // Then start the getting process\r\n  for (const key in data) {\r\n    if (data.hasOwnProperty(key)) {\r\n      const keyLen = key.length;\r\n      // This is 0 or a single Media grab\r\n      if (key.substr(keyLen - 4, 4) === \"Path\") {\r\n        // Get the media\r\n        getSingleMedia(data[key], key.substr(0, keyLen - 4));\r\n      }\r\n      // This is 0 or more media grabs\r\n      else if (key.substr(keyLen - 5, 5) === \"Paths\") {\r\n        // Get the multiple media\r\n        getMultipleMedia(data[key], key.substr(0, keyLen - 5) + \"s\");\r\n      }\r\n    }\r\n  }\r\n  // Check to see if async was super fast\r\n  if (asyncWaiting <= asyncReturned) {\r\n    callback(data);\r\n  } else {\r\n    // Else we let the async callbacks handle it\r\n    isWaiting = true;\r\n  }\r\n}\r\n\r\n// ======================================================================================================\r\n// Single-Fetch Low-Level Functions ~\r\n// ======================================================================================================\r\n\r\n/**\r\n * Fetches an object from the database, making sure that it hasn't already fetched the attributes in the list before.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction fetch(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    const cacheName = getCacheName(itemType);\r\n    if (getStore().cache[cacheName].hasOwnProperty(id)) {\r\n      const currentObject = getStore().cache[cacheName][id];\r\n      if (currentObject) {\r\n        const objectKeyList = Object.keys(currentObject);\r\n        variableList = variableList.filter((v) => {\r\n          return !objectKeyList.includes(v)\r\n        });\r\n        // log&&console.log(\"Final filtered list is = \" + JSON.stringify(variableList));\r\n      } else {\r\n        // Then the current object was already attempted to be fetched but did not get anything.\r\n        dataHandler && dataHandler(null);\r\n        return;\r\n      }\r\n    }\r\n    overwriteFetch(id, itemType, variableList, dataHandler, failureHandler, dispatch, getStore);\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches an object from the database, but always gets every attribute from the variables list. Used primarily for\r\n * updating any stale data in the object there may be.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction forceFetch(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    overwriteFetch(id, itemType, variableList, dataHandler, failureHandler, dispatch, getStore);\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches an object from the database and subscribes to it so that it receives all the automatic updates it receives.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction subscribeFetch(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    // If we are doing a special subscribe fetch, then we must first check to see if\r\n    const item = getStore().cache[getCacheName(itemType)][id];\r\n    if (!item || item.__stale__ !== false) {\r\n      // Then it is stale\r\n      // Subscribe (potentially again?)\r\n      dispatch(subscribeCacheUpdatesToObject(id, itemType));\r\n      // Update the stale value for the object to false\r\n      dispatch(putItem(id, itemType, {__stale__: false}));\r\n      // Then we force fetch everything!\r\n      dispatch(forceFetch(id, itemType, variableList, dataHandler, failureHandler));\r\n    } else {\r\n      // Then it is not stale, and we need not subscribe again\r\n      dispatch(fetch(id, itemType, variableList, dataHandler, failureHandler));\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Subscribes to the update channel in Ably for this object and adds handlers so that it will update in real time in\r\n * accordance to the changes.\r\n *\r\n * @param {string} id The id of the object to subscribe to.\r\n * @param {string} itemType The item type of the object to subscribe to.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction subscribeCacheUpdatesToObject(id, itemType) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(addHandlerAndUnsubscription(getObjectChannelName(id), (message) => {\r\n      const payload = message.data;\r\n      const createJSON = payload.CREATE;\r\n      const setJSON = payload.SET;\r\n      const addJSON = payload.ADD;\r\n      const removeJSON = payload.REMOVE;\r\n      const ifDelete = payload.DELETE;\r\n      if (ifDelete) {\r\n        // If we delete, then we're done, nothing else to do! This also handles unsubscribing!\r\n        dispatch(removeItem(itemType, id, dispatch));\r\n      } else {\r\n        if (createJSON) {\r\n          // This is any object that was created and added, put it into the cache\r\n          if (createJSON.id && createJSON.item_type) {\r\n            if (createJSON.item_type === \"Message\") {\r\n              if (getStore().message.boardIfSubscribed[createJSON.board] !== true) {\r\n                // alert(\"Adding message to board: \" + createJSON.board + \", with message: \" + JSON.stringify(createJSON));\r\n                dispatch(addMessageFromNotification(createJSON.board, createJSON));\r\n              }\r\n            } else {\r\n              // dispatch(getPutItemFunction(createJSON.item_type)(createJSON, dispatch));\r\n              dispatch(putItem(createJSON.id, createJSON.item_type, createJSON));\r\n            }\r\n          }\r\n        }\r\n        if (setJSON) {\r\n          // You simply put the item into the cache (overwriting existing attributes)\r\n          setJSON.id = id;\r\n          // dispatch(getPutItemFunction(itemType)(setJSON));\r\n          dispatch(putItem(id, itemType, setJSON));\r\n        }\r\n        if (addJSON) {\r\n          // Adds the attributes to the object, which should already be in there!\r\n          dispatch(addItemAttributes(itemType, id, addJSON));\r\n        }\r\n        if (removeJSON) {\r\n          // Removes the attributes from the object, which should already be in there!\r\n          dispatch(removeItemAttributes(itemType, id, removeJSON));\r\n        }\r\n      }\r\n    }, (asyncDispatch) => {\r\n      // When the object is automatically unsubscribed, just add on the __stale__ variable\r\n      asyncDispatch(putItem(id, itemType, {__stale__: true}));\r\n    }));\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches an object from the database, overwriting any changes already in the database with the data it receives.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @param {function(*)} dispatch The dispatch handler function to call a new redux action with.\r\n * @param {function()} getStore The get function for redux that receives the current store.\r\n */\r\nfunction overwriteFetch(id, itemType, variableList, dataHandler, failureHandler, dispatch, getStore) {\r\n  if (variableList.length > 0) {\r\n    if (!variableList.includes(\"id\")) {\r\n      variableList = [...variableList, \"id\"];\r\n    }\r\n    if (!variableList.includes(\"item_type\")) {\r\n      variableList = [...variableList, \"item_type\"];\r\n    }\r\n    if (dataHandler) {\r\n      log && console.log(\"S H = \" + dataHandler.toString());\r\n    } else {\r\n      log && console.log(\"No data handler...\");\r\n    }\r\n    if (failureHandler) {\r\n      log && console.log(\"F H = \" + failureHandler.toString());\r\n    } else {\r\n      log && console.log(\"No failure handler...\");\r\n    }\r\n    QL.getItem(itemType, id, variableList, (data) => {\r\n      // log&&console.log(\"Successfully retrieved the QL info\");\r\n      if (data) {\r\n        addS3MediaToData(data, (updatedData) => {\r\n          // TODO __stale__\r\n          dispatch(putItem(id, itemType, updatedData));\r\n          if (getStore().user.id === id) {\r\n            dispatch(updateUserFromCache());\r\n          }\r\n          dispatch(setIsNotLoading());\r\n          if (dataHandler) {\r\n            dataHandler(getCache(itemType, getStore)[id]);\r\n          }\r\n        });\r\n      } else {\r\n        // Then the fetch came up with nothing!\r\n        dispatch(putItem(id, itemType, null));\r\n        err && console.error(\"Couldn't find ID = \" + id + \" for item type = \" + itemType);\r\n        dispatch(setIsNotLoading());\r\n        if (dataHandler) {\r\n          log && console.log(\"D H \" + dataHandler.toString());\r\n          dataHandler(null);\r\n        }\r\n      }\r\n    }, (error) => {\r\n      err && console.error(\"Error in retrieval\");\r\n      err && console.error(error);\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n      if (failureHandler) {\r\n        log && console.log(\"F H \" + failureHandler.toString());\r\n        failureHandler(error);\r\n      }\r\n    });\r\n  } else {\r\n    dispatch(putItem(id, itemType, null));\r\n    dispatch(setIsNotLoading());\r\n    if (dataHandler) {\r\n      dataHandler(getCache(itemType, getStore)[id]);\r\n    }\r\n  }\r\n}\r\n\r\n// ======================================================================================================\r\n// Batch-Fetch Low-Level Functions ~\r\n// ======================================================================================================\r\n\r\n/**\r\n * Fetches a list of items from the database that all have the same item type. This also makes sure that we are not\r\n * fetching more than we have to by checking all of the items already in the database.\r\n *\r\n * @param {[string]} ids The list of ids to fetch from the database.\r\n * @param {string} itemType The item type of the objects to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {number} startIndex The index to start with in the list of ids. (Kinda like a next token).\r\n * @param {number} maxFetch The max number of items to fetch from the database.\r\n * @param {function([DatabaseObject])} dataHandler The function to handle the list of objects that are received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction batchFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    let filteredVariablesList = [];\r\n    // const filterFunction = (objectKeyList) => (v) => (objectKeyList.includes(v) || filteredVariablesList.includes(v));\r\n    for (let i = startIndex; i < Math.min(ids.length, startIndex + maxFetch); i++) {\r\n      const id = ids[i];\r\n      const cacheSet = getCache(itemType, getStore);\r\n      const currentObject = cacheSet[id];\r\n      if (currentObject) {\r\n        // TODO TEST IF THIS works?\r\n        // These are the variables that this object needs fetched\r\n        const missingVariableList = [...variableList];\r\n        subtractArray(missingVariableList, Object.keys(currentObject));\r\n        addUniqueToArray(filteredVariablesList, missingVariableList);\r\n        if (setEquals(variableList, filteredVariablesList)) {\r\n          filteredVariablesList = variableList;\r\n          break;\r\n        }\r\n        // filteredVariablesList = variableList.filter(filterFunction(Object.keys(currentObject)));\r\n        // variableList = variableList.filter((v) => { return !objectKeyList.includes(v) });\r\n      } else {\r\n        filteredVariablesList = variableList;\r\n        break;\r\n      }\r\n    }\r\n    batchOverwriteFetch(ids, itemType, filteredVariablesList, startIndex, maxFetch, dataHandler, failureHandler, dispatch, getStore);\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches a list of items from the database that all have the same item type. This does no checking for the variables\r\n * to receive, so will overwrite all data. This is primarily for updating an item.\r\n *\r\n * @param {[string]} ids The list of ids to fetch from the database.\r\n * @param {string} itemType The item type of the objects to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {number} startIndex The index to start with in the list of ids. (Kinda like a next token).\r\n * @param {number} maxFetch The max number of items to fetch from the database.\r\n * @param {function([DatabaseObject])} dataHandler The function to handle the list of objects that are received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction batchForceFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    batchOverwriteFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler, dispatch, getStore);\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches a list of items from the database that all have the same item type. Overwrites any objects in the database.\r\n *\r\n * @param {[string]} ids The list of ids to fetch from the database.\r\n * @param {string} itemType The item type of the objects to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {number} startIndex The index to start with in the list of ids. (Kinda like a next token).\r\n * @param {number} maxFetch The max number of items to fetch from the database.\r\n * @param {function([DatabaseObject])} dataHandler The function to handle the list of objects that are received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @param {function(*)} dispatch The dispatch handler function to call a new redux action with.\r\n * @param {function()} getStore The get function for redux that receives the current store.\r\n */\r\nfunction batchOverwriteFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler, dispatch, getStore) {\r\n  if (variableList.length > 0) {\r\n    // TODO Check the start index?\r\n    if (!variableList.includes(\"id\")) {\r\n      variableList = [...variableList, \"id\"];\r\n    }\r\n    if (!variableList.includes(\"item_type\")) {\r\n      variableList = [...variableList, \"item_type\"];\r\n    }\r\n    const retrievedItems = [];\r\n    let numFetched = 0;\r\n    // You have a number of ids to fetch\r\n    const fetchIDs = ids.slice(startIndex, Math.min(startIndex + maxFetch, ids.length));\r\n    let totalFetch = fetchIDs.length;\r\n    let firstFetchIDs = [...fetchIDs];\r\n    let restFetchIDs = [];\r\n    // Don't send a request for anything that will definitely be sent back\r\n    if (firstFetchIDs.length > QL.batchLimit) {\r\n      restFetchIDs = firstFetchIDs.slice(QL.batchLimit);\r\n      firstFetchIDs = firstFetchIDs.slice(0, QL.batchLimit);\r\n    }\r\n    const finishProcessItem = (item) => {\r\n      dispatch(putItem(item.id, itemType, item));\r\n      retrievedItems.push(getStore().cache[getCacheName(itemType)][item.id]);\r\n      numFetched++;\r\n      if (numFetched >= totalFetch) {\r\n        dispatch(setIsNotLoading());\r\n        if (dataHandler) {\r\n          dataHandler(retrievedItems);\r\n        }\r\n      }\r\n    };\r\n    const batchGetFailHandler = (error) => {\r\n      err && console.error(\"Error in retrieval\");\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n      if (failureHandler) {\r\n        failureHandler(error);\r\n      }\r\n    };\r\n    const batchGetDataHandler = (data, restFetch) => {\r\n      if (data.hasOwnProperty(\"unretrievedItems\") && data.unretrievedItems && data.unretrievedItems.length > 0) {\r\n        // TODO Try to fetch again? Or just drop them?\r\n        for (let i = 0; i < data.unretrievedItems.length; i++) {\r\n          totalFetch--;\r\n          if (numFetched >= totalFetch) {\r\n            dispatch(setIsNotLoading());\r\n            if (dataHandler) {\r\n              dataHandler(retrievedItems);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (restFetch && restFetch.length > 0) {\r\n        let fetch = restFetch;\r\n        if (fetch.length > QL.batchLimit) {\r\n          fetch = restFetch.slice(0, QL.batchLimit);\r\n          restFetch = restFetch.slice(QL.batchLimit);\r\n        }\r\n        QL.getItems(itemType, fetch, variableList, (data) => batchGetDataHandler(data, restFetch), batchGetFailHandler);\r\n      }\r\n      if (data.hasOwnProperty(\"items\") && data.items && data.items.length) {\r\n        for (let i = 0; i < data.items.length; i++) {\r\n          if (data.items[i]) {\r\n            addS3MediaToData(data.items[i], finishProcessItem);\r\n          } else {\r\n            totalFetch--;\r\n            if (numFetched >= totalFetch) {\r\n              dispatch(setIsNotLoading());\r\n              if (dataHandler) {\r\n                dataHandler(retrievedItems);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    QL.getItems(itemType, firstFetchIDs, variableList, (data) => batchGetDataHandler(data, restFetchIDs), batchGetFailHandler);\r\n  } else {\r\n    const items = [];\r\n    for (let i = 0; i < ids.length; i++) {\r\n      const id = ids[i];\r\n      dispatch(putItem(id, itemType, {}));\r\n      items.push(getStore().cache[getCacheName(itemType)][id]);\r\n    }\r\n    dispatch(setIsNotLoading());\r\n    if (dataHandler) {\r\n      dataHandler(items);\r\n    }\r\n  }\r\n}\r\n\r\n// ======================================================================================================\r\n// Query-Fetch Low-Level Functions ~\r\n// ======================================================================================================\r\n\r\n/**\r\n * Fetches a new query from the database, using the parameters to specify the exact query. Allows flexibility for\r\n * how to filter, the limit of items to fetch, and which next token to use.\r\n *\r\n * @param {string} itemType The item types of the items to receive in the query.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {{}} filter The {@link QL} filter to dictate how the query filters the objects.\r\n * @param {number} limit The limit of items for the query to SEARCH. Items length <= limit.\r\n * @param {string} nextToken The next token string that dictates which part of the query to fetch.\r\n * @param {function({nextToken: string, items: [DatabaseObject]})} dataHandler The function to handle the fetched items.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction fetchQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    if (!variableList.includes(\"id\")) {\r\n      variableList.push(\"id\");\r\n    }\r\n    if (!variableList.includes(\"item_type\")) {\r\n      variableList.push(\"item_type\");\r\n    }\r\n    // TODO Make this sort alphabetically, so that it's deterministic\r\n    // variableList = variableList.sort();\r\n    // const fetchQueryDispatchType = getFetchQueryType(itemType);\r\n    let queryString = QL.constructItemQuery(itemType, variableList, filter, limit, nextToken);\r\n    // let queryString = QL.getConstructQueryFunction(itemType)(variableList, filter, limit, nextToken);\r\n    const nextTokenString = QL.getNextTokenString(nextToken);\r\n    const normalizedQueryString = JSON.stringify(QL.getNormalizedQuery(queryString));\r\n    // if (nextTokenString === \"null\") { console.log(\"N Q S = \" + JSON.stringify(normalizedQueryString))}\r\n    let queryCache = getQueryCache(itemType, getStore);\r\n    // if (nextTokenString === \"null\") { console.log(itemType + \" Cache = \" + JSON.stringify(Object.keys(getStore().cache))); }\r\n    // if (nextTokenString === \"null\") { console.log(\"THE Post Query cache = \" + JSON.stringify(getStore().cache.postQueries)); }\r\n    // if (nextTokenString === \"null\") { console.log(itemType + \" Query cache = \" + JSON.stringify(queryCache)); }\r\n    let queryResult = queryCache[normalizedQueryString];\r\n    // if (nextTokenString === \"null\") { console.log(\"Normalized query cache = \" + JSON.stringify(queryResult)); }\r\n    if (queryResult) {\r\n      queryResult = queryResult[nextTokenString];\r\n      // if (nextTokenString === \"null\") { console.log(\"GOt! Query Result = \" + JSON.stringify(queryResult))}\r\n    }\r\n    if (queryResult) {\r\n      dispatch(putItemQuery(itemType, normalizedQueryString, nextTokenString, queryResult));\r\n      dataHandler(QL.getQueryResultFromCompressed(queryResult, getCache(itemType, getStore)));\r\n    } else {\r\n      overwriteFetchQuery(itemType, queryString, nextToken, dataHandler, failureHandler, dispatch);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches a new query from the database, using the parameters to specify the exact query. Allows flexibility for\r\n * how to filter, the limit of items to fetch, and which next token to use. Does not check the cache for the query\r\n * already fetched.\r\n *\r\n * @param {string} itemType The item types of the items to receive in the query.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {{}} filter The {@link QL} filter to dictate how the query filters the objects.\r\n * @param {number} limit The limit of items for the query to SEARCH. Items length <= limit.\r\n * @param {string} nextToken The next token string that dictates which part of the query to fetch.\r\n * @param {function({nextToken: string, items: [DatabaseObject]})} dataHandler The function to handle the fetched items.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nfunction forceFetchQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    if (!variableList.includes(\"id\")) {\r\n      variableList.push(\"id\");\r\n    }\r\n    if (!variableList.includes(\"item_type\")) {\r\n      variableList.push(\"item_type\");\r\n    }\r\n\r\n    // TODO Make this sort alphabetically, so that it's deterministic\r\n    // variableList = variableList.sort();\r\n\r\n    // let queryString = QL.getConstructQueryFunction(itemType)(variableList, filter, limit, nextToken);\r\n    let queryString = QL.constructItemQuery(itemType, variableList, filter, limit, nextToken);\r\n    // const queryString = QL[QLFunctionName](variableList, filter, limit, nextToken);\r\n    overwriteFetchQuery(itemType, queryString, nextToken, dataHandler, failureHandler, dispatch);\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches a new query from the database, using the parameters to specify the exact query. Allows flexibility for\r\n * how to filter, the limit of items to fetch, and which next token to use. Overwrites any query data already in the\r\n * cache.\r\n *\r\n * @param {string} itemType The item types of the items to receive in the query.\r\n * @param {string} queryString The normalized query string for this specific query.\r\n * @param {string} nextToken The next token string that dictates which part of the query to fetch.\r\n * @param {function({nextToken: string, items: [DatabaseObject]})} dataHandler The function to handle the fetched items.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @param dispatch\r\n */\r\nfunction overwriteFetchQuery(itemType, queryString, nextToken, dataHandler, failureHandler, dispatch) {\r\n  QL.queryItems(itemType, queryString, (data) => {\r\n    if (data && data.items && data.items.length) {\r\n      for (let i = 0; i < data.items.length; i++) {\r\n        // TODO Handle the profile image path retrieval\r\n        const item = data.items[i];\r\n        const id = item.id;\r\n        addS3MediaToData(item, (updatedData) => dispatch(putItem(id, itemType, updatedData)));\r\n      }\r\n    }\r\n    dispatch(putItemQuery(itemType, QL.getNormalizedQueryString(QL.getNormalizedQuery(queryString)),\r\n      QL.getNextTokenString(nextToken), QL.getCompressedFromQueryResult(data)));\r\n    dispatch(setIsNotLoading());\r\n    if (dataHandler) {\r\n      dataHandler(data);\r\n    }\r\n  }, (error) => {\r\n    err && console.error(\"Error in QUERY retrieval. ItemType = \" + itemType + \", query string = \" + JSON.stringify(queryString));\r\n    err && console.error(JSON.stringify(error));\r\n    dispatch(setError(error));\r\n    dispatch(setIsNotLoading());\r\n    if (failureHandler) {\r\n      failureHandler(error);\r\n    }\r\n  });\r\n}\r\n\r\n// ======================================================================================================\r\n// Update Database Item High-Level Functions ~\r\n// ======================================================================================================\r\n\r\n/**\r\n * Sets an item attribute in the cache to a specific value manually.\r\n *\r\n * @param {string} id The id of the object to update.\r\n * @param {string} attributeName The name of the attribute to update.\r\n * @param {*} attributeValue The value to set to the attribute.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setItemAttribute(id, attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(putItem(id, getItemTypeFromID(id), {[attributeName]: attributeValue}));\r\n    if (id === getStore().user.id) {\r\n      dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a value at an index of an item's list attribute manually.\r\n *\r\n * @param {string} id The id of the object to update.\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {number} index The index of the list to set to the value.\r\n * @param {*} attributeValue The value to set the list index to.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setItemAttributeIndex(id, attributeName, index, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setItemAttributeAtIndex(getItemTypeFromID(id), id, attributeName, index, attributeValue));\r\n    if (id === getStore().user.id) {\r\n      dispatch(updateUserFromCache());\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Adds a value to a list in an item manually.\r\n *\r\n * @param {string} id The id of the object to update.\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {*} attributeValue The value to add to the item's list.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function addToItemAttribute(id, attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    if (attributeValue.length) {\r\n      dispatch(addItemAttributes(getItemTypeFromID(id), id, {\r\n        [attributeName]: [attributeValue]\r\n      }));\r\n      if (id === getStore().user.id) {\r\n        dispatch(updateUserFromCache());\r\n      }\r\n    } else {\r\n      err && console.error(\"Attribute value must be an array to add to item attribute\");\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes a specific value from an item's list manually.\r\n *\r\n * @param {string} id The id of the object to update.\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {string} attributeValue The value to remove from the item's list.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeFromItemAttribute(id, attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    if (attributeValue.length) {\r\n      dispatch(removeItemAttributes(getItemTypeFromID(id), id, {\r\n        [attributeName]: [attributeValue]\r\n      }));\r\n      if (id === getStore().user.id) {\r\n        dispatch(updateUserFromCache());\r\n      }\r\n    } else {\r\n      err && console.error(\"Attribute value must be an array to remove from item attribute\");\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes an index from an item's list manually.\r\n *\r\n * @param {string} id The id of the object to update.\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {number} index The index of the list to remove.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeFromItemAttributeAtIndex(id, attributeName, index) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(removeItemAttributeIndex(getItemTypeFromID(id), id, attributeName, index));\r\n    if (id === getStore().user.id) {\r\n      dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n// ======================================================================================================\r\n// Fetch Database Item High-Level Functions ~\r\n// ======================================================================================================\r\n\r\n/**\r\n * Fetches an object from the database, making sure that it hasn't already fetched the attributes in the list before.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchItem(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return fetch(id, itemType, variableList, dataHandler, failureHandler)\r\n}\r\n\r\n/**\r\n * Fetches an object from the database, but always gets every attribute from the variables list. Used primarily for\r\n * updating any stale data in the object there may be.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function forceFetchItem(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return forceFetch(id, itemType, variableList, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches an object from the database and subscribes to it so that it receives all the automatic updates it receives.\r\n *\r\n * @param {string} id The id of the object to fetch.\r\n * @param {string} itemType The item type of the object to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function(DatabaseObject)} dataHandler The function to handle the newly fetched object with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function subscribeFetchItem(id, itemType, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetch(id, itemType, variableList, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches a list of items from the database that all have the same item type. This also makes sure that we are not\r\n * fetching more than we have to by checking all of the items already in the database.\r\n *\r\n * @param {[string]} ids The list of ids to fetch from the database.\r\n * @param {string} itemType The item type of the objects to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {number} startIndex The index to start with in the list of ids. (Kinda like a next token).\r\n * @param {number} maxFetch The max number of items to fetch from the database.\r\n * @param {function([DatabaseObject])} dataHandler The function to handle the list of objects that are received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchItems(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return batchFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches a list of items from the database that all have the same item type. This does no checking for the variables\r\n * to receive, so will overwrite all data. This is primarily for updating an item.\r\n *\r\n * @param {[string]} ids The list of ids to fetch from the database.\r\n * @param {string} itemType The item type of the objects to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {number} startIndex The index to start with in the list of ids. (Kinda like a next token).\r\n * @param {number} maxFetch The max number of items to fetch from the database.\r\n * @param {function([DatabaseObject])} dataHandler The function to handle the list of objects that are received.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function forceFetchItems(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return batchForceFetch(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches a new query from the database, using the parameters to specify the exact query. Allows flexibility for\r\n * how to filter, the limit of items to fetch, and which next token to use.\r\n *\r\n * @param {string} itemType The item types of the items to receive in the query.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {{}} filter The {@link QL} filter to dictate how the query filters the objects.\r\n * @param {number} limit The limit of items for the query to SEARCH. Items length <= limit.\r\n * @param {string} nextToken The next token string that dictates which part of the query to fetch.\r\n * @param {function({nextToken: string, items: [DatabaseObject]})} dataHandler The function to handle the fetched items.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchItemQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches a new query from the database, using the parameters to specify the exact query. Allows flexibility for\r\n * how to filter, the limit of items to fetch, and which next token to use. Does not check the cache for the query\r\n * already fetched.\r\n *\r\n * @param {string} itemType The item types of the items to receive in the query.\r\n * @param {[string]} variableList The list of variables to fetch for the objects.\r\n * @param {{}} filter The {@link QL} filter to dictate how the query filters the objects.\r\n * @param {number} limit The limit of items for the query to SEARCH. Items length <= limit.\r\n * @param {string} nextToken The next token string that dictates which part of the query to fetch.\r\n * @param {function({nextToken: string, items: [DatabaseObject]})} dataHandler The function to handle the fetched items.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function forceFetchItemQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchQuery(itemType, variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\n// ======================================================================================================\r\n// Mutate Database Low-Level Functions ~\r\n// ======================================================================================================\r\n\r\nfunction setItemAttributeAtIndex(itemType, id, attributeName, index, attributeValue) {\r\n  return {\r\n    type: SET_ITEM_ATTRIBUTE_INDEX,\r\n    payload: {\r\n      id,\r\n      itemType,\r\n      attributeName,\r\n      index,\r\n      attributeValue\r\n    }\r\n  }\r\n}\r\n\r\nfunction addItemAttributes(itemType, id, attributes) {\r\n  return {\r\n    type: ADD_TO_ITEM_ATTRIBUTES,\r\n    payload: {\r\n      id,\r\n      itemType,\r\n      attributes\r\n    }\r\n  }\r\n}\r\n\r\nfunction removeItemAttributes(itemType, id, attributes) {\r\n  return {\r\n    type: REMOVE_FROM_ITEM_ATTRIBUTES,\r\n    payload: {\r\n      id,\r\n      itemType,\r\n      attributes\r\n    }\r\n  }\r\n}\r\n\r\nfunction removeItemAttributeIndex(itemType, id, attributeName, index) {\r\n  return {\r\n    type: REMOVE_ITEM_ATTRIBUTE_INDEX,\r\n    payload: {\r\n      id,\r\n      itemType,\r\n      attributeName,\r\n      index\r\n    }\r\n  }\r\n}\r\n\r\nexport function putItem(id, itemType, item) {\r\n  return {\r\n    type: PUT_ITEM,\r\n    payload: {\r\n      id,\r\n      itemType,\r\n      item\r\n    }\r\n  }\r\n}\r\n\r\nfunction putItemQuery(itemType, normalizedQueryString, nextToken, queryResult) {\r\n  return {\r\n    type: PUT_ITEM_QUERY,\r\n    payload: {\r\n      itemType,\r\n      normalizedQueryString,\r\n      nextToken,\r\n      queryResult\r\n    }\r\n  };\r\n}\r\n\r\nexport function removeItem(itemType, id) {\r\n  return {\r\n    type: REMOVE_ITEM,\r\n    payload: {\r\n      id,\r\n      itemType\r\n    }\r\n  }\r\n}\r\n\r\n// const clearNormalizedQueryCache = (itemType, normalizedQueryString) => {\r\n//     return {\r\n//         type: CLEAR_NORMALIZED_ITEM_QUERY,\r\n//         payload: {\r\n//             itemType,\r\n//             normalizedQueryString\r\n//         }\r\n//     };\r\n// };\r\n// const clearItemCache = (itemType) => {\r\n//     return {\r\n//         type: CLEAR_ITEM_CACHE,\r\n//         payload: {\r\n//             itemType\r\n//         }\r\n//     };\r\n// };\r\nexport const clearItemQueryCache = (itemType) => {\r\n  return {\r\n    type: CLEAR_ITEM_QUERY_CACHE,\r\n    payload: {\r\n      itemType\r\n    }\r\n  }\r\n};\r\n// ======================================================================================================\r\n// Cache Reducer Getter Functions ~\r\n// ======================================================================================================\r\n\r\nexport function getCache(itemType, getStore) {\r\n  const cache = getStore().cache;\r\n  return switchReturnItemType(itemType, cache.clients, cache.trainers, cache.gyms, cache.workouts, cache.reviews,\r\n    cache.events, cache.challenges, cache.invites, cache.posts, cache.submissions, cache.groups, cache.comments,\r\n    cache.sponsors, null, cache.streaks, cache.deals, cache.products, cache.admins,\r\n    \"Retrieve cache not implemented\");\r\n}\r\n\r\nexport function getCacheName(itemType) {\r\n  return switchReturnItemType(itemType, \"clients\", \"trainers\", \"gyms\", \"workouts\", \"reviews\", \"events\", \"challenges\",\r\n    \"invites\", \"posts\", \"submissions\", \"groups\", \"comments\", \"sponsors\", null, \"streaks\",\r\n    \"deals\", \"products\", \"admins\", \"Retrieve cache not implemented\");\r\n}\r\n\r\nexport function getQueryCache(itemType, getStore) {\r\n  const cache = getStore().cache;\r\n  return switchReturnItemType(itemType, cache.clientQueries, cache.trainerQueries, cache.gymQueries,\r\n    cache.workoutQueries, cache.reviewQueries, cache.eventQueries, cache.challengeQueries, cache.inviteQueries,\r\n    cache.postQueries, cache.submissionQueries, cache.groupQueries, cache.commentQueries, cache.sponsorQueries,\r\n    null, cache.streakQueries, cache.dealQueries, cache.productQueries, cache.adminQueries,\r\n    \"Retrieve query cache not implemented\");\r\n}\r\n","import {\r\n  addToItemAttribute,\r\n  fetchItem,\r\n  forceFetchItem, getCache, removeFromItemAttribute, removeFromItemAttributeAtIndex,\r\n  setItemAttribute, setItemAttributeIndex,\r\n  subscribeFetchItem\r\n} from \"./cacheActions\";\r\nimport {appUserItemType} from \"../../../Constants\";\r\nimport {CLEAR_USER, FORCE_SET_USER, SET_USER} from \"../reducers/userReducer\";\r\n\r\n// =========================================================================================================\r\n// ~ High-Level User Actions\r\n// =========================================================================================================\r\n\r\n/**\r\n * Fetches the user from the database, making sure that it hasn't already fetched the attributes in the list before.\r\n *\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function({})} dataHandler The function to handle the newly fetched user with.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchUserAttributes(variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(fetchItem(userID, appUserItemType, variableList, dataHandler, failureHandler));\r\n      // dispatch(fetchItem(userID, appUserItemType, variableList, (client) => {\r\n      //     dispatch(setUser(client));\r\n      //     dispatch(setIsNotLoading());\r\n      //     if (dataHandler) { dataHandler(getStore().user); }\r\n      // }));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Fetches the user from the database, but always gets every attribute from the variables list. Used primarily for\r\n * updating any stale data in the object there may be.\r\n *\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function({})} dataHandler The function to handle the newly fetched user with.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function forceFetchUserAttributes(variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    // Just overwrite all the user attributes because we want to process them again\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(forceFetchItem(userID, appUserItemType, variableList, dataHandler, failureHandler));\r\n      // forceFetchItem(appUserItemType, userID, variableList, (user) => {\r\n      //     dispatch(setUser(user));\r\n      //     dispatch(setIsNotLoading());\r\n      //     if (dataHandler) { dataHandler(getStore().user);}\r\n      // })(dispatch, getStore);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Fetches the user from the database and subscribes to it so that it receives all the automatic updates it receives.\r\n *\r\n * @param {[string]} variableList The list of variables to fetch for the object.\r\n * @param {function({})} dataHandler The function to handle the newly fetched user with.\r\n * @param {function(error)} failureHandler The function to handle any potential errors that may occur.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function subscribeFetchUserAttributes(variableList, dataHandler, failureHandler) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(subscribeFetchItem(userID, appUserItemType, variableList, dataHandler, failureHandler));\r\n      // dispatch(subscribeFetchItem(userID, appUserItemType, variableList, (client) => {\r\n      //     dispatch(setUser(client));\r\n      //     dispatch(setIsNotLoading());\r\n      //     if (dataHandler) { dataHandler(getStore().user); }\r\n      // }));\r\n    } else {\r\n      dataHandler({});\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a user attribute to a specific value manually.\r\n *\r\n * @param {string} attributeName The name of the attribute to update.\r\n * @param {*} attributeValue The value to set to the attribute.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setUserAttribute(attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(setItemAttribute(userID, attributeName, attributeValue));\r\n      // dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a value at an index of a list in the user attributes manually.\r\n *\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {number} index The index of the list to set to the value.\r\n * @param {*} attributeValue The value to set the list index to.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setUserAttributeAtIndex(attributeName, index, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(setItemAttributeIndex(userID, attributeName, index, attributeValue));\r\n      // dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Adds a value to a list in the user manually.\r\n *\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {*} attributeValue The value to add to the item's list.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function addToUserAttribute(attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(addToItemAttribute(userID, attributeName, attributeValue));\r\n      // dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes a specific value from a list in the user manually.\r\n *\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {string} attributeValue The value to remove from the item's list.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeFromUserAttribute(attributeName, attributeValue) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(removeFromItemAttribute(userID, attributeName, attributeValue));\r\n      // dispatch(updateUserFromCache());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes an index from a list in the user manually.\r\n *\r\n * @param {string} attributeName The name of the list attribute to update.\r\n * @param {number} index The index of the list to remove.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeFromUserAttributeAtIndex(attributeName, index) {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(removeFromItemAttributeAtIndex(userID, attributeName, index));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the user reducer using the values inside the cache corresponding to the user ID.\r\n *\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function updateUserFromCache() {\r\n  return (dispatch, getStore) => {\r\n    const userID = getStore().user.id;\r\n    if (userID) {\r\n      dispatch(setUser(getCache(appUserItemType, getStore)[userID]));\r\n    }\r\n  }\r\n}\r\n\r\n// =========================================================================================================\r\n// ~ Low-Level Message Actions\r\n// =========================================================================================================\r\n\r\nexport function setUser(user) {\r\n  return {\r\n    type: SET_USER,\r\n    payload: user\r\n  };\r\n}\r\n\r\nexport function forceSetUser(user) {\r\n  return {\r\n    type: FORCE_SET_USER,\r\n    payload: user\r\n  };\r\n}\r\n\r\nexport function clearUser() {\r\n  return {\r\n    type: CLEAR_USER\r\n  }\r\n}","import {\r\n  fetchItem, fetchItemQuery,\r\n  fetchItems,\r\n  forceFetchItem, forceFetchItemQuery,\r\n  forceFetchItems,\r\n  subscribeFetchItem\r\n} from \"../actions/cacheActions\";\r\n\r\n/**\r\n * Fetches a Client from the database, making sure that it hasn't already fetched the attributes in the list before.\r\n *\r\n * @param {string} id The id of the Client to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the Client.\r\n * @param {function(Client)} dataHandler The function to handle the newly fetched Client with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchClient(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Client\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\n/**\r\n * Fetches a Trainer from the database, making sure that it hasn't already fetched the attributes in the list before.\r\n *\r\n * @param {string} id The id of the Trainer to fetch.\r\n * @param {[string]} variableList The list of variables to fetch for the Trainer.\r\n * @param {function(Trainer)} dataHandler The function to handle the newly fetched Trainer with.\r\n * @param {function(error)} failureHandler The function to handle any errors that occur with.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function fetchTrainer(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Trainer\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGym(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Gym\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchWorkout(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Workout\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchReview(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Review\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchEvent(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Event\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchChallenge(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Challenge\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchInvite(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Invite\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchPost(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Post\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSubmission(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Submission\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGroup(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Group\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchComment(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Comment\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSponsor(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Sponsor\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchStreak(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Streak\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchDeal(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Deal\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchProduct(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Product\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchAdmin(id, variableList, dataHandler, failureHandler) {\r\n  return fetchItem(id, \"Admin\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchClient(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Client\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchTrainer(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Trainer\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchGym(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Gym\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchWorkout(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Workout\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchReview(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Review\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchEvent(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Event\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchChallenge(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Challenge\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchInvite(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Invite\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchPost(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Post\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchSubmission(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Submission\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchGroup(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Group\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchComment(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Comment\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchSponsor(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Sponsor\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchStreak(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Streak\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchDeal(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Deal\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchProduct(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Product\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function subscribeFetchAdmin(id, variableList, dataHandler, failureHandler) {\r\n  return subscribeFetchItem(id, \"Admin\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchClient(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Client\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchTrainer(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Trainer\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGym(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Gym\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchWorkout(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Workout\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchReview(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Review\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchEvent(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Event\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchChallenge(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Challenge\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchInvite(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Invite\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchPost(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Post\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSubmission(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Submission\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGroup(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Group\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchComment(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Comment\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSponsor(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Sponsor\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchStreak(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Streak\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchDeal(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Deal\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchProduct(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Product\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchAdmin(id, variableList, dataHandler, failureHandler) {\r\n  return forceFetchItem(id, \"Admin\", variableList, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchClients(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Client\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchTrainers(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Trainer\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGyms(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Gym\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchWorkouts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Workout\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchReviews(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Review\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchEvents(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Event\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchChallenges(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Challenge\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchInvites(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Invite\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchPosts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Post\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSubmissions(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Submission\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGroups(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Group\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchComments(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Comment\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSponsors(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Sponsor\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchStreaks(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Streak\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchDeals(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Deal\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchProducts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Product\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchAdmins(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return fetchItems(ids, \"Admin\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchClients(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Client\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchTrainers(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Trainer\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGyms(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Gym\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchWorkouts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Workout\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchReviews(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Review\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchEvents(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Event\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchChallenges(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Challenge\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchInvites(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Invite\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchPosts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Post\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSubmissions(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Submission\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGroups(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Group\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchComments(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Comment\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSponsors(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Sponsor\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchStreaks(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Streak\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchDeals(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Deal\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchProducts(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Product\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchAdmins(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) {\r\n  return forceFetchItems(ids, \"Admin\", variableList, startIndex, maxFetch, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchClientQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  // console.log(\"fetching clients\");\r\n  return fetchItemQuery(\"Client\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchTrainerQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Trainer\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGymQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Gym\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchWorkoutQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Workout\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchReviewQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Review\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchEventQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Event\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchChallengeQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Challenge\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchInviteQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Invite\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchPostQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Post\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSubmissionQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Submission\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchGroupQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Group\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchCommentQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Comment\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchSponsorQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Sponsor\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchStreakQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Streak\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchDealQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Deal\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchProductQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Product\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function fetchAdminQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return fetchItemQuery(\"Admin\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchClientQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Client\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchTrainerQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Trainer\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGymQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Gym\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchWorkoutQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Workout\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchReviewQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Review\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchEventQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Event\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchChallengeQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Challenge\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchInviteQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Invite\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchPostQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Post\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSubmissionQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Submission\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchGroupQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Group\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchCommentQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Comment\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchSponsorQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Sponsor\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchStreakQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Streak\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchDealQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Deal\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchProductQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Product\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n\r\nexport function forceFetchAdminQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler) {\r\n  return forceFetchItemQuery(\"Admin\", variableList, filter, limit, nextToken, dataHandler, failureHandler);\r\n}\r\n","import Amplify from \"aws-amplify\";\nimport * as AWS from \"aws-sdk\";\nimport { getEnvironmentType } from \"./Constants\";\n\n/**\n * Sets up our AWS client to work with the cloud services.\n */\nfunction setupAWS() {\n  // This switches between the production and development query APIs\n\n  if (!getEnvironmentType() || getEnvironmentType() === \"production\") {\n    // =============================================================================================================\n    // ==                                          PRODUCTION                                                     ==\n    // =============================================================================================================\n\n    Amplify.configure({\n      'aws_appsync_graphqlEndpoint': 'https://b42qayvq7jdhzbhadpbefeoola.appsync-api.us-east-1.amazonaws.com/graphql',\n      'aws_appsync_region': 'us-east-1',\n      'aws_appsync_authenticationType': 'AWS_IAM',\n    });\n    Amplify.configure({\n      Auth: {\n        // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\n        identityPoolId: 'us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9',\n        // REQUIRED - Amazon Cognito Region\n        region: 'us-east-1',\n        // OPTIONAL - Amazon Cognito User Pool ID\n        userPoolId: 'us-east-1_MDiyfaGb8',\n        // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\n        userPoolWebClientId: '5rmff3gs48ak7efl0ngrnad4it',\n        //Google App Client ID for social sign-in\n        // your_google_client_id: '308108761903-qfc4dsbnjicjs0dpqao5ofh2c5u2636k.apps.googleusercontent.com'\n\n        // OPTIONAL - Enforce user authentication prior to accessing AWS resources or not\n        // mandatorySignIn: false,\n\n        // authenticationFlowType: 'USER_PASSWORD_AUTH'\n      },\n      Storage: {\n        bucket: 'vastusbucket', //REQUIRED -  Amazon S3 bucket\n        // region: 'us-east-1', //OPTIONAL -  Amazon service region\n        // identityPoolId: 'us-east-1:d9a16b98-4393-4ff6-9e4b-5e738fef1222', //Specify your identityPoolId for Auth and Unauth access to your bucket;\n      }\n    });\n  } else {\n    // =============================================================================================================\n    // ==                                         DEVELOPMENT                                                     ==\n    // =============================================================================================================\n\n    Amplify.configure({\n      'aws_appsync_graphqlEndpoint': 'https://b42qayvq7jdhzbhadpbefeoola.appsync-api.us-east-1.amazonaws.com/graphql',\n      'aws_appsync_region': 'us-east-1',\n      'aws_appsync_authenticationType': 'AWS_IAM',\n    });\n    Amplify.configure({\n      Auth: {\n        // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\n        identityPoolId: 'us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9',\n        // REQUIRED - Amazon Cognito Region\n        region: 'us-east-1',\n        // OPTIONAL - Amazon Cognito User Pool ID\n        userPoolId: 'us-east-1_MDiyfaGb8',\n        // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\n        userPoolWebClientId: '5rmff3gs48ak7efl0ngrnad4it',\n        //Google App Client ID for social sign-in\n        // your_google_client_id: '308108761903-qfc4dsbnjicjs0dpqao5ofh2c5u2636k.apps.googleusercontent.com'\n\n        // OPTIONAL - Enforce user authentication prior to accessing AWS resources or not\n        // mandatorySignIn: false,\n\n        // authenticationFlowType: 'USER_PASSWORD_AUTH'\n      },\n      Storage: {\n        bucket: 'vastusbucket', //REQUIRED -  Amazon S3 bucket\n        // region: 'us-east-1', //OPTIONAL -  Amazon service region\n        // identityPoolId: 'us-east-1:d9a16b98-4393-4ff6-9e4b-5e738fef1222', //Specify your identityPoolId for Auth and Unauth access to your bucket;\n      }\n    });\n  }\n\n  // var AWS = require('aws-sdk');\n  //\n  // AWS.config.update({region: 'us-east-1'});\n  // AWS.config.credentials = new AWS.CognitoIdentityCredentials({IdentityPoolId: 'us-east-1:d9a16b98-4393-4ff6-9e4b-5e738fef1222'});\n}\n\n/**\n *\n * @returns {AWS}\n */\nexport function getAWS() {\n  if (!getEnvironmentType() || getEnvironmentType() === \"production\") {\n    AWS.config.update({region: 'us-east-1'});\n    // AWS.config.update({credentials: new AWS.CognitoIdentityCredentials({IdentityPoolId: 'us-east-1:d9a16b98-4393-4ff6-9e4b-5e738fef1222'})});\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({IdentityPoolId: 'us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9'});\n    return AWS;\n  } else {\n    AWS.config.update({region: 'us-east-1'});\n    // AWS.config.update({credentials: new AWS.CognitoIdentityCredentials({IdentityPoolId: 'us-east-1:d9a16b98-4393-4ff6-9e4b-5e738fef1222'})});\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({IdentityPoolId: 'us-east-1:15870c25-13f1-4b49-8ab4-0a58db9963e9'});\n    return AWS;\n  }\n}\n\nexport default setupAWS;\n","import {err, ifDebug, log, lambdaFunctionName, getEnvironmentType} from \"../../Constants\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {debugAlert} from \"../logic/DebuggingHelper\";\r\nimport {getAWS} from \"../../AppConfig\";\r\n\r\n// Prepare to call Lambda function\r\nlet AWS = getAWS();\r\nlet lambda = new AWS.Lambda({region: 'us-east-1', apiVersion: '2015-03-31'});\r\n\r\n/**\r\n * This is the static class that allows us to invoke the AWS Lambda function using the predefined JSON structure.\r\n */\r\nclass Lambda {\r\n  // ======================================================================================================\r\n  // Lambda Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Gets the Create Request JSON attribute name from the given item type.\r\n   *\r\n   * @param {string} itemType The type of the item to send a create request for.\r\n   * @return {string} The name of the payload attribute to use for the request.\r\n   */\r\n  static getCreateRequestName = itemType => \"create\" + itemType + \"Request\";\r\n\r\n  /**\r\n   * Creates an item in the database with a given create request, which is just a value JSON for attributes.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} itemType The type of the item to create.\r\n   * @param {{}} createRequest The create request JSON to send for creation.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, itemType, createRequest, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"CREATE\",\r\n      itemType: itemType,\r\n      environmentType: getEnvironmentType(),\r\n      [Lambda.getCreateRequestName(itemType)]: createRequest,\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Indicates to the database Lambda function that an attribute should be set to a specific value in an object.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} objectID The ID of the object to update in the database.\r\n   * @param {string} objectItemType The item type of the object to update.\r\n   * @param {string} attributeName The name of the object's attribute.\r\n   * @param {*} attributeValue The value to set to the object's attribute.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateSetAttribute(fromID, objectID, objectItemType, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"UPDATESET\",\r\n      itemType: objectItemType,\r\n      identifiers: [\r\n        objectID\r\n      ],\r\n      attributeName: attributeName,\r\n      attributeValues: [\r\n        attributeValue\r\n      ],\r\n      environmentType: getEnvironmentType()\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Indicates to the database Lambda function that a value should be added to an object's set (array) attribute.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} objectID The ID of the object to update in the database.\r\n   * @param {string} objectItemType The item type of the object to update.\r\n   * @param {string} attributeName The name of the object's set attribute.\r\n   * @param {*} attributeValue The value to add to the object's set attribute.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateAddToAttribute(fromID, objectID, objectItemType, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"UPDATEADD\",\r\n      itemType: objectItemType,\r\n      identifiers: [\r\n        objectID\r\n      ],\r\n      attributeName,\r\n      attributeValues: [\r\n        attributeValue\r\n      ],\r\n      environmentType: getEnvironmentType()\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Indicates to the database Lambda function that a value should be removed from an object's set (array) attribute.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} objectID The ID of the object to update in the database.\r\n   * @param {string} objectItemType The item type of the object to update.\r\n   * @param {string} attributeName The name of the object's set attribute.\r\n   * @param {*} attributeValue The value to remove from the object's set attribute.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateRemoveFromAttribute(fromID, objectID, objectItemType, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"UPDATEREMOVE\",\r\n      itemType: objectItemType,\r\n      identifiers: [\r\n        objectID\r\n      ],\r\n      attributeName,\r\n      attributeValues: [\r\n        attributeValue\r\n      ],\r\n      environmentType: getEnvironmentType()\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Handles miscellaneous actions in the Lambda function that have no other action to go with it.\r\n   * Very special cases.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} objectID The ID of the object to help process.\r\n   * @param {string} objectItemType The item type of the object to help process.\r\n   * @param {string} secondaryIdentifier The secondary identifier to help process.\r\n   * @param {string} specifyAction The specific action to process.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static process(fromID, objectID, objectItemType, secondaryIdentifier, specifyAction, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"PROCESS\",\r\n      itemType: objectItemType,\r\n      identifiers: [\r\n        objectID\r\n      ],\r\n      secondaryIdentifier,\r\n      environmentType: getEnvironmentType()\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Indicates to the database Lambda function that an object should be deleted.\r\n   *\r\n   * @param {string} fromID The user ID that is invoking this Lambda request.\r\n   * @param {string} objectID The ID of the object to delete in the database.\r\n   * @param {string} objectItemType The item type of the object to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, objectID, objectItemType, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      fromID: fromID ? fromID : \"unauthenticated\",\r\n      action: \"DELETE\",\r\n      itemType: objectItemType,\r\n      identifiers: [\r\n        objectID\r\n      ],\r\n      environmentType: getEnvironmentType()\r\n    }, successHandler, failureHandler)\r\n  }\r\n\r\n  /**\r\n   * Sends a very quick lambda invocation to the database Lambda function in an attempt to reduce slow start times.\r\n   *\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static ping(successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      action: \"PING\"\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  // Specific Lambda Function Calls\r\n\r\n  static invokeDatabaseLambda(payload, successHandler, failureHandler) {\r\n    return Lambda.invokeLambda(lambdaFunctionName, payload, successHandler, failureHandler);\r\n  }\r\n\r\n  // static invokePaymentLambda(payload, successHandler, failureHandler) {\r\n  //     return this.invokeLambda(\"VastusPaymentLambdaFunction\", payload, successHandler, failureHandler);\r\n  // }\r\n  // static invokeFirebaseLambda(payload, successHandler, failureHandler) {\r\n  //     return this.invokeLambda(\"VastusFirebaseTokenFunction\", payload, successHandler, failureHandler);\r\n  // }\r\n\r\n  /**\r\n   * Invokes an AWS Lambda function from the Lambda console using a specific payload.\r\n   *\r\n   * @param {string} functionName The name of the function from the Lambda console to invoke.\r\n   * @param {{}} payload The JSON payload to send through lambda.\r\n   * @param {function({secretKey: string, timestamp: string, data: *})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static invokeLambda(functionName, payload, successHandler, failureHandler) {\r\n    // log&&console.log(\"Sending lambda payload: \" + JSON.stringify(payload));\r\n    log && console.log(\"Sending lambda payload: \" + JSON.stringify(payload));\r\n    const request = {FunctionName: functionName, Payload: JSON.stringify(payload)};\r\n    if (TestHelper.ifTesting && successHandler) {\r\n      successHandler(null);\r\n    }\r\n    TestHelper.ifTesting || lambda.invoke(request, (error, data) => {\r\n      if (error) {\r\n        err && console.error(error);\r\n        err && console.error(\"Lambda failure: \" + JSON.stringify(error));\r\n        if (ifDebug) {\r\n          console.log(\"Lambda failure: \" + JSON.stringify(error))\r\n        }\r\n        if (failureHandler) {\r\n          failureHandler(error);\r\n        }\r\n      } else if (data.Payload) {\r\n        //log&&console.log(data.Payload);\r\n        const payload = JSON.parse(data.Payload);\r\n        if (payload.errorMessage) {\r\n          err && console.error(\"Error from Lambda!: \" + JSON.stringify(payload));\r\n          err && console.error(payload.errorMessage);\r\n          if (failureHandler) {\r\n            failureHandler(payload.errorMessage);\r\n          }\r\n        } else {\r\n          log && console.log(\"Successfully invoked lambda function! Received: \" + JSON.stringify(payload));\r\n          debugAlert(\"Successful Lambda, received \" + JSON.stringify(payload));\r\n          if (successHandler) {\r\n            successHandler(payload);\r\n          }\r\n        }\r\n      } else {\r\n        err && console.error(\"Weird error: payload returned with nothing...\");\r\n        if (failureHandler) {\r\n          failureHandler(\"Payload returned with null\");\r\n        }\r\n      }\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      return payload;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Lambda;","import Lambda from \"../api/Lambda\";\r\nimport {err} from \"../../Constants\";\r\n\r\nconst itemType = \"Invite\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Invites.\r\n */\r\nclass InviteFunctions {\r\n  // ======================================================================================================\r\n  // Invite High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Sends a friend request to another User that they accept in order to add you as a friend.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the friend request.\r\n   * @param {string} to The ID of the User receiving the friend request.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createFriendRequest(fromID, from, to, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"friendRequest\", from, null, (data) => {\r\n      if (props) {\r\n        if (props.addToItemAttribute && props.addToUserAttribute) {\r\n          props.addToItemAttribute(to, \"friendRequests\", from);\r\n          props.addToItemAttribute(to, \"receivedInvites\", data.data);\r\n          props.addToUserAttribute(\"sentInvites\", data.data);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a friend request to another User that they accept in order to add you as a friend with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the friend request.\r\n   * @param {string} to The ID of the User receiving the friend request.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createFriendRequestOptional(fromID, from, to, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"friendRequest\", from, message, (data) => {\r\n      if (props) {\r\n        if (props.addToItemAttribute && props.addToUserAttribute) {\r\n          props.addToItemAttribute(to, \"friendRequests\", from);\r\n          props.addToItemAttribute(to, \"receivedInvites\", data.data);\r\n          props.addToUserAttribute(\"sentInvites\", data.data);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to become a member of an Event they are also a member of.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} eventID The ID of the Event that the \"from\" is inviting the \"to\" to.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEventInvite(fromID, from, to, eventID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"eventInvite\", eventID, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to become a member of an Event they are also a member of with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} eventID The ID of the Event that the \"from\" is inviting the \"to\" to.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEventInviteOptional(fromID, from, to, eventID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"eventInvite\", eventID, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to become a member of a Challenge they are also a member of.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} challengeID The ID of the Challenge that the \"from\" is inviting the \"to\" to.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeInvite(fromID, from, to, challengeID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"challengeInvite\", challengeID, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to be a member of a Challenge they are also a member of with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} challengeID The ID of the Challenge that the \"from\" is inviting the \"to\" to.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeInviteOptional(fromID, from, to, challengeID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"challengeInvite\", challengeID, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to become a member of a Group they are also a member of.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} groupID The ID of the Group that the \"from\" is inviting the \"to\" to.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupInvite(fromID, from, to, groupID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"challengeInvite\", groupID, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends an Invite to a User, inviting them to become a member of a Group they are also a member of with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the User receiving the Invite.\r\n   * @param {string} groupID The ID of the Group that the \"from\" is inviting the \"to\" to.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupInviteOptional(fromID, from, to, groupID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, to, \"groupInvite\", groupID, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Event that is restricted.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} eventID The ID of the Event that the \"from\" is requesting to be a part of.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEventRequest(fromID, from, eventID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, eventID, \"eventRequest\", from, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Event that is restricted with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} eventID The ID of the Event that the \"from\" is requesting to be a part of.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEventRequestOptional(fromID, from, eventID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, eventID, \"eventRequest\", from, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Challenge that is restricted.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} challengeID The ID of the Challenge that the \"from\" is requesting to be a part of.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeRequest(fromID, from, challengeID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, challengeID, \"challengeRequest\", from, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          props.addToUserAttribute(\"sentInvites\", data.data);\r\n          props.addToItemAttribute(challengeID, \"receivedInvites\", data.data);\r\n          props.addToItemAttribute(challengeID, \"memberRequests\", from);\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Challenge that is restricted with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} challengeID The ID of the Challenge that the \"from\" is requesting to be a part of.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeRequestOptional(fromID, from, challengeID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, challengeID, \"challengeRequest\", from, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Group that is restricted.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} groupID The ID of the Group that the \"from\" is requesting to be a part of.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupRequest(fromID, from, groupID, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, groupID, \"groupRequest\", from, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Sends a Invite, requesting that the User be added to an Group that is restricted with a message.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the request Invite.\r\n   * @param {string} groupID The ID of the Group that the \"from\" is requesting to be a part of.\r\n   * @param {string} message The message they want to send along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupRequestOptional(fromID, from, groupID, message, successHandler, failureHandler, props) {\r\n    return InviteFunctions.create(fromID, from, groupID, \"groupRequest\", from, message, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  // ======================================================================================================\r\n  // Invite Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates an Invite object in the database using the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User sending the Invite.\r\n   * @param {string} to The ID of the object receiving the Invite.\r\n   * @param {string} inviteType The type of Invite being sent.\r\n   * @param {string} about The ID of the object that the Invite is about.\r\n   * @param {string} description The message sent along with the Invite.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, from, to, inviteType, about, description, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, \"Invite\", {\r\n      from,\r\n      to,\r\n      inviteType,\r\n      about,\r\n      description,\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, inviteID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, inviteID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, inviteID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, inviteID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, inviteID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, inviteID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes an Invite and its dependencies from the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} inviteID The ID of the Invite to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, inviteID, successHandler, failureHandler, props) {\r\n    return Lambda.delete(fromID, inviteID, itemType, (data) => {\r\n      if (props) {\r\n        if (props.removeFromUserAttribute && props.removeItem) {\r\n          props.removeFromUserAttribute(\"receivedInvites\", inviteID);\r\n          props.removeItem(\"Invite\", inviteID);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n}\r\n\r\nexport default InviteFunctions;\r\n","// Helpful and optimized functions for dealing with ISO time and time intervals.\r\n\r\n// =====================================================================================================================\r\n// ==                                           ISO TIME CONVERSION                                                   ==\r\n// =====================================================================================================================\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param s\r\n * @return {Date}\r\n */\r\nexport function parseISOString(s) {\r\n  return new Date(String(s));\r\n}\r\n\r\n/**\r\n * Converts the timeInterval string into a list of dates.\r\n *\r\n * @param {string} timeIntervalString The string representation of the time interval.\r\n * @return {[Date]} The array of two {@link Date} objects representing the time interval.\r\n */\r\nexport const parseTimeIntervalString = (timeIntervalString) => {\r\n  const dates = [];\r\n  timeIntervalString = String(timeIntervalString);\r\n  const dateTimes = String(timeIntervalString).split(\"_\");\r\n  if (dateTimes.length === 2) {\r\n    for (let i = 0; i < 2; i++) {\r\n      dates.push(parseISOString(dateTimes[i]));\r\n    }\r\n  } else {\r\n    throw new Error(\"Improperly formatted time interval string = \" + timeIntervalString);\r\n  }\r\n  return dates;\r\n};\r\n\r\n/**\r\n * Gets an ISO string in UTC from the given {@link Date} object.\r\n *\r\n * @param {Date} date The date to convert to the ISO String.\r\n * @returns {string} The UTC ISO 8601 time string.\r\n */\r\nexport const isoString = (date) => {\r\n  if (date) return date.toISOString();\r\n  else {\r\n    throw new Error(\"Date object cannot be null!\");\r\n  }\r\n};\r\n\r\n/**\r\n * Gets a ISO Time Interval string in UTC from the given {@link Date} object.\r\n *\r\n * @param {Date} fromDate The start {@link Date} object for the time interval.\r\n * @param {Date} toDate The end {@link Date} object for the time interval.\r\n * @return {string} The ISO Time Interval string, separated by an underscore.\r\n */\r\nexport const isoTimeIntervalString = (fromDate, toDate) => {\r\n  return isoString(fromDate) + \"_\" + isoString(toDate);\r\n};\r\n\r\n\r\n/**\r\n * TODO This is a lot of code for no reason? We should never be taking into consideration the ISO string's time zone,\r\n * TODO just our own...\r\n *\r\n * @param date\r\n * @return {string}\r\n */\r\nexport function convertToISOString(date) {\r\n  const tzo = -date.getTimezoneOffset(),\r\n    dif = tzo >= 0 ? '+' : '-',\r\n    pad = function (num) {\r\n      const norm = Math.floor(Math.abs(num));\r\n      return (norm < 10 ? '0' : '') + norm;\r\n    };\r\n  return date.getFullYear() +\r\n    '-' + pad(date.getMonth() + 1) +\r\n    '-' + pad(date.getDate()) +\r\n    'T' + pad(date.getHours()) +\r\n    ':' + pad(date.getMinutes()) +\r\n    ':' + pad(date.getSeconds()) +\r\n    dif + pad(tzo / 60) +\r\n    ':' + pad(tzo % 60);\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param fromDate\r\n * @param toDate\r\n * @return {string}\r\n */\r\nexport function convertToISOIntervalString(fromDate, toDate) {\r\n  return convertToISOString(fromDate) + \"_\" + convertToISOString(toDate);\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @return {string}\r\n */\r\nexport function getNowISO() {\r\n  return isoString(nowDate());\r\n}\r\n\r\n// =====================================================================================================================\r\n// ==                                             DATE OBJECT FUNCTIONS                                               ==\r\n// =====================================================================================================================\r\n\r\n/**\r\n * Creates a date object given the parameters of the UTC time.\r\n *\r\n * @param {number} year The year for the date.\r\n * @param {number} month The month for the date, indexed at zero :(.\r\n * @param {number} date The date for the date.\r\n * @param {number} hours The hour for the date.\r\n * @param {number} minutes The minute for the date.\r\n * @param {number} seconds The second for the date.\r\n * @param {number} milliseconds The millisecond for the date.\r\n * @return {Date} The UTC date object from the given parameters.\r\n */\r\nexport const utcDate = (year, month, date, hours, minutes, seconds, milliseconds) => {\r\n  return new Date(Date.UTC(year, month, date, hours, minutes, seconds, milliseconds));\r\n};\r\n\r\n/**\r\n * Copies a Date object.\r\n *\r\n * @param {Date} date The date object to copy.\r\n * @returns {Date} The copied date object.\r\n */\r\nexport const copyDate = (date) => {\r\n  return new Date(date.getTime());\r\n};\r\n\r\n/**\r\n * @return\r\n */\r\nexport const nowDate = () => {\r\n  return new Date();\r\n};\r\n\r\n/**\r\n * Gets a date object hours after the given date.\r\n *\r\n * @param {Date} date The original date to add hours to.\r\n * @param {number} hours The number of hours to add to the date.\r\n * @returns {Date} The later date object.\r\n */\r\nexport const hoursAfter = (date, hours) => {\r\n  const d = copyDate(date);\r\n  d.setHours(d.getHours() + hours, d.getMinutes(), d.getSeconds(), d.getMilliseconds());\r\n  return d;\r\n};\r\n\r\n/**\r\n * Gets a Date object hours before the given date.\r\n *\r\n * @param {Date} date The original date to subtract hours from.\r\n * @param {number} hours The number of hours to subtract from the date.\r\n * @returns {Date} The earlier date object.\r\n */\r\nexport const hoursBefore = (date, hours) => {\r\n  const d = copyDate(date);\r\n  d.setHours(d.getHours() - hours, d.getMinutes(), d.getSeconds(), d.getMilliseconds());\r\n  return d;\r\n};\r\n\r\n// =====================================================================================================================\r\n// ==                                         PRETTY PRINT TIME FUNCTIONS                                             ==\r\n// =====================================================================================================================\r\n\r\n/**\r\n *\r\n * @param {Date} date\r\n */\r\nexport const prettyPrintTime = (date) => {\r\n  return date.toLocaleDateString(\"en-US\", {\r\n    weekday: \"long\",\r\n\r\n  });\r\n};\r\n\r\n/**\r\n * Returns a human-readable string from an ISO string.\r\n *\r\n * @param {string} dateTime The ISO string to translate.\r\n * @return {string} The readable date from the ISO time.\r\n */\r\nexport function convertFromISO(dateTime) {\r\n  let dateTimeString = String(dateTime);\r\n  let date = new Date(dateTimeString);\r\n  const hourInt = date.getHours() > 12 ? date.getHours() - 12 : date.getHours();\r\n  const minutes = date.getMinutes().toString().length === 1 ? '0' + date.getMinutes() : date.getMinutes(),\r\n    hours = hourInt.toString().length === 1 ? '0' + hourInt : hourInt,\r\n    ampm = date.getHours() >= 12 ? 'PM' : 'AM',\r\n    months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n    days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n  return days[date.getDay()] + ', ' + months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear() + ' ' + hours + ':' + minutes + ampm;\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @param dateTime\r\n * @return {string}\r\n */\r\n// export function convertFromIntervalISO(dateTime) {\r\n//     let dateTimeString = String(dateTime);\r\n//     let dateTimes = String(dateTimeString).split(\"_\");\r\n//     let fromDateString = dateTimes[0];\r\n//     let toDateString = dateTimes[1];\r\n//     let fromDate = new Date(fromDateString);\r\n//     let toDate = new Date(toDateString);\r\n//\r\n//     // Display time logic came from stack over flow\r\n//     // https://stackoverflow.com/a/18537115\r\n//     const fromHourInt = fromDate.getHours() > 12 ? fromDate.getHours() - 12 : fromDate.getHours();\r\n//     const toHourInt = toDate.getHours() > 12 ? toDate.getHours() - 12 : toDate.getHours();\r\n//     const fromminutes = fromDate.getMinutes().toString().length === 1 ? '0'+ fromDate.getMinutes() : fromDate.getMinutes(),\r\n//         fromhours = fromHourInt.toString().length === 1 ? '0'+ fromHourInt : fromHourInt,\r\n//         fromampm = fromDate.getHours() >= 12 ? 'PM' : 'AM',\r\n//         tominutes = toDate.getMinutes().toString().length === 1 ? '0'+ toDate.getMinutes() : toDate.getMinutes(),\r\n//         tohours = toHourInt.toString().length === 1 ? '0'+ toHourInt : toHourInt,\r\n//         toampm = toDate.getHours() >= 12 ? 'PM' : 'AM',\r\n//         months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n//         days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];\r\n//     return days[fromDate.getDay()]+', '+months[fromDate.getMonth()]+' '+fromDate.getDate()+', '+fromDate.getFullYear()+' '+fromhours+':'+fromminutes+fromampm + ' - '+tohours+':'+tominutes+toampm;\r\n// }\r\n\r\n\r\n// =====================================================================================================================\r\n// ==                                  FULL INTERVAL BETWEEN AND PASSED FUNCTIONS                                     ==\r\n// =====================================================================================================================\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param from\r\n * @param to\r\n * @return\r\n */\r\nexport const hourStartsBetween = (from, to) => {\r\n  const fromCopy = copyDate(from);\r\n  const toCopy = copyDate(to);\r\n  fromCopy.setMinutes(0, 0, 0);\r\n  toCopy.setMinutes(0, 0, 0);\r\n  return Math.round((toCopy.getTime() - fromCopy.getTime()) / (1000 * 60 * 60));\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param since\r\n * @return\r\n */\r\nexport const hourStartsPassed = (since) => {\r\n  return hourStartsBetween(since, nowDate());\r\n};\r\n\r\n/**\r\n * Returns the number of midnights that have passed between the two dates.\r\n *\r\n * @param {Date} from The from {@link Date} object.\r\n * @param {Date} to The from {@link Date} object.\r\n * @return {number} The number of midnights that have passed between the two dates.\r\n */\r\nexport const midnightsBetween = (from, to) => {\r\n  const fromCopy = copyDate(from);\r\n  const toCopy = copyDate(to);\r\n  fromCopy.setHours(0, 0, 0, 0);\r\n  toCopy.setHours(0, 0, 0, 0);\r\n  return Math.round((toCopy.getTime() - fromCopy.getTime()) / (1000 * 60 * 60 * 24));\r\n};\r\n\r\n/**\r\n * Calculates the number of midnights that have passed between today and the day of the date that is passed in.\r\n *\r\n * @param {Date} since The date object to reference from today.\r\n * @return {number} The number of midnights between now and the given date.\r\n */\r\nexport const midnightsPassed = (since) => {\r\n  return midnightsBetween(since, nowDate());\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param {Date} from\r\n * @param {Date} to\r\n * @return\r\n */\r\nexport const mondaysBetween = (from, to) => {\r\n  // Calculated mathematically using some logical stuff. getDay is indexed by Sunday, so we convert to index by Monday\r\n  return (midnightsBetween(from, to) + ((from.getDay() + 6) % 7) - ((to.getDay() + 6) % 7)) / 7;\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param since\r\n * @return\r\n */\r\nexport const mondaysPassed = (since) => {\r\n  return mondaysBetween(since, nowDate());\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param {Date} from\r\n * @param {Date} to\r\n * @return\r\n */\r\nexport const startsOfMonthBetween = (from, to) => {\r\n  return ((to.getFullYear() * 12) + to.getMonth() + 1) - ((from.getFullYear() * 12) + from.getMonth() + 1);\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param since\r\n * @return\r\n */\r\nexport const startsOfMonthPassed = (since) => {\r\n  return startsOfMonthBetween(since, nowDate());\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param {Date} from\r\n * @param {Date} to\r\n * @return\r\n */\r\nexport const startsOfYearBetween = (from, to) => {\r\n  return to.getFullYear() - from.getFullYear();\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param since\r\n * @return\r\n */\r\nexport const startsOfYearPassed = (since) => {\r\n  return startsOfYearBetween(since, nowDate());\r\n};\r\n\r\n// =====================================================================================================================\r\n// ==                                          MISCELLANEOUS FUNCTIONS                                                ==\r\n// =====================================================================================================================\r\n\r\n// TODO SOMEBODY PLEASE GIVE ME THE STRENGTH TO KNOW WHERE TO PUT THESE FUNCTIONS OR SMITE THEM FROM THE APP...\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param birthday\r\n * @return {*}\r\n */\r\nexport function calculateAge(birthday) {\r\n  // TODO Use more libraries to calculate this way better\r\n  if (birthday) {\r\n    const now = new Date();\r\n    const birthdayDate = parseISOString(birthday);\r\n    let one_year = 1000 * 60 * 60 * 24 * 365;                       // Convert both dates to milliseconds\r\n    let date1_ms = birthdayDate.getTime();\r\n    let date2_ms = now.getTime();                   // Calculate the difference in milliseconds\r\n    let difference_ms = date1_ms - date2_ms;        // Convert back to days and return\r\n    return Math.round(difference_ms / one_year);\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param dateTime\r\n * @return {number}\r\n */\r\nexport function daysLeft(dateTime) {\r\n  const now = new Date();\r\n  let one_day = 1000 * 60 * 60 * 24;                       // Convert both dates to milliseconds\r\n  let date1_ms = dateTime.getTime();\r\n  let date2_ms = now.getTime();                   // Calculate the difference in milliseconds\r\n  // console.log(\"1: \" + date1_ms + \", 2: \" + date2_ms);\r\n  let difference_ms = date1_ms - date2_ms;        // Convert back to days and return\r\n  // console.log(\"difference = \" + difference_ms);\r\n  return Math.round(difference_ms / one_day);\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param dateTime\r\n * @return {number}\r\n */\r\nexport function timeLeft(dateTime) {\r\n  const now = new Date();\r\n  return dateTime.getTime() - now.getTime();\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param time\r\n * @return {string}\r\n */\r\nexport function convertTime(time) {\r\n  if (parseInt(time, 10) > 12) {\r\n    return \"0\" + (parseInt(time, 10) - 12) + time.substr(2, 3) + \"pm\";\r\n  } else if (parseInt(time, 10) === 12) {\r\n    return time + \"pm\";\r\n  } else if (parseInt(time, 10) === 0) {\r\n    return \"0\" + (parseInt(time, 10) + 12) + time.substr(2, 3) + \"am\"\r\n  } else {\r\n    return time + \"am\"\r\n  }\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param date\r\n * @return {string}\r\n */\r\nexport function convertDate(date) {\r\n  let dateString = String(date);\r\n  let year = dateString.substr(0, 4);\r\n  let month = dateString.substr(5, 2);\r\n  let day = dateString.substr(8, 2);\r\n\r\n  return month + \"/\" + day + \"/\" + year;\r\n}\r\n\r\n\r\n/**\r\n * Gets the now date-time string, rounded up to the nearest five minutes interval.\r\n *\r\n * @return {string} The today datetime string.\r\n * @return {*}\r\n */\r\nexport const getTodayDateTimeString = () => {\r\n  // This is annoying just because we need to work with time zones :(\r\n  // Sneaking some modular arithmetic in this ;) This is so that the time shown is always a nice looking number\r\n  const shortestTimeInterval = 5;\r\n  const date = new Date();\r\n  date.setMinutes(date.getMinutes() + (shortestTimeInterval - (date.getMinutes() % shortestTimeInterval)));\r\n  return convertToISOString(date);\r\n};\r\n\r\n/**\r\n * Gets the today date string, rounded up to the nearest five minutes interval.\r\n *\r\n * @return {string} The today date string.\r\n */\r\nexport const getTodayDateString = () => {\r\n  return getTodayDateTimeString().substr(0, 10);\r\n};\r\n\r\n/**\r\n * Gets the now time string, rounded up to the next five minutes.\r\n *\r\n * @return {string} The string of the time.\r\n */\r\nexport const getNowTimeString = () => {\r\n  return getTodayDateTimeString().substr(11, 5);\r\n};\r\n\r\n","import React, {useState, useEffect, Fragment} from 'react'\r\nimport {Message, Button, Modal, Card} from 'semantic-ui-react';\r\nimport {connect} from \"react-redux\";\r\nimport {fetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport {fetchChallenges} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport InviteFunctions from \"../../database_functions/InviteFunctions\";\r\nimport ChallengeCard, {ChallengeCardInfo} from \"../cards/ChallengeCard\";\r\nimport {err} from \"../../../Constants\";\r\nimport {daysLeft, parseISOString} from \"../../logic/TimeHelper\";\r\n\r\ntype Props = {\r\n  friendID: string,\r\n  onClose: any,\r\n  open: boolean\r\n};\r\n\r\n/**\r\n * Invites the friend to the Challenge.\r\n *\r\n * @param {string} userID The ID of the User sending the Invite.\r\n * @param {string} friendID The ID of the User to send the Invite to.\r\n * @param {string} challengeID The ID of the Challenge to invite the User to.\r\n * @param {function()} onClose The function to close the modal.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(boolean)} setIsDisabled Sets the disabled state.\r\n */\r\nconst handleInviteToChallenge = (userID, friendID, challengeID, onClose, setIsLoading, setIsDisabled, setError) => {\r\n  setIsLoading(true);\r\n  InviteFunctions.createChallengeInvite(userID, userID, friendID, challengeID, (data) => {\r\n    onClose();\r\n    setIsLoading(false);\r\n    setIsDisabled(true);\r\n  }, (error) => {\r\n    err && console.error(error);\r\n    setIsLoading(false);\r\n  });\r\n};\r\n\r\n/**\r\n * Creates the Button components for Inviting the User to a particular Challenge.\r\n *\r\n * @param {string} userID The ID of the User inviting their friend to a Challenge.\r\n * @param {string} friendID The ID of the User to invite.\r\n * @param {[{id: string}]} challenges The Challenge objects to display.\r\n * @param {boolean} isLoading State for loading.\r\n * @param {boolean} isDisabled State for if inviting is disabled.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(boolean)} setIsDisabled Sets the disabled state.\r\n * @param {function()} onClose Closes the modal.\r\n * @return {*} The React JSX to display the Challenge buttons.\r\n */\r\nexport const challengeButtons = (userID, friendID, challenges, isLoading, isDisabled, setIsLoading, setIsDisabled, setError, onClose) => {\r\n  const rowProps = [];\r\n  for (let i = 0; i < challenges.length; i++) {\r\n    rowProps.push(\r\n      <Fragment key={i + 1}>\r\n        <Card fluid raised>\r\n          <Card.Content>\r\n            <ChallengeCard challenge={challenges[i]}/>\r\n            <Button disabled={isDisabled} loading={isLoading} primary fluid\r\n                    onClick={() => handleInviteToChallenge(userID, friendID, challenges[i].id, onClose, setIsLoading, setIsDisabled, setError)}>\r\n              Invite to Challenge\r\n            </Button>\r\n          </Card.Content>\r\n        </Card>\r\n      </Fragment>\r\n    );\r\n  }\r\n  return rowProps;\r\n};\r\n\r\n/**\r\n * TODO\r\n * @param error\r\n * @return {*}\r\n */\r\nexport const errorHandler = (error) => {\r\n  if (error) {\r\n    return (\r\n      <Message color='red'>\r\n        <h1>Error!</h1>\r\n        <p>{error.substr(102, 50)}</p>\r\n      </Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst InviteToChallengeModalProp = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  const [challenges, setChallenges] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    props.fetchUserAttributes([\"challenges\"], (user) => {\r\n      if (user.challenges && user.challenges.length > 0) {\r\n        props.fetchChallenges(user.challenges, ChallengeCardInfo.fetchList, 0, user.challenges.length, (challenges) => {\r\n          for (let i = 0; i < challenges.length; i++) {\r\n            const challenge = challenges[i];\r\n            if (daysLeft(parseISOString(challenge.endTime)) >= 0) {\r\n              setChallenges(p => [...p, challenge]);\r\n            }\r\n          }\r\n          setIsLoading(false);\r\n        }, (error) => {\r\n          err && console.error(error);\r\n          setError(error);\r\n          setIsLoading(false);\r\n        });\r\n      } else {\r\n        setIsLoading(false);\r\n      }\r\n    }, (error) => {\r\n      err && console.error(error);\r\n      setError(error);\r\n      setIsLoading(false);\r\n    });\r\n  }, [props.challengeID]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Modal dimmer='blurring' open={props.open} onClose={() => props.onClose()}>\r\n        <Message>Loading...</Message>\r\n      </Modal>\r\n    );\r\n  }\r\n  if (challenges && challenges.length > 0) {\r\n    return (\r\n      <Modal centered dimmer='blurring' size='large' open={props.open} onClose={() => props.onClose()} closeIcon>\r\n        <Modal.Header className=\"u-bg--bg\">Select Challenge</Modal.Header>\r\n        <Modal.Content className=\"u-bg--bg\">\r\n          {challengeButtons(props.user.id, props.friendID, challenges, isLoading, isDisabled, setIsLoading, setIsDisabled, setError, props.onClose)}\r\n        </Modal.Content>\r\n        {errorHandler(error)}\r\n      </Modal>\r\n    );\r\n  } else {\r\n    return (\r\n      <Modal dimmer='blurring' open={props.open} onClose={() => props.onClose()}>\r\n        <Message>No current challenges...</Message>\r\n      </Modal>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  info: state.info,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchUserAttributes: (variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchUserAttributes(variableList, dataHandler, failureHandler));\r\n    },\r\n    fetchChallenges: (ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) => {\r\n      dispatch(fetchChallenges(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InviteToChallengeModalProp);\r\n","import Lambda from \"../api/Lambda\";\r\nimport S3 from \"../api/S3Storage\";\r\nimport {getItemTypeFromID} from \"../logic/ItemType\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {err} from \"../../Constants\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Users.\r\n */\r\nclass UserFunctions {\r\n  // ======================================================================================================\r\n  // User High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a User in the database using as little info as allowed for a given itemType.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} itemType The type of the User to create.\r\n   * @param {string} name The display name of the Client to place into the database.\r\n   * @param {string} email The email address of the Client.\r\n   * @param {string} username The Cognito User Pool Username of the User.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createUser(fromID, itemType, name, email, username, successHandler, failureHandler) {\r\n    switch (itemType) {\r\n      case \"Client\":\r\n        return UserFunctions.create(fromID, itemType, name, email, username, null, successHandler, failureHandler);\r\n      case \"Trainer\":\r\n        return UserFunctions.create(fromID, itemType, name, email, username, null, successHandler, failureHandler);\r\n      default:\r\n        throw Error(\"Create User not implemented for user type = \" + itemType);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a User with as little info as possible from a federated identity (Google, Facebook, ...) for a given item\r\n   * type.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} itemType The type of the User to create.\r\n   * @param {string} name The display name of the Client to place into the database.\r\n   * @param {string} email The email address of the Client.\r\n   * @param {string} username The Cognito User Pool Username of the User.\r\n   * @param {string} federatedID The unique federated ID from the federated identity.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createFederatedUser(fromID, itemType, name, email, username, federatedID, successHandler, failureHandler) {\r\n    switch (itemType) {\r\n      case \"Client\":\r\n        return UserFunctions.create(fromID, itemType, name, email, username, federatedID, successHandler, failureHandler);\r\n      case \"Trainer\":\r\n        return UserFunctions.create(fromID, itemType, name, email, username, federatedID, successHandler, failureHandler);\r\n      default:\r\n        throw Error(\"Create User not implemented for user type = \" + itemType);\r\n    }\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Adds a profile image to a User's profile image gallery.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {*} image The image file to add to the User's profile images.\r\n   * @param {string} profileImagePath The S3 path to put the profile image into.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addProfileImage(fromID, userID, image, profileImagePath, successHandler, failureHandler, props) {\r\n    S3.putImage(profileImagePath, image, () => {\r\n      this.updateAdd(fromID, userID, \"profileImagePaths\", profileImagePath, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, (error) => {\r\n        // Try your best to fix S3, then give up...\r\n        S3.delete(profileImagePath);\r\n        if (failureHandler) {\r\n          failureHandler(error);\r\n        }\r\n      });\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      return this.updateAdd(fromID, userID, \"profileImagePaths\", profileImagePath);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes a profile image from a User's profile image gallery.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} profileImagePath The S3 path of the image to remove from the User.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeProfileImage(fromID, userID, profileImagePath, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"profileImagePaths\", profileImagePath, (data) => {\r\n      S3.delete(profileImagePath, () => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a friend to the User's buddy list and vice versa.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} friendID The ID of the User to add as a friend.\r\n   * @param {string} inviteID The ID of the Invite that you are accepting for the friend.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addFriend(fromID, userID, friendID, inviteID, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"friends\", friendID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute && props.removeFromUserAttribute && props.removeItem) {\r\n          props.addToUserAttribute(\"friends\", friendID);\r\n          props.addToItemAttribute(friendID, \"friends\", userID);\r\n          props.removeFromUserAttribute(\"receivedInvites\", inviteID);\r\n          props.removeItem(\"Invite\", inviteID);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a User from another User's buddy list and vice versa.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} friendID The ID of the User to remove as a friend.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeFriend(fromID, userID, friendID, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"friends\", friendID, (data) => {\r\n      if (props) {\r\n        if (props.removeFromUserAttribute && props.removeFromItemAttribute) {\r\n          props.removeFromUserAttribute(\"friends\", friendID);\r\n          props.removeFromItemAttribute(friendID, \"friends\", userID);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds the User to a Challenge and the Challenge to the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} challengeID The ID of the Challenge to add the User to.\r\n   * @param {string} inviteID The ID of any potential invites this relates to.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addChallenge(fromID, userID, challengeID, inviteID, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"challenges\", challengeID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute && props.removeFromUserAttribute && props.removeItem) {\r\n          props.addToUserAttribute(\"challenges\", challengeID);\r\n          props.addToItemAttribute(challengeID, \"members\", userID);\r\n          if (inviteID) {\r\n            props.removeFromUserAttribute(\"receivedInvites\", inviteID);\r\n            props.removeItem(\"Invite\", inviteID);\r\n          }\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes the User from a Challenge and the Challenge from the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} challengeID The ID of the Challenge to remove the User from.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeChallenge(fromID, userID, challengeID, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"challenges\", challengeID, (data) => {\r\n      if (props) {\r\n        if (props.removeFromUserAttribute && props.removeFromItemAttribute) {\r\n          props.removeFromUserAttribute(\"challenges\", challengeID);\r\n          props.removeFromItemAttribute(challengeID, \"members\", userID);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds the User to an Event and the Event to the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} eventID The ID of the Event to add the User to.\r\n   * @param {string} inviteID The ID of any potential invites this relates to.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addEvent(fromID, userID, eventID, inviteID, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"scheduledEvents\", eventID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute && props.removeFromUserAttribute && props.removeItem) {\r\n          props.addToUserAttribute(\"scheduledEvents\", eventID);\r\n          props.addToItemAttribute(eventID, \"members\", userID);\r\n          if (inviteID) {\r\n            props.removeFromUserAttribute(\"receivedInvites\", inviteID);\r\n            props.removeItem(\"Invite\", inviteID);\r\n          }\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes the User from an Event and the Event from the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} eventID The ID of the Event to add the User to.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeEvent(fromID, userID, eventID, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"scheduledEvents\", eventID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds the User to a Group and the Group to the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} groupID The ID of the Group to add the User to.\r\n   * @param {string} inviteID The ID of any potential invites this relates to.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addGroup(fromID, userID, groupID, inviteID, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"groups\", groupID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute && props.removeFromUserAttribute && props.removeItem) {\r\n          props.addToUserAttribute(\"groups\", groupID);\r\n          props.addToItemAttribute(groupID, \"members\", userID);\r\n          if (inviteID) {\r\n            props.removeFromUserAttribute(\"receivedInvites\", inviteID);\r\n            props.removeItem(\"Invite\", inviteID);\r\n          }\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes the User from a Group and the Group from the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} groupID The ID of the Group for the User to leave.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeGroup(fromID, userID, groupID, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"groups\", groupID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a message board to a User's message board feed in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} messageBoard The message board to add to the User's message boards.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addMessageBoard(fromID, userID, messageBoard, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"messageBoards\", messageBoard, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute) {\r\n          props.addToUserAttribute(\"messageBoards\", messageBoard);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a message board from the User's message board feed in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} messageBoard The message board to remove from the User's message boards.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeMessageBoard(fromID, userID, messageBoard, successHandler, failureHandler, props) {\r\n    return this.updateRemove(fromID, userID, \"messageBoards\", messageBoard, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the name of a User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} name The name to set for the User.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateName(fromID, userID, name, successHandler, failureHandler, props) {\r\n    return this.updateSet(fromID, userID, \"name\", name, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the gender of the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} gender The gender of the User to set.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateGender(fromID, userID, gender, successHandler, failureHandler, props) {\r\n    return this.updateSet(fromID, userID, \"gender\", gender, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the birthday of the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} birthday The ISO string of the birth date of the User.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateBirthday(fromID, userID, birthday, successHandler, failureHandler, props) {\r\n    return this.updateSet(fromID, userID, \"birthday\", birthday, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the location of the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} location The general location of the User within the database.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateLocation(fromID, userID, location, successHandler, failureHandler, props) {\r\n    return this.updateSet(fromID, userID, \"location\", location, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the biographical information of the User in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {string} bio The biographical description to set for the User.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateBio(fromID, userID, bio, successHandler, failureHandler, props) {\r\n    return this.updateSet(fromID, userID, \"bio\", bio, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the main profile image of the User and places the image into S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to update.\r\n   * @param {*} profileImage The profile image to place into S3.\r\n   * @param {string} profileImagePath The S3 path of where to place the file.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateProfileImage(fromID, userID, profileImage, profileImagePath, successHandler, failureHandler, props) {\r\n    if (profileImage && profileImagePath) {\r\n      S3.putImage(profileImagePath, profileImage, () => {\r\n        this.updateSet(fromID, userID, \"profileImagePath\", profileImagePath, (data) => {\r\n          if (props) {\r\n            if (props.addToUserAttribute && props.addToItemAttribute) {\r\n              // TODO\r\n              err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n            } else {\r\n              err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n            }\r\n          } else {\r\n            err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n          }\r\n          successHandler && successHandler(data);\r\n        }, (error) => {\r\n          S3.delete(profileImagePath);\r\n          failureHandler && failureHandler(error);\r\n        });\r\n      }, failureHandler);\r\n      if (TestHelper.ifTesting) {\r\n        return this.updateSet(fromID, userID, \"profileImagePath\", profileImagePath);\r\n      }\r\n    } else {\r\n      // Delete it\r\n      return this.updateSet(fromID, userID, \"profileImagePath\", null, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n    }\r\n  }\r\n\r\n  // Process Functions\r\n\r\n  /**\r\n   * Buys a Deal from the database using the User's internal credit system.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} userID The ID of the User to buy the Deal.\r\n   * @param {string} dealID The ID of the Deal to buy.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static buyDeal(fromID, userID, dealID, successHandler, failureHandler, props) {\r\n    return this.updateAdd(fromID, userID, \"productsOwned\", dealID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // Delete Functions ============================================================\r\n\r\n  /**\r\n   * Deletes a User from the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} itemType The type of the User to delete from the database.\r\n   * @param {string} userID The ID of the User to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static deleteUser(fromID, itemType, userID, successHandler, failureHandler) {\r\n    switch (itemType) {\r\n      case \"Client\":\r\n        return UserFunctions.delete(fromID, itemType, userID, successHandler, failureHandler);\r\n      case \"Trainer\":\r\n        return UserFunctions.delete(fromID, itemType, userID, successHandler, failureHandler);\r\n      default:\r\n        throw Error(\"Create User not implemented for user type = \" + itemType);\r\n    }\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // User Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Places a User in the database using the given information for the item type.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} itemType The type of the User to place in the database.\r\n   * @param {string} name The display name of the Client to place into the database.\r\n   * @param {string} email The email address of the Client.\r\n   * @param {string} username The Cognito User Pool Username of the User.\r\n   * @param {string} federatedID The unique federated ID from the federated identity.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, itemType, name, email, username, federatedID, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, itemType, {\r\n      name,\r\n      username,\r\n      email,\r\n      federatedID\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, userID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, userID, getItemTypeFromID(userID), attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, userID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, userID, getItemTypeFromID(userID), attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, userID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, userID, getItemTypeFromID(userID), attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a User from the database as well as all of its dependencies.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} itemType The type of the User to delete.\r\n   * @param {string} userID The ID of the User to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, itemType, userID, successHandler, failureHandler) {\r\n    // TODO Delete all the S3 Paths within the User?\r\n    return Lambda.delete(fromID, userID, itemType, successHandler, failureHandler);\r\n  }\r\n}\r\n\r\nexport default UserFunctions;\r\n","import Lambda from \"../api/Lambda\";\r\nimport S3 from \"../api/S3Storage\";\r\nimport {getEnvironmentType} from \"../../Constants\";\r\n\r\nconst itemType = \"Message\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Messages.\r\n */\r\nclass MessageFunctions {\r\n  // ======================================================================================================\r\n  // Message High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a normal text Message in the database to send to a board.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User who is sending this Message.\r\n   * @param {string} name The name of the User sending this Message.\r\n   * @param {string} profileImagePath The path of this User's profile image.\r\n   * @param {string} board The Message Board to send the Message to.\r\n   * @param {string} message The actual string text to send the Message with.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createTextMessage(fromID, from, name, profileImagePath, board, message, successHandler, failureHandler) {\r\n    return MessageFunctions.create(fromID, board, from, name, profileImagePath, null, message, null, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a picture Message in the database and in S3 to send to a board.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User who is sending this Message.\r\n   * @param {string} name The name of the User sending this Message.\r\n   * @param {string} profileImagePath The path of this User's profile image.\r\n   * @param {string} board The Message Board to send the Message to.\r\n   * @param {string} picture The picture file to send with the Message.\r\n   * @param {string} picturePath The S3 path to add the picture to in the S3 bucket.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createPictureMessage(fromID, from, name, profileImagePath, board, picture, picturePath, successHandler, failureHandler) {\r\n    return MessageFunctions.create(fromID, board, from, name, profileImagePath, \"picture\", picturePath, picture, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a video Message in the database and in S3 to send to a board.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} from The ID of the User who is sending this Message.\r\n   * @param {string} name The name of the User sending this Message.\r\n   * @param {string} profileImagePath The path of this User's profile image.\r\n   * @param {string} board The Message Board to send the Message to.\r\n   * @param {string} video The video file to send with the Message.\r\n   * @param {string} videoPath The S3 path to add the video to in the S3 bucket.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createVideoMessage(fromID, from, name, profileImagePath, board, video, videoPath, successHandler, failureHandler) {\r\n    return MessageFunctions.create(fromID, board, from, name, profileImagePath, \"video\", videoPath, video, successHandler, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Updates the last seen attribute of a Message, telling the board that its read status has been updated.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} board The Message Board containing the Message.\r\n   * @param {string} messageID The ID of the message to update.\r\n   * @param {string} userID The User ID to add the read status of.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addLastSeen(fromID, board, messageID, userID, successHandler, failureHandler) {\r\n    return MessageFunctions.updateAdd(fromID, board, messageID, \"lastSeenFor\", userID, successHandler, failureHandler);\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Message Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates a Message in the database and adds the paths to S3 using the information given.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} board The Message Board to send the Message to.\r\n   * @param {string} from The ID of the User who is sending this Message.\r\n   * @param {string} name The name of the User sending this Message.\r\n   * @param {string} profileImagePath The path of this User's profile image.\r\n   * @param {string} type The type of Message to send to the database. (\"picture\", \"video\", or null).\r\n   * @param {string} message The main message to send to the board.\r\n   * @param {string} file The file to send with the Message.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, board, from, name, profileImagePath, type, message, file, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, \"Message\", {\r\n      from,\r\n      name,\r\n      profileImagePath,\r\n      board,\r\n      type,\r\n      message,\r\n    }, (data) => {\r\n      // TODO Soon we'll have to adjust the Java project to be able to delete messages!\r\n      if (data && type) {\r\n        const path = data.data + \"/\" + message;\r\n        if (type === \"picture\") {\r\n          S3.putImage(path, file, () => {\r\n            successHandler(data);\r\n          }, failureHandler);\r\n        } else if (type === \"video\") {\r\n          S3.putVideo(path, file, () => {\r\n            successHandler(data);\r\n          }, failureHandler);\r\n        }\r\n      } else {\r\n        if (successHandler) {\r\n          successHandler(data);\r\n        }\r\n      }\r\n    }, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, board, messageID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      environmentType: getEnvironmentType(),\r\n      fromID,\r\n      action: \"UPDATEADD\",\r\n      itemType,\r\n      identifiers: [messageID],\r\n      secondaryIdentifier: board,\r\n      attributeName,\r\n      attributeValues: [attributeValue],\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, board, messageID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      environmentType: getEnvironmentType(),\r\n      fromID,\r\n      action: \"UPDATEREMOVE\",\r\n      itemType,\r\n      identifiers: [messageID],\r\n      secondaryIdentifier: board,\r\n      attributeName,\r\n      attributeValues: [attributeValue],\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, board, messageID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      environmentType: getEnvironmentType(),\r\n      fromID,\r\n      action: \"UPDATESET\",\r\n      itemType,\r\n      identifiers: [messageID],\r\n      secondaryIdentifier: board,\r\n      attributeName,\r\n      attributeValues: [attributeValue],\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a Message from the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} board The board that the Message is a part of.\r\n   * @param {string} messageID The ID of the Message to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, board, messageID, successHandler, failureHandler) {\r\n    return Lambda.invokeDatabaseLambda({\r\n      environmentType: getEnvironmentType(),\r\n      fromID,\r\n      action: \"DELETE\",\r\n      itemType,\r\n      identifiers: [messageID],\r\n      secondaryIdentifier: board,\r\n    }, successHandler, failureHandler);\r\n  }\r\n}\r\n\r\nexport default MessageFunctions;\r\n","import React, {useState, Fragment} from 'react';\r\nimport {Button, Input, Icon, Progress} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport MessageFunctions from \"../../database_functions/MessageFunctions\";\r\nimport {err, log} from \"../../../Constants\";\r\n\r\ntype Props = {\r\n  board: string\r\n}\r\n\r\n/**\r\n * Sends a text message to the message board.\r\n *\r\n * @param {{}} e The event value for the text input.\r\n * @param {string} board The name of the message board to send the video to.\r\n * @param {string} userID The ID of the User sending the message.\r\n * @param {string} username The username of the User sending the message.\r\n * @param {string} userProfileImagePath The S3 profile image path of the User sending the message.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nconst addMessage = (e, board, userID, username, userProfileImagePath, setIsLoading, setPercent) => {\r\n  // Prevent the default behaviour of form submit\r\n  e.preventDefault();\r\n\r\n  // Get the value of the comment box\r\n  // and make sure it not some empty strings\r\n  let message = e.target.elements.message.value.trim();\r\n\r\n  setPercent(50);\r\n  // Make sure name and comment boxes are filled\r\n  if (message) {\r\n    setIsLoading(true);\r\n    MessageFunctions.createTextMessage(userID, userID, username, userProfileImagePath, board, message, () => {\r\n      log && console.log(\"Successfully sent message!\");\r\n      setPercent(100);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setPercent(0);\r\n      err && console.error(\"Failed to send message! Error = \" + JSON.stringify(error));\r\n      setIsLoading(false);\r\n    });\r\n\r\n    // Clear input fields\r\n    e.target.elements.message.value = '';\r\n  }\r\n};\r\n\r\n/**\r\n * Sends a picture message to the message board.\r\n *\r\n * @param {*} picture The file of the picture to send.\r\n * @param {string} board The name of the message board to send the video to.\r\n * @param {string} userID The ID of the User sending the message.\r\n * @param {string} username The username of the User sending the message.\r\n * @param {string} userProfileImagePath The S3 profile image path of the User sending the message.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nconst addPicture = (picture, board, userID, username, userProfileImagePath, setIsLoading) => {\r\n  setIsLoading(true);\r\n  MessageFunctions.createPictureMessage(userID, userID, username, userProfileImagePath, board, picture, \"picture\", () => {\r\n    setIsLoading(false);\r\n    log && console.log(\"Successfully created picture message!\");\r\n  }, (error) => {\r\n    setIsLoading(false);\r\n    err && console.error(\"FAILED ADDING PICTURE. ERROR = \" + JSON.stringify(error));\r\n  });\r\n};\r\n\r\n/**\r\n * Sends a video message to the message board.\r\n *\r\n * @param {*} video The video file to send to the board.\r\n * @param {string} board The name of the message board to send the video to.\r\n * @param {string} userID The ID of the User sending the message.\r\n * @param {string} username The username of the User sending the message.\r\n * @param {string} userProfileImagePath The S3 profile image path of the User sending the message.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nconst addVideo = (video, board, userID, username, userProfileImagePath, setIsLoading) => {\r\n  this.setState({sendLoading: true});\r\n\r\n  MessageFunctions.createVideoMessage(userID, userID, username, userProfileImagePath, board, video, \"video\", () => {\r\n    setIsLoading(false);\r\n    log && console.log(\"Successfully created video message!\");\r\n  }, (error) => {\r\n    setIsLoading(false);\r\n    err && console.error(\"FAILED ADDING VIDEO. ERROR = \" + JSON.stringify(error));\r\n  });\r\n};\r\n\r\n/**\r\n * Takes a file from the camcorder of the device and sends that file through the message board, using the file type to\r\n * identify it.\r\n *\r\n * @param {{}} event The event value for the file input.\r\n * @param {string} board The name of the message board to send the video to.\r\n * @param {string} userID The ID of the User sending the message.\r\n * @param {string} username The username of the User sending the message.\r\n * @param {string} userProfileImagePath The S3 profile image path of the User sending the message.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nconst addPictureOrVideo = (event, board, userID, username, userProfileImagePath, setIsLoading) => {\r\n  const file = event.target.files[0];\r\n  const fileType = file[\"type\"];\r\n  const validImageTypes = [\"image/gif\", \"image/jpeg\", \"image/png\"];\r\n  const validVideoTypes = [\"video/mp4\", \"video/mv4\", \"video/avi\", \"video/mpg\"];\r\n  if (validImageTypes.includes(fileType)) {\r\n    addPicture(file, board, userID, username, userProfileImagePath, setIsLoading);\r\n  } else if (validVideoTypes.includes(fileType)) {\r\n    addVideo(file, board, userID, username, userProfileImagePath, setIsLoading);\r\n  } else {\r\n    console.log(\"PROBLEMATIC FILE TYPE = \" + fileType);\r\n  }\r\n};\r\n\r\nconst loadingBar = (isLoading, percent) => {\r\n  if (isLoading) {\r\n    return (\r\n      <Progress percent={percent} active color='purple'/>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * This is the component to send messages for a message board. Handles text, picture, and video messages.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst MessageInput = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [percent, setPercent] = useState(0);\r\n\r\n  return (\r\n    <Fragment>\r\n\r\n      <form\r\n        onSubmit={e => addMessage(e, props.board, props.user.id, props.user.username, props.user.profileImagePath, setIsLoading, setPercent)}\r\n        className='u-margin-top--2'>\r\n        {loadingBar(isLoading, percent)}\r\n        <Input type='text' action fluid className=\"textarea\" name=\"message\" placeholder=\"Write Message...\"\r\n        style={{border: '1px solid rebeccapurple', background: 'white', color: 'purple',\r\n            borderRadius: '50px, 50px, 50px, 50px'}} color='white'>\r\n          <input style={{background: 'white', border: 'none'}}/>\r\n          <Button as='label' for='proPicUpload'>\r\n            <Icon name='camera' size=\"large\" style={{marginLeft: '8px'}}/>\r\n            <input type=\"file\" accept=\"image/*;video/*;capture=camcorder\" id=\"proPicUpload\" hidden='true'\r\n                   onChange={e => addPictureOrVideo(e, props.board, props.user.id, props.user.name, props.user.profileImagePath, setIsLoading)}/>\r\n          </Button>\r\n          <Button loading={isLoading} primary>Send</Button>\r\n        </Input>\r\n      </form>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  message: state.message\r\n});\r\n\r\nexport default connect(mapStateToProps)(MessageInput);","import React from 'react';\r\nimport {Label, Grid, Button} from 'semantic-ui-react'\r\nimport {Player} from \"video-react\";\r\nimport Breakpoint from \"react-socks\";\r\n\r\ntype Props = {\r\n  userID: string,\r\n  message: {\r\n    from: string,\r\n    name: string,\r\n    message: string,\r\n    type: string,\r\n    messageURL: string,\r\n    profilePicture: any\r\n  }\r\n};\r\n\r\n/**\r\n * Component for displaying a single Message inside of a Message board. Styled like a normal text message looks like.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nexport default (props: Props) => {\r\n  if (!props.message) {\r\n    return null;\r\n  }\r\n  const from = props.message.from;\r\n  const name = props.message.name;\r\n  const message = props.message.message;\r\n  const messageURL = props.message.messageURL;\r\n  const profilePicture = props.message.profilePicture;\r\n  const type = props.message.type;\r\n  const ifSelf = from === props.userID;\r\n  if (type) {\r\n    // Image or video message\r\n    if (type === \"picture\") {\r\n      if (ifSelf) {\r\n        // Self picture\r\n        return (\r\n          <div>\r\n            <div>\r\n              <Button labelPosition='right' floated='right'>\r\n                <Label className='ui right fluid' pointing='right' color='purple'>\r\n                  <div className=\"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4\"\r\n                       style={{backgroundImage: `url(${messageURL})`}}>\r\n                  </div>\r\n                </Label>\r\n              </Button>\r\n            </div>\r\n            <br/><br/><br/></div>\r\n        );\r\n      } else {\r\n        // Other picture\r\n        return (\r\n          <Grid class=\"ui computer vertically reversed equal width grid\">\r\n            <Grid.Column width={2}>\r\n              <div align=\"center\" className=\"ui u-avatar tiny\"\r\n                   style={{backgroundImage: `url(${profilePicture})`, width: '50px', height: '50px'}}/>\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              <Grid.Row>\r\n                <strong>{name}</strong>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Label className='ui left fluid' pointing='left'>\r\n                  <div className=\"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4\"\r\n                       style={{backgroundImage: `url(${messageURL})`}}>\r\n                  </div>\r\n                </Label>\r\n              </Grid.Row>\r\n            </Grid.Column>\r\n          </Grid>\r\n        );\r\n      }\r\n    } else if (type === \"video\") {\r\n      if (ifSelf) {\r\n        // Self video\r\n        return (\r\n          <div>\r\n            <div>\r\n              <Button labelPosition='right' floated='right'>\r\n                <Label className='ui right fluid' pointing='right' color='purple'>\r\n                  <Player>\r\n                    <source src={messageURL} type=\"video/mp4\"/>\r\n                  </Player>\r\n                </Label>\r\n              </Button>\r\n            </div>\r\n            <br/><br/><br/></div>\r\n        );\r\n      } else {\r\n        // Other video\r\n        return (\r\n          <Grid class=\"ui computer vertically reversed equal width grid\">\r\n            <Grid.Column width={6}>\r\n              <div align=\"center\" className=\"ui u-avatar tiny\"\r\n                   style={{backgroundImage: `url(${profilePicture})`, width: '50px', height: '50px'}}/>\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              <Grid.Row>\r\n                <strong>{name}</strong>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Label className='ui left fluid' pointing='left'>\r\n                  <Player>\r\n                    <source src={messageURL} type=\"video/mp4\"/>\r\n                  </Player>\r\n                </Label>\r\n              </Grid.Row>\r\n            </Grid.Column>\r\n          </Grid>\r\n        );\r\n      }\r\n    } else {\r\n      alert(\"Unrecognized message type = \" + type);\r\n    }\r\n  } else {\r\n    // Normal message\r\n    if (ifSelf) {\r\n      // Self text\r\n      return (\r\n        <div>\r\n          <div>\r\n            <Button labelPosition='right' floated='right'>\r\n              <Label pointing='right' size='large' color='purple'>\r\n                {message}\r\n              </Label>\r\n            </Button>\r\n          </div>\r\n          <br/><br/><br/></div>\r\n      );\r\n    } else {\r\n      // Other text\r\n      return (\r\n        <div>\r\n          <Breakpoint medium up>\r\n            <Grid columns={2}>\r\n              <Grid.Column width={1}>\r\n                <div className=\"ui u-avatar mini\"\r\n                     style={{backgroundImage: `url(${profilePicture})`, width: '50px', height: '50px'}}/>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Grid.Row>\r\n                  <strong>{name}</strong>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                  <Label pointing='left' size='large'>\r\n                    {message}\r\n                  </Label>\r\n                </Grid.Row>\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Breakpoint>\r\n\r\n\r\n          <Breakpoint small down>\r\n            <Grid columns={2}>\r\n              <Grid.Column width={3} style={{marginRight: '10px'}}>\r\n                <div className=\"ui u-avatar mini\"\r\n                     style={{backgroundImage: `url(${profilePicture})`, width: '50px', height: '50px'}}/>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Grid.Row>\r\n                  <strong>{name}</strong>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                  <Label pointing='left' size='large' color='white'>\r\n                    {message}\r\n                  </Label>\r\n                </Grid.Row>\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Breakpoint>\r\n          <br/><br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Message from './Message';\r\nimport {Container} from \"semantic-ui-react\";\r\n\r\n/**\r\n * The component for displaying a list of messages in the correct order based on how they appear in the message redux.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX required to display the component.\r\n * @constructor\r\n */\r\nconst Messages = (props: { messages: [any], userID: string }) => {\r\n  return (\r\n    <Container style={{width: '85%'}}>\r\n      {\r\n        props.messages.slice(0).reverse().map((message, index) => {\r\n          return <Message key={index} message={message} userID={props.userID}/>\r\n        })\r\n      }\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n","import React from \"react\";\r\nimport {Message, Icon} from \"semantic-ui-react\";\r\n\r\ntype Props = {\r\n  loading: boolean\r\n}\r\n\r\n/**\r\n * The loading spinner to show a process loading.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst Spinner = (props: Props) => {\r\n  if (props.loading) {\r\n    return (\r\n      <Message icon style={{background: 'white'}}>\r\n        <Icon name='spinner' size=\"small\" loading color='purple'/>\r\n        <Message.Content>\r\n          <Message.Header style={{color: 'purple'}}>\r\n            Loading...\r\n          </Message.Header>\r\n        </Message.Content>\r\n      </Message>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nSpinner.defaultProps = {\r\n  loading: true\r\n};\r\n\r\nexport default Spinner;\r\n","import React, {useState, useEffect} from 'react';\r\nimport CommentBox from \"./MessageInput\";\r\nimport Messages from './Messages';\r\nimport {Message, Divider} from \"semantic-ui-react\";\r\nimport {fetchClient, fetchTrainer} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {\r\n  queryNextMessagesFromBoard,\r\n  discardBoard, unsubscribeFromBoard\r\n} from \"../../redux/actions/messageActions\";\r\nimport {connect} from \"react-redux\";\r\nimport ScrollView from \"react-inverted-scrollview\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getIDsFromMessageBoard, ifMessageUnreadFor} from \"../../logic/MessageHelper\";\r\n\r\nconst fetchLimit = 10;\r\nconst messageMinimum = 10;\r\n\r\ntype Props = {\r\n  board: string,\r\n};\r\n\r\n/**\r\n * Gets another batch of messages for the board.\r\n *\r\n * @param {string} board The name of the board to receive messages for.\r\n * @param {number} fetchLimit The number of messages to fetch at most.\r\n * @param {boolean} canFetch If the board can continue fetching.\r\n * @param {function(boolean)} setCanFetch Sets the can fetch state.\r\n * @param {function(string, number, function([{}]), function(error))} queryNextMessagesFromBoard Message function to\r\n * retrieve the next batch of Messages from the database.\r\n */\r\nconst queryMessages = (board, fetchLimit, canFetch, setCanFetch, queryNextMessagesFromBoard) => {\r\n  if (canFetch) {\r\n    // alert(\"Querying next messages from the board!\");\r\n    // setIsLoading(true);\r\n    queryNextMessagesFromBoard(board, fetchLimit, (items) => {\r\n      // TODO Fetch all the rest of the information for the User when I switch it back to that ~ Leo\r\n      if (!items) {\r\n        setCanFetch(false);\r\n      } else {\r\n        // That means we're done getting messages\r\n      }\r\n      // setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Scrolls to the bottom of the board.\r\n *\r\n * @param {{}} scrollViewRef The reference to the scroll view object, allowing it to perform functions.\r\n */\r\nconst scrollToBottom = (scrollViewRef) => {\r\n  if (!scrollViewRef) return;\r\n  scrollViewRef.scrollToBottom();\r\n};\r\n\r\n/**\r\n * Scrolls to the top of the board.\r\n *\r\n * @param {{}} scrollViewRef The reference to the scroll view object, allowing it to perform functions.\r\n */\r\n// const scrollToTop = (scrollViewRef) => {\r\n//     if (!scrollViewRef) return;\r\n//     scrollViewRef.scrollToTop();\r\n// };\r\n\r\n/**\r\n * Handles the scroll for the message board and loads the next set of messages if applicable.\r\n *\r\n * @param {{}} ref The reference to the scroll view object, giving information about its current state.\r\n * @param {string} board The name of the board to handle the scroll for.\r\n * @param {number} fetchLimit The number of messages to fetch at most.\r\n * @param {boolean} canFetch If the board can continue fetching.\r\n * @param {function(boolean)} setCanFetch Sets the can fetch state.\r\n * @param {function(string, number, function([{}]), function(error))} queryNextMessagesFromBoard Message function to\r\n * retrieve the next batch of Messages from the database.\r\n */\r\nconst handleScroll = (ref, board, fetchLimit, canFetch, setCanFetch, queryNextMessagesFromBoard) => {\r\n  // setCanScroll(true);\r\n  const scrollTop = ref.scrollTop;\r\n  const scrollBottom = ref.scrollBottom;\r\n  console.log('scrollTop', scrollTop);\r\n  console.log('scrollBottom', scrollBottom);\r\n  if (scrollTop < 1) {\r\n    // Then we fetch new stuff\r\n    setCanFetch(true);\r\n    queryMessages(board, fetchLimit, canFetch, setCanFetch, queryNextMessagesFromBoard);\r\n  }\r\n};\r\n\r\n/**\r\n * Figures out the other User's read status of the Message. (Like iMessage \"read\").\r\n *\r\n * @param {string} otherID The ID of the other user.\r\n * @param {{from: string, lastSeenFor: [string]}} firstMessage The first message in the board, indicating read status.\r\n * @return {*} React JSX to display. Returns \"seen\" if the other user has read the message that you sent. Otherwise \"\".\r\n */\r\nexport const getOtherReadStatus = (otherID, firstMessage) => {\r\n  if (otherID && firstMessage) {\r\n    if (firstMessage.from !== otherID) {\r\n      if (!ifMessageUnreadFor(otherID, firstMessage)) {\r\n        return <Message>Seen</Message>;\r\n      } else {\r\n        return <Message>Unseen</Message>;\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * Shows a message board with the input and its Messages. Handles querying for the Messages and the sending of\r\n * everything.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst MessageBoard = (props: Props) => {\r\n  const [otherID, setOtherID] = useState(null);\r\n  // const [isLoading, setIsLoading] = useState(false);\r\n  const [canFetch, setCanFetch] = useState(true);\r\n  // const [canScroll, setCanScroll] = useState(false);\r\n  const [scrollViewRef, setScrollViewRef] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (props.board) {\r\n      scrollToBottom(scrollViewRef);\r\n      if (props.board && (!props.message.boards[props.board]\r\n        || props.message.boards[props.board].length < messageMinimum)) {\r\n        // alert(\"Not enough messages!\");\r\n        queryMessages(props.board, fetchLimit, canFetch, setCanFetch,\r\n          props.queryNextMessagesFromBoard);\r\n      }\r\n      const ids = getIDsFromMessageBoard(props.board);\r\n      if (ids.length === 2) {\r\n        for (let i = 0; i < 2; i++) {\r\n          if (props.user.id && ids[i] !== props.user.id) {\r\n            setOtherID(ids[i]);\r\n          }\r\n        }\r\n      }\r\n      return () => {\r\n        props.unsubscribeFromBoard(props.board);\r\n        // Unsubscribe to the Ably messages\r\n        // Also potentially clear the board?\r\n        // props.discardBoard(props.board);\r\n      }\r\n    }\r\n  }, [props.board]);\r\n\r\n  return (\r\n    <div className='u-margin-top--2'>\r\n      {/*console.log(\"Comment screen render user: \" + this.props.curUser)*/}\r\n      <ScrollView\r\n        class='chat'\r\n        width='100%'\r\n        height='300px'\r\n        ref={ref => setScrollViewRef(ref)}\r\n        onScroll={ref => handleScroll(ref, props.board, fetchLimit, canFetch, setCanFetch,\r\n          props.queryNextMessagesFromBoard)}\r\n      >\r\n        <Spinner loading={(props.message.boardIfFirsts[props.board] || props.message.boardNextTokens[props.board])}/>\r\n        <Messages board={props.board}\r\n                  messages={(props.board && props.message.boards[props.board]) ?\r\n                    props.message.boards[props.board] :\r\n                    []}\r\n                  userID={props.user.id}/>\r\n        {getOtherReadStatus(otherID, props.message.boards[props.board] ? props.message.boards[props.board][0] : null)}\r\n      </ScrollView>\r\n      <Divider className='u-margin-top--2'/>\r\n      <CommentBox board={props.board}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  message: state.message\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchClient(id, variablesList, dataHandler));\r\n    },\r\n    fetchTrainer: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchTrainer(id, variablesList, dataHandler));\r\n    },\r\n    queryNextMessagesFromBoard: (board, limit, dataHandler, failureHandler) => {\r\n      dispatch(queryNextMessagesFromBoard(board, limit, dataHandler, failureHandler));\r\n    },\r\n    discardBoard: (board) => {\r\n      dispatch(discardBoard(board));\r\n    },\r\n    unsubscribeFromBoard: (board) => {\r\n      dispatch(unsubscribeFromBoard(board));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageBoard);\r\n","import {getCacheName} from \"../redux/actions/cacheActions\";\r\nimport {getItemTypeFromID} from \"./ItemType\";\r\n\r\n// This file helps access the cache reducer properly, getting attributes within objects with ease.\r\n\r\nexport function getClientAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"clients\", cacheReducer);\r\n}\r\n\r\nexport function getTrainerAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"trainers\", cacheReducer);\r\n}\r\n\r\nexport function getGymAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"gyms\", cacheReducer);\r\n}\r\n\r\nexport function getWorkoutAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"workouts\", cacheReducer);\r\n}\r\n\r\nexport function getReviewAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"reviews\", cacheReducer);\r\n}\r\n\r\nexport function getEventAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"events\", cacheReducer);\r\n}\r\n\r\nexport function getChallengeAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"challenges\", cacheReducer);\r\n}\r\n\r\nexport function getInviteAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"invites\", cacheReducer);\r\n}\r\n\r\nexport function getPostAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"posts\", cacheReducer);\r\n}\r\n\r\nexport function getSubmissionAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"submissions\", cacheReducer);\r\n}\r\n\r\nexport function getGroupAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"groups\", cacheReducer);\r\n}\r\n\r\nexport function getCommentAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"comments\", cacheReducer);\r\n}\r\n\r\nexport function getSponsorAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"sponsors\", cacheReducer);\r\n}\r\n\r\nexport function getStreakAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeFromCache(id, attributeName, \"streaks\", cacheReducer);\r\n}\r\n\r\n/**\r\n * Assumes the item type from the ID and calls {@link getObjectAttributeWithItemType}.\r\n *\r\n * @param {string} id The ID of the object.\r\n * @param {string} attributeName The name of the attribute to get.\r\n * @param {{}} cacheReducer The entire cache reducer.\r\n * @return {*} The attribute from the object.\r\n */\r\nexport function getObjectAttribute(id, attributeName, cacheReducer) {\r\n  return getObjectAttributeWithItemType(id, getItemTypeFromID(id), attributeName, cacheReducer);\r\n}\r\n\r\n/**\r\n * Gets an object from the entire cache reducer given the item type and the name of the attribute. Also allows to\r\n * get the length of a list by adding \"Length\" to the end of an attribute. (\"messagesLength\").\r\n *\r\n * @param {string} id The ID of the object.\r\n * @param {string} itemType The item type of the object.\r\n * @param {string} attributeName The name of the attribute to get.\r\n * @param {{}} cacheReducer The entire cache reducer.\r\n * @return {*} The attribute or the length of the attribute list.\r\n */\r\nexport function getObjectAttributeWithItemType(id, itemType, attributeName, cacheReducer) {\r\n  if (itemType) {\r\n    return getObjectAttributeFromCache(id, attributeName, getCacheName(itemType), cacheReducer);\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets an object attribute from an object within the cache.\r\n *\r\n * @param {string} id The id of the object to get.\r\n * @param {string} attributeName The name of the attribute within the object to get.\r\n * @param {string} subCacheName The sub-cache within the cache that holds the object's item type.\r\n * @param {{}} cacheReducer The current cache reducer within redux.\r\n * @return {string|number} Either the attribute or the length of the array attribute\r\n */\r\nfunction getObjectAttributeFromCache(id, attributeName, subCacheName, cacheReducer) {\r\n  if (id && attributeName && cacheReducer && subCacheName) {\r\n    const object = cacheReducer[subCacheName][id];\r\n    if (object) {\r\n      return getAttributeFromObject(object, attributeName);\r\n    }\r\n    // else {\r\n    //     err&&console.error(\"Object (id: \" + id + \") not fetched yet!!\");\r\n    // }\r\n  }\r\n  // else {\r\n  //     err&&console.error(\"No cache from Redux received!!!!\");\r\n  // }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets an object from the cache using the ID.\r\n *\r\n * @param {string} id The id of the object to get.\r\n * @param {{}} cacheReducer The current cache reducer for redux.\r\n * @return {{}} The object from the cache.\r\n */\r\nexport function getObjectFromCache(id, cacheReducer) {\r\n  if (id && cacheReducer) {\r\n    return cacheReducer[getCacheName(getItemTypeFromID(id))][id];\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets an attribute from an object, using my \"Length\" trick to get lengths of arrays. No checking for a real object here.\r\n *\r\n * @param {{}} object The object from the database in the redux cache.\r\n * @param {string} attributeName The name of the attribute in the object to retrieve.\r\n * @return {string|number} Either the attribute or the length of the array attribute\r\n */\r\nexport function getAttributeFromObject(object, attributeName) {\r\n  if (object && attributeName) {\r\n    if (attributeName.substr(attributeName.length - 6) === \"Length\") {\r\n      attributeName = attributeName.substr(0, attributeName.length - 6);\r\n      if (object[attributeName] && object[attributeName].length) {\r\n        return object[attributeName].length;\r\n      } else {\r\n        return 0;\r\n      }\r\n    }\r\n    return object[attributeName];\r\n  }\r\n  return null;\r\n}\r\n","import React, {useState} from 'react';\r\nimport {Button, Icon} from \"semantic-ui-react\";\r\nimport AvatarEditor from \"react-avatar-editor\";\r\n\r\ntype Props = {\r\n  imageURL: string,\r\n  callback: (any) => void\r\n};\r\n\r\n/**\r\n * Handles the save button after the image has been edited by the react-avatar-editor library.\r\n *\r\n * @callback\r\n * @param {{getImageScaledToCanvas: function()}} editor The editor library that holds the edited image.\r\n * @param {function(*)} callback The call-back function for returning the final image.\r\n */\r\nconst onClickSave = (editor, callback) => {\r\n  if (editor) {\r\n    const dataURI = editor.getImageScaledToCanvas().toDataURL(\"image/jpeg\");\r\n    const binary = atob(dataURI.split(',')[1]);\r\n    const array = [];\r\n    for (let i = 0; i < binary.length; i++) {\r\n      array.push(binary.charCodeAt(i));\r\n    }\r\n    callback(new Blob([new Uint8Array(array)], {type: 'image/jpeg'}));\r\n  }\r\n};\r\n\r\n/**\r\n * Allows the User to edit an image before uploading it. Also converts the image to a JPEG compressed file to save space\r\n * and time. TODO Maybe we want better quality images?\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst UploadImage = (props: Props) => {\r\n  const [rotation, setRotation] = useState(0);\r\n  const [editorRef, setEditorRef] = useState(null);\r\n  return (\r\n    <div>\r\n      <AvatarEditor\r\n        ref={setEditorRef}\r\n        image={props.imageURL}\r\n        width={250}\r\n        height={250}\r\n        border={50}\r\n        rotate={rotation}\r\n        scale={1.2}\r\n      />\r\n      <Button primary onClick={() => setRotation(p => (p + 90) % 360)}>\r\n        <Icon name=\"arrow alternate circle right\"/>\r\n      </Button>\r\n      <Button primary onClick={() => onClickSave(editorRef, props.callback)}>Upload</Button>\r\n      <Button onClick={() => props.callback(null)}>Cancel</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadImage;","import React, {useState} from 'react';\r\nimport {Grid, Icon, Button, Image, Header, Modal, Loader, Dimmer} from 'semantic-ui-react';\r\nimport ReactSwipe from 'react-swipe';\r\nimport _ from \"lodash\";\r\nimport {connect} from 'react-redux';\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport UploadImage from \"../manager/UploadImage\";\r\nimport {\r\n  removeFromItemAttributeAtIndex,\r\n  setItemAttribute,\r\n  setItemAttributeIndex\r\n} from \"../../redux/actions/cacheActions\";\r\n\r\ntype Props = {\r\n  userID?: string,\r\n  profileImage: any,\r\n  profileImages: [any],\r\n  profileImagePaths: [string],\r\n  editable: boolean\r\n};\r\n\r\n/**\r\n * Gets the S3 key path for the main profile image.\r\n *\r\n * @param {string} userID The ID of the User of the profile image gallery.\r\n * @return {string} The S3 key name for the main profile image.\r\n */\r\nconst getProfileImageS3Name = (userID) => {\r\n  return \"ClientFiles/\" + userID + \"/profileImage\";\r\n};\r\n\r\n/**\r\n * Gets the gallery S3 name for a specific gallery image.\r\n *\r\n * @param {string} userID The ID of the User of the profile image gallery.\r\n * @param {number} pos The current position of the gallery image carousel.\r\n * @return {string} The S3 key path for the gallery image.\r\n */\r\nconst getGalleryImageS3Name = (userID, pos) => {\r\n  return \"ClientFiles/\" + userID + \"/galleryImages/\" + pos;\r\n};\r\n\r\n/**\r\n * Edits the gallery pictures to set one. Either replaces one existing picture or adds a new one on the end, making sure\r\n * that it isn't overlapping with an existing gallery image.\r\n *\r\n * @param {string} userID The ID of the User for the profile image gallery.\r\n * @param {*} image The image file to set for the gallery picture.\r\n * @param {*} displayImage The temporary image to use instead of the S3 generated URL to update in real time the object.\r\n * @param {number} pos The position of the gallery in the carousel.\r\n * @param {[string]} profileImagePaths The profile image paths of the User for the profile image gallery.\r\n * @param {function(string, string, *)} setItemAttribute The function to update an item's attribute in the database.\r\n * @param {function(string, string, number, *)} setItemAttributeIndex Function to update item's index in a list.\r\n * @param {function(boolean)} setIsLoading Sets the component's loading state.\r\n */\r\nconst setGalleryPicture = (userID, image, displayImage, pos, profileImagePaths, setItemAttribute, setItemAttributeIndex, setIsLoading) => {\r\n  // console.log(\"This is calling set gallery picture\");\r\n  // console.log(this.state.galleryNum);\r\n  // alert(this.state.reactSwipeElement.getPos());\r\n  setIsLoading(true);\r\n  if (pos !== 0) {\r\n    let path = getGalleryImageS3Name(userID,);\r\n    // for length 2, 2 is inside, 3 is outside\r\n    // for length 0, 1 is outside\r\n    if (pos <= profileImagePaths ? profileImagePaths.length : 0) {\r\n      path = profileImagePaths[pos - 1];\r\n    } else {\r\n      // Keep checking to see that the new path added is going to be larger than the last path\r\n      let profilePosID = pos;\r\n      path = getGalleryImageS3Name(userID, profilePosID);\r\n      while (profileImagePaths && path <= profileImagePaths[profileImagePaths.length - 1]) {\r\n        path = getGalleryImageS3Name(userID, profilePosID);\r\n        profilePosID++;\r\n      }\r\n    }\r\n    UserFunctions.addProfileImage(userID, userID, image, path, (data) => {\r\n      setItemAttributeIndex(userID, \"profileImages\", pos - 1, displayImage);\r\n      setItemAttributeIndex(userID, \"profileImagePaths\", path, displayImage);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n    });\r\n  } else {\r\n    const path = getProfileImageS3Name(userID);\r\n    UserFunctions.updateProfileImage(userID, userID, image, path, (data) => {\r\n      setItemAttribute(userID, \"profileImage\", displayImage);\r\n      setItemAttribute(userID, \"profileImagePath\", path);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Deletes a gallery picture from the User's profile images / profile image.\r\n *\r\n * @param {string} userID The ID of the User for the profile image gallery.\r\n * @param {number} pos The position of the carousel, to indicate which image to remove.\r\n * @param {[string]} profileImagePaths The User's profile image paths.\r\n * @param {function(string, string, *)} setItemAttribute Function for updating item's attribute manually.\r\n * @param {function(string, string, number)} removeItemAttributeIndex Function for removing index from item's list.\r\n * @param {function(boolean)} setIsLoading Sets the component's loading state.\r\n */\r\nconst removeGalleryPicture = (userID, pos, profileImagePaths, setItemAttribute, removeItemAttributeIndex, setIsLoading) => {\r\n  setIsLoading(true);\r\n  if (pos === 0) {\r\n    // Main profile image\r\n    UserFunctions.updateProfileImage(userID, userID, null, null, () => {\r\n      setItemAttribute(userID, \"profileImage\", require('../../img/roundProfile.png'));\r\n      setItemAttribute(userID, \"profileImagePath\", null);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n    });\r\n  } else {\r\n    // Gallery Image\r\n    UserFunctions.removeProfileImage(userID, userID, profileImagePaths[pos - 1], () => {\r\n      removeItemAttributeIndex(userID, \"profileImages\", pos - 1);\r\n      removeItemAttributeIndex(userID, \"profileImagePaths\", pos - 1);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Constructs the list of images to display for the profile image gallery.\r\n *\r\n * @param {string} userID The ID of the User for the profile image gallery.\r\n * @param {*} profileImage The main profile image for the User.\r\n * @param {[string]} profileImagePaths The User's profile image paths.\r\n * @param {[*]} profileImages The User's profile images.\r\n * @param {boolean} editable Whether the profile image gallery is editable or not.\r\n * @param {*} swipeRef The reference to the React Swipe component.\r\n * @param {function(boolean)} setUploadModalOpen Sets the upload modal open state.\r\n * @param {function(*)} setTempImageInfo Sets the temp image info state.\r\n * @param {function(string, string, *)} setItemAttribute Function for updating item's attribute manually.\r\n * @param {function(string, string, number)} removeItemAttributeIndex Function for removing index from item's list.\r\n * @param {function(boolean)} setIsLoading Sets the component's loading state.\r\n * @return {*} The React JSX to display the list of images.\r\n */\r\nconst getImageComponents = (userID, profileImage, profileImagePaths, profileImages, editable, swipeRef,\r\n                            setUploadModalOpen, setTempImageInfo, setItemAttribute, removeItemAttributeIndex, setIsLoading) => {\r\n  if (profileImage) {\r\n    let profileImagesLength = 0;\r\n    if (profileImages) {\r\n      profileImagesLength = profileImages.length;\r\n    }\r\n    return _.times(profileImagesLength + 1, i => (\r\n      <div key={i}>\r\n        <Image src={i === 0 ? profileImage : profileImages[i - 1]} style={{\r\n          height: '300px',\r\n          width: '300px',\r\n          margin: 'auto', marginTop: \"10px\"\r\n        }}/>\r\n        {\r\n          editable && swipeRef && (\r\n            <Grid columns={2} centered>\r\n              <Grid.Column>\r\n                <Button primary as=\"label\" htmlFor=\"galleryUpload\" circular className=\"u-bg--primaryGradient\"\r\n                        style={{marginTop: \"20px\", marginBottom: \"20px\"}}>\r\n                  {i === 0 ? \"Change Main Profile Image\" : \"Change Gallery Image\"}\r\n                </Button>\r\n                <input type=\"file\" accept=\"image/*\" id=\"galleryUpload\" hidden={true}\r\n                       onChange={(event) => {\r\n                         setTempImageInfo({\r\n                           pos: swipeRef.getPos(),\r\n                           image: event.target.files[0]\r\n                         });\r\n                         setUploadModalOpen(true)\r\n                       }}/>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Button primary as=\"label\" circular className=\"u-bg--primaryGradient\"\r\n                        onClick={() => removeGalleryPicture(userID, swipeRef.getPos(), profileImagePaths, setItemAttribute, removeItemAttributeIndex, setIsLoading)}\r\n                        style={{marginTop: \"20px\", marginBottom: \"20px\"}}>\r\n                  {i === 0 ? \"Remove Profile Image\" : \"Remove Gallery Image\"}</Button>\r\n              </Grid.Column>\r\n            </Grid>\r\n          )\r\n        }\r\n      </div>\r\n    ));\r\n  } else {\r\n    return (\r\n      <Header> No gallery images yet! </Header>\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * The component to handle the Modal view of a profile image gallery for any User. Allows the gallery to be editable or\r\n * not. First displays the main profile image, then the gallery images in order by string value.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst ProfileImageGallery = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [uploadModalOpen, setUploadModalOpen] = useState(false);\r\n  const [tempImageInfo, setTempImageInfo] = useState(null);\r\n  const [reactSwipeElement, setReactSwipeElement] = useState(null);\r\n\r\n  return (\r\n    <div>\r\n      <Grid centered>\r\n        <Grid.Column width={1} style={{marginRight: \"10px\"}}\r\n                     onClick={() => reactSwipeElement && reactSwipeElement.prev()}>\r\n          <Icon size='large' name=\"caret left\" style={{marginTop: \"150px\"}}/>\r\n        </Grid.Column>\r\n        <Grid.Column width={10}>\r\n          <ReactSwipe\r\n            className=\"carousel\"\r\n            swipeOptions={{continuous: false}}\r\n            ref={el => setReactSwipeElement(el)}\r\n          >\r\n            {getImageComponents(props.userID, props.profileImage, props.profileImagePaths,\r\n              props.profileImages, props.editable, reactSwipeElement, setUploadModalOpen,\r\n              setTempImageInfo, props.setItemAttribute, props.removeItemAttributeIndex, setIsLoading)}\r\n            {props.editable && (\r\n              <div style={{width: \"50px\"}} align=\"center\">\r\n                <Button primary as=\"label\" htmlFor=\"galleryUpload\" circular\r\n                        className=\"u-bg--primaryGradient\"\r\n                        style={{marginTop: \"140px\", marginBottom: \"140px\"}}>\r\n                  <Icon name='plus'/> Add New Picture\r\n                </Button>\r\n                <input type=\"file\" accept=\"image/*\" id=\"galleryUpload\" hidden={true}\r\n                       onChange={(event) => {\r\n                         setTempImageInfo({\r\n                           pos: reactSwipeElement.getPos(),\r\n                           image: event.target.files[0]\r\n                         });\r\n                         setUploadModalOpen(true)\r\n                       }}/>\r\n              </div>\r\n            )}\r\n          </ReactSwipe>\r\n          <Modal open={uploadModalOpen} onClose={() => {\r\n          }}>\r\n            <UploadImage imageURL={tempImageInfo ? tempImageInfo.image : null}\r\n                         callback={(picture) => {\r\n                           setGalleryPicture(props.userID, picture, URL.createObjectURL(picture),\r\n                             tempImageInfo.pos, props.profileImagePaths, props.setItemAttribute, props.setItemAttributeIndex,\r\n                             setIsLoading);\r\n                           setUploadModalOpen(false);\r\n                           setTempImageInfo(null)\r\n                         }}/>\r\n          </Modal>\r\n        </Grid.Column>\r\n        <Grid.Column width={1} style={{marginRight: \"10px\", marginLeft: \"-10px\"}}\r\n                     onClick={() => reactSwipeElement && reactSwipeElement.next()}>\r\n          <Icon size='large' name=\"caret right\" style={{marginTop: \"150px\"}}/>\r\n        </Grid.Column>\r\n        <Dimmer active={isLoading}/>\r\n        <Loader disabled={!isLoading}/>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(setItemAttribute(id, attributeName, attributeValue));\r\n    },\r\n    setItemAttributeIndex: (id, attributeName, index, attributeValue) => {\r\n      dispatch(setItemAttributeIndex(id, attributeName, index, attributeValue));\r\n    },\r\n    removeItemAttributeIndex: (id, attributeName, index) => {\r\n      dispatch(removeFromItemAttributeAtIndex(id, attributeName, index));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileImageGallery);","import React, {useState} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {Label, Modal, Icon, Dimmer} from \"semantic-ui-react\";\r\nimport UploadImage from \"../manager/UploadImage\";\r\nimport Spinner from \"./Spinner\";\r\nimport ClientFunctions from \"../../database_functions/UserFunctions\";\r\nimport ProfileImageGallery from \"./ProfileImageGallery\";\r\nimport {setItemAttribute} from \"../../redux/actions/cacheActions\";\r\n\r\ntype Props = {\r\n  userID: string,\r\n  profileImage: any,\r\n  profileImages: [any],\r\n  profileImagePaths: [string],\r\n  editable: boolean\r\n};\r\n\r\n/**\r\n * Uploads the profile picture to update the main profile image of the User.\r\n *\r\n * @param {*} picture The picture to upload as the new profile image.\r\n * @param {string} userID The ID of the User for the profile image.\r\n * @param {*} displayPicture The picture to use to display when we manually update the object in the database.\r\n * @param {function(string, string, *)} setItemAttribute Function to manually update the item attribute.\r\n */\r\nconst uploadProfilePicture = (picture, userID, displayPicture, setItemAttribute) => {\r\n  if (picture && userID) {\r\n    const path = \"ClientFiles/\" + userID + \"/profileImage\";\r\n    ClientFunctions.updateProfileImage(userID, userID, picture, path,\r\n      (data) => {\r\n        // this.props.forceFetchUserAttributes([\"profileImagePath\"]);\r\n        setItemAttribute(userID, \"profileImage\", displayPicture);\r\n        setItemAttribute(userID, \"profileImagePath\", path);\r\n      }, (error) => {\r\n        console.log(\"Failed edit client attribute\");\r\n        console.log(JSON.stringify(error));\r\n      });\r\n  }\r\n};\r\n\r\n/**\r\n * The Profile Image component displays a preview of the User's main profile image and opens a modal that shows the rest\r\n * of the User's profile image gallery when it is clicked on. Also allows the profile image to be editable directly.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst ProfileImage = (props: Props) => {\r\n  const [galleryModalOpen, setGalleryModalOpen] = useState(false);\r\n  const [uploadModalOpen, setUploadModalOpen] = useState(false);\r\n  const [tempProfilePicture, setTempProfilePicture] = useState(null);\r\n  if (props.profileImage) {\r\n    return (\r\n      <div>\r\n        <div onClick={() => setGalleryModalOpen(true)}\r\n             className=\"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4\"\r\n             style={{backgroundImage: `url(${props.profileImage})`}}/>\r\n        <Modal closeIcon basic size='large' open={galleryModalOpen} onClose={() => setGalleryModalOpen(false)}>\r\n          <ProfileImageGallery userID={props.userID}\r\n                               profileImage={props.profileImage}\r\n                               profileImages={props.profileImages}\r\n                               profileImagePaths={props.profileImagePaths}\r\n                               editable={props.editable}/>\r\n        </Modal>\r\n        {props.editable && [\r\n          <Label key={0} as=\"label\" htmlFor=\"proPicUpload\" circular className=\"u-bg--primaryGradient\">\r\n            <Icon name=\"upload\" className='u-margin-right--0' size=\"large\" inverted/>\r\n          </Label>,\r\n          <input key={1} type=\"file\" accept=\"image/*\" id=\"proPicUpload\" hidden={true}\r\n                 onChange={(event) => {\r\n                   setTempProfilePicture(event.target.files[0]);\r\n                   setUploadModalOpen(true)\r\n                 }}/>,\r\n          <Modal key={2} basic size='mini' open={uploadModalOpen} onClose={() => {\r\n          }}>\r\n            <UploadImage imageURL={tempProfilePicture} callback={(picture) => {\r\n              uploadProfilePicture(picture, props.userID, URL.createObjectURL(picture), props.setItemAttribute);\r\n              setUploadModalOpen(false);\r\n            }}/>\r\n          </Modal>]\r\n        }\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <Dimmer inverted>\r\n        <Spinner loading={true}/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(setItemAttribute(id, attributeName, attributeValue))\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(ProfileImage);","import React, {useState, useEffect} from 'react';\r\nimport {Modal, Button, Dimmer, Message, Icon, Grid} from 'semantic-ui-react';\r\nimport {connect} from \"react-redux\";\r\nimport InviteToChallengeModalProp from \"../manager/InviteToChallengeModal\";\r\nimport {fetchClient, fetchInvite} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {\r\n  addToUserAttribute,\r\n  fetchUserAttributes,\r\n  forceFetchUserAttributes,\r\n  removeFromUserAttribute\r\n} from \"../../redux/actions/userActions\";\r\nimport InviteFunctions from \"../../database_functions/InviteFunctions\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport MessageBoard from \"../messaging/MessageBoard\";\r\nimport {log, err} from \"../../../Constants\";\r\nimport {getClientAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getMessageBoardName} from \"../../logic/MessageHelper\";\r\nimport ProfileImage from \"../props/ProfileImage\";\r\nimport type Invite from \"../../types/Invite\";\r\nimport {addToItemAttribute, removeFromItemAttribute} from \"../../redux/actions/cacheActions\";\r\n\r\n// TODO Rewrite for the new design\r\n// TODO Move the functions outside of the component to improve efficiency\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any,\r\n  clientID: string\r\n}\r\n\r\n/**\r\n * Client Modal allows you to see a Client's attributes and also you can interact with the Client like adding them as a\r\n * friend.\r\n *\r\n * @param props\r\n * @return {*}\r\n * @constructor\r\n */\r\nconst ClientModal = (props: Props) => {\r\n  const [clientID, setClientID] = useState(null);\r\n  // const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isActionButtonLoading, setIsActionButtonLoading] = useState(false);\r\n  const [inviteModalOpen, setInviteModalOpen] = useState(false);\r\n  const [isFriend, setIsFriend] = useState(false);\r\n  const [friendRequestID, setFriendRequestID] = useState(null);\r\n  const [hasFriendRequest, setHasFriendRequest] = useState(false);\r\n  const [pendingFriendRequest, setPendingFriendRequest] = useState(false);\r\n\r\n  const getAttribute = (attribute) => {\r\n    return getClientAttribute(clientID, attribute, props.cache);\r\n  };\r\n\r\n  // Changed clientID\r\n  useEffect(() => {\r\n    if (props.clientID) {\r\n      setClientID(props.clientID);\r\n      setError(null);\r\n      setIsFriend(false);\r\n      setFriendRequestID(null);\r\n      setHasFriendRequest(false);\r\n      setPendingFriendRequest(false);\r\n      // TODO Reset state\r\n\r\n    }\r\n  }, [props.clientID]);\r\n\r\n  // Finished setting client ID\r\n  useEffect(() => {\r\n  }, [clientID]);\r\n\r\n  useEffect(() => {\r\n    if (props.open && clientID) {\r\n      // alert(\"opened!\");\r\n      debugAlert(\"Fetching Client for Client Modal!\");\r\n      props.fetchClient(clientID, [\"id\", \"username\", \"gender\", \"birthday\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\", \"profileImagePaths\", \"friendRequests\"]);\r\n    }\r\n  }, [props.open]);\r\n\r\n  // Automatically update friend status\r\n  useEffect(() => {\r\n    if (props.user.friends && props.clientID) {\r\n      setIsFriend(props.user.friends.includes(props.clientID));\r\n    }\r\n    if (props.user.friendRequests && props.clientID) {\r\n      setHasFriendRequest(props.user.friendRequests.includes(props.clientID));\r\n    }\r\n    const clientFriendRequests = getAttribute(\"friendRequests\");\r\n    if (clientFriendRequests && props.user.id) {\r\n      setPendingFriendRequest(clientFriendRequests.includes(props.user.id));\r\n      if (clientFriendRequests.includes(props.user.id)) {\r\n        props.fetchUserAttributes([\"receivedInvites\"], (user) => {\r\n          if (user.receivedInvites) {\r\n            for (let i = 0; i < user.receivedInvites.length; i++) {\r\n              const inviteID = user.receivedInvites[i];\r\n              props.fetchInvite(inviteID, [\"inviteType\", \"to\"], (invite: Invite) => {\r\n                if (invite.inviteType === \"friendRequest\" && invite.to === props.clientID) {\r\n                  setFriendRequestID(inviteID);\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            console.error(\"Error in getting friend request\");\r\n          }\r\n        }, (error) => {\r\n          console.error(\"Error in getting friend request invite id.\" + error);\r\n        });\r\n      }\r\n    }\r\n  }, [props.user.friends, props.user.friendRequests, getAttribute(\"friendRequests\")]);\r\n\r\n  const handleAddFriendButton = () => {\r\n    const userID = props.user.id;\r\n    const friendID = getAttribute(\"id\");\r\n    if (userID && friendID) {\r\n      setIsActionButtonLoading(true);\r\n      InviteFunctions.createFriendRequest(userID, userID, friendID, () => {\r\n        setIsActionButtonLoading(false);\r\n      }, (error) => {\r\n        setIsActionButtonLoading(false);\r\n        log && console.log(error);\r\n        setError(error);\r\n      }, props);\r\n    }\r\n  };\r\n\r\n  // This is really long because we want to find the invite ID to delete (locally) as well.\r\n  const handleAcceptFriendRequestButton = () => {\r\n    const userID = props.user.id;\r\n    const friendID = getAttribute(\"id\");\r\n    alert(userID + \" \" + friendID + \" \" + friendRequestID);\r\n    if (userID && friendID && friendRequestID) {\r\n      setIsActionButtonLoading(true);\r\n      UserFunctions.addFriend(userID, userID, friendID, friendRequestID, () => {\r\n        setIsActionButtonLoading(false);\r\n      }, (error) => {\r\n        setIsActionButtonLoading(false);\r\n        log && console.log(error);\r\n        setError(error);\r\n      });\r\n    } else {\r\n\r\n    }\r\n  };\r\n\r\n  const handleRemoveFriendButton = () => {\r\n    const userID = props.user.id;\r\n    const friendID = getAttribute(\"id\");\r\n    if (userID && friendID) {\r\n      setIsActionButtonLoading(true);\r\n      UserFunctions.removeFriend(userID, userID, friendID, (data) => {\r\n        setIsActionButtonLoading(false);\r\n        log && console.log(\"Successfully removed \" + getAttribute(\"name\") + \" from friends list\");\r\n        props.forceFetchUserAttributes([\"friends\"]);\r\n      }, (error) => {\r\n        setIsActionButtonLoading(false);\r\n        err && console.error(error);\r\n        setError(error);\r\n      }, props);\r\n    }\r\n  };\r\n\r\n  const getCorrectFriendActionButton = () => {\r\n    if (isFriend) {\r\n      return (\r\n        <Button inverted fluid loading={isActionButtonLoading}\r\n                type='button' onClick={handleRemoveFriendButton}>\r\n          Remove Buddy\r\n        </Button>\r\n      );\r\n    } else if (pendingFriendRequest) {\r\n      return (\r\n        <Button inverted disabled fluid type='button'>\r\n          Sent Request!\r\n        </Button>\r\n      );\r\n    } else if (hasFriendRequest) {\r\n      return (\r\n        <Button inverted fluid loading={isActionButtonLoading}\r\n                type='button' onClick={handleAcceptFriendRequestButton}>\r\n          Accept Buddy Request\r\n        </Button>\r\n      );\r\n    } else {\r\n      return (\r\n        <Button inverted fluid loading={isActionButtonLoading}\r\n                type='button' onClick={handleAddFriendButton}>\r\n          Add Buddy\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  // TODO Unsure what this was doing exactly? this.state.showSuccessLabel and this.state.showModal confused me\r\n  // const createSuccessLabel = () => {\r\n  //     if(this.state.showSuccessLabel && this.state.showModal) {\r\n  //         this.setState({showSuccessLabel: false});\r\n  //     }\r\n  //     else if(this.state.showSuccessLabel) {\r\n  //         return (<Message positive>\r\n  //             <Message.Header>Success!</Message.Header>\r\n  //             <p>\r\n  //                 You just shared this User!\r\n  //             </p>\r\n  //         </Message>);\r\n  //     }\r\n  //     else {\r\n  //         return null;\r\n  //     }\r\n  // }\r\n\r\n  // TODO Put this in once it's applicable\r\n  // shareClient() {\r\n  //     this.setState({shareLoading: true});\r\n  //     //console.log(this.props.user.id + \" and \" + this.getClientAttribute(\"description\") + \" and \" + this.getClientAttribute(\"access\"));\r\n  //     PostFunctions.createShareItemPostOptional(this.props.user.id, this.props.user.id, \"\", \"public\", \"Client\", this.getClientAttribute(\"id\"), null, null, (returnValue) => {\r\n  //         console.log(\"Successfully Created Post!\");\r\n  //         console.log(JSON.stringify(returnValue));\r\n  //         this.setState({shareLoading: false});\r\n  //         this.setState({showSuccessLabel: true});\r\n  //     }, (error) => {\r\n  //         err&&console.error(error);\r\n  //         this.setState({error: \"Could not share page at this time\"});\r\n  //         this.setState({shareLoading: false});\r\n  //     });\r\n  // }\r\n\r\n  //This render function displays the user's information in a small profile page, and at the\r\n  //bottom there is an add buddy function, which sends out a buddy request (friend request).\r\n  return (\r\n    <Modal open={props.open} onClose={props.onClose}>\r\n      <Icon className='close' onClick={() => props.onClose()}/>\r\n      {loadingProp(props.info.isLoading)}\r\n      {errorMessage(error)}\r\n      <Modal.Header>{getAttribute(\"name\")}</Modal.Header>\r\n      <Modal.Content image>\r\n        <Grid columns='equal'>\r\n          <Grid.Column>\r\n            <ProfileImage userID={props.user.id}\r\n                          profileImage={getAttribute(\"profileImage\")}\r\n                          profileImages={getAttribute(\"profileImages\")}\r\n            />\r\n          </Grid.Column>\r\n          <div>\r\n            <Icon name='trophy'/>\r\n            {getAttribute(\"challengesWonLength\") + \" challenges won\"}\r\n          </div>\r\n        </Grid>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Grid columns={2}>\r\n          <Grid.Column>\r\n            <Button primary fluid onClick={() => setInviteModalOpen(true)}>Invite to Challenge</Button>\r\n            <InviteToChallengeModalProp\r\n              open={inviteModalOpen}\r\n              onOpen={() => setInviteModalOpen(true)}\r\n              onClose={() => setInviteModalOpen(false)}\r\n              friendID={getAttribute(\"id\")}\r\n            />\r\n          </Grid.Column>\r\n          <Grid.Column>\r\n            {getCorrectFriendActionButton()}\r\n          </Grid.Column>\r\n        </Grid>\r\n      </Modal.Actions>\r\n      <Modal trigger={<Button primary fluid><Icon name=\"wechat\"/> Chat </Button>}>\r\n        <MessageBoard board={getMessageBoardName([getAttribute(\"id\"), props.user.id])}/>\r\n      </Modal>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nfunction loadingProp(isLoading) {\r\n  if (isLoading) {\r\n    return (\r\n      <Dimmer active>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction errorMessage(error) {\r\n  if (error) {\r\n    return (\r\n      <Message color='red'>\r\n        <h1>Error!</h1>\r\n        <p>{error}</p>\r\n      </Message>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList, dataHandler, failureHandler) => {\r\n      dispatch(fetchClient(id, variablesList, dataHandler, failureHandler));\r\n    },\r\n    fetchInvite: (id, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchInvite(id, variableList, dataHandler, failureHandler));\r\n    },\r\n    fetchUserAttributes: (variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchUserAttributes(variableList, dataHandler, failureHandler));\r\n    },\r\n    forceFetchUserAttributes: (variablesList) => {\r\n      dispatch(forceFetchUserAttributes(variablesList));\r\n    },\r\n    addToUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(addToUserAttribute(attributeName, attributeValue));\r\n    },\r\n    addToItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(addToItemAttribute(id, attributeName, attributeValue));\r\n    },\r\n    removeFromUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(removeFromUserAttribute(attributeName, attributeValue));\r\n    },\r\n    removeFromItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(removeFromItemAttribute(id, attributeName, attributeValue));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ClientModal);\r\n","import Lambda from \"../api/Lambda\";\r\nimport UserFunctions from \"./UserFunctions\";\r\nimport {err} from \"../../Constants\";\r\n\r\nconst itemType = \"Challenge\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Challenges.\r\n */\r\nclass ChallengeFunctions {\r\n  // ======================================================================================================\r\n  // Challenge High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a bare minimum Challenge in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The User to be the owner of the Challenge.\r\n   * @param {string} endTime The ISO string indicating when the Challenge will finish.\r\n   * @param {number} capacity The maximum number of Users who can join the Challenge.\r\n   * @param {string} title The title of the Challenge to display.\r\n   * @param {string} goal The goal for what people of the Challenge need to do to win.\r\n   * @param {string} access The access string of who can see the Challenge. (\"public\" or \"private\").\r\n   * @param {string|null} restriction The restriction value of if Users need to request entry. (\"restricted\" or null).\r\n   * @param {[string]} tags The tags indicating what kind of a Challenge this will be.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallenge(fromID, owner, endTime, capacity, title, goal, access, restriction, tags, successHandler,\r\n                         failureHandler, props) {\r\n    return ChallengeFunctions.create(fromID, owner, endTime, capacity, title, goal, null, null,\r\n      null, tags, access, restriction, null, null, null, null,\r\n      null, null, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a Challenge with optional information in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The User to be the owner of the Challenge.\r\n   * @param {string} endTime The ISO string indicating when the Challenge will finish.\r\n   * @param {number} capacity The maximum number of Users who can join the Challenge.\r\n   * @param {string} title The title of the Challenge to display.\r\n   * @param {string} goal The goal for what people of the Challenge need to do to win.\r\n   * @param {string} description The description for what the Challenge will entail in detail.\r\n   * @param {number} difficulty The difficulty of this given Challenge, in terms of intensity.\r\n   * @param {[string]|null} memberIDs The IDs of the Users who will be automatically signed up for the Challenge.\r\n   * @param {[string]} tags The tags indicating what kind of a Challenge this will be.\r\n   * @param {string} access The access string of who can see the Challenge. (\"public\" or \"private\").\r\n   * @param {string|null} restriction The restriction value of if Users need to request entry. (\"restricted\" or null).\r\n   * @param {string|null} prize The prize for winning a Challenge\r\n   * @param {string|null} challengeType The type of the Challenge that will be run. (\"streak\" or null).\r\n   * @param {string|null} streakUpdateSpanType The interval of the update span. (i.e. \"daily\", \"hourly\", ...).\r\n   * @param {string|null} streakUpdateInterval How many update spans pass for a Streak update.\r\n   * @param {number|null} streakN How many submissions to do until one Streak N is counted.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeOptional(fromID, owner, endTime, capacity, title, goal, description, difficulty, memberIDs,\r\n                                 tags, access, restriction, prize, challengeType, streakUpdateSpanType,\r\n                                 streakUpdateInterval, streakN, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.create(fromID, owner, endTime, capacity, title, goal, description, difficulty, memberIDs, tags,\r\n      access, restriction, prize, null, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\r\n      (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.clearItemQueryCache) {\r\n            props.addToUserAttribute(\"ownedChallenges\", data.data);\r\n            props.addToUserAttribute(\"challenges\", data.data);\r\n            props.clearItemQueryCache(\"Challenge\");\r\n            props.clearItemQueryCache(\"Post\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a bare minimum Challenge for a Group in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The Group that this Challenge is a part of.\r\n   * @param {string} owner The User to be the owner of the Challenge.\r\n   * @param {string} endTime The ISO string indicating when the Challenge will finish.\r\n   * @param {number} capacity The maximum number of Users who can join the Challenge.\r\n   * @param {string} title The title of the Challenge to display.\r\n   * @param {string} goal The goal for what people of the Challenge need to do to win.\r\n   * @param {string} access The access string of who can see the Challenge. (\"public\" or \"private\").\r\n   * @param {string|null} restriction The restriction value of if Users need to request entry. (\"restricted\" or null).\r\n   * @param {[string]} tags The tags indicating what kind of a Challenge this will be.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupChallenge(fromID, groupID, owner, endTime, capacity, title, goal, access, restriction, tags, successHandler,\r\n                              failureHandler, props) {\r\n    return ChallengeFunctions.create(fromID, owner, endTime, capacity, title, goal, null, null, null, tags, access, restriction,\r\n      null, groupID, null, null, null, null, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a Challenge for a Group with optional information in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The Group that this Challenge is a part of.\r\n   * @param {string} owner The User to be the owner of the Challenge.\r\n   * @param {string} endTime The ISO string indicating when the Challenge will finish.\r\n   * @param {number} capacity The maximum number of Users who can join the Challenge.\r\n   * @param {string} title The title of the Challenge to display.\r\n   * @param {string} goal The goal for what people of the Challenge need to do to win.\r\n   * @param {string} description The description for what the Challenge will entail in detail.\r\n   * @param {number} difficulty The difficulty of this given Challenge, in terms of intensity.\r\n   * @param {[string]|null} memberIDs The IDs of the Users who will be automatically signed up for the Challenge.\r\n   * @param {[string]} tags The tags indicating what kind of a Challenge this will be.\r\n   * @param {string} access The access string of who can see the Challenge. (\"public\" or \"private\").\r\n   * @param {string|null} restriction The restriction value of if Users need to request entry. (\"restricted\" or null).\r\n   * @param {string|null} prize The prize for winning a Challenge\r\n   * @param {string|null} challengeType The type of the Challenge that will be run. (\"streak\" or null).\r\n   * @param {string|null} streakUpdateSpanType The interval of the update span. (i.e. \"daily\", \"hourly\", ...).\r\n   * @param {string|null} streakUpdateInterval How many update spans pass for a Streak update.\r\n   * @param {number|null} streakN How many submissions to do until one Streak N is counted.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupChallengeOptional(fromID, groupID, owner, endTime, capacity, title, goal, description, difficulty, memberIDs,\r\n                                      tags, access, restriction, prize, challengeType, streakUpdateSpanType,\r\n                                      streakUpdateInterval, streakN, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.create(fromID, owner, endTime, capacity, title, goal, description, difficulty, memberIDs, tags,\r\n      access, restriction, prize, groupID, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\r\n      (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Chooses the winner of a Challenge in order to complete the Challenge and declare the winner.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} winnerID The ID of the User to declare the winner.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateWinner(fromID, challengeID, winnerID, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"winner\", winnerID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  };\r\n\r\n  /**\r\n   * Changes the Challenge access to private so that only friends can view it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPrivate(fromID, challengeID, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"access\", \"private\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Changes the Challenge access to public so that anyone can view it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPublic(fromID, challengeID, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"access\", \"public\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Changes the Challenge restriction to invite only so that Users need to send a request to join the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToInviteOnly(fromID, challengeID, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateAdd(fromID, challengeID, \"restriction\", \"invite\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Changes the Challenge restriction to unrestricted so that Users can directly join the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {function({secretKey: string, timestamp: string, data: *})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToUnrestricted(fromID, challengeID, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"restriction\", null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a tag to the Challenge's tags.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} tag The name of the tag to add to the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addTag(fromID, challengeID, tag, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateAdd(fromID, challengeID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a tag from the Challenge's tags.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} tag The name of the tag to remove from the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeTag(fromID, challengeID, tag, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateRemove(fromID, challengeID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a member to the Challenge directly. Also finishes any invites involved with this operation.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} userID The ID of the User to join the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addMember(fromID, challengeID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.addChallenge(fromID, userID, challengeID, null, successHandler, failureHandler, props);\r\n  }\r\n\r\n  /**\r\n   * Removes a member from the Challenge directly.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} userID The ID of the User to remove from the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeMember(fromID, challengeID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.removeChallenge(fromID, userID, challengeID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the end time for a Challenge to indicate when the Challenge will be completed.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} endTime The ISO string of when the Challenge will be finished.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateEndTime(fromID, challengeID, endTime, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"endTime\", endTime, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the capacity for a Challenge to indicate the maximum number of Users that can be in a Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} capacity How many members at most can be a part of the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateCapacity(fromID, challengeID, capacity, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"capacity\", capacity, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the goal for a Challenge to indicate what the members must do to win the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} goal A description of what members must do in order to win the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateGoal(fromID, challengeID, goal, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"goal\", goal, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the prize for a Challenge to display what the User who wins will earn.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} prize What the winner will get for winning the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updatePrize(fromID, challengeID, prize, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"prize\", prize, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the title for a Challenge to display for the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} title The title of the Challenge to display as preliminary information.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateTitle(fromID, challengeID, title, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"title\", title, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the description for a Challenge to give the details of the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {string} description The detailed description for information about the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDescription(fromID, challengeID, description, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"description\", description, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the difficulty for a Challenge to indicate the intensity of the Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to update.\r\n   * @param {number} difficulty The difficulty (\"1\", \"2\", or \"3\") or the intensity of the Challenge.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDifficulty(fromID, challengeID, difficulty, successHandler, failureHandler, props) {\r\n    return ChallengeFunctions.updateSet(fromID, challengeID, \"difficulty\", difficulty, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Challenge Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates a Challenge object in the database using the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The User to be the owner of the Challenge.\r\n   * @param {string} endTime The ISO string indicating when the Challenge will finish.\r\n   * @param {number} capacity The maximum number of Users who can join the Challenge.\r\n   * @param {string} title The title of the Challenge to display.\r\n   * @param {string} goal The goal for what people of the Challenge need to do to win.\r\n   * @param {string} description The description for what the Challenge will entail in detail.\r\n   * @param {number} difficulty The difficulty of this given Challenge, in terms of intensity.\r\n   * @param {[string]|null} members The IDs of the Users who will be automatically signed up for the Challenge.\r\n   * @param {[string]} tags The tags indicating what kind of a Challenge this will be.\r\n   * @param {string} access The access string of who can see the Challenge. (\"public\" or \"private\").\r\n   * @param {string|null} restriction The restriction value of if Users need to request entry. (\"restricted\" or null).\r\n   * @param {string|null} prize The prize for winning a Challenge\r\n   * @param {string|null} group The Group the Challenge is a part of.\r\n   * @param {string|null} challengeType The type of the Challenge that will be run. (\"streak\" or null).\r\n   * @param {string|null} streakUpdateSpanType The interval of the update span. (i.e. \"daily\", \"hourly\", ...).\r\n   * @param {string|null} streakUpdateInterval How many update spans pass for a Streak update.\r\n   * @param {number|null} streakN How many submissions to do until one Streak N is counted.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, owner, endTime, capacity, title, goal, description, difficulty, members, tags, access,\r\n                restriction, prize, group, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, \"Challenge\", {\r\n      owner,\r\n      endTime,\r\n      capacity,\r\n      title,\r\n      goal,\r\n      description,\r\n      tags,\r\n      difficulty,\r\n      prize,\r\n      members,\r\n      access,\r\n      restriction,\r\n      group,\r\n      challengeType,\r\n      streakUpdateSpanType,\r\n      streakUpdateInterval,\r\n      streakN,\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, challengeID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, challengeID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, challengeID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, challengeID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, challengeID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, challengeID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a Challenge from the database and all of its dependencies.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID of the Challenge to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, challengeID, successHandler, failureHandler, props) {\r\n    return Lambda.delete(fromID, challengeID, itemType, (data) => {\r\n      if (props) {\r\n        if (props.addToItemAttribute && props.addToUserAttribute) {\r\n          props.removeFromUserAttribute(\"challenges\", challengeID);\r\n          props.removeItem(\"Challenge\", challengeID);\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n}\r\n\r\nexport default ChallengeFunctions;\r\n","import React from 'react';\r\n\r\ntype Props = {\r\n  profileImage: any,\r\n  type: string\r\n};\r\n\r\n/**\r\n * Creates the image based on the image and the type passed in as a prop.\r\n *\r\n * @param {*} image The image to display.\r\n * @param {string} type The\r\n * @return {*}\r\n */\r\nconst switchImageType = (image, type) => {\r\n  switch (type) {\r\n    case \"Small\":\r\n      return <div className=\"u-avatar u-avatar--small\" style={{backgroundImage: `url(${image})`}}/>;\r\n    case \"LargeCenter\":\r\n      return <div className=\"u-avatar u-avatar--large u-margin-bottom--neg2 u-margin-x--auto\"\r\n                  style={{backgroundImage: `url(${image})`}}/>\r\n    default:\r\n      return <div className=\"u-avatar u-avatar--small\" style={{backgroundImage: `url(${image})`}}/>;\r\n  }\r\n};\r\n\r\n/**\r\n * A styled profile image to switch through various ways of displaying and laying out a profile image.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst StyledProfileImage = (props: Props) => switchImageType(props.profileImage, props.type);\r\n\r\nexport default StyledProfileImage;","import Lambda from \"../api/Lambda\";\r\nimport UserFunctions from \"./UserFunctions\";\r\nimport {err} from \"../../Constants\";\r\n\r\nconst itemType = \"Event\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Events.\r\n */\r\nclass EventFunctions {\r\n  // ======================================================================================================\r\n  // Event High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a bare minimum Event in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEvent(fromID, owner, time, capacity, address, title, tags, access, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, null, tags, null, access, null, null, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a Event with optional information in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {string} description The detailed description for what happens at this Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {[string]} memberIDs The IDs of the Users who will be signed up for this Event automatically.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction for the ability to join without a  request. (\"restricted\" or null).\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createEventOptional(fromID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, null, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a bare minimum Event for a Challenge in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID for the Challenge that this Event will be a part of.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeEvent(fromID, challengeID, owner, time, capacity, address, title, tags, access, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, null, tags, null, access, null, challengeID, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates an Event for a Challenge with optional information in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} challengeID The ID for the Challenge that this Event will be a part of.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {string} description The detailed description for what happens at this Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {[string]} memberIDs The IDs of the Users who will be signed up for this Event automatically.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction for the ability to join without a  request. (\"restricted\" or null).\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createChallengeEventOptional(fromID, challengeID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, challengeID, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a bare minimum Event for a Group in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID for the Group that this Event will be a part of.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupEvent(fromID, groupID, owner, time, capacity, address, title, access, tags, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, null, tags, null, access, null, null, groupID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates an Event for a Group with optional information in the database with the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID for the Group that this Event will be a part of.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {string} description The detailed description for what happens at this Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {[string]} memberIDs The IDs of the Users who will be signed up for this Event automatically.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction for the ability to join without a  request. (\"restricted\" or null).\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupEventOptional(fromID, groupID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, successHandler, failureHandler, props) {\r\n    return EventFunctions.create(fromID, owner, time, capacity, address, title, description, tags, memberIDs, access, restriction, null, groupID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Updates the access of an Event to private in the database, so only certain Users allowed to see and access it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPrivate(fromID, eventID, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"access\", \"private\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the access of an Event to private in the database, making everyone allowed to see and access it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPublic(fromID, eventID, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"access\", \"public\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the restriction of an Event to Invite only, forcing Users to request to join instead of directly.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToInviteOnly(fromID, eventID, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateAdd(fromID, eventID, \"restriction\", \"invite\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the restriction of an Event to unrestricted in the database, allowing Users to directly join the Event.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToUnrestricted(fromID, eventID, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"restriction\", null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a tag to the Event's tags in the database, indicating what kind of an Event it will be.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} tag The tag to add to the Event's tags.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addTag(fromID, eventID, tag, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateAdd(fromID, eventID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a tag from the Event's tags in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} tag The tag to remove from the Event's tags.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeTag(fromID, eventID, tag, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateRemove(fromID, eventID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a User to the Event's members and the Event to the User's Events in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} userID The ID of the User to add as a member to the Event.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addMember(fromID, eventID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.addEvent(fromID, userID, eventID, null, successHandler, failureHandler, props);\r\n  }\r\n\r\n  /**\r\n   * Removes a User from an Event's members and the Event from the User's Events in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} userID The ID of the User to remove from the Event.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeMember(fromID, eventID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.removeEvent(fromID, userID, eventID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Update\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param challengeID\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  // TODO Use case for this?\r\n  // static updateChallenge(fromID, eventID, challengeID, successHandler, failureHandler) {\r\n  //     return EventFunctions.updateSet(fromID, eventID, \"challenge\", challengeID, successHandler, failureHandler);\r\n  // }\r\n\r\n  /**\r\n   * Updates the Event's address in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} address The address of where the Event is actually being held.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateAddress(fromID, eventID, address, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"address\", address, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the Event's capacity for members in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {number} capacity The max number of Users that can be in the Event's members.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateCapacity(fromID, eventID, capacity, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"capacity\", capacity, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the Event's display title in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} title The display title of the Event to set.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateTitle(fromID, eventID, title, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"title\", title, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the detail description of the Event in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to update.\r\n   * @param {string} description The detail description of the Event to set.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDescription(fromID, eventID, description, successHandler, failureHandler, props) {\r\n    return EventFunctions.updateSet(fromID, eventID, \"description\", description, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Event Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates an Event in the database using the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} owner The ID of the User who will own the Event.\r\n   * @param {string} time The ISO Interval string for when the event will be, from beginning to end.\r\n   * @param {number} capacity The number of members the Event can have at most.\r\n   * @param {string} address The address for where the Event will be held.\r\n   * @param {string} title The display title for the Event.\r\n   * @param {string} description The detailed description for what happens at this Event.\r\n   * @param {[string]} tags The list of the tags to indicate what kind of Event this will be.\r\n   * @param {[string]} members The IDs of the Users who will be signed up for this Event automatically.\r\n   * @param {string} access The access string for who is able to see and access this Event. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction for the ability to join without a  request. (\"restricted\" or null).\r\n   * @param {string} challenge The ID for the Challenge that this Event will be a part of.\r\n   * @param {string} group The ID for the Group that this Event will be a part of.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, owner, time, capacity, address, title, description, tags, members, access, restriction, challenge, group, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, itemType, {\r\n      owner,\r\n      time,\r\n      capacity,\r\n      address,\r\n      title,\r\n      description,\r\n      tags,\r\n      members,\r\n      access,\r\n      restriction,\r\n      challenge,\r\n      group\r\n    }, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, eventID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, eventID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, eventID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, eventID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, eventID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, eventID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes an Event from the database and its dependencies.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} eventID The ID of the Event to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, eventID, successHandler, failureHandler, props) {\r\n    return Lambda.delete(fromID, eventID, itemType, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n}\r\n\r\nexport default EventFunctions;\r\n","import React, {useState, Fragment} from 'react';\r\nimport type Client from \"../../types/Client\";\r\nimport {Card, Dimmer, Grid, Header} from 'semantic-ui-react';\r\nimport ClientModal from '../modals/ClientModal';\r\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\r\nimport StyledProfileImage from \"../props/StyledProfileImage\";\r\nimport ProfileImage from \"../props/ProfileImage\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\nexport const ClientCardInfo = {\r\n  fetchList: [\"id\", \"username\", \"gender\", \"birthday\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\", \"friendRequests\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  rank?: number,\r\n  client: Client\r\n};\r\n\r\n/**\r\n * This is the generic view for how a client shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst ClientCard = (props: Props) => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const getClientAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.client, attributeName);\r\n  };\r\n\r\n  if (!props.client) {\r\n    return (\r\n      <Dimmer>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  return (\r\n    // This is displays a few important pieces of information about the challenge for the feed view.\r\n    <Card fluid raised onClick={() => modalOpen || setModalOpen(true)}>\r\n      <Card.Content>\r\n        {/* If no rank */}\r\n        {!props.rank && (\r\n          <Fragment>\r\n            <Card.Header>\r\n              <ProfileImage userID={props.client.id}\r\n                            profileImage={props.client.profileImage}/>\r\n              <div className=\"u-flex u-flex-justify--center u-margin-bottom--2\">\r\n                <StyledProfileImage profileImage={getClientAttribute(\"profileImage\")} type={\"Small\"}/>\r\n              </div>\r\n            </Card.Header>\r\n            <Card.Header textAlign='center'>\r\n              {getClientAttribute(\"name\")}\r\n            </Card.Header>\r\n          </Fragment>\r\n        )}\r\n        {/* If has rank */}\r\n        {props.rank && (\r\n          <Grid divided verticalAlign='middle'>\r\n            <Grid.Row>\r\n              <Grid.Column width={4}>\r\n                <Header size='large' textAlign='center'>{props.rank}</Header>\r\n              </Grid.Column>\r\n              <Grid.Column width={12}>\r\n                <div className=\"u-flex u-flex-align--center\">\r\n                  <StyledProfileImage profileImage={getClientAttribute(\"profileImage\")} type=\"Small\"/>\r\n                </div>\r\n              </Grid.Column>\r\n              <Grid.Column textAlign='center'>\r\n                {getClientAttribute(\"name\")}\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          </Grid>\r\n        )}\r\n        <ClientModal open={modalOpen} onClose={() => {\r\n          console.log(\"closing\");\r\n          setModalOpen(false);\r\n          console.log(\"closing\")\r\n        }} clientID={props.client.id}/>\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <Card.Meta>\r\n          {getClientAttribute(\"challengesWonLength\")} challenges won\r\n        </Card.Meta>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ClientCard;\r\n","import React, {useState} from 'react';\nimport {Card, Dimmer, Icon, Button} from 'semantic-ui-react';\nimport TrainerPortalModal from '../modals/TrainerModal';\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\nimport Spinner from \"../props/Spinner\";\nimport StyledProfileImage from \"../props/StyledProfileImage\";\nimport type Trainer from \"../../types/Trainer\";\n\nexport const TrainerCardInfo = {\n  fetchList: [\"id\", \"name\", \"profileImagePath\"],\n  ifSubscribe: false\n};\n\n\ntype Props = {\n  rank?: number,\n  trainer: Trainer\n}\n\n/**\n * This is the generic view for how a trainer shows up in any feeds or lists.\n * It is used as a modal trigger in the feed.\n *\n * @param {Props} props The given props to the component.\n * @returns {*} The React JSX used to display the component.\n * @constructor\n */\nconst TrainerCard = (props: Props) => {\n  const [modalOpen, setModalOpen] = useState(false);\n  const getTrainerAttribute = (attributeName) => {\n    return getAttributeFromObject(props.trainer, attributeName);\n  };\n\n  if (!props.trainer) {\n    return (\n      <Dimmer inverted>\n        <Spinner/>\n      </Dimmer>\n    );\n  }\n  return (\n    <Card fluid raised centered onClick={() => modalOpen || setModalOpen(true)}>\n      <div className=\"u-container\">\n        <StyledProfileImage profileImage={getTrainerAttribute(\"profileImage\")} type=\"LargeCenter\"/>\n      </div>\n      <Card.Content textAlign='center'>\n        <Card.Header>\n          {getTrainerAttribute(\"name\")}\n        </Card.Header>\n        <Card.Description>\n          {/*this.getTrainerAttribute(\"title\")*/} Personal Trainer\n        </Card.Description>\n      </Card.Content>\n      <Card.Content extra textAlign='center'>\n        <Button.Group fluid>\n          <Button>\n            <Icon name='globe'/> Boston, MA</Button>\n          <Button primary>\n            Vastus Certified</Button>\n        </Button.Group>\n      </Card.Content>\n      <TrainerPortalModal open={modalOpen} onClose={() => setModalOpen(false)} trainerID={getTrainerAttribute(\"id\")}/>\n    </Card>\n  )\n};\n\nexport default TrainerCard;\n\n","import Lambda from \"../api/Lambda\";\r\nimport S3 from \"../api/S3Storage\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {err} from \"../../Constants\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Posts.\r\n */\r\nclass PostFunctions {\r\n  // ======================================================================================================\r\n  // Post High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a bare bones Post in the database using as little information as possible.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {string} access The access of the Post and who can view it. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createPost(fromID, by, description, access, successHandler, failureHandler, props) {\r\n    return PostFunctions.createPostOptional(fromID, by, description, access, null, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a normal Post in the database with a description, photos, or videos. Just a normal post.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {string} access The access of the Post and who can view it. (\"public\" or \"private\").\r\n   * @param {{}} pictures The picture map with key/value = S3Path : file, dictating the pictures to add with what key.\r\n   * @param {{}} videos The video map with key/value = S3Path : file, dictating the videos to add with what key.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createPostOptional(fromID, by, description, access, pictures, videos, successHandler, failureHandler, props) {\r\n    return PostFunctions.create(fromID, by, description, access, null, null, pictures, videos, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a bare bones share-item Post in the database using as little information as possible. Basically allows\r\n   * the User to share an item in their Post feed.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {string} access The access of the Post and who can view it. (\"public\" or \"private\").\r\n   * @param {string} itemType The type of the item to share in the Post.\r\n   * @param {string} itemID The ID of the item to share in the Post.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createShareItemPost(fromID, by, description, access, itemType, itemID, successHandler, failureHandler, props) {\r\n    return PostFunctions.createShareItemPostOptional(fromID, by, description, access, itemType, itemID, null, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a share-item Post in the database using as description, pictures, or videos. Basically allows\r\n   * the User to share an item in their Post feed.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {string} access The access of the Post and who can view it. (\"public\" or \"private\").\r\n   * @param {string} itemType The type of the item to share in the Post.\r\n   * @param {string} itemID The ID of the item to share in the Post.\r\n   * @param {{}} pictures The picture map with key/value = S3Path : file, dictating the pictures to add with what key.\r\n   * @param {{}} videos The video map with key/value = S3Path : file, dictating the videos to add with what key.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createShareItemPostOptional(fromID, by, description, access, itemType, itemID, pictures, videos, successHandler, failureHandler, props) {\r\n    return PostFunctions.create(fromID, by, description, access, itemType, itemID, pictures, videos, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Updates the description of a Post in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {string} description The description for the Post to set.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDescription(fromID, postID, description, successHandler, failureHandler, props) {\r\n    return PostFunctions.updateSet(fromID, postID, \"description\", description, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the access of the Post in the database, changing who can view and access it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {string} access The new access of the Post. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateAccess(fromID, postID, access, successHandler, failureHandler, props) {\r\n    return PostFunctions.updateSet(fromID, postID, \"access\", access, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a picture to a Post object in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {*} picture The picture file to place into S3.\r\n   * @param {string} picturePath The path of the picture to put into S3 and add to the Post.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addPicture(fromID, postID, picture, picturePath, successHandler, failureHandler, props) {\r\n    S3.putImage(picturePath, picture, () => {\r\n      PostFunctions.updateAdd(fromID, postID, \"picturePaths\", picturePath, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, (error) => {\r\n        // Try your best to correct, then give up...\r\n        S3.delete(picturePath);\r\n        failureHandler(error);\r\n      });\r\n    }, failureHandler);\r\n    if (TestHelper.ifTesting) {\r\n      return PostFunctions.updateAdd(fromID, postID, \"picturePaths\", picturePath);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a video to a Post object in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {*} video The video file to place into S3.\r\n   * @param {string} videoPath The path of the video to put into S3 and add to the Post.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addVideo(fromID, postID, video, videoPath, successHandler, failureHandler, props) {\r\n    S3.putVideo(videoPath, video, successHandler, failureHandler, () => {\r\n      PostFunctions.updateAdd(fromID, postID, \"videoPaths\", videoPath, (data) => {\r\n        if (props) {\r\n          if (props.addToUserAttribute && props.addToItemAttribute) {\r\n            // TODO\r\n            err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n          } else {\r\n            err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n          }\r\n        } else {\r\n          err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n        }\r\n        successHandler && successHandler(data);\r\n      }, (error) => {\r\n        // Try your best to correct, then give up...\r\n        S3.delete(videoPath);\r\n        failureHandler(error);\r\n      });\r\n    }, failureHandler);\r\n    if (TestHelper.ifTesting) {\r\n      return PostFunctions.updateAdd(fromID, postID, \"videoPaths\", videoPath);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes a picture from a Post in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {string} picturePath The S3 path of the picture.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removePicture(fromID, postID, picturePath, successHandler, failureHandler, props) {\r\n    return PostFunctions.updateRemove(fromID, postID, \"picturePaths\", picturePath, (data) => {\r\n      S3.delete(picturePath);\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a video from a Post in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to update.\r\n   * @param {string} videoPath The S3 path of the video.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeVideo(fromID, postID, videoPath, successHandler, failureHandler, props) {\r\n    return PostFunctions.updateRemove(fromID, postID, \"videoPaths\", videoPath, (data) => {\r\n      S3.delete(videoPath);\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Post Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates a Post in the database using the given information.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {string} access The access of the Post and who can view it. (\"public\" or \"private\").\r\n   * @param {string} postType The type of the Post to place within the database.\r\n   * @param {string} about The ID of the item that this Post is referencing.\r\n   * @param {{}} pictures The picture map with key/value = S3Path : file, dictating the pictures to add with what key.\r\n   * @param {{}} videos The video map with key/value = S3Path : file, dictating the videos to add with what key.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, by, description, access, postType, about, pictures, videos, successHandler, failureHandler) {\r\n    let picturePaths = null;\r\n    let videoPaths = null;\r\n    if (pictures) {\r\n      picturePaths = Object.keys(pictures);\r\n    }\r\n    if (videos) {\r\n      videoPaths = Object.keys(videos);\r\n    }\r\n    let numPictures = 0;\r\n    let numVideos = 0;\r\n    if (picturePaths) {\r\n      numPictures = picturePaths.length;\r\n    }\r\n    if (videoPaths) {\r\n      numVideos = videoPaths.length;\r\n    }\r\n    return Lambda.create(fromID, \"Post\", {\r\n      by,\r\n      description,\r\n      access,\r\n      postType,\r\n      about,\r\n      picturePaths,\r\n      videoPaths,\r\n    }, (data) => {\r\n      if (data) {\r\n        const id = data.data;\r\n        const numVideosAndPictures = numPictures + numVideos;\r\n        let numFinished = 0;\r\n        const finish = () => {\r\n          numFinished++;\r\n          if (numFinished >= numVideosAndPictures) {\r\n            successHandler(data);\r\n          }\r\n        };\r\n        const error = (error) => {\r\n          // TODO Delete the object and abort!\r\n          PostFunctions.delete(fromID, id);\r\n          failureHandler(error);\r\n        };\r\n        if (numVideosAndPictures === 0) {\r\n          successHandler(data);\r\n        } else {\r\n          if (pictures) {\r\n            for (const key in pictures) {\r\n              if (pictures.hasOwnProperty(key) && pictures[key]) {\r\n                S3.putImage(id + \"/\" + key, pictures[key], finish, error);\r\n              }\r\n            }\r\n          }\r\n          if (videos) {\r\n            for (const key in videos) {\r\n              if (videos.hasOwnProperty(key) && videos[key]) {\r\n                S3.putVideo(id + \"/\" + key, videos[key], finish, error);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, postID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, postID, \"Post\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, postID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, postID, \"Post\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, postID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, postID, \"Post\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a Post from the database and all of its dependencies.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} postID The ID of the Post to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, postID, successHandler, failureHandler, props) {\r\n    // TODO Delete all the S3 Paths within the Post?\r\n    return Lambda.delete(fromID, postID, \"Post\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n}\r\n\r\nexport default PostFunctions;\r\n","import React, {useState} from 'react';\r\nimport {Modal, Button, List, Dimmer} from 'semantic-ui-react';\r\nimport ClientModal from \"./ClientModal\";\r\nimport {connect} from 'react-redux';\r\nimport {fetchClient, forceFetchPost, fetchPost} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {convertFromISO} from \"../../logic/TimeHelper\";\r\nimport {forceFetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport PostFunctions from \"../../database_functions/PostFunctions\";\r\nimport {getObjectAttribute, getPostAttribute} from \"../../logic/CacheRetrievalHelper\";\r\n// import {setIsLoading} from \"../../redux_actions/infoActions\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\n// TODO Rewrite for the new design\r\n\r\ntype Props = {\r\n  postID: string,\r\n  open: boolean,\r\n  onClose: any\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param postID\r\n * @param setIsLoading\r\n */\r\nconst handleDeletePostButton = (userID, postID, setIsLoading) => {\r\n  //log&&console.log(\"Handling deleting the event\");\r\n  if (userID && postID) {\r\n    setIsLoading(true);\r\n    PostFunctions.delete(userID, postID, (data) => {\r\n      setIsLoading(false);\r\n      // this.forceUpdate(data.id);\r\n      //\r\n      // this.setState({isDeleteLoading: false, event: null, isOwned: false});\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n      // log&&console.log(JSON.stringify(error));\r\n      // this.setState({isDeleteLoading: false, error: error});\r\n    });\r\n  }\r\n};\r\n\r\n//This modal displays the challenge information and at the bottom contains a button which allows the user\r\n//to join a challenge.\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param postID\r\n * @param isOwned\r\n * @param isDeleteLoading\r\n * @param setIsLoading\r\n * @return {*}\r\n */\r\nconst createCorrectButton = (userID, postID, isOwned, isDeleteLoading, setIsLoading) => {\r\n  //log&&console.log(\"Owned: \" + isOwned + \" Joined: \" + isJoined);\r\n  // log&&console.log(ifCompleted);\r\n  if (isOwned) {\r\n    // TODO This should also link the choose winner button\r\n    return (\r\n      <div>\r\n        <Button loading={isDeleteLoading} fluid negative size=\"large\" disabled={isDeleteLoading}\r\n                onClick={() => handleDeletePostButton(userID, postID, setIsLoading)}>Delete</Button>\r\n      </div>\r\n    );\r\n  } else {\r\n    //log&&console.log(isJoinLoading);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param props\r\n * @return {*}\r\n * @constructor\r\n */\r\nconst PostDescriptionModal = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [clientModalOpen, setClientModalOpen] = useState(false);\r\n  const getAttribute = attribute => getObjectAttribute(props.postID, attribute, props.cache);\r\n  const getByAttribute = attribute => getObjectAttribute(getAttribute(\"by\"), attribute, props.cache);\r\n\r\n  if (!props.postID) {\r\n    return (\r\n      <Dimmer>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  //log&&console.log(\"Challenge Info: \" + JSON.stringify(this.state.event));\r\n  return (\r\n    <Modal closeIcon open={props.open} onClose={() => props.onClose()} style={{background: 'white', color: 'purple'}}>\r\n      <Modal.Header style={{background: 'white', color: 'purple'}}>\r\n        {convertFromISO(getAttribute(\"time_created\"))}\r\n      </Modal.Header>\r\n      <Modal.Content style={{background: 'white', color: 'purple'}}>\r\n        <Modal.Description>\r\n          <ClientModal open={clientModalOpen} onClose={() => setClientModalOpen(false)} clientID={getAttribute(\"by\")}/>\r\n          <List relaxed>\r\n            <List.Item>\r\n              <List.Icon name='user' color='purple'/>\r\n              <List.Content>\r\n                Created by <Button className=\"u-button--flat\"\r\n                                   onClick={() => clientModalOpen || setClientModalOpen(true)}>{getByAttribute(\"name\")}</Button>\r\n              </List.Content>\r\n            </List.Item>\r\n            <List.Item>\r\n              <List.Icon name='calendar' color='purple'/>\r\n              <List.Content>\r\n                {convertFromISO(getAttribute(\"time_created\"))}\r\n              </List.Content>\r\n            </List.Item>\r\n            <List.Item>\r\n              <List.Icon name='description' color='purple'/>\r\n              <List.Content>\r\n                {getAttribute(\"description\")}\r\n              </List.Content>\r\n            </List.Item>\r\n            <List.Item>\r\n              <List.Icon name='access' color='purple'/>\r\n              <List.Content>\r\n                {getAttribute(\"access\")}\r\n              </List.Content>\r\n            </List.Item>\r\n            {/*TODO This is going to be where we show the DETAIL CARD (or some equivalent)*/}\r\n            <List.Item>\r\n              <List.Icon name='users' color='purple'/>\r\n              <List.Content>\r\n                <Modal trigger={<Button className=\"u-button--flat u-padding-left--1\">About</Button>} closeIcon>\r\n                  <Modal.Content>\r\n                  </Modal.Content>\r\n                </Modal>\r\n              </List.Content>\r\n            </List.Item>\r\n          </List>\r\n          {createCorrectButton(props.user.id, props.postID, props.user.id === getPostAttribute(\"by\"), isLoading, setIsLoading)}\r\n        </Modal.Description>\r\n        {/*\r\n                    <Modal trigger={<Button primary id=\"ui center aligned\"><Icon name=\"comment outline\"/></Button>}>\r\n                        <Grid>\r\n                            <div id=\"ui center align\">\r\n\r\n                            </div>\r\n                        </Grid>\r\n                    </Modal>\r\n                    */}\r\n      </Modal.Content>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    forceFetchUserAttributes: (attributeList) => {\r\n      dispatch(forceFetchUserAttributes(attributeList));\r\n    },\r\n    fetchPost: (id, variablesList) => {\r\n      dispatch(fetchPost(id, variablesList));\r\n    },\r\n    forceFetchPost: (id, variablesList) => {\r\n      dispatch(forceFetchPost(id, variablesList));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDescriptionModal);\r\n","import React from 'react';\r\nimport ChallengeCard from \"../ChallengeCard\";\r\nimport type Challenge from \"../../../types/Challenge\";\r\n\r\nexport const ChallengeDetailCardInfo = {\r\n  fetchList: [\"id\", \"item_type\", \"title\", \"endTime\", \"ifCompleted\", \"tags\", \"difficulty\", \"time_created\", \"capacity\", \"members\", \"prize\", \"goal\", \"owner\", \"access\", \"restriction\", \"submissions\"],\r\n  ifSubscribe: false,\r\n};\r\n\r\ntype Props = {\r\n  challenge: Challenge\r\n};\r\n\r\n/**\r\n * The detail card for posts about challenges.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @return {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst ChallengeDetailCard = (props: Props) => (\r\n  <ChallengeCard challenge={props.challenge}/>\r\n);\r\n\r\nexport default ChallengeDetailCard;\r\n","// TODO These detail cards are going to be embedded into the PostCard component when it is applicable. Reference\r\n// TODO Facebook's little cards within posts when you share something for what I am imagining.\r\n\r\n// TODO This will be for a post that is sharing an existing Post with your friends!\r\n\r\nimport React, {Component} from 'react';\r\nimport {Card, Button, Icon, Image, Message, Dimmer, Loader} from 'semantic-ui-react';\r\nimport {connect} from 'react-redux';\r\nimport {fetchClient, fetchTrainer, forceFetchPost, fetchPost} from \"../../../redux/convenience/cacheItemTypeActions\";\r\nimport {forceFetchUserAttributes} from \"../../../redux/actions/userActions\";\r\nimport PostFunctions from \"../../../database_functions/PostFunctions\";\r\nimport {Player} from \"video-react\";\r\nimport {Storage} from \"aws-amplify\";\r\nimport {getItemTypeFromID} from \"../../../logic/ItemType\";\r\nimport {err} from \"../../../../Constants\";\r\n\r\ntype Props = {\r\n  postID: string\r\n};\r\n\r\n/*\r\n* Event Description Modal\r\n*\r\n* This is the event description which displays more in depth information about a challenge, and allows the user\r\n* to join the challenge.\r\n */\r\nclass PostDetailCard extends Component<Props> {\r\n  static fetchVariableList = [\"id\", \"time_created\", \"by\", \"item_type\", \"postType\", \"about\", \"description\", \"videoPaths\", \"picturePaths\"];\r\n\r\n  state = {\r\n    error: null,\r\n    // isLoading: false,\r\n    postID: null,\r\n    // event: null,\r\n    // ownerName: null,\r\n    // members: {},\r\n    clientModalOpen: false,\r\n    videoURL: null,\r\n    pictureURL: null,\r\n    isOwned: null,\r\n    isDeleteLoading: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    // this.handleJoinChallengeButton = this.handleJoinChallengeButton.bind(this);\r\n    // this.handleLeaveChallengeButton = this.handleLeaveChallengeButton.bind(this);\r\n    this.handleDeletePostButton = this.handleDeletePostButton.bind(this);\r\n    // this.handleLeave = this.handleLeave.bind(this);\r\n    // this.handleJoin = this.handleJoin.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.isOwned = this.isOwned.bind(this);\r\n    this.getDisplayMedia = this.getDisplayMedia.bind(this);\r\n    this.getPostAttribute = this.getPostAttribute.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.isJoined();\r\n    this.isOwned();\r\n    //log&&console.log(\"Mount Owned: \" + this.state.isOwned);\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    if (newProps.postID && !this.state.postID) {\r\n      this.setState({postID: newProps.postID});\r\n    }\r\n    // const by = this.getPostAttribute(\"by\");\r\n    // if (!this.props.open && newProps.open && newProps.postID && by) {\r\n    //     this.props.fetchClient(by, [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profilePicture\"]);\r\n    // }\r\n  }\r\n\r\n  getPostAttribute(attribute) {\r\n    if (this.state.postID) {\r\n      let post = this.props.cache.posts[this.state.postID];\r\n      if (post) {\r\n        if (attribute.substr(attribute.length - 6) === \"Length\") {\r\n          attribute = attribute.substr(0, attribute.length - 6);\r\n          if (post[attribute] && post[attribute].length) {\r\n            return post[attribute].length;\r\n          } else {\r\n            return 0;\r\n          }\r\n        }\r\n        return post[attribute];\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getClientAttribute(attribute) {\r\n    if (this.getPostAttribute(\"by\")) {\r\n      //console.log(this.getPostAttribute(\"by\"));\r\n      let client = this.props.cache.clients[this.getPostAttribute(\"by\")];\r\n      let trainer = this.props.cache.trainers[this.getPostAttribute(\"by\")];\r\n      //console.log(JSON.stringify(this.props.cache.trainers));\r\n      if (client) {\r\n        //console.log(\"Found the Client!\");\r\n        if (attribute.substr(attribute.length - 6) === \"Length\") {\r\n          attribute = attribute.substr(0, attribute.length - 6);\r\n          if (client[attribute] && client[attribute].length) {\r\n            return client[attribute].length;\r\n          } else {\r\n            return 0;\r\n          }\r\n        }\r\n        return client[attribute];\r\n      } else if (trainer) {\r\n        if (attribute.substr(attribute.length - 6) === \"Length\") {\r\n          attribute = attribute.substr(0, attribute.length - 6);\r\n          if (trainer[attribute] && trainer[attribute].length) {\r\n            return trainer[attribute].length;\r\n          } else {\r\n            return 0;\r\n          }\r\n        }\r\n        return client[attribute];\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getOwnerName() {\r\n    const owner = this.getPostAttribute(\"by\");\r\n    if (owner) {\r\n      if (this.props.cache.clients[owner] || this.props.cache.trainers[owner]) {\r\n        const itemType = getItemTypeFromID(owner);\r\n        //console.log(itemType);\r\n        if (itemType === \"Trainer\") {\r\n          return this.props.cache.trainers[owner].name\r\n        }\r\n        if (itemType === \"Client\") {\r\n          return this.props.cache.clients[owner].name\r\n        }\r\n      }\r\n      // else if (!this.props.info.isLoading) {\r\n      //     this.props.fetchClient(owner, [\"name\"]);\r\n      // }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  profilePicture() {\r\n    if (this.getClientAttribute(\"profileImagePaths\") !== [] || this.getClientAttribute(\"profileImagePaths\") !== null) {\r\n      /*if(!this.state.urlsSet) {\r\n          log&&console.log(JSON.stringify(\"Paths being passed in: \" + this.props.user.profileImagePaths));\r\n          this.setURLS(this.getClientAttribute(\"profileImagePaths\"));\r\n          log&&console.log(\"Setting URLS: \" + this.state.galleryURLS);\r\n          this.setState({urlsSet: true});\r\n      }*/\r\n      //console.log(this.getClientAttribute(\"profilePicture\"));\r\n      return (\r\n        <div avatar align=\"center\" className=\"ui u-avatar tiny\"\r\n             style={{backgroundImage: `url(${this.getClientAttribute(\"profileImage\")})`}}></div>\r\n      );\r\n    } else {\r\n      return (\r\n        <Dimmer inverted>\r\n          <Loader/>\r\n        </Dimmer>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDeletePostButton() {\r\n    //log&&console.log(\"Handling deleting the event\");\r\n    this.setState({isLoading: true});\r\n    PostFunctions.delete(this.props.user.id, this.getPostAttribute(\"id\"), () => {\r\n      this.forceUpdate(this.getPostAttribute(\"id\"));\r\n      // log&&console.log(JSON.stringify(data));\r\n      this.setState({isDeleteLoading: false, event: null, isOwned: false});\r\n    }, (error) => {\r\n      // log&&console.log(JSON.stringify(error));\r\n      this.setState({isDeleteLoading: false, error: error});\r\n    })\r\n  }\r\n\r\n  isOwned() {\r\n    this.setState({isOwned: this.props.user.id === this.getPostAttribute(\"by\")});\r\n  }\r\n\r\n  handleDelete() {\r\n    this.setState({isDeleteLoading: true});\r\n    this.handleDeleteEventButton();\r\n  }\r\n\r\n  openClientModal() {\r\n    this.setState({clientModalOpen: true});\r\n  }\r\n\r\n  closeClientModal() {\r\n    this.setState({clientModalOpen: false});\r\n  }\r\n\r\n  forceUpdate = (postID) => {\r\n    // console.log(\"FORCE UPDATE = \" + postID);\r\n    // this.props.removeItem(\"Post\", postID);\r\n    // this.props.forceFetchPost(postID, [\"time_created\", \"by\", \"description\", \"about\", \"access\", \"postType\", \"picturePaths\", \"videoPaths\"]);\r\n  };\r\n\r\n  displayError() {\r\n    if (this.state.error === \"Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!\") {\r\n      return (<Message negative>\r\n        <Message.Header>Sorry!</Message.Header>\r\n        <p>That challenge is already filled up!</p>\r\n      </Message>);\r\n    }\r\n\r\n  }\r\n\r\n  getDisplayMedia() {\r\n    // TODO How to properly display videos and pictures?\r\n    //console.log(\"Displaying Media\");\r\n    const pictures = this.getPostAttribute(\"picturePaths\");\r\n    const videos = this.getPostAttribute(\"videoPaths\");\r\n    //console.log(pictures + \" and \" + videos);\r\n    if ((videos && videos.length > 0) || (pictures && pictures.length > 0)) {\r\n      if (!this.state.videoURL && videos) {\r\n        //console.log(\"getting video URL\");\r\n        const video = videos[0];\r\n        Storage.get(video).then((url) => {\r\n          this.setState({videoURL: url});\r\n        }).catch((error) => {\r\n          err && console.error(error);\r\n        });\r\n      } else if (!this.state.pictureURL && pictures) {\r\n        //console.log(\"getting picture URL\");\r\n        const picture = pictures[0];\r\n        Storage.get(picture).then((url) => {\r\n          this.setState({pictureURL: url});\r\n        }).catch((error) => {\r\n          err && console.error(error);\r\n        })\r\n      } else if (this.state.videoURL && !this.state.pictureURL) {\r\n        //console.log(this.state.videoURL);\r\n        return (\r\n          <Player inline={true}>\r\n            <source src={this.state.videoURL} type=\"video/mp4\"/>\r\n          </Player>\r\n        );\r\n      } else if (!this.state.videoURL && this.state.pictureURL) {\r\n        //console.log(this.state.pictureURL);\r\n        return (\r\n          <Image src={this.state.pictureURL}/>\r\n        );\r\n      } else if ((this.state.videoURL && this.state.pictureURL)) {\r\n        //console.log(this.state.pictureURL + \"and\" + this.state.videoURL);\r\n        return (\r\n          <div>\r\n            {/*this.state.videoURL*/}\r\n            <Player inline={true}>\r\n              <source src={this.state.videoURL} type=\"video/mp4\"/>\r\n            </Player>\r\n            <Image src={this.state.pictureURL}/>\r\n          </div>\r\n        );\r\n      } else return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.canCallChecks) {\r\n      this.isOwned();\r\n      //log&&console.log(\"Render Owned: \" + this.state.isOwned);\r\n      this.setState({canCallChecks: false});\r\n      //log&&console.log(\"Members: \" + this.getChallengeAttribute(\"members\") + \"Joined?:  \" + this.state.isJoined);\r\n    }\r\n\r\n    //This modal displays the challenge information and at the bottom contains a button which allows the user\r\n    //to join a challenge.\r\n    function createCorrectButton(isOwned, deleteHandler, isDeleteLoading) {\r\n      //log&&console.log(\"Owned: \" + isOwned + \" Joined: \" + isJoined);\r\n      // log&&console.log(ifCompleted);\r\n      if (isOwned) {\r\n        // TODO This should also link the choose winner button\r\n        return (\r\n          <div>\r\n            <Button loading={isDeleteLoading} primary fluid size=\"tiny\" disabled={isDeleteLoading}\r\n                    onClick={deleteHandler}><Icon name='delete'/></Button>\r\n          </div>\r\n        );\r\n      } else {\r\n        //log&&console.log(isJoinLoading);\r\n        return null;\r\n      }\r\n    }\r\n\r\n    //log&&console.log(\"Challenge Info: \" + JSON.stringify(this.state.event));\r\n    return (\r\n      <Card>\r\n        <Card.Content>\r\n          <Card.Description>\r\n            {this.getPostAttribute(\"description\")}\r\n          </Card.Description>\r\n          {this.getDisplayMedia()}\r\n        </Card.Content>\r\n        <Card.Content extra>\r\n          {createCorrectButton(this.isOwned, this.handleDeletePostButton, this.state.isDeleteLoading)}\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    fetchTrainer: (id, variablesList) => {\r\n      dispatch(fetchTrainer(id, variablesList));\r\n    },\r\n    forceFetchUserAttributes: (attributeList) => {\r\n      dispatch(forceFetchUserAttributes(attributeList));\r\n    },\r\n    fetchPost: (id, variablesList) => {\r\n      dispatch(fetchPost(id, variablesList));\r\n    },\r\n    forceFetchPost: (id, variablesList) => {\r\n      dispatch(forceFetchPost(id, variablesList));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetailCard);","// TODO These detail cards are going to be embedded into the PostCard component when it is applicable. Reference\r\n// TODO Facebook's little cards within posts when you share something for what I am imagining.\r\n\r\n// TODO This will be for a post that is sharing a Client's profile!\r\n\r\nimport ClientCard from \"../ClientCard\";\r\n\r\nexport default ClientCard;\r\n","import React from \"react\";\r\nimport TrainerCard from \"../TrainerCard\";\r\n\r\nexport const TrainerDetailCardInfo = {\r\n  fetchList: [\"id\", \"name\", \"profileImagePath\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  trainer: {\r\n    name: string,\r\n  }\r\n};\r\n\r\n/**\r\n * The detail card for posts about trainers.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @return {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst TrainerDetailCard = (props: Props) => (\r\n  <TrainerCard trainer={props.trainer}/>\r\n);\r\n\r\nexport default TrainerDetailCard;","import Lambda from \"../api/Lambda\";\r\nimport UserFunctions from \"./UserFunctions\";\r\nimport S3 from \"../api/S3Storage\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {err} from \"../../Constants\";\r\n\r\nconst itemType = \"Group\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Groups.\r\n */\r\nclass GroupFunctions {\r\n  // ======================================================================================================\r\n  // Group High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a bare-bones Group in the database with as little information as possible.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} title The display title for the Group.\r\n   * @param {string} description The detail description for the Group.\r\n   * @param {string} access The access of who can see and access the Group. (\"public\" or \"private\").\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroup(fromID, title, description, access, successHandler, failureHandler, props) {\r\n    return GroupFunctions.create(fromID, title, description, null, null, null, null, null, access, null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Creates a Group in the database with optional information available for input.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} title The display title for the Group.\r\n   * @param {string} description The detail description for the Group.\r\n   * @param {string} motto The Group motto and overall purpose for the Group to begin with.\r\n   * @param {*} groupImage The image file to display for the Group.\r\n   * @param {[string]} owners The IDs of the Users who will own the Group.\r\n   * @param {[string]} members The IDs of the Users who will be automatically signed up for the Group.\r\n   * @param {[string]} tags The tags for the Group to indicate what kind of a Group it is.\r\n   * @param {string} access The access of who can see and access the Group. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction of if Users must request to join or not. (\"invite\" or null).\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createGroupOptional(fromID, title, description, motto, groupImage, owners, members, tags, access, restriction, successHandler, failureHandler, props) {\r\n    return GroupFunctions.create(fromID, title, description, motto, groupImage, owners, members, tags, access, restriction, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Updates the access of a Group to private in the database, so only certain Users allowed to see and access it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPrivate(fromID, groupID, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"access\", \"private\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the access of a Group to private in the database, making everyone allowed to see and access it.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToPublic(fromID, groupID, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"access\", \"public\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the restriction of a Group to Invite only, forcing Users to request to join instead of directly.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToInviteOnly(fromID, groupID, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateAdd(fromID, groupID, \"restriction\", \"invite\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the restriction of a Group to unrestricted in the database, allowing Users to directly join the Group.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateToUnrestricted(fromID, groupID, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"restriction\", null, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a tag to the Group's tags in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} tag The tag to add to the Group's tags.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addTag(fromID, groupID, tag, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateAdd(fromID, groupID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a tag from the Group's tags in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} tag The tag to remove from the Group's tags.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeTag(fromID, groupID, tag, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateRemove(fromID, groupID, \"tags\", tag, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a User to the Group and the Group to the member in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} userID The ID of the User to add to the Group.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static addMember(fromID, groupID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.addGroup(fromID, userID, groupID, null, successHandler, failureHandler, props);\r\n  }\r\n\r\n  /**\r\n   * Removes a User from the Group and the Group from the member in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} userID The ID of the User to remove from the Group's members.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeMember(fromID, groupID, userID, successHandler, failureHandler, props) {\r\n    return UserFunctions.removeGroup(fromID, userID, groupID, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the title of the Group in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} title The title to set for the Group.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateTitle(fromID, groupID, title, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"title\", title, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the Group's main motto phrase in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} motto The main motto to set for the Group.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateMotto(fromID, groupID, motto, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"motto\", motto, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the Groups' detail description in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {string} description The detail description to set for the Group.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDescription(fromID, groupID, description, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"description\", description, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Updates the Group's main profile image in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to update.\r\n   * @param {*} groupImage The image to update the Group image with.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateGroupImage(fromID, groupID, groupImage, successHandler, failureHandler, props) {\r\n    return GroupFunctions.updateSet(fromID, groupID, \"groupImagePath\", groupImage ? \"groupImage\" : null, (data) => {\r\n      if (groupImage) {\r\n        S3.putImage(\"groupImage\", groupImage, () => {\r\n          if (props) {\r\n            if (props.addToUserAttribute && props.addToItemAttribute) {\r\n              // TODO\r\n              err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n            } else {\r\n              err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n            }\r\n          } else {\r\n            err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n          }\r\n          successHandler && successHandler(data);\r\n        }, failureHandler);\r\n      }\r\n    }, failureHandler)\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Group Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates a Group in the database and adds the group image in S3 using the information given.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} title The display title for the Group.\r\n   * @param {string} description The detail description for the Group.\r\n   * @param {string} motto The Group motto and overall purpose for the Group to begin with.\r\n   * @param {*} groupImage The image file to display for the Group.\r\n   * @param {[string]} owners The IDs of the Users who will own the Group.\r\n   * @param {[string]} members The IDs of the Users who will be automatically signed up for the Group.\r\n   * @param {[string]} tags The tags for the Group to indicate what kind of a Group it is.\r\n   * @param {string} access The access of who can see and access the Group. (\"public\" or \"private\").\r\n   * @param {string} restriction The restriction of if Users must request to join or not. (\"invite\" or null).\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, title, description, motto, groupImage, owners, members, tags, access, restriction, successHandler, failureHandler) {\r\n    return Lambda.create(fromID, itemType, {\r\n      title,\r\n      description,\r\n      motto,\r\n      owners,\r\n      members,\r\n      tags,\r\n      access,\r\n      restriction,\r\n      groupImagePath: (groupImage) ? \"groupImage\" : null,\r\n    }, (data) => {\r\n      if (!TestHelper.ifTesting) {\r\n        if (groupImage) {\r\n        }\r\n        const id = data.data;\r\n        // Put in the group image\r\n        S3.putImage(id + \"/groupImage\", groupImage, successHandler, (error) => {\r\n          // Best effort to delete!\r\n          GroupFunctions.delete(fromID, id);\r\n        });\r\n      }\r\n    }, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, groupID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, groupID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, groupID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, groupID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, groupID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, groupID, itemType, attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a Group and its dependencies from the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} groupID The ID of the Group to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, groupID, successHandler, failureHandler, props) {\r\n    return Lambda.delete(fromID, groupID, itemType, (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler);\r\n  }\r\n}\r\n\r\nexport default GroupFunctions;\r\n","import React, {Component, Fragment} from 'react'\nimport {Grid, Button, Message, Image, Card, Icon, Form, Container, Header} from 'semantic-ui-react';\nimport {Storage} from 'aws-amplify';\nimport {connect} from \"react-redux\";\nimport {setError} from \"../../redux/actions/infoActions\";\nimport {\n  fetchPost,\n} from \"../../redux/convenience/cacheItemTypeActions\";\nimport PostFunctions from \"../../database_functions/PostFunctions\";\nimport {Player} from \"video-react\";\nimport {err, log} from \"../../../Constants\";\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\n\n// TODO UHHH THIS SHOULD BE HOOKS FOR SURE\n// TODO Also documentation is clearly stolen...\n// TODO Rewrite based on new Design and refactor\n\n/*\n* Create Event Prop\n*\n* This is the modal for creating events. Every input is in the form of a normal text input.\n* Inputting the time and date utilizes the Semantic-ui Calendar React library which isn't vanilla Semantic.\n */\nclass CreatePostProp extends Component {\n  state = {\n    checked: false,\n    checkedRest: false,\n    isSubmitLoading: false,\n    showModal: false,\n    submitError: null,\n    showSuccessModal: false,\n    showSuccessLabel: false,\n    showSuccessLabelTimer: 0,\n    description: \"\",\n    title: \"\",\n    access: \"private\",\n    picturesLoading: false,\n    videosLoading: false,\n    pictures: [],\n    videos: [],\n    tempPictureURLs: [],\n    tempVideoURLs: [],\n\n  };\n\n  constructor(props) {\n    super(props);\n    this.changeStateText = this.changeStateText.bind(this);\n  }\n\n  toggle = () => this.setState({checked: !this.state.checked});\n  toggleRest = () => this.setState({checkedRest: !this.state.checkedRest});\n\n  changeStateText(value) {\n    // TODO Sanitize this input\n    // TODO Check to see if this will, in fact, work.!\n    this.setState({description: value});\n    log && console.log(value);\n  }\n\n  handleAccessSwitch = () => {\n    if (this.state.access === 'public') {\n      this.setState({access: 'private'});\n    } else if (this.state.access === 'private') {\n      this.setState({access: 'public'});\n    } else {\n      err && console.error(\"Event access should be public or private\");\n    }\n  };\n\n  getLatestPicture() {\n    const pictures = {};\n    for (let i = 0; i < this.state.pictures.length; i++) {\n      pictures[\"pictures/\" + i] = this.state.pictures[i];\n    }\n    if (this.state.pictures.length > 0) {\n      return [pictures[pictures.length - 1]];\n    }\n    return null;\n  }\n\n  getVideos() {\n    const videos = {};\n    for (let i = 0; i < this.state.videos.length; i++) {\n      videos[\"videos/\" + i] = this.state.videos[i];\n    }\n    if (this.state.videos.length > 0) {\n      return videos;\n    }\n    return null;\n  }\n\n  setVideo = (event) => {\n    const index = this.state.videos.length;\n    this.state.videos.push(event.target.files[0]);\n    const path = \"/\" + this.props.user.id + \"/temp/videos/\" + index;\n    Storage.put(path, event.target.files[0], {contentType: \"video/*;image/*\"})\n      .then(() => {\n        Storage.get(path).then((url) => {\n          this.state.tempVideoURLs.push(url);\n          this.setState({});\n        }).catch((error) => {\n          err && console.error(error);\n        })\n      }).catch((error) => {\n      err && console.error(error);\n    });\n    this.setState({});\n  };\n\n  setPicture = (event) => {\n    const index = this.state.pictures.length;\n    this.state.pictures.push(event.target.files[0]);\n    alert(\"Pics: \" + this.state.pictures[0]);\n    const path = \"/\" + this.props.user.id + \"/temp/pictures/\" + index;\n    Storage.put(path, event.target.files[0], {contentType: \"video/*;image/*\"})\n      .then(() => {\n        Storage.get(path).then((url) => {\n          this.state.tempPictureURLs.push(url);\n          this.setState({});\n        }).catch((error) => {\n          err && console.error(error);\n        })\n      }).catch((error) => {\n      err && console.error(error);\n    });\n    this.setState({});\n  };\n\n  displaySubmission() {\n    if (this.state.notifySubmission) {\n      return (\n        <Message positive>\n          <Message.Header>Success!</Message.Header>\n          <p>\n            You submitted a video to the challenge!\n          </p>\n        </Message>\n      );\n    }\n  }\n\n  displayCurrentVideo() {\n    if (this.state.tempVideoURLs && this.state.tempVideoURLs.length > 0) {\n      //console.log(\"Running cur video\");\n      return (\n        <Player>\n          <source src={this.state.tempVideoURLs[0]} type=\"video/mp4\"/>\n        </Player>\n      );\n    }\n    return null;\n  }\n\n  displayCurrentImage() {\n    if (this.state.tempPictureURLs && this.state.tempPictureURLs.length > 0) {\n      //console.log(\"Running cur image\");\n      return (\n        <Image src={this.state.tempPictureURLs[0]}/>\n      );\n    }\n    return null;\n  }\n\n  displayMedia() {\n    if (this.state.tempVideoURLs && this.state.tempVideoURLs.length > 0\n      || this.state.tempPictureURLs && this.state.tempPictureURLs.length > 0) {\n      return [\n        <Icon name=\"plus\" inverted/>,\n        <Card style={{\n          maxWidth: 200, maxHeight: 200, marginBottom: '60px', marginRight: '50px',\n          marginLeft: '50px'\n        }}>\n          {this.displayCurrentVideo()}\n          {this.displayCurrentImage()}\n        </Card>\n      ];\n    } else {\n      return [\n        <Icon name=\"plus\" inverted/>,\n        <Grid columns={2}>\n          <Grid.Column>\n            <Icon name=\"camera\" inverted\n                  style={{marginTop: '10px', marginBottom: '10px', marginRight: '-10px'}}/>\n          </Grid.Column>\n          <Grid.Column>\n            <Icon name=\"record\" inverted\n                  style={{marginTop: '10px', marginBottom: '10px', marginLeft: '-10px'}}/>\n          </Grid.Column>\n        </Grid>\n      ];\n    }\n  }\n\n  handleSubmit = () => {\n\n    this.setState({isSubmitLoading: true});\n\n    // TODO Check to see if valid inputs!\n    if (this.state.description) {\n      PostFunctions.createPostOptional(this.props.user.id, this.props.user.id, this.state.description, this.state.access, this.getLatestPicture(), this.getVideos(), (returnValue) => {\n        console.log(\"Successfully Created Post!\");\n        console.log(JSON.stringify(returnValue));\n        this.setState({isSubmitLoading: false});\n        this.setState({showSuccessLabel: true})\n      }, (error) => {\n        err && console.error(error);\n        this.setState({submitError: error});\n        this.setState({isSubmitLoading: false});\n      });\n      //     PostFunctions.createPostOptional(this.props.user.id, this.props.user.id, this.state.description, this.state.access, this.getPicturePaths(), this.getVideoPaths(), (returnValue) => {\n      //         console.log(\"Successfully Created Post!\");\n      //         console.log(JSON.stringify(returnValue));\n      //         const id = returnValue.data;\n      //         let numPicturesLoaded = 0;\n      //         let picturesLength = this.state.pictures.length;\n      //         for (let i = 0; i < picturesLength; i++) {\n      //             const picturePath = id + \"/pictures/\" + i;\n      //             Storage.put(picturePath, this.state.pictures[i], { contentType: \"video/*;image/*\" }).then((result) => {\n      //                 numPicturesLoaded++;\n      //                 console.log(result);\n      //                 if (numPicturesLoaded >= picturesLength) {\n      //                     this.setState({videosLoading: false});\n      //                 }\n      //             }).catch((error) => {\n      //                 numPicturesLoaded++;\n      //                 console.log(error);\n      //                 if (numPicturesLoaded >= picturesLength) {\n      //                     this.setState({videosLoading: false});\n      //                 }\n      //             });\n      //         }\n      //         let numVideosLoaded = 0;\n      //         let videosLength = this.state.videos.length;\n      //         for (let i = 0; i < videosLength; i++) {\n      //             Storage.put(id + \"/videos/\" + i, this.state.videos[i], { contentType: \"video/*;image/*\" }).then((result) => {\n      //                 numVideosLoaded++;\n      //                 console.log(result);\n      //                 if (numVideosLoaded >= videosLength) {\n      //                     this.setState({videosLoading: false});\n      //                 }\n      //             }).catch((error) => {\n      //                 numVideosLoaded++;\n      //                 console.log(error);\n      //                 if (numVideosLoaded >= videosLength) {\n      //                     this.setState({videosLoading: false});\n      //                 }\n      //             });\n      //         }\n      //         // Storage.put(id + \"/\")\n      //         this.setState({isSubmitLoading: false});\n      //         this.setState({showSuccessLabel: true});\n      //         this.setState({showModal: false});\n      //     }, (error) => {\n      //         err&&console.error(error);\n      //         this.setState({submitError: \"*\" + JSON.stringify(error)});\n      //         this.setState({isSubmitLoading: false});\n      //     });\n      // }\n      // else {\n      //     this.setState({isSubmitLoading: false, submitError: \"All fields need to be filled out!\"});\n      // }\n    }\n  };\n\n  closeModal = () => {\n    this.setState({showModal: false})\n  };\n\n  createSuccessLabel() {\n    if (this.state.showSuccessLabel && this.state.showModal) {\n      this.setState({showSuccessLabel: false});\n    } else if (this.state.showSuccessLabel) {\n      return (<Message positive>\n        <Message.Header>Success!</Message.Header>\n        <p>\n          You just created a new post!\n        </p>\n      </Message>);\n    } else {\n      return null;\n    }\n  }\n\n  closeSuccessModal = () => {\n    this.setState({showSuccessModal: false});\n  };\n\n  displayError() {\n    if (this.state.submitError) {\n      return (<Message negative>\n        <Message.Header>Sorry!</Message.Header>\n        <p>{this.state.submitError}</p>\n      </Message>);\n    }\n  }\n\n  render() {\n\n    return (\n      <div align='center'>\n        <Button primary as=\"label\" htmlFor=\"picUpload\"\n                style={{marginTop: '10px', marginBottom: '10px'}} icon circular>\n\n          {this.displayMedia()}\n        </Button>\n        <input type=\"file\" accept=\"image/*;capture=camcorder\" id=\"picUpload\"\n               hidden={true} onChange={this.setPicture}/>\n        <div>{this.displaySubmission()}</div>\n        <div align='center'>\n          <Container align='center'>\n            <Grid centered>\n              <Grid.Row>\n                <Grid.Column width={12} className=\"segment centered\" align='center'>\n                  <Form onSubmit={this.handleSubmit}>\n                    <ReactQuill value={this.state.description}\n                                onChange={this.changeStateText}/>\n                  </Form>\n                </Grid.Column>\n              </Grid.Row>\n            </Grid>\n          </Container>\n        </div>\n        <Button loading={this.state.isSubmitLoading} style={{\n          marginBottom: '10px',\n          marginRight: '10px'\n        }}\n                disabled={this.state.isSubmitLoading} primary size=\"big\" type='button'\n                onClick={() => {\n                  this.handleSubmit()\n                }}\n                icon floated='right' circular><Icon name='send'/></Button>\n        {this.createSuccessLabel()}\n        {this.displayError()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  info: state.info,\n  cache: state.cache\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    fetchPost: (id, variablesList) => {\n      dispatch(fetchPost(id, variablesList));\n    },\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePostProp);\n\n/*\n * Quill modules to attach to editor\n * See https://quilljs.com/docs/modules/ for complete options\n */\nCreatePostProp.modules = {\n  toolbar: [\n    [{'header': '1'}, {'header': '2'}, {'font': []}],\n    [{size: []}],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n    [{'list': 'ordered'}, {'list': 'bullet'},\n      {'indent': '-1'}, {'indent': '+1'}],\n    ['link', 'image', 'video'],\n    ['clean']\n  ],\n  clipboard: {\n    // toggle to add extra line breaks when pasting HTML:\n    matchVisual: false,\n  }\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nCreatePostProp.formats = [\n  'header', 'font', 'size',\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\n  'list', 'bullet', 'indent',\n  'link', 'image', 'video'\n]","import React, {useState} from 'react'\nimport {Grid, Button, Message, Image, Modal, Form, Container, Checkbox, Header, Dropdown} from 'semantic-ui-react';\nimport {connect} from \"react-redux\";\nimport {setError} from \"../../redux/actions/infoActions\";\nimport {fetchChallenge} from \"../../redux/convenience/cacheItemTypeActions\";\nimport ChallengeFunctions from \"../../database_functions/ChallengeFunctions\";\nimport {getNowTimeString} from \"../../logic/TimeHelper\";\n\n/**\n * Handles the actual creation of the Challenge given the inputted info from the User.\n *\n * @param {string} groupID The ID of associated group with the Challenge.\n * @param {string} userID The ID of the User creating the Challenge.\n * @param {string} endDate The ISO string of the date that the Challenge ends.\n * @param {number} capacity The max number of members for the challenge.\n * @param {string} title The display title for the Challenge.\n * @param {string} goal The way for members to win the Challenge.\n * @param {[string]} tagsPressed The tags that are applied to the Challenge.\n * @param {string} access The access string for who can see the Challenge. (\"public\" or \"private\").\n * @param {string|null} restriction The restriction string for if Users can join without a request. (\"invite\" or null).\n * @param {string} prize The prize for winning the Challenge.\n * @param {string|null} challengeType The type of Challenge this will be, how to win it. (\"streak\" or null).\n * @param {string|null} streakUpdateSpanType The update span type, \"hourly\", \"daily\", ...\n * @param {string|null} streakUpdateInterval How many update span types pass for a streak cycle.\n * @param {number|null} streakN The number of submissions to do to maintain the streak.\n * @param {function(boolean)} setIsLoading Sets the loading state.\n * @param {function(error)} setError Sets the error state.\n * @param {function(true)} setShowSuccessModal Sets the showing of success modal state.\n */\nconst handleSubmit = (groupID, userID, endDate, capacity, title, goal, tagsPressed, access, restriction, prize, challengeType,\n                      streakUpdateSpanType, streakUpdateInterval, streakN, setIsLoading, setError, setShowSuccessModal) => {\n  //this.setState({isSubmitLoading: true});\n  alert(\"Current user: \" + userID);\n  alert(\"Associated Group: \" + groupID);\n  const tags = [];\n  for (const key in tagsPressed) {\n    if (tagsPressed.hasOwnProperty(key) && tagsPressed[key]) {\n      tags.push(key);\n    }\n  }\n  // TODO Check to see if valid inputs!\n  if (capacity && title && goal && tags) {\n    if (Number.isInteger(+capacity)) {\n      ChallengeFunctions.createGroupChallengeOptional(userID, groupID, userID, endDate, capacity, title, goal, null,\n        null, null, tags, access, restriction, null, challengeType, streakUpdateSpanType, streakUpdateInterval,\n        streakN, (data) => {\n          console.log(\"Successfully created a group challenge!\");\n          setIsLoading(false);\n          setShowSuccessModal(true);\n          // this.closeModal();\n          // this.setState({showSuccessLabel: true});\n          // this.setState({showModal: false});\n        }, (error) => {\n          //console.log(JSON.stringify(error));\n          setIsLoading(false);\n          setError(\"*\" + JSON.stringify(error))\n          // this.setState({submitError: \"*\" + JSON.stringify(error)});\n          // this.setState({isSubmitLoading: false});\n        });\n    } else {\n      setIsLoading(false);\n      setError(\"Capacity needs to be an integer!\");\n      // this.setState({isSubmitLoading: false, submitError: \"Capacity needs to be an integer!\"});\n    }\n  } else {\n    setIsLoading(false);\n    setError(\"All fields need to be filled out!\");\n    // this.setState({isSubmitLoading: false, submitError: \"All fields need to be filled out!\"});\n  }\n};\n\n/**\n * Shows a success label based on the given info.\n *\n * @param {boolean} show Whether the User has successfully created a Challenge or not.\n * @return {*} The React JSX to display the success label or null if not applicable.\n */\nexport const createSuccessLabel = (show) => {\n  if (show) {\n    return (<Message positive>\n      <Message.Header>Success!</Message.Header>\n      <p>\n        You just created a new Challenge!\n      </p>\n    </Message>);\n  } else {\n    return null;\n  }\n};\n\n/**\n * Displays an error message if applicable.\n *\n * @param {string} error The error message string.\n * @return {*} The React JSX to show the error message.\n */\nexport const displayError = (error) => {\n  if (error !== \"\") {\n    return (<Message negative>\n      <Message.Header>Sorry!</Message.Header>\n      <p>{error}</p>\n    </Message>);\n  }\n};\n\nexport const tasksPlural = (value) => {\n  if (value > 1) {\n    return \"tasks\";\n  } else {\n    return \"task\";\n  }\n}\n\nconst intervalsPlural = (value, setStreakUpdateSpanType, streakUpdateSpanType) => {\n  if (value > 1) {\n    return (<Dropdown fluid value={streakUpdateSpanType} selection\n                      options={[{\n                        key: \"hours\",\n                        text: \"Hours\",\n                        value: \"hourly\",\n                      }, {\n                        key: \"days\",\n                        text: \"Days\",\n                        value: \"daily\"\n                      }, {\n                        key: \"weeks\",\n                        text: \"Weeks\",\n                        value: \"weekly\"\n                      }, {\n                        key: \"months\",\n                        text: \"Months\",\n                        value: \"monthly\"\n                      }, {\n                        key: \"years\",\n                        text: \"Years\",\n                        value: \"yearly\"\n                      }]}\n                      onChange={(e, data) => {\n                        setStreakUpdateSpanType(data.value)\n                      }}/>);\n  } else {\n    return (<Dropdown fluid value={streakUpdateSpanType} selection\n                      options={[{\n                        key: \"hour\",\n                        text: \"Hour\",\n                        value: \"hourly\",\n                      }, {\n                        key: \"day\",\n                        text: \"Day\",\n                        value: \"daily\"\n                      }, {\n                        key: \"week\",\n                        text: \"Week\",\n                        value: \"weekly\"\n                      }, {\n                        key: \"month\",\n                        text: \"Month\",\n                        value: \"monthly\"\n                      }, {\n                        key: \"year\",\n                        text: \"Year\",\n                        value: \"yearly\"\n                      }]}\n                      onChange={(e, data) => {\n                        setStreakUpdateSpanType(data.value)\n                      }}/>);\n  }\n}\n\ntype Props = {\n  associatedGroup: string\n}\n\n/**\n * This is the modal for creating Challenges. Every input is in the form of a normal text input.\n * Inputting the time and date utilizes the Semantic-ui Calendar React library which isn't vanilla Semantic.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst CreateGroupChallengeProp = (props: Props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [tagsPressed, setTagsPressed] = useState({\n    HIIT: false,\n    Strength: false,\n    Performance: false,\n    Endurance: false\n  });\n  const [title, setTitle] = useState(\"\");\n  const [endTime, setEndTime] = useState(getNowTimeString());\n  const [capacity, setCapacity] = useState(25);\n  const [goal, setGoal] = useState(\"\");\n  const [prize] = useState(\"\");\n  const [restriction, setRestriction] = useState(null);\n  const [access, setAccess] = useState(\"public\");\n  const [showSuccessLabel, setShowSuccessLabel] = useState(false);\n  const [challengeType, setChallengeType] = useState(\"streak\");\n  const [streakUpdateSpanType, setStreakUpdateSpanType] = useState(null);\n  const [streakUpdateInterval, setStreakUpdateInterval] = useState(null);\n  const [streakN, setStreakN] = useState(null);\n\n  //alert(props.associatedGroup);\n\n  return (\n    <div align='center'>\n      <Header align='center' style={{marginTop: '15px'}}>Challenge Builder</Header>\n      <div align='center'>\n        <Grid align='center'>\n          <Grid.Row>\n            <Grid.Column width={8}>\n              <Button color={tagsPressed.HIIT ? \"purple\" : \"black\"} inverted={tagsPressed.HIIT}\n                      basic={!tagsPressed.HIIT}>\n                <Image size='medium' src={require('../../img/vastus-tech-icons-03.svg')}\n                       onClick={() => setTagsPressed(p => ({...p, HIIT: !p.HIIT}))}/>\n                <div style={{color: 'white'}}>HIIT</div>\n              </Button>\n            </Grid.Column>\n            <Grid.Column width={8}>\n              <Button color={tagsPressed.Strength ? \"purple\" : \"black\"} inverted={tagsPressed.Strength}\n                      basic={!tagsPressed.Strength}>\n                <Image size='medium' src={require('../../img/vastus-tech-icons-04.svg')}\n                       onClick={() => setTagsPressed(p => ({...p, Strength: !p.Strength}))}/>\n                <div style={{color: 'white'}}>Strength</div>\n              </Button>\n            </Grid.Column>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column width={8}>\n              <Button color={tagsPressed.Performance ? \"purple\" : \"black\"} inverted={tagsPressed.Performance}\n                      basic={!tagsPressed.Performance}>\n                <Image size='medium' src={require('../../img/vastus-tech-icons-02.svg')}\n                       onClick={() => setTagsPressed(p => ({...p, Performance: !p.Performance}))}/>\n                <div style={{color: 'white'}}>Performance</div>\n              </Button>\n            </Grid.Column>\n            <Grid.Column width={8}>\n              <Button color={tagsPressed.Endurance ? \"purple\" : \"black\"} inverted={tagsPressed.Endurance}\n                      basic={!tagsPressed.Endurance}>\n                <Image size='medium' src={require('../../img/vastus-tech-icons-01.svg')}\n                       onClick={() => setTagsPressed(p => ({...p, Endurance: !p.Endurance}))}/>\n                <div style={{color: 'white'}}>Endurance</div>\n              </Button>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        <Container align='center'>\n          <Grid centered>\n            <Grid.Row centered>\n              <Grid.Column>\n                <Form\n                  onSubmit={() => handleSubmit(props.associatedGroup, props.user.id, endTime, capacity, title, goal, tagsPressed,\n                    access, restriction, prize, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\n                    setIsLoading, setError, setShowSuccessLabel)}>\n                  <Form.Input fluid label=\"Title\" type=\"text\" name=\"title\" placeholder=\"Title\"\n                              onChange={value => setTitle(value.target.value)}/>\n                  <div className=\"field\">\n                    <label>End Date & Time</label>\n                    <input type=\"datetime-local\" name=\"challengeDate\" onChange={value => {\n                      setEndTime(value.target.value);\n                    }}/>\n                  </div>\n                  <Form.Input fluid label=\"Capacity\" type=\"text\" name=\"capacity\"\n                              placeholder=\"Number of allowed attendees... \"\n                              onChange={value => setCapacity(value.target.value)}/>\n                  <Form.Input fluid label=\"Goal\" type=\"text\" name=\"goal\"\n                              placeholder=\"Criteria the victor is decided on...\"\n                              onChange={value => setGoal(value.target.value)}/>\n                  {\n                    challengeType === \"streak\" ? [\n                      <div key={0} className=\"field\" align=\"center\">\n                        {/*<Header as=\"h1\">{streakUpdateInfo(streakN, streakUpdateInterval, streakUpdateSpanType)}</Header>*/}\n                        <Header as='h3'>\n                          <Grid columns={5}>\n                            <Grid.Column style={{marginTop: '15px'}} width={3}>\n                              Complete\n                            </Grid.Column>\n                            <Grid.Column>\n                              <Form.Input fluid type=\"number\" name=\"streakUpdateInterval\"\n                                          value={streakUpdateInterval ? streakUpdateInterval : \"\"}\n                                          onChange={value => value.target.value === \"\" || parseInt(value.target.value) <= 0\n                                            ? setStreakUpdateInterval(1) : setStreakUpdateInterval(value.target.value)}/>\n                            </Grid.Column>\n                            <Grid.Column style={{marginTop: '15px'}} width={3}>\n                              {tasksPlural(streakUpdateInterval)} every\n                            </Grid.Column>\n                            <Grid.Column>\n                              <Form.Input fluid type=\"number\" name=\"streakN\" value={streakN ? streakN : \"\"}\n                                          onChange={value => value.target.value === \"\" || parseInt(value.target.value) <= 0\n                                            ? setStreakN(1) : setStreakN(value.target.value)}/>\n                            </Grid.Column>\n                            <Grid.Column>\n                              {intervalsPlural(streakN, setStreakUpdateSpanType, streakUpdateSpanType)}\n                            </Grid.Column>\n                          </Grid>\n                        </Header>\n                      </div>,\n                      <div key={1} className=\"field\">\n                        <label>Update Span</label>\n                      </div>,\n                    ] : null\n                  }\n                  {/*<Form.Field>\n                                        <div className=\"field\" width={5}>\n                                            <label>Difficulty</label>\n                                            <Rating icon='star' defaultRating={1} maxRating={3} />\n                                        </div>\n                                    </Form.Field>*/}\n                  <Form.Field width={12}>\n                    <Checkbox toggle\n                              onClick={() => {\n                                setChallengeType(p => p ? null : \"streak\");\n                                setStreakN(1);\n                                setStreakUpdateInterval(1);\n                                setStreakUpdateSpanType(\"daily\")\n                              }}\n                              checked={challengeType === \"streak\"}\n                              label={challengeType ? challengeType : \"streak off\"}/>\n                  </Form.Field>\n                  <Form.Field width={12}>\n                    <Checkbox toggle\n                              onClick={() => setAccess(p => p === \"public\" ? \"private\" : \"public\")}\n                              checked={access === \"public\"}\n                              label={access}/>\n                  </Form.Field>\n                  <Form.Field width={12}>\n                    <Checkbox toggle\n                              onClick={() => setRestriction(p => p ? null : \"restricted\")}\n                              checked={restriction}\n                              label={restriction ? restriction : \"unrestricted\"}/>\n                  </Form.Field>\n                  <div>{displayError(error)}{createSuccessLabel(showSuccessLabel)}</div>\n                </Form>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Container>\n      </div>\n      <Modal.Actions>\n        <Button loading={isLoading} disabled={isLoading} primary size=\"big\" type='button'\n                onClick={() => handleSubmit(props.associatedGroup, props.user.id, endTime, capacity, title, goal, tagsPressed, access,\n                  restriction, prize, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\n                  setIsLoading, setError, setShowSuccessLabel)}>Submit</Button>\n      </Modal.Actions>\n      {createSuccessLabel(showSuccessLabel)}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  info: state.info,\n  cache: state.cache\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    fetchChallenge: (id, variablesList) => {\n      dispatch(fetchChallenge(id, variablesList));\n    },\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateGroupChallengeProp);","import {connect} from \"react-redux\";\nimport React, {Component, Fragment} from 'react';\nimport {fetchGroup, fetchClient, forceFetchGroup} from \"../../redux/convenience/cacheItemTypeActions\";\nimport {forceFetchUserAttributes} from \"../../redux/actions/userActions\";\nimport {Button, Divider, Icon, Modal, Card, Grid, Image, Message, Tab, Popup} from \"semantic-ui-react\";\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\nimport CommentScreen from \"../messaging/MessageBoard\";\nimport GroupFunctions from \"../../database_functions/GroupFunctions\";\nimport UserFunctions from \"../../database_functions/UserFunctions\";\nimport InviteFunctions from \"../../database_functions/InviteFunctions\";\n// import Logo from \"../../img/vt_new.svg\";\nimport DatabaseObjectList from \"../lists/DatabaseObjectList\";\n// import {getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\nimport CreatePostProp from \"../manager/CreatePost\";\n// import CreateChallengeProp from \"../manager/CreateChallenge\";\n// import GroupFeed from \"../feeds/DatabaseObjectFeed\";\n// import ChallengeList from \"../lists/ChallengeList\";\nimport CreateGroupChallengeProp from \"../manager/CreateGroupChallenge\";\n\n// TODO PLEASE REFACTOR THIS IS CRINGY\n// TODO Rewrite for the new design\n// TODO Refactor\n\ntype Props = {\n  open: boolean,\n  onClose: any,\n  groupID: string\n}\n\n/*\n* Group Description Modal\n*\n* This is the group description which gives access to the group chat and private group posts\n */\nclass GroupDescriptionModal extends Component<Props> {\n  state = {\n    isLoading: false,\n    isOwned: false,\n    isJoined: false,\n    isCompleted: false,\n    isRequesting: false,\n    isRestricted: false,\n    groupID: null,\n    clientModalOpen: false,\n    completeModalOpen: false,\n    submitModalOpen: false,\n    isLeaveLoading: false,\n    isDeleteLoading: false,\n    isJoinLoading: false,\n    isRequestLoading: false,\n    joinRequestSent: false,\n    canCallChecks: true,\n    deleted: false,\n    fetchedTrainer: false,\n    isEditing: false\n  };\n\n  resetState(groupID) {\n    this.setState({\n      isLoading: false,\n      isOwned: false,\n      isJoined: false,\n      isCompleted: false,\n      isRequesting: false,\n      isRestricted: false,\n      groupID: groupID,\n      clientModalOpen: false,\n      completeModalOpen: false,\n      submitModalOpen: false,\n      isLeaveLoading: false,\n      isDeleteLoading: false,\n      isJoinLoading: false,\n      isRequestLoading: false,\n      joinRequestSent: false,\n      canCallChecks: true,\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.handleDeleteGroupButton = this.handleDeleteGroupButton.bind(this);\n    this.handleLeaveGroupButton = this.handleLeaveGroupButton.bind(this);\n    this.handleJoinGroupButton = this.handleJoinGroupButton.bind(this);\n    this.handleRequestGroupButton = this.handleRequestGroupButton.bind(this);\n    this.isJoined = this.isJoined.bind(this);\n    this.isRequesting = this.isRequesting.bind(this);\n    this.isRestricted = this.isRestricted.bind(this);\n    this.isOwned = this.isOwned.bind(this);\n    this.isCompleted = this.isCompleted.bind(this);\n    this.createCorrectButton = this.createCorrectButton.bind(this);\n    this.getGroupAttribute = this.getGroupAttribute.bind(this);\n  }\n\n  componentWillReceiveProps(newProps) {\n\n    const members = this.getGroupAttribute(\"members\");\n    const owners = this.getGroupAttribute(\"owners\");\n    if (!this.props.open && newProps.open && members && members.length > 0) {\n      for (let i = 0; i < members.length; i++) {\n        const itemType = getItemTypeFromID(members[i]);\n        if (itemType === \"Client\") {\n          this.props.fetchClient(members[i], [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\"], () => {\n            this.setState({});\n          });\n        } else if (itemType === \"Trainer\") {\n          this.props.fetchTrainer(members[i], [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\"], () => {\n            this.setState({});\n          });\n        }\n        for (let i = 0; i < owners.length; i++) {\n          if (owners[i]) {\n            if (owners[i].substr(0, 2) === \"TR\") {\n              if (!this.state.fetchedTrainer) {\n                this.props.fetchTrainer(owners[i], [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"]);\n                this.setState({fetchedTrainer: true});\n              }\n            }\n          }\n        }\n      }\n\n      if (this.state.canCallChecks) {\n        this.isJoined();\n        this.isOwned();\n        this.isRequesting();\n        this.isCompleted();\n        this.isRestricted();\n        this.setState({canCallChecks: false});\n      }\n    }\n  }\n\n  handleDeleteGroupButton() {\n    //console.log(\"Handling deleting the event\");\n    this.setState({isDeleteLoading: true, isLoading: true});\n    GroupFunctions.delete(this.props.user.id, this.getGroupAttribute(\"id\"), (data) => {\n      this.forceUpdate(data.id);\n      // console.log(JSON.stringify(data));\n      this.setState({\n        isLoading: false,\n        isDeleteLoading: false,\n        event: null,\n        isOwned: false,\n        isJoined: false,\n        deleted: true\n      });\n      this.props.onClose();\n    }, (error) => {\n      // console.log(JSON.stringify(error));\n      this.setState({isLoading: false, isDeleteLoading: false, error: error, deleted: false});\n    })\n  }\n\n  handleLeaveGroupButton() {\n    //console.log(\"Handling leaving the event\");\n    this.setState({isLeaveLoading: true, isLoading: true});\n    UserFunctions.removeGroup(this.props.user.id, this.props.user.id, this.getGroupAttribute(\"id\"), (data) => {\n      this.forceUpdate(data.id);\n      //console.log(JSON.stringify(data));\n      this.setState({isLoading: false, isLeaveLoading: false, isJoined: false});\n    }, (error) => {\n      //console.log(JSON.stringify(error));\n      this.setState({isLoading: false, isLeaveLoading: false, error: error});\n    })\n  }\n\n  handleJoinGroupButton() {\n    //console.log(\"Handling joining the event\");\n    this.setState({isJoinLoading: true, isLoading: true});\n    UserFunctions.addGroup(this.props.user.id, this.props.user.id, this.getGroupAttribute(\"id\"), null,\n      () => {\n        this.forceUpdate();\n        //console.log(JSON.stringify(data));\n        this.setState({isLoading: false, isJoinLoading: false, isJoined: true});\n      }, (error) => {\n        this.setState({isLoading: false, isJoinLoading: false, error: error});\n      })\n  }\n\n  handleRequestGroupButton() {\n    this.setState({isRequestLoading: true, isLoading: true});\n    InviteFunctions.createGroupRequest(this.props.user.id, this.props.user.id, this.getGroupAttribute(\"id\"),\n      () => {\n        this.forceUpdate();\n        this.setState({isLoading: false, isRequestLoading: false, isRequesting: true});\n      }, (error) => {\n        this.setState({isLoading: false, isRequestLoading: false, error: error})\n      });\n  }\n\n  isJoined() {\n    const members = this.getGroupAttribute(\"members\");\n    if (members) {\n      const isMembers = members.includes(this.props.user.id);\n      //console.log(\"Is Members?: \" + isMembers);\n      this.setState({isJoined: isMembers});\n      //console.log(\"am I in members?: \" + members.includes(this.props.user.id));\n    } else {\n      this.setState({isJoined: false});\n    }\n  }\n\n  isRequesting() {\n    const memberRequests = this.getGroupAttribute(\"memberRequests\");\n    if (memberRequests) {\n      this.setState({isRequesting: memberRequests.includes(this.props.user.id)});\n    }\n  }\n\n  isRestricted() {\n    this.setState({isRestricted: this.getGroupAttribute(\"restriction\") === \"invite\"});\n  }\n\n  isOwned() {\n    this.setState({isOwned: this.getGroupAttribute(\"owners\").includes(this.props.user.id)});\n  }\n\n  isCompleted() {\n    this.setState({ifCompleted: this.getGroupAttribute(\"ifCompleted\") === \"true\"});\n  }\n\n  /**\n   * This function controls the state of the edit button depending on whether the page is currently being edited or not.\n   *\n   * @param {boolean} isEditing If the profile is being edited or not.\n   * @param {function(boolean)} setIsEditing {boolean} Function for setting the edit boolean.\n   * @returns {*} The React JSX used to display the component.\n   */\n  editButton(isEditing) {\n    if (!isEditing) {\n      return (\n        <Button onClick={() => {\n          this.setState({isEditing: true})\n        }} floated='left' circular icon color={'purple'}>\n          <Icon name='edit outline'/>\n        </Button>\n      );\n    } else {\n      return (\n        <div>\n          <Button onClick={() => {\n            this.setState({isEditing: false})\n          }} floated='left' circular icon color={'purple'}>\n            <Icon name='save'/>\n          </Button>\n          <Button onClick={() => {\n            this.setState({isEditing: false})\n          }} floated='left' circular icon>\n            <Icon name='cancel'/>\n          </Button>\n        </div>\n      );\n    }\n  }\n\n  /**\n   * This function controls the state of the settings button depending on whether the user owns or is joined to the\n   * challenge.\n   *\n   * @param {boolean} isOwned If the user owns the challenge or not.\n   * @param {boolean} isJoined If the user has joined the challenge or not.\n   * @returns {*} The React JSX used to display the component.\n   */\n  createCorrectSettingsButton(isOwned, isJoined, isLoading) {\n    if (isOwned) {\n      return (<Popup\n        trigger={<Button floated='right' circular icon color={'purple'}>\n          <Icon name='cog'/>\n        </Button>}\n        content={<Button loading={isLoading} fluid negative size=\"large\" disabled={isLoading}\n                         onClick={() => this.handleDeleteGroupButton()}>\n          Delete</Button>}\n        on='click'\n        position='bottom right'\n      />);\n    } else if (isJoined) {\n      return (<Popup\n        trigger={<Button floated='right' circular icon color={'purple'}>\n          <Icon name='cog'/>\n        </Button>}\n        content={<Button loading={isLoading} fluid inverted size=\"large\" disabled={isLoading}\n                         onClick={() => this.handleLeaveGroupButton()}>\n          Leave\n        </Button>}\n        on='click'\n        position='bottom right'\n      />);\n    }\n  }\n\n  createCorrectButton(panes) {\n    if (this.state.isCompleted) {\n      return (\n        <Button disabled fluid inverted size=\"large\">This Event is completed</Button>\n      );\n    } else if (this.state.isOwned) {\n      return (\n        <Fragment>\n          <Divider className='u-margin-top--4'/>\n          <Card fluid>\n            <Tab menu={{widths: 3, inverted: true}} panes={panes} className='u-challenge u-margin-top--2'/>\n          </Card>\n        </Fragment>\n      )\n    } else if (this.state.isJoined) {\n      return (\n        <Fragment>\n          <Divider className='u-margin-top--4'/>\n          <Card fluid>\n            {/*{alert(this.state.groupID)}*/}\n            <Tab menu={{widths: 3, inverted: true}} panes={panes} className='u-challenge u-margin-top--2'/>\n          </Card>\n        </Fragment>\n      )\n    } else if (this.state.isRestricted) {\n      if (this.state.isRequesting) {\n        return (\n          <div>\n            <Button inverted fluid size=\"large\" disabled={true}>Request Sent!</Button>\n          </div>\n        )\n      } else {\n        return (\n          <div><Button loading={this.state.isRequestLoading} fluid size=\"large\" disabled={this.state.isRequestLoading}\n                       onClick={this.handleRequestGroupButton}>Send Join Request</Button></div>)\n      }\n    } else {\n      //console.log(isJoinLoading);\n      return (<Button loading={this.state.isJoinLoading} fluid size=\"large\" disabled={this.state.isJoinLoading}\n                      onClick={this.handleJoinGroupButton}>Join</Button>)\n    }\n  }\n\n  getGroupAttribute(attribute) {\n    if (this.props.groupID) {\n      let group = this.props.cache.groups[this.props.groupID];\n      if (group) {\n        if (attribute.substr(attribute.length - 6) === \"Length\") {\n          attribute = attribute.substr(0, attribute.length - 6);\n          if (group[attribute] && group[attribute].length) {\n            return group[attribute].length;\n          } else {\n            return 0;\n          }\n        }\n        return group[attribute];\n      }\n    }\n    return null;\n  }\n\n  createGroupChallenge(isOwned) {\n    if (isOwned) {\n      return (\n        <Modal closeIcon trigger={<Button fluid primary>Create Challenge {\" \"}<Icon name=\"trophy\"/></Button>}>\n          <Modal.Content>\n            <CreateGroupChallengeProp associatedGroup={this.props.groupID}/>\n          </Modal.Content>\n        </Modal>\n      );\n    }\n  }\n\n  render() {\n\n    const panes = [\n      {\n        menuItem: 'Group Posts', render: () => (\n          <Tab.Pane basic className='u-border--0 u-padding--0 u-margin-top--3'>\n            <Modal trigger={<Button fluid primary>Create Post</Button>} closeIcon>\n              <CreatePostProp/>\n            </Modal>\n            <DatabaseObjectList ids={this.state.posts}\n                                noObjectsMessage=\"No posts yet!\"\n                                acceptedItemTypes={[\"Post\"]}\n              // TODO Check the sort...\n                                sortFunction={(a, b) => a.time_created.localeCompare(b.time_created)}\n            />\n          </Tab.Pane>\n        )\n      },\n      {\n        menuItem: 'Group Challenges', render: () => (\n          <Tab.Pane basic className='u-border--0 u-padding--0 u-margin-top--3'>\n            <div>{this.createGroupChallenge(this.state.isOwned)}</div>\n            <DatabaseObjectList ids={this.getGroupAttribute(\"challenges\")}\n                                noObjectsMessage={\"No challenges yet!\"}\n                                sortFuntion={(a, b) => a.endTime.localeCompare(b.endTime)}\n            />\n          </Tab.Pane>)\n      },\n      {\n        menuItem: 'Group Chat', render: () => (\n          <Tab.Pane basic className='u-border--0 u-padding--0 u-margin-top--3'>\n            <CommentScreen board={this.state.groupID}/>\n          </Tab.Pane>\n        )\n      },\n    ];\n\n    if (!this.getGroupAttribute(\"id\")) {\n      return (\n        <Modal open={this.props.open} onClose={this.props.onClose.bind(this)}>\n          <Message icon>\n            <Icon name='spinner' size=\"small\" loading/>\n            <Message.Content>\n              <Message.Header>\n                Loading...\n              </Message.Header>\n            </Message.Content>\n          </Message>\n        </Modal>\n      );\n    }\n\n    return (\n      <Modal open={this.props.open} onClose={this.props.onClose.bind(this)}>\n        <Icon className='close' onClick={() => this.props.onClose()}/>\n        <Modal.Header align='center'>{this.getGroupAttribute(\"title\")}</Modal.Header>\n        <Modal.Content>\n          {this.editButton(this.state.isEditing)}\n          {this.createCorrectSettingsButton(this.state.isOwned, this.state.isJoined, this.state.groupID, this.state.isLoading)}\n          <Grid centered>\n            <Grid.Column>\n              <Image style={{width: '300px', height: '300px', minWidth: '100px', minHeight: '100px'}}\n                     circular src={this.getGroupAttribute(\"groupImage\")} size=\"large\" centered/>\n            </Grid.Column>\n          </Grid>\n          <Grid centered>\n            <strong>{\"\\\"\"}{this.getGroupAttribute(\"motto\")}{\"\\\"\"}</strong>\n          </Grid>\n          <Modal trigger={\n            <Button floated='left' primary className=\"u-button--flat u-padding-left--1\">\n              <Icon name='users'/> Owners</Button>}>\n            <Modal.Content>\n              <DatabaseObjectList ids={this.getGroupAttribute(\"owners\")} noObjectsMessage={\"No owners yet!\"}/>\n            </Modal.Content>\n          </Modal>\n          <Modal trigger={\n            <Button floated='right' primary className=\"u-button--flat u-padding-left--1\">\n              <Icon name='users'/> Members</Button>}>\n            <Modal.Content>\n              <DatabaseObjectList ids={this.getGroupAttribute(\"members\")} noObjectsMessage={\"No members yet!\"}/>\n            </Modal.Content>\n          </Modal>\n        </Modal.Content>\n        {this.createCorrectButton(panes)}\n      </Modal>\n    );\n  }\n\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  cache: state.cache,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchClient: (id, variablesList) => {\n      dispatch(fetchClient(id, variablesList));\n    },\n    fetchTrainer: (id, variablesList) => {\n      dispatch(fetchClient(id, variablesList));\n    },\n    forceFetchUserAttributes: (attributeList) => {\n      dispatch(forceFetchUserAttributes(attributeList));\n    },\n    fetchGroup: (id, variablesList) => {\n      dispatch(fetchGroup(id, variablesList));\n    },\n    forceFetchGroup: (id, variablesList) => {\n      dispatch(forceFetchGroup(id, variablesList));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupDescriptionModal);","import React, {useState} from 'react';\nimport {Card, Dimmer, Icon, Button} from 'semantic-ui-react';\nimport {connect} from 'react-redux';\nimport GroupDescriptionModal from '../modals/GroupDescriptionModal';\n// import Logo from \"../../img/vt_new.svg\";\nimport Spinner from \"../props/Spinner\";\nimport {getAttributeFromObject, getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\nimport {\n  fetchClient,\n} from \"../../redux/convenience/cacheItemTypeActions\";\nimport type Group from \"../../types/Group\";\n\nexport const GroupCardInfo = {\n  fetchList: [\"id\", \"item_type\", \"title\", \"description\", \"groupImagePath\", \"motto\", \"restriction\", \"members\", \"owners\", \"time_created\", \"access\", \"challenges\"],\n  ifSubscribe: false\n};\n\ntype Props = {\n  group: Group\n};\n\n/**\n * This is the generic view for how a Group shows up in any feeds or lists.\n * It is used as a modal trigger in the feed.\n *\n * @param {Props} props The given props to the component.\n * @returns {*} The React JSX used to display the component.\n * @constructor\n */\nconst GroupCard = (props: Props) => {\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const getGroupAttribute = (attributeName) => {\n    return getAttributeFromObject(props.group, attributeName);\n  };\n\n  //alert(getGroupAttribute(\"owners\"));\n\n  const getOwnerAttribute = attribute => getObjectAttribute(getGroupAttribute(\"owners\")[0], attribute, props.cache);\n\n  //alert(getOwnerAttribute(\"name\"));\n\n  // if (getGroupAttribute(\"owners\")) {\n  //     // if (getGroupAttribute(\"owners\") === props.user.id) {\n  //     //     setIsOwned(true);\n  //     // }\n  //     const itemType = getItemTypeFromID(getGroupAttribute(\"owners\")[0]);\n  //     if (itemType === \"Client\") {\n  //         props.fetchClient(getGroupAttribute(\"owners\")[0], [\"id\", \"name\", \"profileImagePath\", \"profileImagePaths\"]);\n  //     }\n  //     else if (itemType === \"Trainer\") {\n  //         props.fetchTrainer(getGroupAttribute(\"owners\")[0], [\"id\", \"name\", \"profileImagePath\", \"profileImagePaths\"]);\n  //     }\n  // }\n\n  if (!props.group) {\n    //console.log(\"can't find Group\");\n    return (\n      <Dimmer>\n        <Spinner/>\n      </Dimmer>\n    );\n  }\n  return (\n    // This is displays a few important pieces of information about the Group for the feed view.\n    <Card fluid raised onClick={() => modalOpen || setModalOpen(true)}>\n      <Card.Content textAlign='center'>\n        <Card.Header textAlign='center' style={{marginBottom: '40px'}}>{getGroupAttribute(\"title\")}</Card.Header>\n        <div className=\"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4\"\n             style={{backgroundImage: `url(${getGroupAttribute(\"groupImage\")})`}}/>\n        <Card.Meta textAlign='center'>{\"\\\"\"}{getGroupAttribute(\"motto\")}{\"\\\"\"}</Card.Meta>\n        <GroupDescriptionModal open={modalOpen} onClose={() => setModalOpen(false)} groupID={getGroupAttribute(\"id\")}/>\n      </Card.Content>\n      <Card.Content extra>\n        <Card.Meta textAlign='center'>\n          <Button disabled className=\"u-button--flat u-padding-left--1\" floated='left'><Icon name='user'/>\n            {getOwnerAttribute(\"name\")}</Button>\n          <Button disabled className=\"u-button--flat u-padding-left--1\" floated='right'><Icon name='users'/>\n            {getGroupAttribute(\"membersLength\")} Members</Button>\n        </Card.Meta>\n      </Card.Content>\n    </Card>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  cache: state.cache,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchClient: (id, variablesList) => {\n      dispatch(fetchClient(id, variablesList));\n    },\n    fetchTrainer: (id, variablesList) => {\n      dispatch(fetchClient(id, variablesList));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupCard);","import React from \"react\";\r\nimport GroupCard from \"../GroupCard\";\r\nimport type Group from \"../../../types/Group\";\r\n\r\nexport const GroupDetailCardInfo = {\r\n  fetchList: [\"id\", \"item_type\", \"title\", \"description\", \"restriction\", \"members\", \"owners\", \"time_created\", \"access\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  group: Group\r\n};\r\n\r\n/**\r\n * The detail card for posts about groups.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @return {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst GroupDetailCard = (props: Props) => (\r\n  <GroupCard group={props.group}/>\r\n);\r\n\r\nexport default GroupDetailCard;","import React from \"react\";\r\nimport EventCard from \"../EventCard\";\r\n\r\nexport const EventDetailCardInfo = {\r\n  fetchList: [\"id\", \"title\", \"time\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\", \"access\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  event: Event\r\n};\r\n\r\n/**\r\n * The detail card for posts about events.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @return {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst EventDetailCard = (props: Props) => (\r\n  <EventCard event={props.event}/>\r\n);\r\n\r\nexport default EventDetailCard;\r\n\r\n","import React, {useState} from 'react';\r\nimport {Button, Card, Dimmer, Grid} from 'semantic-ui-react';\r\nimport {connect} from \"react-redux\";\r\nimport PostDescriptionModal from '../modals/PostDescriptionModal';\r\nimport {Player} from \"video-react\";\r\nimport ItemType from \"../../logic/ItemType\";\r\nimport ChallengeDetailCard, {ChallengeDetailCardInfo} from \"./post_detail_cards/ChallengeDetailCard\";\r\nimport PostDetailCard from \"./post_detail_cards/PostDetailCard\";\r\nimport ClientDetailCard from \"./post_detail_cards/ClientDetailCard\";\r\nimport TrainerDetailCard from \"./post_detail_cards/TrainerDetailCard\";\r\nimport {convertFromISO} from \"../../logic/TimeHelper\";\r\nimport ClientModal from \"../modals/ClientModal\";\r\nimport TrainerModal from \"../modals/TrainerModal\";\r\nimport {GroupDetailCardInfo} from \"./post_detail_cards/GroupDetailCard\";\r\nimport {EventDetailCardInfo} from \"./post_detail_cards/EventDetailCard\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getAttributeFromObject, getObjectAttribute, getObjectFromCache} from \"../../logic/CacheRetrievalHelper\";\r\nimport StyledProfileImage from \"../props/StyledProfileImage\";\r\nimport type Post from \"../../types/Post\";\r\n\r\nexport const PostCardInfo = {\r\n  fetchList: [\"id\", \"time_created\", \"by\", \"item_type\", \"postType\", \"about\", \"access\", \"description\", \"videoPaths\", \"picturePaths\"],\r\n  byInfo: {\r\n    clientFetchList: [\"id\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\"],\r\n    trainerFetchList: [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"],\r\n  },\r\n  aboutInfo: {\r\n    clientFetchList: [\"id\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\"],\r\n    trainerFetchList: [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"],\r\n    eventFetchList: EventDetailCardInfo.fetchList,\r\n    challengeFetchList: ChallengeDetailCardInfo.fetchList,\r\n    postFetchList: [\"id\", \"time_created\", \"by\", \"item_type\", \"postType\", \"about\", \"access\", \"description\", \"videoPaths\", \"picturePaths\"],\r\n    groupFetchList: GroupDetailCardInfo.fetchList,\r\n  },\r\n  ifSubscribe: false,\r\n};\r\n\r\ntype Props = {\r\n  post: Post\r\n  // by: {\r\n  //     id: string,\r\n  //     item_type: string,\r\n  //     name: string,\r\n  //     profileImagePath: string,\r\n  //     profileImage: string,\r\n  // },\r\n  // about?: {\r\n  //     id: string,\r\n  //     item_type: string,\r\n  //     title: string,\r\n  //     owner: string\r\n  // }\r\n};\r\n\r\n/**\r\n * Displays the profile image.\r\n *\r\n * @param {string} profileImage The url string for the profile image.\r\n * @returns {*} Displays the JSX of the profile image given.\r\n */\r\nexport const profilePicture = (profileImage) => {\r\n  if (profileImage) {\r\n    return (\r\n      <StyledProfileImage profileImage={profileImage} type=\"Small\"/>\r\n      //<div align=\"center\" className=\"ui u-avatar tiny\" style={{backgroundImage: `url(${profileImage})`, width: '50px', height: '50px'}}/>\r\n    );\r\n  } else {\r\n    return (\r\n      <Dimmer inverted>\r\n        <Spinner className=\"spinner1\"/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Displays the video or image media in the post.\r\n *\r\n * @param {[]} pictures A list of all the pictures in the post.\r\n * @param {[]} videos A list of all the videos in the post.\r\n * @returns {*} The React JSX used to display the video or image in a post.\r\n */\r\nexport const getPostMedia = (pictures, videos) => {\r\n  // TODO FIX THIS UP SO THAT IT CAN HANDLE A LOT MORE POSTS\r\n  if (videos && videos.length > 0) {\r\n    return (\r\n      <Player inline={true}>\r\n        <source src={videos[0]} type=\"video/mp4\"/>\r\n      </Player>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * Displays the correct detail card based on the type of post that it is.\r\n *\r\n * @param {string} postType The type of post that is being displayed.\r\n * @param {string} about The id of the content that the post is about.\r\n * @returns {*}\r\n */\r\nexport const getCorrectDetailCard = (postType, about) => {\r\n  if (postType && postType.length) {\r\n    //alert(\"Item Type: \" + itemType);\r\n    if (postType.substr(0, 3) === \"new\") {\r\n      // TODO This indicates that this is for a newly created Item\r\n      postType = ItemType[postType.substring(3, postType.length)];\r\n    }\r\n    //alert(itemType);\r\n    if (postType) {\r\n      //alert(\"Post Type: \" + postType);\r\n      // TODO Switch the post types\r\n      if (postType === \"Client\") {\r\n        //alert(\"Client Share Post Spotted!\");\r\n        // if(!this.state.postMessageSet) {\r\n        //     this.setState({postMessage: \"shared a user profile\", postMessageSet: true});\r\n        // }\r\n        return (<ClientDetailCard client={about}/>);\r\n      } else if (postType === \"Trainer\") {\r\n        // if(!this.state.postMessageSet) {\r\n        //     this.setState({postMessage: \"shared a trainer profile\", postMessageSet: true});\r\n        // }\r\n        return (<TrainerDetailCard trainer={about}/>);\r\n      } else if (postType === \"Gym\") {\r\n        //return (<GymDetailCard displayMedia = {this.getDisplayMedia}/>);\r\n      } else if (postType === \"Workout\") {\r\n        //return (<WorkoutDetailCard displayMedia = {this.getDisplayMedia}/>);\r\n      } else if (postType === \"Review\") {\r\n        //return (<ReviewDetailCard displayMedia = {this.getDisplayMedia}/>);\r\n      } else if (postType === \"Event\") {\r\n        //return (<EventDetailCard displayMedia = {this.getDisplayMedia}/>);\r\n      } else if (postType === \"Challenge\") {\r\n        // if(!this.state.postMessageSet) {\r\n        //     this.setState({postMessage: \"shared a challenge\", postMessageSet: true});\r\n        // }\r\n        return (<ChallengeDetailCard challenge={about}/>);\r\n      } else if (postType === \"Invite\") {\r\n        //return (<InviteDetailCard displayMedia = {this.getDisplayMedia}/>);\r\n      } else if (postType === \"Post\") {\r\n        // if(!this.state.postMessageSet) {\r\n        //     this.setState({postMessage: \"posted\", postMessageSet: true});\r\n        // }\r\n        return (<PostDetailCard postID={about.id}/>);\r\n      }\r\n    }\r\n  }\r\n  return (<div/>);\r\n};\r\n\r\n/**\r\n * The modal of the user that the post is authored by.\r\n *\r\n * @param {string} id The id of the user that created the modal.\r\n * @param {string} itemType\r\n * @param {function()} byModalOpen Opens the modal relating to the user who authored the post.\r\n * @param {function(boolean)} setByModalOpen Sets the by modal open attribute to true.\r\n * @returns {*} The React JSX user to display the proper client modal state.\r\n */\r\nexport const byModal = (id, itemType, byModalOpen, setByModalOpen) => {\r\n  if (itemType === \"Client\") {\r\n    return (\r\n      <ClientModal open={byModalOpen} onClose={() => setByModalOpen(false)} clientID={id}/>\r\n    );\r\n  } else if (itemType === \"Trainer\") {\r\n    return (\r\n      <TrainerModal open={byModalOpen} onClose={() => setByModalOpen(false)} trainerID={id}/>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * This is the generic view for how a post shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst PostCard = (props: Props) => {\r\n  const [postModalOpen, setPostModalOpen] = useState(false);\r\n  const [byModalOpen, setByModalOpen] = useState(false);\r\n\r\n  const getPostAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.post, attributeName);\r\n  };\r\n  const getByAttribute = (attributeName) => {\r\n    return getObjectAttribute(getPostAttribute(\"by\"), attributeName, props.cache);\r\n  };\r\n  // const getAboutAttribute = (attributeName) => {\r\n  //     return getAttributeFromObject(props.about, attributeName, props.cache);\r\n  // };\r\n  // const getBy = () => {\r\n  //     return getObjectFromCache(props.by, props.cache);\r\n  // };\r\n  const getAbout = () => {\r\n    return getObjectFromCache(getPostAttribute(\"about\"), props.cache);\r\n  };\r\n\r\n  if (!props.post || !getByAttribute(\"name\")) {\r\n    return (\r\n      <Card color='gold' fluid raised>\r\n        <Spinner loading={true}/>\r\n      </Card>\r\n    );\r\n  } else {\r\n    return (\r\n      <Card color='gold' fluid raised style={{border: '2px solid rebeccapurple'}}>\r\n        {/*this.getPostAttribute(\"about\")*/}\r\n        {/*{openOnce()}*/}\r\n        <Card.Content>\r\n          <div align='center'>\r\n            {getCorrectDetailCard(getPostAttribute(\"postType\"), getAbout())}\r\n          </div>\r\n          {/*this.getDisplayMedia()*/}\r\n        </Card.Content>\r\n        <Card.Content extra onClick={() => postModalOpen || setPostModalOpen(true)} style={{color: 'purple'}}>\r\n          {/*<Card.Meta textAlign = 'center'>{this.getPostAttribute(\"description\")}</Card.Meta>*/}\r\n          <div align=\"center\">\r\n            {convertFromISO(getPostAttribute(\"time_created\")).substr(5, 12)}\r\n          </div>\r\n          <PostDescriptionModal open={postModalOpen} onClose={() => setPostModalOpen(false)}\r\n                                postID={props.post.id}/>\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  cache: state.cache\r\n});\r\n\r\n// const connector: Connector<Props, any> = connect(mapStateToProps);\r\n// export default connector(PostCard);\r\nexport default connect(mapStateToProps)(PostCard);\r\n","import React, {useState} from \"react\";\r\nimport _ from \"lodash\";\r\nimport {connect} from \"react-redux\";\r\nimport {Button, Grid, Header, Image} from \"semantic-ui-react\";\r\nimport type Product from \"../../types/Product\";\r\nimport {getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\n\r\nexport const ProductCardInfo = {\r\n  fetchList: [\"id\", \"item_type\", \"expirationDate\", \"codes\", \"links\"],\r\n  dealFetchList: [\"id\", \"item_type\", \"productName\", \"productCreditPrice\", \"productImagePath\"],\r\n  sponsorFetchList: [\"id\", \"item_type\", \"name\"],\r\n  ifSubscribe: false,\r\n};\r\n\r\ntype Props = {\r\n  product: Product\r\n};\r\n\r\nconst ProductCard = (props: Props) => {\r\n  const [codesVisible, setCodesVisible] = useState(false);\r\n  const [linksVisible, setLinksVisible] = useState(false);\r\n\r\n  const getDealAttribute = attribute => getObjectAttribute(props.product.deal, attribute, props.cache);\r\n  const getSponsorAttribute = attribute => getObjectAttribute(getDealAttribute(\"sponsor\"), attribute, props.cache);\r\n\r\n  return (\r\n    <Grid rows={5}>\r\n      <Grid.Row>\r\n        Product Name: {getDealAttribute(\"productName\")}\r\n      </Grid.Row>\r\n      <Grid.Row>\r\n        Sponsor Name: {getSponsorAttribute(\"name\")}\r\n      </Grid.Row>\r\n      <Grid.Row>\r\n        <Image src={getDealAttribute(\"productImage\")}/>\r\n      </Grid.Row>\r\n      <Grid.Row>\r\n        Product Credit Price: {getDealAttribute(\"productCreditPrice\")}\r\n      </Grid.Row>\r\n      <Grid.Row>\r\n        ID: {props.product.id}\r\n        <Button primary onClick={() => setCodesVisible(p => !p)}>{codesVisible ? \"Hide Codes\" : \"View Codes\"}</Button>\r\n        {codesVisible ?\r\n          <Grid rows={props.product.codes.length}>\r\n            {_.times(props.product.codes.length, (i) => (\r\n              <Grid.Row>\r\n                <Header>{props.product.codes[i]}</Header>\r\n              </Grid.Row>\r\n            ))}\r\n          </Grid>\r\n          : null}\r\n        <Button primary onClick={() => setLinksVisible(p => !p)}>{linksVisible ? \"Hide Links\" : \"View Links\"}</Button>\r\n        {linksVisible ?\r\n          <Grid rows={props.product.links.length}>\r\n            {_.times(props.product.links.length, (i) => (\r\n              <Grid.Row>\r\n                <Header>{props.product.links[i]}</Header>\r\n              </Grid.Row>\r\n            ))}\r\n          </Grid>\r\n          : null}\r\n      </Grid.Row>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  cache: state.cache,\r\n  user: state.user,\r\n});\r\n\r\nexport default connect(mapStateToProps)(ProductCard);\r\n","import React, {useEffect} from 'react'\r\nimport {Modal, Icon, Grid, Header} from 'semantic-ui-react'\r\nimport {connect} from \"react-redux\";\r\nimport {getSponsorAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport ProfileImage from \"../props/ProfileImage\";\r\nimport {fetchSponsor, fetchDeal} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport type Sponsor from \"../../types/Sponsor\";\r\nimport {DealCardInfo} from \"../cards/DealCard\";\r\nimport DatabaseObjectList from \"../lists/DatabaseObjectList\";\r\n\r\n// TODO Rewrite for the new design\r\n\r\nconst SponsorModalInfo = {\r\n  fetchList: [],\r\n  ifSubscribe: false,\r\n};\r\n\r\ntype Props = {\r\n  sponsorID: string,\r\n  open: boolean,\r\n  onClose: () => void\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param props\r\n * @return {*}\r\n * @constructor\r\n */\r\nconst SponsorModal = (props: Props) => {\r\n  const getAttribute = (attribute) => getSponsorAttribute(props.sponsorID, attribute, props.cache);\r\n\r\n  useEffect(() => {\r\n    if (props.open && props.sponsorID) {\r\n      props.fetchSponsor(props.sponsorID, SponsorModalInfo.fetchList, (sponsor: Sponsor) => {\r\n        if (sponsor) {\r\n          if (sponsor.deals) {\r\n            for (let i = 0; i < sponsor.deals.length; i++) {\r\n              props.fetchDeal(sponsor.deals[i], DealCardInfo.fetchList);\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          // TODO Deleted\r\n        }\r\n      });\r\n    }\r\n  }, [props.open]);\r\n\r\n  return (\r\n    <Modal open={props.open} onClose={props.onClose} style={{background: 'white'}}>\r\n      <Icon className='close' onClick={props.onClose}/>\r\n      <Modal.Header style={{color: 'purple', marginTop: '20px', marginBottom: '20px', background: 'white'}}>\r\n        <Grid centered>{getAttribute(\"name\")}</Grid></Modal.Header>\r\n      <Modal.Content style={{background: 'white'}}>\r\n        <ProfileImage userID={props.sponsorID}\r\n                      profileImage={getAttribute(\"profileImage\")}\r\n                      profileImages={getAttribute(\"profileImages\")}\r\n                      editable={false}\r\n                      style={{marginTop: '20px'}}\r\n        />\r\n        <Header style={{background: 'white', color: 'purple'}}>Deals:</Header>\r\n        <DatabaseObjectList ids={getAttribute(\"deals\")}\r\n                            noObjectsMessage=\"No Deals Yet...\"\r\n                            acceptedItemTypes={[\"Deal\"]}\r\n                            randomized={false}\r\n        />\r\n      </Modal.Content>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchSponsor: (id, variableList, successHandler, failureHandler) => {\r\n      dispatch(fetchSponsor(id, variableList, successHandler, failureHandler));\r\n    },\r\n    fetchDeal: (id, variableList, successHandler, failureHandler) => {\r\n      dispatch(fetchDeal(id, variableList, successHandler, failureHandler));\r\n    },\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SponsorModal);\r\n","import React, {useState, useEffect} from 'react';\r\nimport {Icon, Modal, Button, Grid, Message, Image} from 'semantic-ui-react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n  fetchDeal, fetchSponsor,\r\n} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport {getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {log} from \"../../../Constants\";\r\nimport type Deal from \"../../types/Deal\";\r\nimport SponsorModal from \"./SponsorModal\";\r\nimport Logo from \"../../img/VC_logo.svg\";\r\nimport Breakpoint from 'react-socks';\r\n\r\nexport const DealModalInfo = {\r\n  // Contains everything that is referenced here\r\n  fetchList: [\"id\", \"item_type\"],\r\n  sponsorFetchList: [\"id\", \"item_type\"],\r\n  ifSubscribe: true,\r\n};\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any,\r\n  dealID: string\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param isDeleted\r\n * @return {*}\r\n */\r\nexport const deletedMessage = (isDeleted) => {\r\n  if (isDeleted) {\r\n    return (<Message negative>\r\n      <Message.Header>This Deal is Deleted!</Message.Header>\r\n    </Message>);\r\n  }\r\n};\r\n\r\nconst userBuyDeal = (userID, dealID, setIsLoading, setError, props) => {\r\n  if (userID && dealID) {\r\n    setIsLoading(true);\r\n    UserFunctions.buyDeal(userID, userID, dealID, () => {\r\n      log&&console.log(\"Successfully bought deal\");\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      setIsLoading(false);\r\n      setError(error);\r\n    }, props);\r\n  }\r\n  else {\r\n\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param props\r\n * @return {*}\r\n * @constructor\r\n */\r\nconst DealModal = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [sponsorModalOpen, setSponsorModalOpen] = useState(false);\r\n  const [deleted, setDeleted] = useState(false);\r\n\r\n  const getDealAttribute = attribute => getObjectAttribute(props.dealID, attribute, props.cache);\r\n  const getSponsorAttribute = attribute => getObjectAttribute(getDealAttribute(\"sponsor\"), attribute, props.cache);\r\n\r\n  useEffect(() => {\r\n    if (props.dealID) {\r\n      // TODO Reset state?\r\n      setIsLoading(false);\r\n      setError(null);\r\n      setSponsorModalOpen(false);\r\n      setDeleted(false);\r\n      props.fetchDeal(props.dealID, DealModalInfo.fetchList, (deal: Deal) => {\r\n        if (deal) {\r\n          if (deal.sponsor) {\r\n            props.fetchSponsor(deal.sponsor, DealModalInfo.sponsorFetchList);\r\n          }\r\n        } else {\r\n          setDeleted(true);\r\n        }\r\n      }, (error) => {\r\n\r\n      });\r\n    }\r\n    return () => {\r\n      // TODO clean up\r\n    }\r\n  }, [props.dealID]);\r\n\r\n  //This modal displays the challenge information and at the bottom contains a button which allows the user\r\n  //to join a challenge.\r\n  if (!getDealAttribute(\"id\")) {\r\n    return (\r\n      <Modal open={props.open} onClose={() => props.onClose()} closeIcon>\r\n        <Spinner loading={true}/>\r\n      </Modal>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <Breakpoint medium up>\r\n      <Modal open={props.open} onClose={() => props.onClose()} closeIcon style={{background: '#FFFFFF'}}>\r\n        <Icon className='close' onClick={() => props.onClose()}/>\r\n        <Modal.Header align='center' style={{marginTop: '10px', background: 'white', color: 'purple'}}>\r\n          <div>\r\n            {getDealAttribute(\"productName\")}\r\n          </div>\r\n        </Modal.Header>\r\n        <Modal.Content align='center' style={{background: 'white'}}>\r\n          <Grid centered columns='equal'>\r\n            <Grid.Column floated='left'>\r\n                <Image src={Logo} size='mini' style={{color: 'purple', marginLeft: '30px'}}/>\r\n                <Grid style={{color: 'purple', marginLeft: '70px', marginTop: '-30px'}}>\r\n                  {getDealAttribute(\"productCreditPrice\") / 1000}\r\n                </Grid>\r\n            </Grid.Column>\r\n            <Grid.Column style={{color: 'purple'}}>\r\n                <SponsorModal open={sponsorModalOpen}\r\n                              onClose={() => setSponsorModalOpen(false)}\r\n                              sponsorID={ getSponsorAttribute(\"id\")}\r\n                />\r\n                <Image src={getDealAttribute(\"productImage\")} centered\r\n                       style={{width: \"200px\", height: \"200px\"}} rounded/>\r\n            </Grid.Column>\r\n            <Grid.Column style={{color: 'purple'}}>\r\n                <Icon.Group size='large' style={{marginLeft: '80px'}} onClick={() => setSponsorModalOpen(true)}>\r\n                    <Icon name='user circle outline' color='purple'/>\r\n                </Icon.Group>\r\n                <div onClick={() => setSponsorModalOpen(true)}\r\n                     style={{marginLeft: '110px', marginTop: '-20px'}}>{getSponsorAttribute(\"name\")}</div>\r\n            </Grid.Column>\r\n          </Grid>\r\n          <Modal.Description>\r\n            <Button primary onClick={() => userBuyDeal(props.user.id, getDealAttribute(\"id\"), setIsLoading,\r\n              setError, props)} style={{marginTop: '10px'}}>Buy</Button>\r\n          </Modal.Description>\r\n          <Spinner loading={isLoading}/>\r\n        </Modal.Content>\r\n      </Modal>\r\n      {deletedMessage(deleted)}\r\n      </Breakpoint>\r\n\r\n      <Breakpoint medium down>\r\n          <Modal open={props.open} onClose={() => props.onClose()} closeIcon style={{background: '#FFFFFF'}}>\r\n              <Icon className='close' onClick={() => props.onClose()}/>\r\n              <Modal.Header align='center' style={{marginTop: '10px', background: 'white', color: 'purple'}}>\r\n                  <div>\r\n                      {getDealAttribute(\"productName\")}\r\n                  </div>\r\n              </Modal.Header>\r\n              <Modal.Content align='center' style={{background: 'white'}}>\r\n                  <Grid centered columns='equal'>\r\n                      <Grid.Column floated='left'>\r\n                          <Image src={Logo} size='mini'/>\r\n                          <Grid style={{color: 'purple', marginLeft: '40px', marginTop: '-30px'}}>\r\n                              {getDealAttribute(\"productCreditPrice\") / 1000}\r\n                          </Grid>\r\n                      </Grid.Column>\r\n                      <Grid.Column style={{color: 'purple'}}>\r\n                          <SponsorModal open={sponsorModalOpen}\r\n                                        onClose={() => setSponsorModalOpen(false)}\r\n                                        sponsorID={ getSponsorAttribute(\"id\")}\r\n                          />\r\n                          <Image src={getDealAttribute(\"productImage\")} centered\r\n                                 style={{width: \"200px\", height: \"200px\"}} rounded/>\r\n                      </Grid.Column>\r\n                      <Grid.Column style={{color: 'purple'}}>\r\n                          <Icon.Group size='large' style={{marginLeft: '5px'}} onClick={() => setSponsorModalOpen(true)}>\r\n                              <Icon name='user circle outline' color='purple'/>\r\n                          </Icon.Group>\r\n                          <div onClick={() => setSponsorModalOpen(true)}\r\n                               style={{marginLeft: '35px', marginTop: '-20px'}}>{getSponsorAttribute(\"name\")}</div>\r\n                      </Grid.Column>\r\n                  </Grid>\r\n                  <Modal.Description>\r\n                      <Button primary onClick={() => userBuyDeal(props.user.id, getDealAttribute(\"id\"), setIsLoading,\r\n                          setError, props)} style={{marginTop: '10px'}}>Buy</Button>\r\n                  </Modal.Description>\r\n                  <Spinner loading={isLoading}/>\r\n              </Modal.Content>\r\n          </Modal>\r\n          {deletedMessage(deleted)}\r\n      </Breakpoint>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchDeal: (id, variablesList, successHandler, failureHandler) => {\r\n      dispatch(fetchDeal(id, variablesList, successHandler, failureHandler));\r\n    },\r\n    fetchSponsor: (id, variablesList, successHandler, failureHandler) => {\r\n      dispatch(fetchSponsor(id, variablesList, successHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DealModal);\r\n\r\n","import React, {useState, Fragment} from 'react';\nimport type Deal from \"../../types/Deal\";\nimport {Card, Dimmer, Grid, Header, Image} from 'semantic-ui-react';\nimport DealModal from '../modals/DealModal';\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\nimport StyledProfileImage from \"../props/StyledProfileImage\";\nimport Spinner from \"../props/Spinner\";\nimport Logo from \"../../img/VC_logo.svg\"\nimport Breakpoint from 'react-socks';\n\nexport const DealCardInfo = {\n  fetchList: [\"id\", \"sponsor\", \"productImagePath\", \"productImagePaths\", \"productName\", \"productCreditPrice\"],\n  ifSubscribe: false\n};\n\ntype Props = {\n  rank?: number,\n  deal: Deal\n};\n\n/**\n * This is the generic view for how a deal shows up in any feeds or lists.\n * It is used as a modal trigger in the feed.\n *\n * @param {Props} props The given props to the component.\n * @returns {*} The React JSX used to display the component.\n * @constructor\n */\nconst DealCard = (props: Props) => {\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const getDealAttribute = (attributeName) => {\n    return getAttributeFromObject(props.deal, attributeName);\n  };\n\n  if (!props.deal) {\n    return (\n      <Dimmer>\n        <Spinner/>\n      </Dimmer>\n    );\n  }\n  return [\n    <Breakpoint medium up>\n      <Card fluid raised onClick={() => modalOpen || setModalOpen(true)} style={{border: '2px solid rebeccapurple'}}>\n        <Card.Content>\n          <Fragment>\n            <Card.Header>\n              <Grid columns={3}>\n                <Grid.Column width={1}>\n                  <Image src={Logo} size='mini'/>\n                </Grid.Column>\n                <Grid.Column style={{color: 'purple', marginTop: '5px', marginLeft: '-25px'}}>\n                  {getDealAttribute(\"productCreditPrice\") / 1000}\n                </Grid.Column>\n                <Grid.Column style={{color: 'purple'}} width={1} floated='right'>\n                  {getDealAttribute(\"productsLength\") === 0 ?\n                    \"Sold Out!\" :\n                    `Only ${getDealAttribute(\"productsLength\")} left!`\n                  }\n                </Grid.Column>\n              </Grid>\n              <div className=\"u-flex u-flex-justify--center u-margin-bottom--2\">\n                <StyledProfileImage profileImage={getDealAttribute(\"productImage\")} type={\"Large\"}/>\n              </div>\n            </Card.Header>\n            <Card.Header textAlign='center' style={{color: 'purple'}}>\n              {getDealAttribute(\"productName\")}\n            </Card.Header>\n          </Fragment>\n        </Card.Content>\n        <DealModal open={modalOpen} onClose={() => setModalOpen(false)} dealID={props.deal.id}/>\n      </Card>\n    </Breakpoint>,\n    <Breakpoint medium down>\n      <Card fluid raised onClick={() => modalOpen || setModalOpen(true)} style={{border: '2px solid rebeccapurple'}}>\n          <Card.Content>\n              <Fragment>\n                  <Card.Header>\n                      <Grid columns={3}>\n                          <Grid.Column style={{marginLeft: '0px', width: '70px'}} floated='left'>\n                              <Image src={Logo} size='mini'/>\n                          </Grid.Column>\n                          <Grid.Column style={{color: 'purple', marginTop: '5px', marginLeft: '-150px'}}>\n                              {getDealAttribute(\"productCreditPrice\") / 1000}\n                          </Grid.Column>\n                          <Grid.Column style={{color: 'purple', marginRight: '40px', marginTop: '-5px'}} width={1} floated='right'>\n                              {getDealAttribute(\"productsLength\") === 0 ?\n                                  \"Sold Out!\" :\n                                  `Only ${getDealAttribute(\"productsLength\")} left!`\n                              }\n                          </Grid.Column>\n                      </Grid>\n                      <div className=\"u-flex u-flex-justify--center u-margin-bottom--2\">\n                          <StyledProfileImage profileImage={getDealAttribute(\"productImage\")} type={\"Large\"}/>\n                      </div>\n                  </Card.Header>\n                  <Card.Header textAlign='center' style={{color: 'purple'}}>\n                      {getDealAttribute(\"productName\")}\n                  </Card.Header>\n              </Fragment>\n          </Card.Content>\n          <DealModal open={modalOpen} onClose={() => setModalOpen(false)} dealID={props.deal.id}/>\n      </Card>\n    </Breakpoint>\n  ];\n};\n\nexport default DealCard;\n","import React, {useState, useEffect} from 'react'\r\nimport _ from \"lodash\";\r\nimport {List, Message, Visibility} from 'semantic-ui-react';\r\nimport ClientCard, {ClientCardInfo} from \"../cards/ClientCard\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchItems} from \"../../redux/actions/cacheActions\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getItemTypeFromID, switchReturnItemType} from \"../../logic/ItemType\";\r\nimport TrainerCard, {TrainerCardInfo} from \"../cards/TrainerCard\";\r\nimport EventCard from \"../cards/EventCard\";\r\nimport ChallengeCard, {ChallengeCardInfo} from \"../cards/ChallengeCard\";\r\nimport PostCard, {PostCardInfo} from \"../cards/PostCard\";\r\nimport {shuffleArray} from \"../../logic/ArrayHelper\";\r\nimport ProductCard, {ProductCardInfo} from \"../cards/ProductCard\";\r\nimport DealCard, {DealCardInfo} from \"../cards/DealCard\";\r\n\r\n// TODO Don't use this with items that have depth to what they need to grab!!! (i.e Posts with \"about\" info)\r\n\r\nconst numFetch = 5;\r\n\r\ntype Props = {\r\n  ids: [string],\r\n  noObjectsMessage: string,\r\n  acceptedItemTypes?: [string],\r\n  randomized: boolean,\r\n  sortFunction?: any\r\n}\r\n\r\n/**\r\n * Gets the components for the objects in the list.\r\n *\r\n * @param {[{id: string, item_type: string}]} objects The database objects to display in the list.\r\n * @return {[*]} The list of React JSX components to display in the list.\r\n */\r\nexport const objectComponents = (objects) => {\r\n  const components = [];\r\n  for (const key in objects) {\r\n    if (objects.hasOwnProperty(key)) {\r\n      components.push(\r\n        <List.Item key={key}>\r\n          {getObjectComponent(parseInt(key) + 1, objects[key])}\r\n        </List.Item>\r\n      );\r\n    }\r\n  }\r\n  return components;\r\n};\r\n\r\n/**\r\n * Gets a single database object component card for the list.\r\n *\r\n * @param {number} key The key of the object in the list (order / rank).\r\n * @param {{id: string, item_type: string}} object The object to display as the component.\r\n * @return {*} The React JSX to display the object component.\r\n */\r\nexport const getObjectComponent = (key, object) => (\r\n  switchReturnItemType(object.item_type,\r\n    <ClientCard rank={key} client={object}/>,\r\n    <TrainerCard rank={key} trainer={object}/>,\r\n    null,\r\n    null,\r\n    null,\r\n    <EventCard event={object}/>,\r\n    <ChallengeCard challenge={object}/>,\r\n    null,\r\n    <PostCard postID={object.id}/>,\r\n    null, null, null, null, null, null,\r\n    <DealCard deal={object}/>,\r\n    <ProductCard product={object}/>, \"Get database object list object not implemented for item type\"\r\n  )\r\n);\r\n\r\n/**\r\n * Uses the Batch Fetch system of GraphQL to fetch more objects of the same type together.\r\n *\r\n * @param {{}} typeIDs The map of item types to the ids for that type.\r\n * @param {{}} typeHiddenIDIndex The map of item types to the hidden id index for that type.\r\n * @param {boolean} randomized If the list should be randomized.\r\n * @param {function(*, *)} sortFunction Function to sort the list by, if applicable.\r\n * @param {function([{}])} setVisibleObjects Sets the visible objects state.\r\n * @param {function({})} setTypeHiddenIDIndex Sets the hidden id indexes for each type.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(string, string, [string], number, number, function([{}]), function(error))} fetchItems Cache redux\r\n * function to perform a batch fetch operation.\r\n */\r\nexport const batchFetchMoreObjects = (typeIDs, typeHiddenIDIndex, randomized, sortFunction, setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, fetchItems) => {\r\n  setIsLoading(true);\r\n  for (const itemType in typeIDs) {\r\n    if (typeIDs.hasOwnProperty(itemType)) {\r\n      const ids = typeIDs[itemType];\r\n      const hiddenIndex = typeHiddenIDIndex[itemType];\r\n      const variableList = switchReturnItemType(itemType,\r\n        ClientCardInfo.fetchList,\r\n        TrainerCardInfo.fetchList,\r\n        null, null, null,\r\n        EventCard.fetchVariableList,\r\n        ChallengeCardInfo.fetchList,\r\n        null,\r\n        PostCardInfo.fetchList,\r\n        null, null, null, null, null,\r\n        null, DealCardInfo.fetchList, ProductCardInfo.fetchList,\r\n        \"Get variable list from item type not implemented!\");\r\n      // alert(ids.length + \" vs \" + hiddenIndex);\r\n      if (ids.length > hiddenIndex) {\r\n        fetchItems(ids, itemType, variableList, hiddenIndex, numFetch, (items) => {\r\n          for (let i = 0; i < items.length; i++) {\r\n            addObject(items[i], randomized, sortFunction, setVisibleObjects, setIsLoading);\r\n          }\r\n          setTypeHiddenIDIndex(p => ({\r\n            ...p,\r\n            [itemType]: p[itemType] + items.length\r\n          }));\r\n          setIsLoading(false);\r\n        });\r\n      } else {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Adds a single object to the visible objects and randomizes or sorts the list.\r\n *\r\n * @param {{id: string, item_type: string}} object The object to add to the visible objects.\r\n * @param {boolean} randomized Whether the list should be randomized or not.\r\n * @param {function(*, *)} sortFunction Function to sort the list by, if applicable.\r\n * @param {function([{}])} setVisibleObjects Sets the visible objects state.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nexport const addObject = (object, randomized, sortFunction, setVisibleObjects, setIsLoading) => {\r\n  if (object && object.id) {\r\n    setVisibleObjects(p => {\r\n      const a = [...p, object];\r\n      if (randomized) {\r\n        shuffleArray(a)\r\n      }\r\n      if (sortFunction) {\r\n        a.sort(sortFunction);\r\n      }\r\n      return a;\r\n    });\r\n    setIsLoading(false);\r\n  }\r\n};\r\n\r\n/**\r\n * Displays a list of objects from the database, using the props\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst DatabaseObjectList = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [ids, setIDs] = useState(null);\r\n  const [typeIDs, setTypeIDs] = useState({});\r\n  const [typeHiddenIDIndex, setTypeHiddenIDIndex] = useState({});\r\n  const [visibleObjects, setVisibleObjects] = useState([]);\r\n  // const [visibleComponents, setVisibleComponents] = useState({});\r\n  // const [hiddenIDIndex, setHiddenIDIndex] = useState(0);\r\n\r\n  // Component will receive new props\r\n  useEffect(() => {\r\n    if (props.ids && JSON.stringify(props.ids) !== JSON.stringify(ids)) {\r\n      setIsLoading(true);\r\n      const idsTemp = [...props.ids];\r\n      if (props.randomized === true) {\r\n        shuffleArray(idsTemp)\r\n      }\r\n      setIDs(idsTemp);\r\n      // setHiddenIDIndex(0);\r\n      setVisibleObjects([]);\r\n      const typeIDsTemp = {};\r\n      const typeHiddenIDIndexTemp = {};\r\n      for (let i = 0; i < idsTemp.length; i++) {\r\n        const id = idsTemp[i];\r\n        const itemType = getItemTypeFromID(id);\r\n        if (!props.acceptedItemTypes || props.acceptedItemTypes.includes(itemType)) {\r\n          if (typeIDsTemp[itemType]) {\r\n            typeIDsTemp[itemType].push(id);\r\n          } else {\r\n            typeIDsTemp[itemType] = [id];\r\n            typeHiddenIDIndexTemp[itemType] = 0;\r\n          }\r\n        }\r\n      }\r\n      setTypeIDs(typeIDsTemp);\r\n      setTypeHiddenIDIndex(typeHiddenIDIndexTemp);\r\n      batchFetchMoreObjects(typeIDsTemp, typeHiddenIDIndexTemp, props.randomized === true, props.sortFunction,\r\n        setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, props.fetchItems);\r\n    }\r\n  }, [props.ids]);\r\n\r\n  const handleVisibilityUpdate = (e, {calculations}) => {\r\n    // alert(\"hey\");\r\n    // alert(JSON.stringify(calculations));\r\n    console.log(calculations);\r\n    if (calculations.bottomVisible) {\r\n      // alert(\"Bottom visible\");\r\n      // alert(JSON.stringify(typeHiddenIDIndex));\r\n      batchFetchMoreObjects(typeIDs, typeHiddenIDIndex, props.randomized === true, props.sortFunction,\r\n        setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, props.fetchItems);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    )\r\n  }\r\n  if (ids && ids.length > 0) {\r\n    return (\r\n      <div>\r\n        <Visibility onUpdate={_.debounce(handleVisibilityUpdate, 250)}>\r\n          <List relaxed verticalAlign=\"middle\">\r\n            {objectComponents(visibleObjects)}\r\n            <Spinner loading={\r\n              (() => {\r\n                for (const itemType in typeIDs) {\r\n                  if (typeIDs.hasOwnProperty(itemType)) {\r\n                    if (typeIDs[itemType].length !== typeHiddenIDIndex[itemType]) {\r\n                      return true\r\n                    }\r\n                  }\r\n                }\r\n                return false;\r\n              })()\r\n            }/>\r\n          </List>\r\n        </Visibility>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <Message style={{background: 'white', color: 'purple'}}>{props.noObjectsMessage}</Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchItems: (ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) => {\r\n      dispatch(fetchItems(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nDatabaseObjectList.defaultProps = {\r\n  randomized: false\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DatabaseObjectList);\r\n","import React, {Component} from 'react';\r\nimport {Modal, Button, List, Grid, Message} from 'semantic-ui-react';\r\nimport ClientModal from \"./ClientModal\";\r\nimport {connect} from 'react-redux';\r\nimport {fetchClient, forceFetchEvent, fetchEvent} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport CompleteChallengeModal from \"../manager/CompleteChallengeModal\";\r\nimport {forceFetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport EventFunctions from \"../../database_functions/EventFunctions\";\r\nimport DatabaseObjectList from \"../lists/DatabaseObjectList\";\r\n\r\n// TODO Rewrite for the new design\r\n// TODO Refactor\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any,\r\n  eventID: string\r\n}\r\n\r\n/*\r\n* Event Description Modal\r\n*\r\n* This is the event description which displays more in depth information about a challenge, and allows the user\r\n* to join the challenge.\r\n */\r\nclass EventDescriptionModal extends Component<Props> {\r\n  state = {\r\n    // isLoading: false,\r\n    isOwned: false,\r\n    isJoined: false,\r\n    eventID: null,\r\n    // event: null,\r\n    // ownerName: null,\r\n    // members: {},\r\n    clientModalOpen: false,\r\n    completeModalOpen: false,\r\n    isLeaveLoading: false,\r\n    isDeleteLoading: false,\r\n    isJoinLoading: false,\r\n    joinRequestSent: false,\r\n    canCallChecks: true,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleJoinEventButton = this.handleJoinEventButton.bind(this);\r\n    this.handleLeaveEventButton = this.handleLeaveEventButton.bind(this);\r\n    this.handleDeleteEventButton = this.handleDeleteEventButton.bind(this);\r\n    this.handleLeave = this.handleLeave.bind(this);\r\n    this.handleJoin = this.handleJoin.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n    this.isOwned = this.isOwned.bind(this);\r\n    this.isJoined = this.isJoined.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.isJoined();\r\n    this.isOwned();\r\n    //console.log(\"Mount Owned: \" + this.state.isOwned);\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    if (newProps.eventID && !this.state.eventID) {\r\n      this.setState({eventID: newProps.eventID})\r\n    }\r\n    const members = this.getEventAttribute(\"members\");\r\n    if (!this.props.open && newProps.open && newProps.eventID && members && members.length > 0) {\r\n      for (let i = 0; i < members.length; i++) {\r\n        this.props.fetchClient(members[i], [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\"]);\r\n      }\r\n    }\r\n  }\r\n\r\n  getEventAttribute(attribute) {\r\n    if (this.state.eventID) {\r\n      let event = this.props.cache.events[this.state.eventID];\r\n      if (event) {\r\n        if (attribute.substr(attribute.length - 6) === \"Length\") {\r\n          attribute = attribute.substr(0, attribute.length - 6);\r\n          if (event[attribute] && event[attribute].length) {\r\n            return event[attribute].length;\r\n          } else {\r\n            return 0;\r\n          }\r\n        }\r\n        return event[attribute];\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getOwnerName() {\r\n    const owner = this.getEventAttribute(\"owner\");\r\n    if (owner) {\r\n      if (this.props.cache.clients[owner]) {\r\n        return this.props.cache.clients[owner].name\r\n      }\r\n      // else if (!this.props.info.isLoading) {\r\n      //     this.props.fetchClient(owner, [\"name\"]);\r\n      // }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  convertFromISO(dateTime) {\r\n    let dateTimeString = String(dateTime);\r\n    let dateTimes = String(dateTimeString).split(\"_\");\r\n    let fromDateString = dateTimes[0];\r\n    let toDateString = dateTimes[1];\r\n    let fromDate = new Date(fromDateString);\r\n    let toDate = new Date(toDateString);\r\n\r\n    // Display time logic came from stack over flow\r\n    // https://stackoverflow.com/a/18537115\r\n    const fromHourInt = fromDate.getHours() > 12 ? fromDate.getHours() - 12 : fromDate.getHours();\r\n    const toHourInt = toDate.getHours() > 12 ? toDate.getHours() - 12 : toDate.getHours();\r\n    const fromminutes = fromDate.getMinutes().toString().length === 1 ? '0' + fromDate.getMinutes() : fromDate.getMinutes(),\r\n      fromhours = fromHourInt.toString().length === 1 ? '0' + fromHourInt : fromHourInt,\r\n      fromampm = fromDate.getHours() >= 12 ? 'PM' : 'AM',\r\n      tominutes = toDate.getMinutes().toString().length === 1 ? '0' + toDate.getMinutes() : toDate.getMinutes(),\r\n      tohours = toHourInt.toString().length === 1 ? '0' + toHourInt : toHourInt,\r\n      toampm = toDate.getHours() >= 12 ? 'PM' : 'AM',\r\n      months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n      days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n    return days[fromDate.getDay()] + ', ' + months[fromDate.getMonth()] + ' ' + fromDate.getDate() + ', ' + fromDate.getFullYear() + ' ' + fromhours + ':' + fromminutes + fromampm + ' - ' + tohours + ':' + tominutes + toampm;\r\n  }\r\n\r\n  handleDeleteEventButton() {\r\n    //console.log(\"Handling deleting the event\");\r\n    this.setState({isLoading: true});\r\n    EventFunctions.delete(this.props.user.id, this.getEventAttribute(\"id\"), (data) => {\r\n      this.forceUpdate(data.id);\r\n      // console.log(JSON.stringify(data));\r\n      this.setState({isDeleteLoading: false, event: null, isOwned: false, isJoined: false});\r\n    }, (error) => {\r\n      // console.log(JSON.stringify(error));\r\n      this.setState({isDeleteLoading: false, error: error});\r\n    })\r\n  }\r\n\r\n  handleLeaveEventButton() {\r\n    //console.log(\"Handling leaving the event\");\r\n    this.setState({isLoading: true});\r\n    UserFunctions.removeEvent(this.props.user.id, this.props.user.id, this.getEventAttribute(\"id\"), (data) => {\r\n      this.forceUpdate(data.id);\r\n      //console.log(JSON.stringify(data));\r\n      this.setState({isLeaveLoading: false, isJoined: false});\r\n    }, (error) => {\r\n      //console.log(JSON.stringify(error));\r\n      this.setState({isLeaveLoading: false, error: error});\r\n    })\r\n  }\r\n\r\n  handleJoinEventButton() {\r\n    //console.log(\"Handling joining the event\");\r\n    this.setState({isLoading: true});\r\n    UserFunctions.addEvent(this.props.user.id, this.props.user.id, this.getEventAttribute(\"id\"), null,\r\n      (data) => {\r\n        this.forceUpdate(data.id);\r\n        //console.log(JSON.stringify(data));\r\n        this.setState({isJoinLoading: false, isJoined: true});\r\n      }, (error) => {\r\n        this.setState({isJoinLoading: false, error: error});\r\n      })\r\n  }\r\n\r\n  isJoined() {\r\n    const members = this.getEventAttribute(\"members\");\r\n    if (members) {\r\n      const isMembers = members.includes(this.props.user.id);\r\n      //console.log(\"Is Members?: \" + isMembers);\r\n      this.setState({isJoined: isMembers});\r\n      //console.log(\"am I in members?: \" + members.includes(this.props.user.id));\r\n    } else {\r\n      this.setState({isJoined: false});\r\n    }\r\n  }\r\n\r\n  isOwned() {\r\n    this.setState({isOwned: this.props.user.id === this.getEventAttribute(\"owner\")});\r\n  }\r\n\r\n  handleLeave() {\r\n    this.setState({isLeaveLoading: true});\r\n    this.handleLeaveEventButton();\r\n  }\r\n\r\n  handleJoin() {\r\n    this.setState({isJoinLoading: true});\r\n    this.handleJoinEventButton();\r\n  }\r\n\r\n  handleDelete() {\r\n    this.setState({isDeleteLoading: true});\r\n    this.handleDeleteEventButton();\r\n  }\r\n\r\n  // isCompleted() {\r\n  //     return this.getEventAttribute(\"ifCompleted\");\r\n  // }\r\n\r\n  openClientModal() {\r\n    this.setState({clientModalOpen: true});\r\n  }\r\n\r\n  closeClientModal() {\r\n    this.setState({clientModalOpen: false});\r\n  }\r\n\r\n  openCompleteModal() {\r\n    this.setState({completeModalOpen: true});\r\n  }\r\n\r\n  closeCompleteModal() {\r\n    this.setState({completeModalOpen: false});\r\n  }\r\n\r\n  forceUpdate = (eventID) => {\r\n    forceFetchEvent(eventID, [\"owner\",\r\n      \"time\", \"capacity\", \"address\", \"title\", \"ifChallenge\", \"description\", \"difficulty\", \"memberIDs\",\r\n      \"access\"]);\r\n  };\r\n\r\n  displayError() {\r\n    if (this.state.error === \"Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!\") {\r\n      return (<Message negative>\r\n        <Message.Header>Sorry!</Message.Header>\r\n        <p>That challenge is already filled up!</p>\r\n      </Message>);\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    if (!this.getEventAttribute(\"id\")) {\r\n      return (\r\n        null\r\n      );\r\n    }\r\n\r\n    if (this.state.canCallChecks) {\r\n      this.isJoined();\r\n      this.isOwned();\r\n      //console.log(\"Render Owned: \" + this.state.isOwned);\r\n      this.setState({canCallChecks: false});\r\n      //console.log(\"Members: \" + this.getChallengeAttribute(\"members\") + \"Joined?:  \" + this.state.isJoined);\r\n    }\r\n\r\n    //This modal displays the challenge information and at the bottom contains a button which allows the user\r\n    //to join a challenge.\r\n    function createCorrectButton(isOwned, isJoined, ifCompleted, ifChallenge,\r\n                                 joinHandler, leaveHandler, deleteHandler, completeHandler,\r\n                                 isLeaveLoading, isJoinLoading, isDeleteLoading, username, channelName, curUserID) {\r\n      //console.log(\"Owned: \" + isOwned + \" Joined: \" + isJoined);\r\n      // console.log(ifCompleted);\r\n      if (ifCompleted === \"true\") {\r\n        return (\r\n          <Button disabled fluid inverted size=\"large\">This Event is completed</Button>\r\n        );\r\n      } else if (isOwned) {\r\n        // TODO This should also link the choose winner button\r\n        if (ifChallenge) {\r\n          return (\r\n            <div>\r\n              <Grid columns={2}>\r\n                <Grid.Column>\r\n                  <Button loading={isDeleteLoading} fluid negative size=\"large\" disabled={isDeleteLoading}\r\n                          onClick={deleteHandler}>Delete</Button>\r\n                </Grid.Column>\r\n                <Grid.Column>\r\n                  <Button primary fluid size=\"large\" onClick={completeHandler}>Select Winner</Button>\r\n                </Grid.Column>\r\n              </Grid>\r\n              {/*<VideoUploadScreen curUser={username} curUserID={curUserID} challengeChannel={channelName}/>*/}\r\n            </div>\r\n          )\r\n        } else {\r\n          return (\r\n            <div>\r\n              <Button loading={isDeleteLoading} fluid negative size=\"large\" disabled={isDeleteLoading}\r\n                      onClick={deleteHandler}>Delete</Button>\r\n              {/*<VideoUploadScreen curUser={username} curUserID={curUserID} challengeChannel={channelName}/>*/}\r\n            </div>\r\n          );\r\n        }\r\n      } else if (isJoined) {\r\n        return (\r\n          <div>\r\n            <Button loading={isLeaveLoading} fluid inverted size=\"large\" disabled={isLeaveLoading}\r\n                    onClick={leaveHandler}>Leave</Button>\r\n            {/*<VideoUploadScreen curUser={username} curUserID={curUserID} challengeChannel={channelName}/>*/}\r\n          </div>\r\n        )\r\n      } else {\r\n        //console.log(isJoinLoading);\r\n        return (<Button loading={isJoinLoading} fluid size=\"large\" disabled={isJoinLoading}\r\n                        onClick={joinHandler}>Join</Button>)\r\n      }\r\n    }\r\n\r\n    //console.log(\"Challenge Info: \" + JSON.stringify(this.state.event));\r\n    return (\r\n      <Modal open={this.props.open} onClose={this.props.onClose.bind(this)}>\r\n        <Modal.Header>{this.getEventAttribute(\"title\")}</Modal.Header>\r\n        <Modal.Content>\r\n          <Modal.Description>\r\n            <ClientModal open={this.state.clientModalOpen} onClose={this.closeClientModal.bind(this)}\r\n                         clientID={this.getEventAttribute(\"owner\")}/>\r\n            <CompleteChallengeModal open={this.state.completeModalOpen} onClose={this.closeCompleteModal.bind(this)}\r\n                                    challengeID={this.getEventAttribute(\"id\")}/>\r\n            <List relaxed>\r\n              <List.Item>\r\n                <List.Icon name='user'/>\r\n                <List.Content>\r\n                  Created by <Button className=\"u-button--flat\"\r\n                                     onClick={this.openClientModal.bind(this)}>{this.getOwnerName()}</Button>\r\n                </List.Content>\r\n              </List.Item>\r\n              <List.Item>\r\n                <List.Icon name='calendar'/>\r\n                <List.Content>\r\n                  {this.convertFromISO(this.getEventAttribute(\"time\"))}\r\n                </List.Content>\r\n              </List.Item>\r\n              <List.Item>\r\n                <List.Icon name='bullseye'/>\r\n                <List.Content>\r\n                  {this.getEventAttribute(\"address\")}\r\n                </List.Content>\r\n              </List.Item>\r\n              <List.Item>\r\n                <List.Icon name='trophy'/>\r\n                <List.Content>\r\n                  {/*this.getChallengeAttribute(\"goal\")*/}\r\n                </List.Content>\r\n              </List.Item>\r\n              <List.Item>\r\n                <List.Icon name='users'/>\r\n                <List.Content>\r\n                  <Modal trigger={<Button className=\"u-button--flat u-padding-left--1\">Members</Button>} closeIcon>\r\n                    <Modal.Content>\r\n                      {/*<EventMemberList eventID={this.state.eventID} />*/}\r\n                      <DatabaseObjectList ids={this.getEventAttribute(\"members\")} noObjectsMessage={\"No members yet!\"}/>\r\n                    </Modal.Content>\r\n                  </Modal>\r\n                </List.Content>\r\n              </List.Item>\r\n            </List>\r\n            {createCorrectButton(this.state.isOwned, this.state.isJoined, this.getEventAttribute(\"ifCompleted\"),\r\n              this.getEventAttribute(\"ifChallenge\"), this.handleJoin, this.handleLeave,\r\n              this.handleDelete, this.openCompleteModal.bind(this), this.state.isLeaveLoading,\r\n              this.state.isJoinLoading, this.state.isDeleteLoading, this.props.user.username, this.getEventAttribute(\"title\"),\r\n              this.props.user.id)}\r\n          </Modal.Description>\r\n          <div>{this.displayError()}</div>\r\n          {/*\r\n                        <Modal trigger={<Button primary id=\"ui center aligned\"><Icon name=\"comment outline\"/></Button>}>\r\n                            <Grid>\r\n                                <div id=\"ui center align\">\r\n\r\n                                </div>\r\n                            </Grid>\r\n                        </Modal>\r\n                        */}\r\n        </Modal.Content>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    forceFetchUserAttributes: (attributeList) => {\r\n      dispatch(forceFetchUserAttributes(attributeList));\r\n    },\r\n    fetchEvent: (id, variablesList) => {\r\n      dispatch(fetchEvent(id, variablesList));\r\n    },\r\n    forceFetchEvent: (id, variablesList) => {\r\n      dispatch(forceFetchEvent(id, variablesList));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EventDescriptionModal);","import React, {useState} from 'react';\r\nimport type Event from \"../../types/Event\";\r\nimport {Card, Dimmer} from 'semantic-ui-react';\r\nimport EventDescriptionModal from '../modals/EventDescriptionModal';\r\nimport {convertFromISO} from \"../../logic/TimeHelper\";\r\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\nexport const EventCardInfo = {\r\n  fetchList: [\"id\", \"title\", \"time\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\", \"access\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  event: Event\r\n}\r\n\r\n/**\r\n * This is the generic view for how a event shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst EventCard = (props: Props) => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const getEventAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.event, attributeName);\r\n  };\r\n\r\n  if (!props.event) {\r\n    return (\r\n      <Dimmer>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  return (\r\n    // This is displays a few important pieces of information about the challenge for the feed view.\r\n    <Card fluid raised onClick={setModalOpen.bind(true)}>\r\n      <Card.Content>\r\n        <Card.Header textAlign='center'>{getEventAttribute(\"title\")}</Card.Header>\r\n        <Card.Meta textAlign='center'>{convertFromISO(getEventAttribute(\"time\"))}</Card.Meta>\r\n        <EventDescriptionModal open={modalOpen} onClose={setModalOpen.bind(false)} eventID={props.event.id}/>\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <Card.Meta>{convertFromISO(getEventAttribute(\"time_created\"))}</Card.Meta>\r\n        <Card.Meta textAlign='center'>\r\n          {getEventAttribute(\"membersLength\")} of {getEventAttribute(\"capacity\")} spots taken.\r\n        </Card.Meta>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default EventCard;\r\n\r\n","import React, {Component} from 'react'\r\nimport {List, Message} from 'semantic-ui-react';\r\nimport EventCard, {EventCardInfo} from \"../cards/EventCard\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchEvent} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\n// TODO Refactor\r\n\r\ntype Props = {\r\n  eventIDs: [string],\r\n  noEventsMessage: string,\r\n  sortFunction?: any\r\n}\r\n\r\nclass EventList extends Component<Props> {\r\n  state = {\r\n    isLoading: true,\r\n    eventIDs: null,\r\n    events: [],\r\n    sentRequest: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.componentWillReceiveProps(this.props);\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    if (newProps.eventIDs && this.state.eventIDs !== newProps.eventIDs) {\r\n      // alert(\"received eventIDs = \" + JSON.stringify(newProps.eventIDs));\r\n      this.setState({isLoading: true, eventIDs: newProps.eventIDs, events: []}, () => {\r\n        this.update(newProps);\r\n      });\r\n    }\r\n  }\r\n\r\n  update(props) {\r\n    for (let i = 0; i < props.eventIDs.length; i++) {\r\n      this.props.fetchEvent(props.eventIDs[i], EventCardInfo.fetchList, (event) => {\r\n        // Handle received data\r\n        if (event) {\r\n          this.state.events.push(event);\r\n        }\r\n        this.setState({isLoading: false});\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    function rows(events, sortFunction) {\r\n      const row = [];\r\n      const rowProps = [];\r\n      for (const key in events) {\r\n        if (events.hasOwnProperty(key)) {\r\n          row.push(\r\n            events[key]\r\n          );\r\n        }\r\n      }\r\n\r\n      if (sortFunction) {\r\n        row.sort(sortFunction);\r\n      }\r\n\r\n      for (const key in row) {\r\n        if (row.hasOwnProperty(key) === true) {\r\n          rowProps.push(\r\n            <List.Item key={key}>\r\n              <EventCard event={row[key]}/>\r\n            </List.Item>\r\n          );\r\n        }\r\n      }\r\n\r\n      return rowProps;\r\n    }\r\n\r\n    if (this.props.isLoading) {\r\n      //console.log(\"loading: \" + JSON.stringify(this.state));\r\n      return (\r\n        <Spinner/>\r\n      )\r\n    }\r\n    if (this.state.events.length > 0) {\r\n      return (\r\n        <List relaxed verticalAlign=\"middle\">\r\n          {rows(this.state.events, this.props.sortFunction)}\r\n        </List>\r\n      );\r\n    } else {\r\n      return (\r\n        <Message>{this.props.noEventsMessage}</Message>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchEvent: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchEvent(id, variablesList, dataHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EventList);\r\n","import React, {useState, useEffect} from 'react'\nimport {Button, Modal, Icon, Grid} from 'semantic-ui-react'\nimport ChallengeList from \"../lists/ChallengeList\";\nimport {connect} from \"react-redux\";\nimport EventList from \"../lists/EventList\";\nimport MessageBoard from \"../messaging/MessageBoard\";\nimport {getTrainerAttribute} from \"../../logic/CacheRetrievalHelper\";\nimport ProfileImage from \"../props/ProfileImage\";\nimport {fetchPost, fetchTrainer} from \"../../redux/convenience/cacheItemTypeActions\";\nimport {PostCardInfo} from \"../cards/PostCard\";\nimport {getMessageBoardName} from \"../../logic/MessageHelper\";\n\n// TODO Rewrite for the new design\n\n// const TrainerModalInfo = {\n//     fetchList: [],\n// };\n\ntype Props = {\n  trainerID: string,\n  open: boolean,\n  onClose: () => void\n};\n\n// const profilePicture = (profileImage) => {\n//     if (profileImage) {\n//         return (\n//             <div className=\"u-avatar u-avatar--large u-margin-x--auto u-margin-top--neg4\" style={{backgroundImage: `url(${profileImage})`}}/>\n//         );\n//     }\n//     else {\n//         return(\n//             <Dimmer inverted>\n//                 <Loader />\n//             </Dimmer>\n//         );\n//     }\n// };\n\n/**\n * TODO\n *\n * @param props\n * @return {*}\n * @constructor\n */\nconst TrainerModal = (props: Props) => {\n  const [ownedModalOpen, setOwnedModalOpen] = useState(false);\n  const [scheduledModalOpen, setScheduledModalOpen] = useState(false);\n\n  const getAttribute = (attribute) => getTrainerAttribute(props.trainerID, attribute, props.cache);\n\n  useEffect(() => {\n    if (props.open && props.trainerID) {\n      props.fetchTrainer(props.trainerID, [\"posts\", \"profileImagePath\", \"profileImagePaths\"], (trainer) => {\n        if (trainer.posts) {\n          for (let i = 0; i < trainer.posts.length; i++) {\n            props.fetchPost(trainer.posts[i], PostCardInfo.fetchList);\n          }\n        }\n      });\n    }\n  }, [props.open]);\n\n  //This displays some basic user information, a profile picture, buttons to modify some user related attributes,\n  //and a switch to set the privacy for the user.\n  /*\n  For a trainer's portal, we want to display their name / basic info, then links to their challenges/events stuff,\n  then finally a feed of their posts.\n   */\n  return (\n    <Modal open={props.open} onClose={props.onClose}>\n      <Icon className='close' onClick={props.onClose}/>\n      <Modal.Header style={{marginTop: '20px', marginBottom: '20px'}}>\n        <Grid centered>{getAttribute(\"name\")}</Grid></Modal.Header>\n      <Modal.Content>\n        <ProfileImage userID={props.trainerID}\n                      profileImage={getAttribute(\"profileImage\")}\n                      profileImages={getAttribute(\"profileImages\")}\n                      editable={false}\n                      style={{marginTop: '20px'}}/>\n        <Grid centered columns={2}>\n          <Grid.Column>\n            <Grid centered>\n              <Grid.Row>\n                <Button floated='left' primary circular icon size=\"massive\"\n                        onClick={() => setOwnedModalOpen(true)}><Icon name=\"trophy\"/></Button>\n              </Grid.Row>\n              <Grid.Row style={{marginTop: '-20px', marginBottom: '20px'}}>\n                <Button floated='left' className=\"u-button--flat u-padding-left--1\">Current Challenges</Button>\n              </Grid.Row>\n              <Modal basic size='mini' open={ownedModalOpen} onClose={() => setOwnedModalOpen(false)} closeIcon>\n                <Modal.Content>\n                  <ChallengeList challengeIDs={getAttribute(\"ownedChallenges\")}\n                                 noChallengesMessage=\"No owned challenges yet!\"/>\n                </Modal.Content>\n              </Modal>\n            </Grid>\n          </Grid.Column>\n          <Grid.Column>\n            <Grid centered>\n              <Grid.Row>\n                <Button primary circular icon size=\"massive\" onClick={() => setScheduledModalOpen(true)}><Icon\n                  name=\"checked calendar\"/></Button>\n              </Grid.Row>\n              <Grid.Row style={{marginTop: '-20px', marginBottom: '20px'}}>\n                <Button className=\"u-button--flat u-padding-left--1\">Scheduled Events</Button>\n              </Grid.Row>\n              <Modal basic size='mini' open={scheduledModalOpen} onClose={() => setScheduledModalOpen(false)} closeIcon>\n                <Modal.Content>\n                  <EventList eventIDs={getAttribute(\"scheduledEvents\")} noEventsMessage=\"No scheduled events yet!\"/>\n                </Modal.Content>\n              </Modal>\n            </Grid>\n          </Grid.Column>\n        </Grid>\n\n        <Modal trigger={<Button primary fluid><Icon name=\"wechat\"/> Trainer Chat</Button>}>\n          <MessageBoard board={getMessageBoardName([getAttribute(\"id\"), props.user.id])}/>\n        </Modal>\n      </Modal.Content>\n    </Modal>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  cache: state.cache,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchTrainer: (id, variableList, dataHandler) => {\n      dispatch(fetchTrainer(id, variableList, dataHandler));\n    },\n    fetchPost: (id, variableList, dataHandler) => {\n      dispatch(fetchPost(id, variableList, dataHandler));\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrainerModal);\n","import React, {useState, Fragment} from 'react';\r\nimport {Card, Grid, Header} from 'semantic-ui-react';\r\nimport ClientModal from '../modals/ClientModal';\r\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\r\nimport StyledProfileImage from \"../props/StyledProfileImage\";\r\nimport type User from \"../../types/User\";\r\nimport {getItemTypeFromID, switchReturnItemType} from \"../../logic/ItemType\";\r\nimport TrainerModal from \"../modals/TrainerModal\";\r\n\r\nexport const UserCardInfo = {\r\n  fetchList: [\"id\", \"item_type\", \"username\", \"gender\", \"birthday\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\", \"friendRequests\"],\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  rank?: number,\r\n  user: User\r\n};\r\n\r\n/**\r\n * Gets the modal for the user of the user card.\r\n *\r\n * @param {string} userID The ID of the User of the card.\r\n * @param {boolean} modalOpen Whether the modal is open or not.\r\n * @param {function(boolean)} setModalOpen Sets the modal open state.\r\n * @returns {*} The React JSX to display the modal.\r\n */\r\nconst getModal = (userID, modalOpen, setModalOpen) => (\r\n  switchReturnItemType(getItemTypeFromID(userID),\r\n    <ClientModal open={modalOpen} onClose={() => {\r\n      console.log(\"closing\");\r\n      setModalOpen(false);\r\n      console.log(\"closing\")\r\n    }} clientID={userID}/>,\r\n    <TrainerModal open={modalOpen} onClose={() => {\r\n      console.log(\"closing\");\r\n      setModalOpen(false);\r\n      console.log(\"closing\")\r\n    }} trainerID={userID}/>,\r\n    null, null, null, null, null, null, null,\r\n    null, null, null, null, null, null,\r\n    \"USER CARD MODAL\"\r\n  )\r\n);\r\n\r\n/**\r\n * This is the generic view for how a user shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst UserCard = (props: Props) => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const getUserAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.user, attributeName);\r\n  };\r\n\r\n  if (!props.user) {\r\n    return (\r\n      <Card fluid raised>\r\n        <h1>Loading...</h1>\r\n      </Card>\r\n    );\r\n  }\r\n  return (\r\n    // This is displays a few important pieces of information about the challenge for the feed view.\r\n    <Card fluid raised onClick={() => setModalOpen(true)}>\r\n      <Card.Content>\r\n        {/* If no rank */}\r\n        {!props.rank && (\r\n          <Fragment>\r\n            <Card.Header>\r\n              <div className=\"u-flex u-flex-justify--center u-margin-bottom--2\">\r\n                <StyledProfileImage profileImage={getUserAttribute(\"profileImage\")} type={\"Small\"}/>\r\n              </div>\r\n            </Card.Header>\r\n            <Card.Header textAlign='center'>\r\n              {getUserAttribute(\"name\")}\r\n            </Card.Header>\r\n          </Fragment>\r\n        )}\r\n        {/* If has rank */}\r\n        {props.rank && (\r\n          <Grid divided verticalAlign='middle'>\r\n            <Grid.Row>\r\n              <Grid.Column width={4}>\r\n                <Header size='large' textAlign='center'>{props.rank}</Header>\r\n              </Grid.Column>\r\n              <Grid.Column width={12}>\r\n                <div className=\"u-flex u-flex-align--center\">\r\n                  <StyledProfileImage profileImage={getUserAttribute(\"profileImage\")} type=\"Small\"/>\r\n                </div>\r\n              </Grid.Column>\r\n              <Grid.Column textAlign='center' width={2}>\r\n                {getUserAttribute(\"name\") + \"   \"}\r\n              </Grid.Column>\r\n              {getUserAttribute(\"item_type\") === \"Trainer\" &&\r\n              (<Grid.Column textAlign=\"center\" width={1}><Header as=\"h5\" color=\"purple\">Trainer</Header></Grid.Column>)}\r\n            </Grid.Row>\r\n          </Grid>\r\n        )}\r\n        {getModal(props.user.id, modalOpen, setModalOpen)}\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <Card.Meta>\r\n          {getUserAttribute(\"challengesWonLength\")} challenges won\r\n        </Card.Meta>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default UserCard;\r\n","import React, {useState, useEffect} from \"react\";\r\nimport {Modal, Message, Button, Card} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport ChallengeFunctions from \"../../database_functions/ChallengeFunctions\";\r\nimport {err} from \"../../../Constants\";\r\nimport UserCard, {UserCardInfo} from \"../cards/UserCard\";\r\nimport {fetchChallenge} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {fetchItem} from \"../../redux/actions/cacheActions\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\n\r\ntype Props = {\r\n  challengeID: string\r\n}\r\n\r\n/**\r\n * Declares a winner for the given Challenge.\r\n *\r\n * @param {string} userID The ID of the User declaring the Challenge won.\r\n * @param {string} challengeID The ID of the Challenge to complete.\r\n * @param {string} winnerID The ID of the User that has won.\r\n * @param {function()} onClose Closes the modal.\r\n */\r\nconst declareWinnerButtonHandler = (userID, challengeID, winnerID, onClose) => {\r\n  if (winnerID && challengeID && userID) {\r\n    console.log(userID + \" \" + challengeID + \" \" + winnerID);\r\n    ChallengeFunctions.updateWinner(userID, challengeID, winnerID, (data) => {\r\n      // console.log(\"Successfully set the event winner!\");\r\n      onClose();\r\n    }, (error) => {\r\n      err && console.error(\"Event winner setting failed\");\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * G\r\n * @param {[{id: string}]} members The list of members in the Challenge.\r\n * @param {string} userID The User viewing the list.\r\n * @param {string} challengeID The Challenge being completed.\r\n * @param {function()} onClose The function to close the modal.\r\n * @return {*} The React JSX to display the list of winner buttons.\r\n */\r\nexport const winnerButtons = (members, userID, challengeID, onClose) => {\r\n  const rowProps = [];\r\n  for (let i = 0; i < members.length; i++) {\r\n    rowProps.push(\r\n      <Card raised key={members[i]}>\r\n        <Card.Content>\r\n          <UserCard user={members[i]}/>\r\n          <Button primary fluid\r\n                  onClick={() => declareWinnerButtonHandler(userID, challengeID, members[i].id, onClose)}>Select</Button>\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  }\r\n  return rowProps;\r\n};\r\n\r\n/**\r\n * Raises a modal for completing a Challenge by declaring a winner for it.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst CompleteChallengeModal = (props: Props) => {\r\n  const [members, setMembers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (props.challengeID) {\r\n      props.fetchChallenge(props.challengeID, [\"members\"], (challenge) => {\r\n        if (challenge.members) {\r\n          for (let i = 0; i < challenge.members.length; i++) {\r\n            const id = challenge.members[i];\r\n            const itemType = getItemTypeFromID(id);\r\n            props.fetchItem(itemType, id, UserCardInfo.fetchList, (user) => {\r\n              setMembers(p => [...p, user]);\r\n            });\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }, [props.challengeID]);\r\n\r\n\r\n  if (members.length > 0) {\r\n    return (\r\n      <Modal centered open={props.open} onClose={() => props.onClose()} closeIcon>\r\n        <Modal.Header className=\"u-bg--bg\">Select Winner</Modal.Header>\r\n        <Modal.Content className=\"u-bg--bg\">\r\n          <Card.Group itemsPerRow={2}>\r\n            {winnerButtons(members, props.user.id, props.challengeID, props.onClose)}\r\n          </Card.Group>\r\n        </Modal.Content>\r\n      </Modal>\r\n    );\r\n  } else {\r\n    return (\r\n      <Modal dimmer='blurring' open={props.open} onClose={() => props.onClose()} closeIcon>\r\n        <Message>No members in the challenge yet!</Message>\r\n      </Modal>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  info: state.info,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchChallenge: (id, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchChallenge(id, variableList, dataHandler, failureHandler));\r\n    },\r\n    fetchItem: (itemType, id, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchItem(id, itemType, variableList, dataHandler, failureHandler));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CompleteChallengeModal);","import Lambda from \"../api/Lambda\";\r\nimport S3 from \"../api/S3Storage\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport {err} from \"../../Constants\";\r\n\r\n/**\r\n * Holds all the potential properly formatted Lambda functions for Submissions.\r\n */\r\nclass SubmissionFunctions {\r\n  // ======================================================================================================\r\n  // Submission High-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  // Create Functions ============================================================\r\n\r\n  /**\r\n   * Creates a Submission within a Challenge to become a candidate for winning a Challenge.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} challengeID The ID of the Challenge to complete the submission for.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {Object<string, *>} pictures The picture map with key/value = S3Path : file, dictating the pictures\r\n   * to add with what key.\r\n   * @param {Object<string, *>} videos The video map with key/value = S3Path : file, dictating the videos to add\r\n   * with what key.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static createSubmission(fromID, by, challengeID, description, pictures, videos, successHandler, failureHandler, progressHandler) {\r\n    return SubmissionFunctions.create(fromID, by, description, challengeID, pictures, videos, successHandler, failureHandler, progressHandler);\r\n  }\r\n\r\n  // Update Functions ============================================================\r\n\r\n  /**\r\n   * Updates the description of a Submission in the database.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to update.\r\n   * @param {string} description The description for the Submission to set.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static updateDescription(fromID, submissionID, description, successHandler, failureHandler) {\r\n    return SubmissionFunctions.updateSet(fromID, submissionID, \"description\", description, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Adds a picture to a Submission object in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to update.\r\n   * @param {*} picture The picture file to place into S3.\r\n   * @param {string} picturePath The path of the picture to put into S3 and add to the Submission.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   */\r\n  static addPicture(fromID, submissionID, picture, picturePath, successHandler, failureHandler) {\r\n    S3.putImage(picturePath, picture, () => {\r\n      SubmissionFunctions.updateAdd(fromID, submissionID, \"picturePaths\", picturePath, successHandler, (error) => {\r\n        // Try your best to correct, then give up...\r\n        S3.delete(picturePath);\r\n        failureHandler(error);\r\n      });\r\n    }, failureHandler);\r\n    if (TestHelper.ifTesting) {\r\n      return SubmissionFunctions.updateAdd(fromID, submissionID, \"picturePaths\", picturePath);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a video to a Submission object in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to update.\r\n   * @param {*} video The video file to place into S3.\r\n   * @param {string} videoPath The path of the video to put into S3 and add to the Submission.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   */\r\n  static addVideo(fromID, submissionID, video, videoPath, successHandler, failureHandler) {\r\n    S3.putVideo(videoPath, video, successHandler, failureHandler, () => {\r\n      SubmissionFunctions.updateAdd(fromID, submissionID, \"videoPaths\", videoPath, successHandler, (error) => {\r\n        // Try your best to correct, then give up...\r\n        S3.delete(videoPath);\r\n        failureHandler(error);\r\n      });\r\n    }, failureHandler);\r\n    if (TestHelper.ifTesting) {\r\n      return SubmissionFunctions.updateAdd(fromID, submissionID, \"videoPaths\", videoPath);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes a picture from a Submission in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to update.\r\n   * @param {string} picturePath The S3 path of the picture.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removePicture(fromID, submissionID, picturePath, successHandler, failureHandler) {\r\n    return SubmissionFunctions.updateRemove(fromID, submissionID, \"picturePaths\", picturePath, (data) => {\r\n      S3.delete(picturePath, () => {\r\n        if (successHandler) {\r\n          successHandler(data);\r\n        }\r\n      }, failureHandler);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes a video from a Submission in the database and in S3.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to update.\r\n   * @param {string} videoPath The S3 path of the video.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static removeVideo(fromID, submissionID, videoPath, successHandler, failureHandler) {\r\n    return SubmissionFunctions.updateRemove(fromID, submissionID, \"videoPaths\", videoPath, (data) => {\r\n      S3.delete(videoPath, () => {\r\n        if (successHandler) {\r\n          successHandler(data);\r\n        }\r\n      }, failureHandler);\r\n    }, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Approves a Submission from an Admin User and grants the User a free Vastus Token.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to approve.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @param {{addToItemAttribute: function(string, string, string), addToUserAttribute: function(string, string),\r\n   * removeFromItemAttribute: function(string, string, string), removeFromUserAttribute: function(string, string),\r\n   * setItemAttribute: function(string, string, *), setUserAttribute(string, *), removeItem: function(string, string),\r\n   * clearItemQueryCache: function(string)}} props The component props containing the redux automatic update functions.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static approveSubmission(fromID, submissionID, successHandler, failureHandler, props) {\r\n    return SubmissionFunctions.updateSet(fromID, submissionID, \"approved\", \"true\", (data) => {\r\n      if (props) {\r\n        if (props.addToUserAttribute && props.addToItemAttribute) {\r\n          // TODO\r\n          err && console.error(\"UPDATE FUNCTIONS NOT PLACED IN YET FOR THIS FUNCTION!!!\");\r\n        } else {\r\n          err && console.error(\"NEED TO ADD UPDATE FUNCTIONS TO MAPDISPATCHTOPROPS\");\r\n        }\r\n      } else {\r\n        err && console.error(\"ADD PROPS TO DATABASE ACTION CALL IN ORDER TO AUTOMATICALLY UPDATE\");\r\n      }\r\n      successHandler && successHandler(data);\r\n    }, failureHandler)\r\n  }\r\n\r\n  // ======================================================================================================\r\n  // Submission Low-Level Functions ~\r\n  // ======================================================================================================\r\n\r\n  /**\r\n   * Creates a Submission object in the database using the information given.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} by The ID of the User who created the Submission.\r\n   * @param {string} about The ID of the object to complete the submission for.\r\n   * @param {string} description The string description for the Submission.\r\n   * @param {Object<string, *>} pictures The picture map with key/value = S3Path : file, dictating the pictures\r\n   * to add with what key.\r\n   * @param {Object<string, *>} videos The video map with key/value = S3Path : file, dictating the videos to add\r\n   * with what key.\r\n   * @param {function({secretKey: string, timestamp: string, data: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static create(fromID, by, description, about, pictures, videos, successHandler, failureHandler, progressHandler) {\r\n    let picturePaths = null;\r\n    let videoPaths = null;\r\n    if (pictures) {\r\n      picturePaths = Object.keys(pictures);\r\n    }\r\n    if (videos) {\r\n      videoPaths = Object.keys(videos);\r\n    }\r\n    let numPictures = 0;\r\n    let numVideos = 0;\r\n    if (picturePaths) {\r\n      numPictures = picturePaths.length;\r\n    }\r\n    if (videoPaths) {\r\n      numVideos = videoPaths.length;\r\n    }\r\n    return Lambda.create(fromID, \"Submission\", {\r\n      by,\r\n      description,\r\n      about,\r\n      picturePaths,\r\n      videoPaths,\r\n    }, (data) => {\r\n      if (data) {\r\n        const id = data.data;\r\n        const numVideosAndPictures = numPictures + numVideos;\r\n        let numFinished = 0;\r\n        const finish = () => {\r\n          numFinished++;\r\n          if (numFinished >= numVideosAndPictures) {\r\n            successHandler(data);\r\n          }\r\n        };\r\n        const error = (error) => {\r\n          // TODO Delete the object and abort!\r\n          SubmissionFunctions.delete(fromID, id);\r\n          failureHandler(error);\r\n        };\r\n\r\n        if (numVideosAndPictures === 0) {\r\n          successHandler(data);\r\n        } else {\r\n          if (pictures) {\r\n            for (const key in pictures) {\r\n              if (pictures.hasOwnProperty(key) && pictures[key]) {\r\n                S3.putImage(id + \"/\" + key, pictures[key], finish, error);\r\n              }\r\n            }\r\n          }\r\n          if (videos) {\r\n            for (const key in videos) {\r\n              if (videos.hasOwnProperty(key) && videos[key]) {\r\n                S3.putVideo(id + \"/\" + key, videos[key], finish, error, progressHandler);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }, failureHandler);\r\n  }\r\n\r\n  static updateAdd(fromID, submissionID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateAddToAttribute(fromID, submissionID, \"Submission\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateRemove(fromID, submissionID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateRemoveFromAttribute(fromID, submissionID, \"Submission\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  static updateSet(fromID, submissionID, attributeName, attributeValue, successHandler, failureHandler) {\r\n    return Lambda.updateSetAttribute(fromID, submissionID, \"Submission\", attributeName, attributeValue, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Deletes a Submission from the database and all of its dependencies.\r\n   *\r\n   * @param {string} fromID The User invoking the Lambda request.\r\n   * @param {string} submissionID The ID of the Submission to delete.\r\n   * @param {function({secretKey: string, timestamp: string})} successHandler The function to handle the\r\n   * returned data from the invocation of the Lambda function.\r\n   * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n   * @return {*} Debugging info about the Lambda operation.\r\n   */\r\n  static delete(fromID, submissionID, successHandler, failureHandler) {\r\n    // TODO Delete all the S3 Paths within the Post?\r\n    return Lambda.delete(fromID, submissionID, \"Submission\", successHandler, failureHandler);\r\n  }\r\n}\r\n\r\nexport default SubmissionFunctions;\r\n","import React, {Component} from \"react\";\r\nimport {Modal, Message, Button, Grid, Icon, Progress, Divider} from \"semantic-ui-react\";\r\nimport {Player} from \"video-react\";\r\nimport {connect} from \"react-redux\";\r\nimport SubmissionFunctions from \"../../database_functions/SubmissionFunctions\";\r\n\r\n// TODO Rewrite for the new design\r\n// TODO Refactor\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any,\r\n  challengeID: string\r\n};\r\n\r\n/**\r\n * Takes in open, onClose, and challengeID\r\n */\r\nclass CreateSubmissionModal extends Component<Props> {\r\n  state = {\r\n    challengeID: null,\r\n    isSubmitLoading: false,\r\n    showLoadingBar: false,\r\n    picturesLoading: false,\r\n    videosLoading: false,\r\n    pictures: [],\r\n    videos: [],\r\n    tempPictureURLs: [],\r\n    tempVideoURLs: [],\r\n    notifySubmission: false,\r\n    percent: 0\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmitButton = this.handleSubmitButton.bind(this);\r\n    this.setVideo = this.setVideo.bind(this);\r\n    this.displayVideo = this.displayVideo.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({challengeID: this.props.challengeID})\r\n  }\r\n\r\n  componentWillReceiveProps(newProps, nextContext) {\r\n    if (this.props.challengeID !== newProps.challengeID) {\r\n      this.setState({challengeID: newProps.challengeID});\r\n    }\r\n  }\r\n\r\n  getChallengeAttribute(attribute) {\r\n    if (this.state.challengeID) {\r\n      const challenge = this.props.cache.events[this.state.challengeID];\r\n      if (challenge) {\r\n        return challenge[attribute];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setPercent = (progress) => {\r\n    this.setState({percent: progress});\r\n  }\r\n\r\n  createSubmission(finishHandler, progressHandler) {\r\n    const pictures = {};\r\n    const videos = {};\r\n    for (let i = 0; i < this.state.pictures.length; i++) {\r\n      pictures[\"pictures/\" + i] = this.state.pictures[i];\r\n    }\r\n    for (let i = 0; i < this.state.videos.length; i++) {\r\n      videos[\"videos/\" + i] = this.state.videos[i];\r\n    }\r\n    console.log(JSON.stringify(pictures) + \" vids: \" + JSON.stringify(videos));\r\n    SubmissionFunctions.createSubmission(this.props.user.id, this.props.user.id, this.state.challengeID, \"Task Video\", pictures, videos, finishHandler, (error) => {\r\n      console.error(error);\r\n    }, progressHandler);\r\n    // PostFunctions.createSubmission(this.props.user.id, this.props.user.id, this.state.challengeID, \"Submission\", this.getPicturePaths(), this.getVideoPaths(), (returnValue) => {\r\n    //     this.setState({picturesLoading: (this.state.pictures.length > 0), videosLoading: (this.state.videos.length > 0)});\r\n    //     console.log(JSON.stringify(returnValue));\r\n    //     const id = returnValue.data;\r\n    //     let numPicturesLoaded = 0;\r\n    //     let picturesLength = this.state.pictures.length;\r\n    //     for (let i = 0; i < picturesLength; i++) {\r\n    //         const picturePath = \"/\" + id + \"/pictures/\" + i;\r\n    //         Storage.put(picturePath, this.state.pictures[i], { contentType: \"video/*;image/*\" }).then((result) => {\r\n    //             numPicturesLoaded++;\r\n    //             if (numPicturesLoaded >= picturesLength) {\r\n    //                 this.state.picturesLoading = false;\r\n    //                 if (!this.state.videosLoading) {\r\n    //                     finishHandler();\r\n    //                 }\r\n    //             }\r\n    //         }).catch((error) => {\r\n    //             numPicturesLoaded++;\r\n    //             if (numPicturesLoaded >= picturesLength) {\r\n    //                 this.state.picturesLoading = false;\r\n    //                 if (!this.state.videosLoading) {\r\n    //                     finishHandler();\r\n    //                 }\r\n    //             }\r\n    //         });\r\n    //     }\r\n    //     let numVideosLoaded = 0;\r\n    //     let videosLength = this.state.videos.length;\r\n    //     for (let i = 0; i < videosLength; i++) {\r\n    //         Storage.put(id + \"/videos/\" + i, this.state.videos[i], { contentType: \"video/*;image/*\" }).then((result) => {\r\n    //             numVideosLoaded++;\r\n    //             if (numVideosLoaded >= videosLength) {\r\n    //                 this.state.videosLoading = false;\r\n    //                 if (!this.state.picturesLoading) {\r\n    //                     finishHandler();\r\n    //                 }\r\n    //             }\r\n    //         }).catch((error) => {\r\n    //             numVideosLoaded++;\r\n    //             if (numVideosLoaded >= videosLength) {\r\n    //                 this.state.videosLoading = false;\r\n    //                 if (!this.state.picturesLoading) {\r\n    //                     finishHandler();\r\n    //                 }\r\n    //             }\r\n    //         });\r\n    //     }\r\n    //     // Storage.put(id + \"/\")\r\n    // }, (error) => {\r\n    //     console.error(error);\r\n    // });\r\n  }\r\n\r\n  finishTaskPost(finishHandler) {\r\n    SubmissionFunctions.createSubmission(this.props.user.id, this.props.user.id, this.state.challengeID, \"Completed Task\", {}, {}, finishHandler, (error) => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  getPicturePaths() {\r\n    const picturePaths = [];\r\n    console.log(\"Pictures: \" + this.state.pictures.length);\r\n    for (let i = 0; i < this.state.pictures.length; i++) {\r\n      const path = \"pictures/\" + i;\r\n      picturePaths.push(path);\r\n      console.log(\"Added: \" + path);\r\n    }\r\n    if (picturePaths.length > 0) {\r\n      return picturePaths;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getVideoPaths() {\r\n    const videoPaths = [];\r\n    console.log(\"Videos: \" + this.state.videos.length);\r\n    for (let i = 0; i < this.state.videos.length; i++) {\r\n      const path = \"videos/\" + i;\r\n      videoPaths.push(path);\r\n      console.log(\"Added: \" + path);\r\n    }\r\n    if (videoPaths.length > 0) {\r\n      return videoPaths;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setVideo(event) {\r\n    // const index = this.state.videos.length;\r\n    this.state.videos.push(event.target.files[0]);\r\n    this.state.tempVideoURLs.push(URL.createObjectURL(event.target.files[0]));\r\n    this.setState({});\r\n    // const path = \"/\" + this.props.user.id + \"/temp/videos/\" + index;\r\n    // Storage.put(path, event.target.files[0], { contentType: \"video/*;image/*\" })\r\n    //     .then(() => {\r\n    //         Storage.get(path).then((url) => {\r\n    //             this.state.tempVideoURLs.push(url);\r\n    //             this.setState({});\r\n    //         }).catch((error) => {\r\n    //             console.error(error);\r\n    //         })\r\n    //     }).catch((error) => {\r\n    //     console.error(error);\r\n    // });\r\n    // this.setState({});\r\n  }\r\n\r\n  handleSubmitButton() {\r\n    this.setState({isSubmitLoading: true});\r\n    this.createSubmission(() => {\r\n      this.setState({isSubmitLoading: false, notifySubmission: true})\r\n    }, this.setPercent);\r\n  }\r\n\r\n  displaySubmission() {\r\n    if (this.state.notifySubmission) {\r\n      return (\r\n        <Message positive>\r\n          <Message.Header>Success!</Message.Header>\r\n          <p>\r\n            You submitted a video to the challenge!\r\n          </p>\r\n        </Message>\r\n      );\r\n    }\r\n  }\r\n\r\n  displayVideo() {\r\n    if (this.state.tempVideoURLs && this.state.tempVideoURLs.length > 0) {\r\n      return (\r\n        <div>\r\n          <Player>\r\n            <source src={this.state.tempVideoURLs[0]} type=\"video/mp4\"/>\r\n          </Player>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  loadingBar() {\r\n    if (this.state.isSubmitLoading || this.state.showLoadingBar) {\r\n      if (!this.state.showLoadingBar) {\r\n        this.setState({showLoadingBar: true});\r\n      }\r\n      return (\r\n        <Progress percent={this.state.percent} active color='purple'/>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  // This should show a modal that\r\n  render() {\r\n\r\n    if (this.props.info.isLoading) {\r\n      return (\r\n        <Modal dimmer='blurring' open={this.props.open} onClose={this.props.onClose.bind(this)}>\r\n          <Message>Loading...</Message>\r\n        </Modal>\r\n      );\r\n    }\r\n    return (\r\n      <Modal centered open={this.props.open} onClose={this.props.onClose.bind(this)} closeIcon\r\n             style={{background: 'white'}}>\r\n        <Modal.Content style={{background: 'white'}}>\r\n          {this.loadingBar()}\r\n          {this.displayVideo()}\r\n          <Grid centered>\r\n            <Button primary circular icon as='label' size='massive' htmlFor=\"proPicUpload\"\r\n                    className=\"u-bg--primaryGradient\"\r\n                    style={{marginBottom: '10px', marginTop: '20px'}}>\r\n              <Icon name='video camera'/>\r\n            </Button>\r\n          </Grid>\r\n          <input type=\"file\" accept=\"video/*;capture=camcorder\" id=\"proPicUpload\" hidden={true}\r\n                 onChange={this.setVideo}/>\r\n          <div>{this.displaySubmission()}</div>\r\n          <Divider/>\r\n          <Button primary floated='right' circular icon loading={this.state.isSubmitLoading}\r\n                  disabled={this.state.isSubmitLoading}\r\n                  style={{marginBottom: '10px'}} onClick={this.handleSubmitButton}><Icon name=\"send\"/></Button>\r\n        </Modal.Content>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  info: state.info,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateSubmissionModal);\r\n","import React from 'react';\r\nimport {Card} from 'semantic-ui-react';\r\nimport {getAttributeFromObject, getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport {convertFromISO} from \"../../logic/TimeHelper\";\r\nimport {Player} from \"video-react\";\r\nimport {connect} from \"react-redux\";\r\nimport type Submission from \"../../types/Submission\";\r\n\r\nexport const SubmissionCardInfo = {\r\n  fetchList: [\"id\", \"time_created\", \"by\", \"item_type\", \"about\", \"description\", \"videoPaths\", \"picturePaths\"],\r\n  ifSubscribe: false\r\n};\r\n\r\n\r\ntype Props = {\r\n  rank?: number,\r\n  submission: Submission\r\n}\r\n\r\n// TODO Make this look better?\r\n\r\n/**\r\n * Displays the image and video media for the submissions.\r\n *\r\n * @param {[]} pictures A list of all the pictures in the submission\r\n * @param {[]} videos A list of all the videos in the submission\r\n * @returns {*} The React JSX used to display the video or image in a post.\r\n */\r\nconst getDisplayMedia = (pictures, videos, props) => {\r\n  // TODO How to properly display videos and pictures?\r\n  if (videos && videos.length > 0) {\r\n    //console.log(\"Video URL:\" + this.state.videoURL);\r\n    return (\r\n      <Player inline={true}>\r\n        <source src={videos[0]} type=\"video/mp4\"/>\r\n      </Player>\r\n    );\r\n  }\r\n  return getAttributeFromObject(props.submission, \"description\");\r\n};\r\n\r\n// function createCorrectButton(isOwned, deleteHandler, isDeleteLoading) {\r\n//     //log&&console.log(\"Owned: \" + isOwned + \" Joined: \" + isJoined);\r\n//     // log&&console.log(ifCompleted);\r\n//     if(isOwned) {\r\n//         // TODO This should also link the choose winner button\r\n//         return(\r\n//             <div>\r\n//                 <Button loading={isDeleteLoading} fluid negative size=\"large\" disabled={isDeleteLoading} onClick={deleteHandler}>Delete</Button>\r\n//             </div>\r\n//         );\r\n//     }\r\n//     else {\r\n//         //log&&console.log(isJoinLoading);\r\n//         return null;\r\n//     }\r\n// }\r\n\r\n/**\r\n * This is the generic view for how a trainer shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst SubmissionCard = (props: Props) => (\r\n  <Card color='purple'>\r\n    <Card.Header style={{marginTop: '10px', marginLeft: '10px'}}\r\n    >{getObjectAttribute(getAttributeFromObject(props.submission, \"by\"), \"name\", props.cache)}</Card.Header>\r\n    <Card.Content>\r\n      {getDisplayMedia(getAttributeFromObject(props.submission, \"pictures\"), getAttributeFromObject(props.submission, \"videos\"), props)}\r\n    </Card.Content>\r\n  </Card>\r\n);\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nexport default connect(mapStateToProps)(SubmissionCard);\r\n","import React, {useState, useEffect} from 'react'\r\nimport {List, Message} from 'semantic-ui-react';\r\nimport {connect} from \"react-redux\";\r\nimport {fetchSubmission} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport SubmissionCard, {SubmissionCardInfo} from \"../cards/SubmissionCard\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport {err} from \"../../../Constants\";\r\n\r\n// TODO Use this to write SingleDatabaseObjectList\r\n\r\n// TODO Test the new \"visibility\" fetch system!\r\n// TODO USING VISIBILITY WITH A MODAL DOESN'T WORK?\r\n// TODO ALSO OFTEN ONE PERSON IS MISSING for some reason?\r\n\r\nconst numFetch = 10000000;\r\n\r\ntype Props = {\r\n  ids: [string],\r\n  noSubmissionsMessage: string,\r\n  sortFunction?: any\r\n}\r\n\r\nfunction submissionComponents(submissions) {\r\n  const components = [];\r\n  for (const key in submissions) {\r\n    if (submissions.hasOwnProperty(key)) {\r\n      components.push(\r\n        <List.Item key={key} style={{background: 'white', color: 'purple'}}>\r\n          <SubmissionCard submission={submissions[key]}/>\r\n        </List.Item>\r\n      );\r\n    }\r\n  }\r\n  return components;\r\n}\r\n\r\nconst fetchMoreObjects = (ids, sortFunction, hiddenIDIndex, setHiddenIDIndex, setVisibleSubmissions, setIsLoading, fetchSubmission) => {\r\n  const endIndex = Math.min(ids.length, hiddenIDIndex + numFetch);\r\n  for (let i = hiddenIDIndex; i < endIndex; i++) {\r\n    if (getItemTypeFromID(ids[i]) !== \"Submission\") {\r\n      err && console.error(\"Found non-submission: \" + ids[i] + \" in the submission list!\");\r\n    } else {\r\n      setIsLoading(true);\r\n      fetchSubmission(ids[i], SubmissionCardInfo.fetchList, (o) => addObject(o, sortFunction, setVisibleSubmissions, setIsLoading));\r\n    }\r\n  }\r\n  if (hiddenIDIndex === endIndex) {\r\n    setIsLoading(false);\r\n  }\r\n  setHiddenIDIndex(endIndex);\r\n};\r\n\r\nconst addObject = (object, sortFunction, setVisibleSubmissions, setIsLoading) => {\r\n  if (object && object.id) {\r\n    setVisibleSubmissions(p => {\r\n      const a = [...p, object];\r\n      if (sortFunction) {\r\n        a.sort(sortFunction);\r\n      }\r\n      return a;\r\n    });\r\n    setIsLoading(false);\r\n  }\r\n};\r\n\r\nconst SubmissionList = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [ids, setIDs] = useState(null);\r\n  const [visibleSubmissions, setVisibleSubmissions] = useState([]);\r\n  const [hiddenIDIndex, setHiddenIDIndex] = useState(0);\r\n\r\n  // Callback for visible objects updated\r\n  useEffect(() => {\r\n    if (ids) {\r\n      fetchMoreObjects(ids, props.sortFunction, hiddenIDIndex, setHiddenIDIndex,\r\n        setVisibleSubmissions, setIsLoading, props.fetchSubmission);\r\n    }\r\n  }, [visibleSubmissions]);\r\n\r\n  // Component will receive new props\r\n  useEffect(() => {\r\n    if (props.ids && JSON.stringify(props.ids) !== JSON.stringify(ids)) {\r\n      setIDs(props.ids);\r\n      setHiddenIDIndex(0);\r\n      setVisibleSubmissions([]);\r\n    }\r\n  }, [props.ids]);\r\n\r\n  // alert(\"defining a function here\");\r\n\r\n\r\n  // const handleVisibilityUpdate = (e, {calculations}) => {\r\n  //     // alert(\"hey\");\r\n  //     // alert(JSON.stringify(calculations));\r\n  //     console.log(calculations);\r\n  //     if (calculations.bottomVisible) {\r\n  //         fetchMoreObjects();\r\n  //     }\r\n  // };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    )\r\n  }\r\n  if (visibleSubmissions && visibleSubmissions.length > 0) {\r\n    return (\r\n      <div>\r\n        <List relaxed verticalAlign=\"middle\" >\r\n          {submissionComponents(visibleSubmissions)}\r\n        </List>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <Message style={{background: 'white', color: 'purple'}}>{props.noSubmissionsMessage}</Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchSubmission: (id, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchSubmission(id, variableList, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SubmissionList);\r\n","import React, {useState, useEffect} from 'react'\r\nimport _ from \"lodash\";\r\nimport {List, Message, Visibility} from 'semantic-ui-react';\r\nimport {connect} from \"react-redux\";\r\nimport {fetchItems} from \"../../redux/actions/cacheActions\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport {shuffleArray} from \"../../logic/ArrayHelper\";\r\nimport UserCard, {UserCardInfo} from \"../cards/UserCard\";\r\nimport {err} from \"../../../Constants\";\r\n\r\n// TODO Test the new \"visibility\" fetch system!\r\n// TODO USING VISIBILITY WITH A MODAL DOESN'T WORK?\r\n\r\nconst numFetch = 5;\r\n\r\ntype Props = {\r\n  userIDs: [string],\r\n  noUsersMessage: string,\r\n  randomized: boolean,\r\n  sortFunction?: any\r\n}\r\n\r\n/**\r\n * Gets the components for the objects in the list.\r\n *\r\n * @param {[{id: string, item_type: string}]} objects The database objects to display in the list.\r\n * @return {[*]} The list of React JSX components to display in the list.\r\n */\r\nexport const objectComponents = (objects) => {\r\n  const components = [];\r\n  for (const key in objects) {\r\n    if (objects.hasOwnProperty(key)) {\r\n      components.push(\r\n        <List.Item key={key}>\r\n          <UserCard rank={parseInt(key) + 1} user={objects[key]}/>\r\n        </List.Item>\r\n      );\r\n    }\r\n  }\r\n  return components;\r\n};\r\n\r\n/**\r\n * Uses the Batch Fetch system of GraphQL to fetch more objects of the same type together.\r\n *\r\n * @param {{}} typeIDs The map of item types to the ids for that type.\r\n * @param {{}} typeHiddenIDIndex The map of item types to the hidden id index for that type.\r\n * @param {boolean} randomized If the list should be randomized.\r\n * @param {function(*, *)} sortFunction Function to sort the list by, if applicable.\r\n * @param {function([{}])} setVisibleObjects Sets the visible objects state.\r\n * @param {function({})} setTypeHiddenIDIndex Sets the hidden id indexes for each type.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(string, string, [string], number, number, function([{}]), function(error))} fetchItems Cache redux\r\n * function to perform a batch fetch operation.\r\n */\r\nexport const batchFetchMoreObjects = (typeIDs, typeHiddenIDIndex, randomized, sortFunction, setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, fetchItems) => {\r\n  setIsLoading(true);\r\n  const variableList = UserCardInfo.fetchList;\r\n  for (const itemType in typeIDs) {\r\n    if (typeIDs.hasOwnProperty(itemType)) {\r\n      const ids = typeIDs[itemType];\r\n      const hiddenIndex = typeHiddenIDIndex[itemType];\r\n      if (ids.length > hiddenIndex) {\r\n        fetchItems(ids, itemType, variableList, hiddenIndex, numFetch, (items) => {\r\n          for (let i = 0; i < items.length; i++) {\r\n            addObject(items[i], randomized, sortFunction, setVisibleObjects, setIsLoading);\r\n          }\r\n          setTypeHiddenIDIndex(p => ({\r\n            ...p,\r\n            [itemType]: p[itemType] + items.length\r\n          }));\r\n          setIsLoading(false);\r\n        });\r\n      } else {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Adds a single object to the visible objects and randomizes or sorts the list.\r\n *\r\n * @param {{id: string, item_type: string}} object The object to add to the visible objects.\r\n * @param {boolean} randomized Whether the list should be randomized or not.\r\n * @param {function(*, *)} sortFunction Function to sort the list by, if applicable.\r\n * @param {function([{}])} setVisibleObjects Sets the visible objects state.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n */\r\nexport const addObject = (object, randomized, sortFunction, setVisibleObjects, setIsLoading) => {\r\n  if (object && object.id) {\r\n    setVisibleObjects(p => {\r\n      const a = [...p, object];\r\n      if (randomized) {\r\n        shuffleArray(a)\r\n      }\r\n      if (sortFunction) {\r\n        a.sort(sortFunction);\r\n      }\r\n      return a;\r\n    });\r\n    setIsLoading(false);\r\n  }\r\n};\r\n\r\n/**\r\n * Displays a list of Users from the database, using the props and making them all look alike.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst UserList = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [ids, setIDs] = useState(null);\r\n  const [typeIDs, setTypeIDs] = useState({});\r\n  const [typeHiddenIDIndex, setTypeHiddenIDIndex] = useState({});\r\n  const [visibleObjects, setVisibleObjects] = useState([]);\r\n  // const [visibleComponents, setVisibleComponents] = useState({});\r\n  // const [hiddenIDIndex, setHiddenIDIndex] = useState(0);\r\n\r\n  // Component will receive new props\r\n  useEffect(() => {\r\n    if (props.userIDs && JSON.stringify(props.userIDs) !== JSON.stringify(ids)) {\r\n      setIsLoading(true);\r\n      const idsTemp = [...props.userIDs];\r\n      if (props.randomized === true) {\r\n        shuffleArray(idsTemp)\r\n      }\r\n      setIDs(idsTemp);\r\n      // setHiddenIDIndex(0);\r\n      setVisibleObjects([]);\r\n      const typeIDsTemp = {};\r\n      const typeHiddenIDIndexTemp = {};\r\n      for (let i = 0; i < idsTemp.length; i++) {\r\n        const id = idsTemp[i];\r\n        const itemType = getItemTypeFromID(id);\r\n        if (itemType === \"Client\" || itemType === \"Trainer\" || itemType === \"Gym\" || itemType === \"Sponsor\") {\r\n          if (typeIDsTemp[itemType]) {\r\n            typeIDsTemp[itemType].push(id);\r\n          } else {\r\n            typeIDsTemp[itemType] = [id];\r\n            typeHiddenIDIndexTemp[itemType] = 0;\r\n          }\r\n        } else {\r\n          err && console.error(\"Found a non-user item type in a user list = \" + itemType);\r\n        }\r\n      }\r\n      setTypeIDs(typeIDsTemp);\r\n      setTypeHiddenIDIndex(typeHiddenIDIndexTemp);\r\n      batchFetchMoreObjects(typeIDsTemp, typeHiddenIDIndexTemp, props.randomized === true, props.sortFunction,\r\n        setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, props.fetchItems);\r\n    }\r\n  }, [props.ids]);\r\n\r\n  const handleVisibilityUpdate = (e, {calculations}) => {\r\n    // alert(\"hey\");\r\n    // alert(JSON.stringify(calculations));\r\n    console.log(calculations);\r\n    if (calculations.bottomVisible) {\r\n      // alert(\"Bottom visible\");\r\n      // alert(JSON.stringify(typeHiddenIDIndex));\r\n      batchFetchMoreObjects(typeIDs, typeHiddenIDIndex, props.randomized === true, props.sortFunction,\r\n        setVisibleObjects, setTypeHiddenIDIndex, setIsLoading, props.fetchItems);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    )\r\n  }\r\n  if (ids && ids.length > 0) {\r\n    return (\r\n      <div>\r\n        <Visibility onUpdate={_.debounce(handleVisibilityUpdate, 250)}>\r\n          <List relaxed verticalAlign=\"middle\">\r\n            {objectComponents(visibleObjects)}\r\n            <Spinner loading={\r\n              (() => {\r\n                for (const itemType in typeIDs) {\r\n                  if (typeIDs.hasOwnProperty(itemType)) {\r\n                    if (typeIDs[itemType].length !== typeHiddenIDIndex[itemType]) {\r\n                      return true\r\n                    }\r\n                  }\r\n                }\r\n                return false;\r\n              })()\r\n            }/>\r\n          </List>\r\n        </Visibility>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <Message>{props.noObjectsMessage}</Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchItems: (ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler) => {\r\n      dispatch(fetchItems(ids, itemType, variableList, startIndex, maxFetch, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nUserList.defaultProps = {\r\n  randomized: false\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserList);\r\n","import React, {useState, useEffect, Fragment} from 'react';\r\nimport {Icon, Modal, Button, Divider, Grid, Message, Image, Tab, Menu, Popup} from 'semantic-ui-react';\r\nimport ClientModal from \"./ClientModal\";\r\nimport {connect} from 'react-redux';\r\nimport {\r\n  fetchClient,\r\n  forceFetchChallenge,\r\n  fetchChallenge,\r\n  subscribeFetchChallenge, fetchStreak\r\n} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport CompleteChallengeModal from \"../manager/CompleteChallengeModal\";\r\nimport {addToUserAttribute, forceFetchUserAttributes, removeFromUserAttribute} from \"../../redux/actions/userActions\";\r\nimport CommentScreen from \"../messaging/MessageBoard\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport InviteFunctions from \"../../database_functions/InviteFunctions\";\r\nimport ChallengeFunctions from \"../../database_functions/ChallengeFunctions\";\r\nimport CreateSubmissionModal from \"../manager/CreateSubmissionModal\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport {getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport {daysLeft, parseISOString} from \"../../logic/TimeHelper\";\r\nimport TrainerModal from \"./TrainerModal\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {arrayIntersection} from \"../../logic/ArrayHelper\";\r\nimport {err} from \"../../../Constants\";\r\nimport SubmissionList from \"../lists/SubmissionList\";\r\nimport UserList from \"../lists/UserList\";\r\nimport ScrollView from \"react-inverted-scrollview\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport {\r\n  addToItemAttribute,\r\n  clearItemQueryCache,\r\n  removeFromItemAttribute,\r\n  removeItem\r\n} from \"../../redux/actions/cacheActions\";\r\n\r\nexport const ChallengeDescriptionModalInfo = {\r\n  // TODO Contains everything that is referenced here\r\n  fetchList: [\"id\", \"item_type\", \"title\", \"endTime\", \"ifCompleted\", \"tags\", \"time_created\", \"capacity\", \"members\",\r\n    \"memberRequests\", \"prize\", \"goal\", \"owner\", \"access\", \"restriction\", \"submissions\", \"streaks\", \"challengeType\",\r\n    \"streakN\", \"streakUpdateSpanType\", \"streakUpdateInterval\"],\r\n  ifSubscribe: true,\r\n};\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any,\r\n  challengeID: string\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param tags\r\n * @return {*}\r\n */\r\nexport const displayTagIcons = (tags) => {\r\n  if (tags) {\r\n    if (tags.length === 1) {\r\n      return (\r\n        <Image avatar src={require('../../img/' + tags[0] + '_icon.png')}/>\r\n      );\r\n    } else if (tags.length === 2) {\r\n      return (\r\n        <div>\r\n          <Image avatar src={require('../../img/' + tags[0] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[1] + '_icon.png')}/>\r\n        </div>\r\n      );\r\n    } else if (tags.length === 3) {\r\n      return (\r\n        <div>\r\n          <Image avatar src={require('../../img/' + tags[0] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[1] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[2] + '_icon.png')}/>\r\n        </div>\r\n      );\r\n    } else if (tags.length === 4) {\r\n      return (\r\n        <div>\r\n          <Image avatar src={require('../../img/' + tags[0] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[1] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[2] + '_icon.png')}/>\r\n          <Image avatar src={require('../../img/' + tags[3] + '_icon.png')}/>\r\n        </div>\r\n      );\r\n    }\r\n  } else {\r\n    return (\r\n      // \"There ain't no tags round these parts partner \" + tags\r\n      null\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param challengeID\r\n * @param setIsLoading\r\n * @param onClose\r\n * @param props\r\n */\r\nconst handleDeleteChallengeButton = (userID, challengeID, setIsLoading, onClose, props) => {\r\n  //console.log(\"Handling deleting the event\");\r\n  setIsLoading(true);\r\n  ChallengeFunctions.delete(userID, challengeID, (data) => {\r\n    // setIsLoading(false);\r\n    // onClose();\r\n  }, () => {\r\n    setIsLoading(false);\r\n  }, props)\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param challengeID\r\n * @param setIsLoading\r\n * @param props\r\n */\r\nconst handleLeaveChallengeButton = (userID, challengeID, setIsLoading, props) => {\r\n  //console.log(\"Handling leaving the event\");\r\n  // this.setState({isLeaveLoading: true, isLoading: true});\r\n  setIsLoading(true);\r\n  UserFunctions.removeChallenge(userID, userID, challengeID, (data) => {\r\n    setIsLoading(false);\r\n    // this.forceUpdate(data.id);\r\n    //console.log(JSON.stringify(data));\r\n    // this.setState({isLoading: false, isLeaveLoading: false, isJoined: false});\r\n  }, (error) => {\r\n    setIsLoading(false);\r\n    //console.log(JSON.stringify(error));\r\n    // this.setState({isLoading: false, isLeaveLoading: false, error: error});\r\n  }, props);\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param challengeID\r\n * @param setIsLoading\r\n * @param {{}} props The component props containing the automatic update functions.\r\n */\r\nconst handleJoinChallengeButton = (userID, challengeID, setIsLoading, props) => {\r\n  //console.log(\"Handling joining the event\");\r\n  // this.setState({isJoinLoading: true, isLoading: true});\r\n  setIsLoading(true);\r\n  UserFunctions.addChallenge(userID, userID, challengeID, null, () => {\r\n    setIsLoading(false);\r\n  }, () => {\r\n    setIsLoading(false);\r\n  }, props);\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param challengeID\r\n * @param setIsLoading\r\n * @param {{}} props The component props containing the automatic update functions.\r\n */\r\nconst handleRequestChallengeButton = (userID, challengeID, setIsLoading, props) => {\r\n  // this.setState({isRequestLoading: true, isLoading: true});\r\n  setIsLoading(true);\r\n  InviteFunctions.createChallengeRequest(userID, userID, challengeID, () => {\r\n    setIsLoading(false);\r\n    // this.forceUpdate();\r\n    // this.setState({isLoading: false, isRequestLoading: false, isRequesting: true});\r\n  }, (error) => {\r\n    setIsLoading(false);\r\n    // this.setState({isLoading: false, isRequestLoading: false, error: error})\r\n  }, props);\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param ownerID\r\n * @param ownerModalOpen\r\n * @param setOwnerModalOpen\r\n * @return {*}\r\n */\r\nexport const createCorrectModal = (ownerID, ownerModalOpen, setOwnerModalOpen) => {\r\n  const itemType = getItemTypeFromID(ownerID);\r\n  if (itemType === \"Client\") {\r\n    return (\r\n      <ClientModal open={ownerModalOpen} onClose={() => setOwnerModalOpen(false)} clientID={ownerID}/>\r\n    );\r\n  } else if (itemType === \"Trainer\") {\r\n    return (\r\n      <TrainerModal open={ownerModalOpen} onClose={() => setOwnerModalOpen(false)} trainerID={ownerID}/>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const selectWinner = (isOwned, openCompleteModal) => {\r\n  if (isOwned) {\r\n    return (\r\n      <Button primary fluid onClick={openCompleteModal}>Select Winner</Button>\r\n    );\r\n  }\r\n}\r\n\r\nconst displaySelectionOptions = (isOwned, openCompleteModal, setSubmitModalOpen) => {\r\n  if (isOwned) {\r\n    return (\r\n      <Grid columns={2} centered celled>\r\n        <Grid.Column>\r\n          {selectWinner(isOwned, openCompleteModal)}\r\n        </Grid.Column>\r\n        <Grid.Column>\r\n          <Button floated='right' primary size='large' circular icon onClick={() => setSubmitModalOpen(true)}\r\n                  style={{}}>\r\n            <Icon name='plus'/>\r\n          </Button>\r\n        </Grid.Column>\r\n      </Grid>\r\n    )\r\n  } else {\r\n    return (\r\n      <Grid>\r\n        <Grid.Column>\r\n          <Button floated='right' primary size='large' circular icon onClick={() => setSubmitModalOpen(true)}\r\n                  style={{}}>\r\n            <Icon name='plus'/>\r\n          </Button>\r\n        </Grid.Column>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param userID\r\n * @param challengeID\r\n * @param submissions\r\n * @param isLoading\r\n * @param isCompleted\r\n * @param isOwned\r\n * @param isJoined\r\n * @param isRestricted\r\n * @param isRequesting\r\n * @param setIsLoading\r\n * @param setSubmitModalOpen\r\n * @param openCompleteModal\r\n * @param props\r\n * @return {*}\r\n */\r\nexport const createCorrectButton = (userID, challengeID, submissions, isLoading, isCompleted, isOwned, isJoined, isRestricted,\r\n                                    isRequesting, setIsLoading, setSubmitModalOpen, openCompleteModal, props) => {\r\n  const panes = [\r\n    {\r\n      menuItem: (<Menu.Item key={0} style={{color: 'purple'}}>Submissions</Menu.Item>), render: () => [\r\n        <Tab.Pane basic className='u-border--0 u-padding--0 u-margin-top--3' style={{background: 'white'}}>\r\n          <ScrollView\r\n            class='chat'\r\n            width='100%'\r\n            height='300px'\r\n          >\r\n            <SubmissionList ids={submissions}\r\n                            noSubmissionsMessage=\"No submissions yet!\"\r\n                            sortFunction={(a, b) => a.time_created.localeCompare(b.time_created)}/>\r\n          </ScrollView>\r\n\r\n          {/*<DatabaseObjectList ids={submissions}*/}\r\n          {/*noObjectsMessage=\"No submissions yet!\"*/}\r\n          {/*acceptedItemTypes={[\"Submission\"]}*/}\r\n          {/*// TODO Check the sort...*/}\r\n          {/*sortFunction={(a, b) => a.time_created.localeCompare(b.time_created)}*/}\r\n          {/*/>*/}\r\n          <Divider/>\r\n          {displaySelectionOptions(isOwned, openCompleteModal, setSubmitModalOpen)}\r\n        </Tab.Pane>\r\n      ]\r\n    },\r\n    {\r\n        menuItem: (<Menu.Item key={1} style={{color: 'purple'}}>Challenge Chat</Menu.Item>), render: () => (\r\n        <Tab.Pane basic className='u-border--0 u-padding--0 u-margin-top--3' style={{background: 'white'}}>\r\n          <CommentScreen board={challengeID}/>\r\n        </Tab.Pane>\r\n      )\r\n    },\r\n  ];\r\n\r\n  //console.log(\"Owned: \" + isOwned + \" Joined: \" + isJoined);\r\n  // console.log(ifCompleted);\r\n  if (isCompleted) {\r\n    return (\r\n      <Button disabled fluid inverted size=\"large\">This Event is completed</Button>\r\n    );\r\n  } else if (isOwned) {\r\n    // TODO This should also link the choose winner button\r\n    return (\r\n      <Fragment>\r\n        <Divider className='u-margin-top--4' color='purple'/>\r\n        <Tab menu={{widths: 2, color: 'purple'}} color='purple' panes={panes} className='u-challenge u-margin-top--2'\r\n             style={{background: 'white', color: 'purple'}}/>\r\n      </Fragment>\r\n    )\r\n  } else if (isJoined) {\r\n    return (\r\n      <Fragment>\r\n        <Divider className='u-margin-top--4'/>\r\n        <Tab menu={{widths: 2, inverted: true}} panes={panes} className='u-challenge u-margin-top--2'\r\n             style={{background: 'white', color: '#ca6dff'}}/>\r\n      </Fragment>\r\n    )\r\n  } else if (isRestricted) {\r\n    if (isRequesting) {\r\n      return (\r\n        <div>\r\n          <Button inverted fluid size=\"large\" disabled={true}>Request Sent!</Button>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (<div><Button loading={isLoading} fluid size=\"large\" disabled={isLoading}\r\n                           onClick={() => handleRequestChallengeButton(userID, challengeID, setIsLoading, props)}>Send\r\n        Join Request</Button></div>)\r\n    }\r\n  } else {\r\n    //console.log(isJoinLoading);\r\n    return (<Button loading={isLoading} fluid size=\"large\" disabled={isLoading}\r\n                    onClick={() => handleJoinChallengeButton(userID, challengeID, setIsLoading, props)}>Join</Button>)\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param ifStreak\r\n * @param {Streak} streak\r\n * @return {*}\r\n */\r\n/*export const displayStreakInfo = (ifStreak, isJoined, streak) => {\r\n    if (ifStreak && isJoined) {\r\n        if (streak) {\r\n            const currentNumber = streak.N;\r\n            const subTasks = streak.currentN;\r\n            const totalTasks = streak.streakN;\r\n            switch (streakInfo(streak)) {\r\n                case \"not_started\":\r\n                    // The User has yet to submit anything\r\n                    return [\r\n                        <Header color=\"purple\"> Complete a Submission to get started! </Header>,\r\n                        <Header color=\"purple\">Streak: <Icon name='fire' size='large' color='purple'/> {currentNumber}</Header>\r\n                    ];\r\n                case \"still_completing\":\r\n                    // This means that this is a multi task streak and the user has not finished all of them\r\n                    return [\r\n                        <Header color=\"purple\"> Almost done for the Streak! Completed {subTasks} out of {totalTasks} for the time interval! </Header>,\r\n                        <Header color=\"purple\">Streak: <Icon name='fire' size='large' color='purple'/> {currentNumber}</Header>\r\n                    ];\r\n                case \"completed\":\r\n                    // This means that the user has completed the Streak for the current time interval.\r\n                    return [\r\n                        <Header color=\"white\"> Completed the Streak for the time interval! </Header>,\r\n                        <Header color=\"white\">Streak: <Icon name='fire' size='large' color='purple'/> {currentNumber}</Header>\r\n                    ];\r\n                case \"not_completed\":\r\n                    // This means that the user has not completed the Streak for the current time interval yet.\r\n                    if (totalTasks > 1) {\r\n                        return [\r\n                            <Header color=\"purple\"> Complete the first Submission to start completing the Streak! Completed 0 out of {totalTasks} for the current time interval</Header>,\r\n                            <Header color=\"purple\">Streak: <Icon name='fire' size='large'\r\n                                                                 color='purple'/> {currentNumber}</Header>\r\n                        ];\r\n                    }\r\n                    else {\r\n                        return [\r\n                            <Header color=\"purple\"> Complete a Submission to keep your Streak going! </Header>,\r\n                            <Header color=\"purple\">Streak: <Icon name='fire' size='large'\r\n                                                                 color='purple'/> {currentNumber}</Header>\r\n                        ];\r\n                    }\r\n                case \"broken\":\r\n                    return [\r\n                        <Header key={0} color=\"grey\"><Icon name='fire extinguisher' size='large' color='grey'/>\r\n                            Your Streak Has Expired! Streak = 0</Header>\r\n                    ];\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            return [\r\n                <Divider key={0}/>,\r\n                <Header key={1} color=\"grey\">Could not read streak data...</Header>\r\n            ];\r\n        }\r\n    }\r\n    return null;\r\n};*/\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param error\r\n * @return {*}\r\n */\r\nexport const displayError = (error) => {\r\n  if (error === \"Error while trying to update an item in the database safely. Error: The item failed the checkHandler: That challenge is already filled up!\") {\r\n    return (<Message negative>\r\n      <Message.Header>Sorry!</Message.Header>\r\n      <p>That challenge is already filled up!</p>\r\n    </Message>);\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param isDeleted\r\n * @return {*}\r\n */\r\nexport const challengeDeleted = (isDeleted) => {\r\n  if (isDeleted) {\r\n    return (<Message negative>\r\n      <Message.Header>This Challenge is Deleted!</Message.Header>\r\n    </Message>);\r\n  }\r\n};\r\n\r\n/**\r\n * This function controls the state of the edit button depending on whether the page is currently being edited or not.\r\n *\r\n * @param {boolean} isEditing If the profile is being edited or not.\r\n * @param {function(boolean)} setIsEditing {boolean} Function for setting the edit boolean.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport function editButton(isEditing, setIsEditing) {\r\n  if (!isEditing) {\r\n    return (\r\n      <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon color={'purple'}>\r\n        <Icon name='edit outline'/>\r\n      </Button>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon color={'purple'}>\r\n          <Icon name='save'/>\r\n        </Button>\r\n        <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon>\r\n          <Icon name='cancel'/>\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * This function controls the state of the settings button depending on whether the user owns or is joined to the\r\n * challenge.\r\n *\r\n * @param {boolean} isOwned If the user owns the challenge or not.\r\n * @param {boolean} isJoined If the user has joined the challenge or not.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport function createCorrectSettingsButton(isOwned, isJoined, challengeID, setIsLoading, isLoading, userID, setCompleteModalOpen, onClose, props) {\r\n  if (isOwned) {\r\n    return (<Popup\r\n      trigger={<Button floated='right' circular icon color={'purple'} style={{marginLeft: '-30px'}}>\r\n        <Icon name='cog'/>\r\n      </Button>}\r\n      content={<Button loading={isLoading} fluid negative size=\"large\" disabled={isLoading}\r\n                       onClick={() => handleDeleteChallengeButton(userID, challengeID, setIsLoading, onClose, props)}>\r\n        Delete</Button>}\r\n      on='click'\r\n      position='bottom right'\r\n    />);\r\n  } else if (isJoined) {\r\n    return (<Popup\r\n      trigger={<Button floated='right' circular icon color={'purple'} style={{marginLeft: '-30px'}}>\r\n        <Icon name='cog'/>\r\n      </Button>}\r\n      content={<Button loading={isLoading} fluid inverted size=\"large\" disabled={isLoading}\r\n                       onClick={() => handleLeaveChallengeButton(userID, challengeID, setIsLoading, props)}>\r\n        Leave\r\n      </Button>}\r\n      on='click'\r\n      position='bottom right'\r\n    />);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nconst getDaysLeft = (endTime) => {\r\n  if (daysLeft(parseISOString(endTime)) <= 0) {\r\n    return \"Challenge Completed\"\r\n  } else if (daysLeft(parseISOString(endTime)) === 1) {\r\n    return daysLeft(parseISOString(endTime)) + \" Day Left\";\r\n  } else {\r\n    return daysLeft(parseISOString(endTime)) + \" Days Left\";\r\n  }\r\n};\r\n\r\n/**\r\n * TODO\r\n *\r\n * @param props\r\n * @return {*}\r\n * @constructor\r\n */\r\nconst ChallengeDescriptionModal = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [challengeType, setChallengeType] = useState(null);\r\n  const [streak, setStreak] = useState(null);\r\n  const [isOwned, setIsOwned] = useState(false);\r\n  const [isRequesting, setIsRequesting] = useState(false);\r\n  const [isJoined, setIsJoined] = useState(false);\r\n  const [isCompleted, setIsCompleted] = useState(false);\r\n  const [isRestricted, setIsRestricted] = useState(false);\r\n  const [ownerModalOpen, setOwnerModalOpen] = useState(false);\r\n  const [completeModalOpen, setCompleteModalOpen] = useState(false);\r\n  const [submitModalOpen, setSubmitModalOpen] = useState(false);\r\n  const [deleted, setDeleted] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const getChallengeAttribute = attribute => getObjectAttribute(props.challengeID, attribute, props.cache);\r\n  const getOwnerAttribute = attribute => getObjectAttribute(getChallengeAttribute(\"owner\"), attribute, props.cache);\r\n\r\n  useEffect(() => {\r\n    if (props.challengeID) {\r\n      // TODO Reset state?\r\n      setChallengeType(null);\r\n      setStreak(null);\r\n      setIsOwned(false);\r\n      setIsRequesting(false);\r\n      setIsJoined(false);\r\n      setIsCompleted(false);\r\n      setIsRestricted(false);\r\n      setOwnerModalOpen(false);\r\n      setCompleteModalOpen(false);\r\n      setSubmitModalOpen(false);\r\n      setDeleted(false);\r\n      setIsEditing(false);\r\n      props.fetchChallenge(props.challengeID, ChallengeDescriptionModalInfo.fetchList, (challenge) => {\r\n        if (challenge) {\r\n          if (challenge.owner) {\r\n            if (challenge.owner === props.user.id) {\r\n              setIsOwned(true);\r\n            }\r\n            const itemType = getItemTypeFromID(challenge.owner);\r\n            if (itemType === \"Client\") {\r\n              props.fetchClient(challenge.owner, [\"id\", \"name\", \"profileImagePath\", \"profileImagePaths\"]);\r\n            } else if (itemType === \"Trainer\") {\r\n              props.fetchTrainer(challenge.owner, [\"id\", \"name\", \"profileImagePath\", \"profileImagePaths\"]);\r\n            }\r\n          }\r\n          if (challenge.members) {\r\n            setIsJoined(challenge.members.includes(props.user.id));\r\n          }\r\n          if (challenge.memberRequests) {\r\n            setIsRequesting(challenge.memberRequests.includes(props.user.id));\r\n          }\r\n          if (challenge.restriction) {\r\n            setIsRestricted(challenge.restriction === \"invite\");\r\n          }\r\n          if (challenge.completed) {\r\n            setIsCompleted(challenge.completed === \"true\");\r\n          }\r\n          if (challenge.challengeType) {\r\n            setChallengeType(challenge.challengeType);\r\n            if (challenge.challengeType === \"streak\") {\r\n              if (challenge.streaks && props.user.streaks) {\r\n                const intersection = arrayIntersection(challenge.streaks, props.user.streaks);\r\n                if (intersection && intersection.length && intersection.length === 1) {\r\n                  props.fetchStreak(intersection[0], [\"lastUpdated\", \"N\", \"bestN\", \"currentN\", \"updateSpanType\", \"updateInterval\", \"lastAttemptStarted\", \"streakN\"], (streak) => {\r\n                    setStreak(streak);\r\n                  });\r\n                } else {\r\n                  err && console.error(\"Could not determine which streak is for this challenge!!\");\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          setDeleted(true);\r\n        }\r\n      }, (error) => {\r\n\r\n      });\r\n    }\r\n    return () => {\r\n      // TODO clean up\r\n    }\r\n  }, [props.challengeID, getChallengeAttribute(\"members\")]);\r\n  // const forceUpdate = () => {\r\n  //     forceFetchChallenge(this.getChallengeAttribute(\"id\"), [\"owner\",\r\n  //         \"time\", \"capacity\", \"title\", \"description\", \"difficulty\", \"memberIDs\", \"memberRequests\", \"access\", \"restriction\", \"prize\"]);\r\n  // };\r\n\r\n\r\n  //This modal displays the challenge information and at the bottom contains a button which allows the user\r\n  //to join a challenge.\r\n  if (!getChallengeAttribute(\"id\")) {\r\n    return (\r\n      <Modal open={props.open} onClose={() => props.onClose()} closeIcon>\r\n        <Spinner loading={true}/>\r\n      </Modal>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <Modal open={props.open} onClose={() => props.onClose()} closeIcon style={{background: '#FFFFFF'}}>\r\n        <Icon className='close' onClick={() => props.onClose()}/>\r\n        <Modal.Header align='center' style={{marginTop: '10px', background: 'white', color: 'purple'}}>\r\n          <div>\r\n            {getChallengeAttribute(\"title\")}\r\n          </div>\r\n          {createCorrectSettingsButton(isOwned, true, props.challengeID, setIsLoading, isLoading,\r\n            props.user.id, setCompleteModalOpen, props.onClose, props)}\r\n          <div>{displayTagIcons(getChallengeAttribute(\"tags\"))}</div>\r\n          <div>\r\n            {getDaysLeft(getChallengeAttribute(\"endTime\"))}\r\n          </div>\r\n        </Modal.Header>\r\n        <Modal.Content align='center' style={{background: 'white'}}>\r\n          <Grid centered columns='equal'>\r\n            <Grid.Row style={{color: 'purple'}}>\r\n              <Icon.Group size='large'>\r\n                <Icon name='bullseye' color='purple'/>\r\n              </Icon.Group> {getChallengeAttribute(\"goal\")}\r\n            </Grid.Row>\r\n            <Grid.Row style={{color: 'purple'}}>\r\n                <Icon.Group size='large'>\r\n                    <Icon name='trophy' color='purple'/>\r\n                </Icon.Group> {getChallengeAttribute(\"prize\")}\r\n            </Grid.Row>\r\n            <Grid.Row>\r\n              <Modal trigger={\r\n                <Button style={{marginTop: '-15px', marginBottom: '20px'}}\r\n                        floated='right' primary className=\"u-button--flat u-padding-left--1\">\r\n                  <Icon name='users' color='purple'/> Members</Button>} closeIcon>\r\n                <Modal.Content>\r\n                  <UserList userIDs={getChallengeAttribute(\"members\")}\r\n                            noUsersMessage={\"No members yet!\"}\r\n                            randomized\r\n                  />\r\n                </Modal.Content>\r\n              </Modal>\r\n            </Grid.Row>\r\n          </Grid>\r\n          <Modal.Description style={{background: 'white'}}>\r\n            {createCorrectModal(getChallengeAttribute(\"owner\"), ownerModalOpen, setOwnerModalOpen)}\r\n            <CompleteChallengeModal open={completeModalOpen} onClose={() => setCompleteModalOpen(false)}\r\n                                    challengeID={props.challengeID}/>\r\n            <CreateSubmissionModal open={submitModalOpen} onClose={() => setSubmitModalOpen(false)}\r\n                                   challengeID={props.challengeID}/>\r\n            {createCorrectButton(props.user.id, props.challengeID, getChallengeAttribute(\"submissions\"),\r\n              isLoading, isCompleted, isOwned, true, isRestricted, isRequesting, setIsLoading,\r\n              setSubmitModalOpen, setCompleteModalOpen, props)}\r\n          </Modal.Description>\r\n          <div>{displayError(props.info.error)}{challengeDeleted(deleted)}</div>\r\n        </Modal.Content>\r\n      </Modal>\r\n      {challengeDeleted(deleted)}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchClient: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    fetchTrainer: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    forceFetchUserAttributes: (attributeList) => {\r\n      dispatch(forceFetchUserAttributes(attributeList));\r\n    },\r\n    fetchChallenge: (id, variablesList, dataHandler, failureHandler) => {\r\n      dispatch(fetchChallenge(id, variablesList, dataHandler, failureHandler));\r\n    },\r\n    subscribeFetchChallenge: (id, variableList, dataHandler) => {\r\n      dispatch(subscribeFetchChallenge(id, variableList, dataHandler));\r\n    },\r\n    forceFetchChallenge: (id, variablesList) => {\r\n      dispatch(forceFetchChallenge(id, variablesList));\r\n    },\r\n    fetchStreak: (id, variableList, dataHandler) => {\r\n      dispatch(fetchStreak(id, variableList, dataHandler));\r\n    },\r\n    addToUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(addToUserAttribute(attributeName, attributeValue));\r\n    },\r\n    addToItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(addToItemAttribute(id, attributeName, attributeValue));\r\n    },\r\n    removeFromUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(removeFromUserAttribute(attributeName, attributeValue));\r\n    },\r\n    removeFromItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(removeFromItemAttribute(id, attributeName, attributeValue));\r\n    },\r\n    removeItem: (itemType, id) => {\r\n      dispatch(removeItem(itemType, id));\r\n    },\r\n    clearItemQueryCache: (itemType) => {\r\n      dispatch(clearItemQueryCache(itemType));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChallengeDescriptionModal);\r\n\r\n/*{displayStreakInfo(challengeType === \"streak\", isJoined, streak)}*/\r\n\r\n","import React, {useState} from 'react';\r\nimport {Card, Image, Message} from 'semantic-ui-react';\r\nimport ChallengeDescriptionModal from '../modals/ChallengeDescriptionModal';\r\nimport {daysLeft, parseISOString} from \"../../logic/TimeHelper\";\r\nimport {getAttributeFromObject} from \"../../logic/CacheRetrievalHelper\";\r\nimport type Challenge from \"../../types/Challenge\";\r\n\r\nexport const ChallengeCardInfo = {\r\n  fetchList: [\"id\", \"item_type\", \"title\", \"endTime\", \"ifCompleted\", \"tags\", \"difficulty\", \"time_created\", \"capacity\",\r\n    \"members\", \"prize\", \"goal\", \"owner\", \"access\", \"restriction\", \"submissions\"],\r\n  ifSubscribe: false,\r\n};\r\n\r\ntype Props = {\r\n  challenge: Challenge\r\n};\r\n\r\nconst pictures = {\r\n  Performance: require('../../img/Performance_icon.png'),\r\n  Strength: require('../../img/Strength_icon.png'),\r\n  Endurance: require('../../img/Endurance_icon.png'),\r\n  HIIT: require('../../img/HIIT_icon.png')\r\n};\r\n\r\n/**\r\n * Displays the tag icons for the Challenge.\r\n *\r\n * @param tags {[string]} The array of names for the tags.\r\n * @return {*} The React JSX to display the tags.\r\n */\r\nconst displayTagIcons = (tags) => {\r\n  if (tags) {\r\n    if (tags.length === 1) {\r\n      return (\r\n        <Image size='small' src={pictures[tags[0]]}/>\r\n      );\r\n    } else if (tags.length === 2) {\r\n      return (\r\n        <div>\r\n          <Image size='tiny' src={pictures[tags[0]]}/>\r\n          <Image size='tiny' src={pictures[tags[1]]}/>\r\n        </div>\r\n      );\r\n    } else if (tags.length === 3) {\r\n      return (\r\n        <div>\r\n          <Image avatar src={pictures[tags[0]]}/>\r\n          <Image avatar src={pictures[tags[1]]}/>\r\n          <Image avatar src={pictures[tags[2]]}/>\r\n        </div>\r\n      );\r\n    } else if (tags.length === 4) {\r\n      return (\r\n        <div>\r\n          <Image avatar src={pictures[tags[0]]}/>\r\n          <Image avatar src={pictures[tags[1]]}/>\r\n          <Image avatar src={pictures[tags[2]]}/>\r\n          <Image avatar src={pictures[tags[3]]}/>\r\n        </div>\r\n      );\r\n    }\r\n  } else {\r\n    return (\r\n      // \"There ain't no tags round these parts partner \" + tags\r\n      null\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} endTime The ISO string for the time the Challenge finishes.\r\n * @return {string}\r\n */\r\nconst getDaysLeft = (endTime) => {\r\n  if (daysLeft(parseISOString(endTime)) <= 0) {\r\n    return \"Challenge Completed\"\r\n  } else if (daysLeft(parseISOString(endTime)) === 1) {\r\n    return daysLeft(parseISOString(endTime)) + \" Day Left\";\r\n  } else {\r\n    return daysLeft(parseISOString(endTime)) + \" Days Left\";\r\n  }\r\n};\r\n\r\n/**\r\n * This is the generic view for how a challenge shows up in any feeds or lists.\r\n * It is used as a modal trigger in the feed.\r\n *\r\n * @param props {Props} The given props to the Component.\r\n * @return {*} The React JSX to display the Challenge Card.\r\n * @constructor\r\n */\r\nconst ChallengeCard = (props: Props) => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const getChallengeAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.challenge, attributeName);\r\n  };\r\n\r\n  if (!props.challenge) {\r\n    return (\r\n      <Message floating negative inverted color=\"purple\">\r\n        <Message.Header>\r\n          Challenge Deleted...\r\n        </Message.Header>\r\n      </Message>\r\n    );\r\n  }\r\n  return (\r\n    // This is displays a few important pieces of information about the challenge for the feed view.\r\n    <Card fluid raised onClick={() => modalOpen || setModalOpen(true)}>\r\n      <Card.Content textAlign='center'>\r\n        <Card.Header textAlign='center' style={{color: 'purple'}}>{getChallengeAttribute(\"title\")}</Card.Header>\r\n        <Card.Meta textAlign='center' style={{color: '#D4AF37'}}>{getDaysLeft(getChallengeAttribute(\"endTime\"))}\r\n        </Card.Meta>\r\n        {displayTagIcons(getChallengeAttribute(\"tags\"))}\r\n        <ChallengeDescriptionModal\r\n          open={modalOpen}\r\n          onClose={() => setModalOpen(false)}\r\n          challengeID={getChallengeAttribute(\"id\")}\r\n          daysLeft={getDaysLeft()}\r\n        />\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <Card.Meta textAlign='center' style={{color: '#D4AF37'}}>\r\n          {getChallengeAttribute(\"membersLength\")} of {getChallengeAttribute(\"capacity\")} spots taken.\r\n        </Card.Meta>\r\n      </Card.Content>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ChallengeCard;\r\n","import React, {Component} from 'react'\r\nimport {List, Message} from 'semantic-ui-react';\r\nimport ChallengeCard from \"../cards/ChallengeCard\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchChallenge} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\n// TODO Refactor\r\n\r\ntype Props = {\r\n  challengeIDs: [string],\r\n  noChallengesMessage: string,\r\n  sortFunction?: any\r\n}\r\n\r\nclass ChallengeList extends Component<Props> {\r\n  state = {\r\n    isLoading: true,\r\n    challengeIDs: null,\r\n    challenges: [],\r\n    sentRequest: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.componentWillReceiveProps(this.props);\r\n  }\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    if (newProps.challengeIDs && this.state.challengeIDs !== newProps.challengeIDs) {\r\n      // alert(\"received challengeIDs = \" + JSON.stringify(newProps.challengeIDs));\r\n      this.setState({isLoading: true, challengeIDs: newProps.challengeIDs, challenges: []}, () => {\r\n        for (let i = 0; i < newProps.challengeIDs.length; i++) {\r\n          this.props.fetchChallenge(newProps.challengeIDs[i], [\"id\", \"tags\", \"title\", \"goal\", \"endTime\", \"time_created\", \"owner\", \"ifCompleted\", \"members\", \"capacity\", \"difficulty\", \"access\", \"restriction\", \"submissions\"], (challenge) => {\r\n            // Handle received data\r\n            if (challenge) {\r\n              this.state.challenges.push(challenge);\r\n            }\r\n            this.setState({isLoading: false});\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    function challengeComponents(challenges, sortFunction) {\r\n      const challengeList = [...challenges];\r\n      const components = [];\r\n      if (sortFunction) {\r\n        challengeList.sort(sortFunction);\r\n      }\r\n      for (const key in challengeList) {\r\n        if (challengeList.hasOwnProperty(key)) {\r\n          components.push(\r\n            <List.Item key={key}>\r\n              <ChallengeCard challenge={challengeList[key]}/>\r\n            </List.Item>\r\n          );\r\n        }\r\n      }\r\n      return components;\r\n    }\r\n\r\n    if (this.props.isLoading) {\r\n      return (\r\n        <Spinner/>\r\n      )\r\n    }\r\n    if (this.state.challenges.length > 0) {\r\n      return (\r\n        <List relaxed verticalAlign=\"middle\">\r\n          {challengeComponents(this.state.challenges, this.props.sortFunction)}\r\n        </List>\r\n      );\r\n    } else {\r\n      return (\r\n        <Message>{this.props.noChallengesMessage}</Message>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchChallenge: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchChallenge(id, variablesList, dataHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChallengeList);\r\n\r\n","import {Auth} from \"aws-amplify\";\r\nimport {err, log} from \"../../Constants\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n/**\r\n * This class wraps all the logic for the Authentication module of Amplify so that we can use it for testing and it\r\n * automatically handles all TestHelper logic. Does everything for Cognito.\r\n */\r\nclass AuthAPI {\r\n  /**\r\n   * Updates the Auth status of the current user if the browser has already stored the authentication tokens for the\r\n   * user so they will automatically sign in when they enter the page.\r\n   *\r\n   * @param {function(*)} successHandler Handles the received cognito user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static getCurrentUser(successHandler, failureHandler) {\r\n    // TODO This could totally be overkill lol\r\n    TestHelper.ifTesting || Auth.currentCredentials();\r\n    // Auth.currentSession();\r\n    // Auth.currentUserCredentials();\r\n    // Auth.currentUserInfo();\r\n    // Auth.currentUserPoolUser();\r\n    TestHelper.ifTesting || Auth.currentAuthenticatedUser().then((user) => {\r\n      log && console.log(\"AUTH: Succeeded update user\");\r\n      successHandler && successHandler(user);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed to get current user!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Starts the sign up flow and creates a user in Cognito with the given information.\r\n   *\r\n   * @param {string} username The chosen username for the user.\r\n   * @param {string} password The chosen password for the user.\r\n   * @param {string} name The chosen name for the user.\r\n   * @param {string} email The chosen email for the user.\r\n   * @param {function(*)} successHandler Handles the data for signing up.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static signUp(username, password, name, email, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.signUp({\r\n      username,\r\n      password,\r\n      attributes: {\r\n        name,\r\n        email,\r\n        gender: \"unspecified\",\r\n        birthdate: \"~undefined\"\r\n      }\r\n    }).then(data => {\r\n      log && console.log(\"AUTH: Succeeded sign up\");\r\n      successHandler && successHandler(data);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed to sign up!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {username, password, name, email};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finishes the sign up flow and confirms the user to be allowed to access the application.\r\n   *\r\n   * @param {string} username The username of the user to confirm.\r\n   * @param {string} code The received code from the user's email.\r\n   * @param {function(*)} successHandler Handles the received cognito user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static confirmSignUp(username, code, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.confirmSignUp(username, code).then(authUser => {\r\n      log && console.log(\"AUTH: Succeeded confirm sign up\");\r\n      successHandler && successHandler(authUser);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed to confirm sign up!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {username, code};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Starts the forgot password flow and sends a confirmation code to the email of the user that has the given\r\n   * username. Eventually allows the user to switch their password.\r\n   *\r\n   * @param {string} username The username of the user to change the password of.\r\n   * @param {function(*)} successHandler Handles the received authentication data.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static forgotPassword(username, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.forgotPassword(username).then(data => {\r\n      log && console.log(\"AUTH: Succeeded forgot password\");\r\n      successHandler && successHandler(data);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed forgot password!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {username};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Confirms the forgot password flow and changes the user's password to the one given.\r\n   *\r\n   * @param {string} username The username for the user to change the password of.\r\n   * @param {string} code The received confirmation code from the user's email.\r\n   * @param {string} newPassword The new password to set the user to.\r\n   * @param {function(*)} successHandler Handles the received authentication data.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static confirmForgotPassword(username, code, newPassword, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.forgotPasswordSubmit(username, code, newPassword).then(data => {\r\n      log && console.log(\"AUTH: Succeeded confirm forgot password\");\r\n      successHandler && successHandler(data);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed to confirm forgot password!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {username, code, newPassword};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Signs in the user for the Auth module using their credentials.\r\n   *\r\n   * @param {string} username The username for the user.\r\n   * @param {string} password The password for the user.\r\n   * @param {function(*)} successHandler Handles the received authenticated cognito user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static signIn(username, password, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.signIn(username, password).then(user => {\r\n      log && console.log(\"AUTH: Succeeded sign in\");\r\n      successHandler && successHandler(user);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed sign in!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {username, password};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Signs into the Google federated identity through their own auth flow.\r\n   *\r\n   * @param {{getAuthResponse: Function, getBasicProfile: Function}} googleUser\r\n   * @param {function(*, {})} successHandler Handles the received authentication credentials and user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static googleSignIn(googleUser, successHandler, failureHandler) {\r\n    // Get all the information from the google user\r\n    const {id_token, expires_at} = googleUser.getAuthResponse();\r\n    const profile = googleUser.getBasicProfile();\r\n    return AuthAPI.federatedSignIn(\"google\", id_token, expires_at, profile.getEmail(), profile.getName(),\r\n      \"~undefined\", \"unspecified\", jwt_decode(id_token).sub, successHandler, failureHandler);\r\n  }\r\n\r\n  /**\r\n   * Signs into the Facebook federated identity through their own auth flow.\r\n   *\r\n   * TODO Implement when adding the functionality in...\r\n   *\r\n   * @param token\r\n   * @param expires_at\r\n   * @param {function(*)} successHandler Handles the received authenticated cognito user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static facebookSignIn(token, expires_at, successHandler, failureHandler) {\r\n    alert(\"TODO\");\r\n  }\r\n\r\n  /**\r\n   * Signs into a federated identity, managed by another company. Allows us to do one-click sign in using Google or\r\n   * Facebook.\r\n   *\r\n   * @param {string} federation The name of the federation to handle the sign in.\r\n   * @param {string} token The token received from the federation for the sign in.\r\n   * @param {string} expires_at The expiration time stamp for the token.\r\n   * @param {string} email The email of the user received from the federation.\r\n   * @param {string} name The name of the user received from the federation.\r\n   * @param {string} birthdate The date of birth of the user received from the federation.\r\n   * @param {string} gender The gender of the user received from the federation.\r\n   * @param {string} sub The unique sub string from the federated identity.\r\n   * @param {function(*, {})} successHandler Handles the received authentication credentials and user.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static federatedSignIn(federation, token, expires_at, email, name, birthdate, gender, sub,\r\n                         successHandler, failureHandler) {\r\n    const federatedUser = {email, name, birthdate, gender, sub};\r\n    TestHelper.ifTesting || Auth.federatedSignIn('google', {token, expires_at}, federatedUser).then(user => {\r\n      log && console.log(\"AUTH: Succeeded federated sign in\");\r\n      successHandler && successHandler(user, federatedUser);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed federated sign in!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({}, federatedUser);\r\n      return {federation, token, expires_at, email, name, birthdate, gender, sub};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Changes the password of the current authenticated user.\r\n   *\r\n   * @param {string} oldPassword The current password of the User.\r\n   * @param {string} newPassword The new password for the User.\r\n   * @param {function(*)} successHandler Handles the received authentication credentials and user.\r\n   * @param {function(Error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static changePassword(oldPassword, newPassword, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.currentAuthenticatedUser()\r\n      .then(user => Auth.changePassword(user, oldPassword, newPassword))\r\n      .then((data) => {\r\n        log&&console.log(\"User successfully changed password!\");\r\n        successHandler && successHandler(data);\r\n      }).catch((error) => {\r\n        err&&console.error(\"User failed changed password!\");\r\n        err&&console.error(error);\r\n        failureHandler && failureHandler(error);\r\n      });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Signs out of the Authentication completely, removing all user data from the Auth module.\r\n   *\r\n   * @param {function(*)} successHandler Handles the received authentication data.\r\n   * @param {function(error)} failureHandler Handles any authentication errors if necessary.\r\n   * @return {*} Debugging info for the Auth operation.\r\n   */\r\n  static signOut(successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Auth.signOut({global: true}).then(data => {\r\n      log && console.log(\"AUTH: Succeeded sign out\");\r\n      successHandler && successHandler(data);\r\n    }).catch(error => {\r\n      err && console.error(\"!!!AUTH: Failed sign out!!!\");\r\n      err && console.error(error);\r\n      failureHandler && failureHandler(error);\r\n    });\r\n    if (TestHelper.ifTesting) {\r\n      successHandler && successHandler({});\r\n      return {};\r\n    }\r\n  }\r\n}\r\n\r\nexport default AuthAPI;","import Auth from \"../../api/Auth\";\r\nimport {setAppIsNotLoading, setError, setIsLoading, setIsNotLoading} from \"./infoActions\";\r\nimport {setUser, forceSetUser, subscribeFetchUserAttributes} from \"./userActions\";\r\nimport {removeAllHandlers} from \"./ablyActions\";\r\nimport QL from \"../../api/GraphQL\";\r\nimport {appUserItemType, err, log, userInitialFetchList} from \"../../../Constants\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\n\r\n// =========================================================================================================\r\n// ~ High-Level Auth Actions\r\n// =========================================================================================================\r\n\r\n/**\r\n * Updates the authentication status of the application. Used for when the user opens up the app again and the cookies\r\n * still have their credentials, so we can automatically log them in.\r\n *\r\n * @return {function(function(*))} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function updateAuth() {\r\n  return (dispatch) => {\r\n    // TODO This could totally be overkill lol\r\n    // Auth.currentCredentials();\r\n    // Auth.currentSession();\r\n    // Auth.currentUserCredentials();\r\n    // Auth.currentUserInfo();\r\n    // Auth.currentUserPoolUser();\r\n    // Auth.currentAuthenticatedUser().then((user) => {\r\n    Auth.getCurrentUser(user => {\r\n      log && console.log(\"UPDATING AUTH WITH USER:\");\r\n      log && console.log(JSON.stringify(user));\r\n      if (user.username) {\r\n        // Regular sign in\r\n        QL.getItemByUsername(appUserItemType, user.username, [\"id\", \"username\"], (user) => {\r\n          if (user) {\r\n            log && console.log(\"REDUX: Successfully updated the authentication credentials\");\r\n            dispatch(setUser(user));\r\n            // dispatch(addHandlerToNotifications((message) => {\r\n            //     console.log(\"Received ABLY notification!!!!!\\n\" + JSON.stringify(message));\r\n            // }));\r\n            dispatch(subscribeFetchUserAttributes(userInitialFetchList, () => {\r\n              dispatch(authLogIn());\r\n              dispatch(setIsNotLoading());\r\n              dispatch(setAppIsNotLoading());\r\n            }));\r\n          } else {\r\n            log && console.log(\"REDUX: Could not fetch the client\");\r\n            dispatch(setError(Error(\"User not found in the database\")));\r\n            dispatch(setIsNotLoading());\r\n            dispatch(setAppIsNotLoading());\r\n            Auth.signOut();\r\n          }\r\n        }, (error) => {\r\n          err && console.error(\"REDUX: Could not fetch the user, not logged in\");\r\n          err && console.error(error);\r\n          // dispatch(setError(error));\r\n          dispatch(setIsNotLoading());\r\n          dispatch(setAppIsNotLoading());\r\n          Auth.signOut();\r\n        });\r\n      } else if (user.sub) {\r\n        // Federated Identities sign in\r\n        QL.getItemByFederatedID(appUserItemType, user.sub, [\"id\", \"username\", \"federatedID\"], (user) => {\r\n          log && console.log(\"REDUX: Successfully updated the authentication credentials for federated identity\");\r\n          if (user) {\r\n            dispatch(setUser(user));\r\n            dispatch(subscribeFetchUserAttributes(userInitialFetchList, () => {\r\n              dispatch(authLogIn());\r\n              dispatch(setIsNotLoading());\r\n              dispatch(setAppIsNotLoading());\r\n            }));\r\n            // dispatch(addHandlerToNotifications((message) => {\r\n            //     console.log(\"Received ABLY notification!!!!!\\n\" + JSON.stringify(message));\r\n            // }));\r\n          } else {\r\n            err && console.error(\"REDUX: Could not find the federated identity user\");\r\n            dispatch(setError(Error(\"Could not find the federated identity user\")));\r\n            dispatch(setIsNotLoading());\r\n            dispatch(setAppIsNotLoading());\r\n            Auth.signOut();\r\n          }\r\n        }, (error) => {\r\n          err && console.error(\"REDUX: Could not fetch the federated identity user\");\r\n          dispatch(setError(error));\r\n          dispatch(setIsNotLoading());\r\n          dispatch(setAppIsNotLoading());\r\n          Auth.signOut();\r\n        });\r\n      }\r\n    }, (error) => {\r\n      err && console.error(error);\r\n      // dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n      dispatch(setAppIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Logs into the application using the username and password fields.\r\n *\r\n * @param {string} username The username inputted for the login.\r\n * @param {string} password The password inputted for the login.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function logIn(username, password) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    // Auth.signIn(username, password).then(() => {\r\n    Auth.signIn(username, password, () => {\r\n      QL.getItemByUsername(appUserItemType, username, [\"id\", \"username\"], (user) => {\r\n        if (user) {\r\n          log && console.log(\"REDUX: Successfully logged in!\");\r\n          if (getStore().user.id !== user.id) {\r\n            dispatch(forceSetUser(user));\r\n          } else {\r\n            dispatch(setUser(user));\r\n          }\r\n          dispatch(subscribeFetchUserAttributes(userInitialFetchList, () => {\r\n            dispatch(authLogIn());\r\n            dispatch(setIsNotLoading());\r\n            dispatch(setAppIsNotLoading());\r\n          }));\r\n        } else {\r\n          log && console.log(\"REDUX: Could not fetch the client\");\r\n          dispatch(setError(Error(\"User not found in the database\")));\r\n          dispatch(setIsNotLoading());\r\n        }\r\n      }, (error) => {\r\n        log && console.log(\"REDUX: Could not fetch the client\");\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n      });\r\n    }, (error: { code: string }) => {\r\n      // console.log(JSON.stringify(error));\r\n      // console.log(error.code);\r\n      if (error.code === \"UserNotConfirmedException\") {\r\n        // This means that the user has not been confirmed yet!\r\n        dispatch(authSignUp());\r\n        dispatch(openSignUpModal());\r\n        dispatch(setIsNotLoading());\r\n        // }\r\n        // else if (error.code === 'PasswordResetRequiredException'){\r\n        //     // Reset Password Required\r\n        // } else if (error.code === 'NotAuthorizedException'){\r\n        //     // Not Authorized (Incorrect Password)\r\n        // } else if (error.code === 'ResourceNotFoundException'){\r\n        // User Not found\r\n      } else {\r\n        // Unknown\r\n        log && console.log(\"REDUX: Failed log in...\");\r\n        err && console.error(error);\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Logs out of the application and cleans up the app from the user.\r\n *\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function logOut() {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    // const userID = getStore().user.id;\r\n    // Auth.signOut({global: true}).then((data) => {\r\n    Auth.signOut(() => {\r\n      log && console.log(\"REDUX: Successfully logged out!\");\r\n      dispatch(authLogOut());\r\n      dispatch(removeAllHandlers());\r\n      dispatch(setIsNotLoading());\r\n    }, (error) => {\r\n      err && console.error(\"REDUX: Failed log out...\");\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Signs into the application using the Google Sign in Auth Flow. If the user is just first joining in, then it creates\r\n * a new User object for the person using the application.\r\n *\r\n * @param {{getAuthFunction: Function(), getBasicProfile: Function()}} googleUser The Google User API object from the Authenticated response.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function googleSignIn(googleUser) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    Auth.googleSignIn(googleUser, (credentials, user) => {\r\n      // The ID token you need to pass to your backend and the expires_at token:\r\n      const sub = user.sub;\r\n      const name = user.name;\r\n      const email = user.email;\r\n      log && console.log(\"Successfully federated sign in!\");\r\n      QL.getItemByFederatedID(appUserItemType, sub, [\"id\", \"username\", \"federatedID\"], (user) => {\r\n        if (user) {\r\n          // Then this user has already signed up\r\n          log && console.log(\"REDUX: Successfully logged in!\");\r\n          dispatch(federatedAuthLogIn());\r\n          if (getStore().user.id !== user.id) {\r\n            dispatch(forceSetUser(user));\r\n          } else {\r\n            dispatch(setUser(user));\r\n          }\r\n          // dispatch(addHandlerToNotifications((message) => {\r\n          //     console.log(\"Received ABLY notification!!!!!\\n\" + JSON.stringify(message));\r\n          // }));\r\n          dispatch(setIsNotLoading());\r\n        } else {\r\n          // This user has not yet signed up!\r\n          log && console.log(\"User hasn't signed up yet! Generating a new account!\");\r\n          // Generate a google username using their name without any spaces\r\n          generateGoogleUsername(name.replace(/\\s+/g, ''), (username) => {\r\n            UserFunctions.createFederatedUser(null, appUserItemType, name, email, username, sub, (data) => {\r\n              // Then this user has already signed up\r\n              const id = data.data;\r\n              user = {\r\n                id,\r\n                username,\r\n                name,\r\n                email,\r\n              };\r\n              log && console.log(\"REDUX: Successfully signed up!\");\r\n              dispatch(federatedAuthLogIn());\r\n              if (getStore().user.id !== user.id) {\r\n                dispatch(forceSetUser(user));\r\n              } else {\r\n                dispatch(setUser(user));\r\n              }\r\n              // dispatch(addHandlerToNotifications((message) => {\r\n              //     console.log(\"Received ABLY notification!!!!!\\n\" + JSON.stringify(message));\r\n              // }));\r\n              dispatch(setIsNotLoading());\r\n            }, (error) => {\r\n              err && console.error(\"REDUX: Could not create the federated client!\");\r\n              err && console.error(error);\r\n              dispatch(setError(error));\r\n              dispatch(setIsNotLoading());\r\n              Auth.signOut();\r\n            });\r\n          }, (error) => {\r\n            err && console.error(\"REDUX: Could not generate the client username!\");\r\n            err && console.error(error);\r\n            dispatch(setError(error));\r\n            dispatch(setIsNotLoading());\r\n            Auth.signOut();\r\n          });\r\n        }\r\n      }, (error) => {\r\n        err && console.error(\"REDUX: Could not fetch the client by federated ID!\");\r\n        err && console.error(error);\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n        Auth.signOut();\r\n      });\r\n    }, (error) => {\r\n      err && console.error(\"Error while federation sign in!\");\r\n      err && console.error(error);\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Generates a new username from the Google User's information and checks that it actually is a unique username in the\r\n * database before attempting to sign up with it.\r\n *\r\n * @param {string} name The name of the Google User.\r\n * @param {function(string)} usernameHandler The function that handles the finished prepared username.\r\n * @param {function(error)} failureHandler The function that handles any potential errors.\r\n * @param {number} depth The recursion depth of the function. Initialized at 0.\r\n */\r\nfunction generateGoogleUsername(name, usernameHandler, failureHandler, depth = 0) {\r\n  const randomInt = Math.floor((Math.random() * 10000000) + 1);\r\n  // Remove white space from the name before creating the random google username\r\n  const randomGoogleUsername = name.replace(/\\s+/g, '') + randomInt;\r\n  QL.getItemByUsername(appUserItemType, randomGoogleUsername, [\"username\"], (user) => {\r\n    if (user) {\r\n      // That means there's a conflict\r\n      log && console.log(\"Conflicting username = \" + randomGoogleUsername);\r\n      if (depth > 20) {\r\n        failureHandler(new Error(\"Too many tried usernames... Try again!\"));\r\n      } else {\r\n        generateGoogleUsername(name, usernameHandler, failureHandler, depth + 1);\r\n      }\r\n    } else {\r\n      // That means that there is no username\r\n      log && console.log(\"Username free! Username = \" + randomGoogleUsername);\r\n      usernameHandler(randomGoogleUsername);\r\n    }\r\n  }, (error) => {\r\n    err && console.error(\"Error querying for username while getting Federated username! Error: \" + JSON.stringify(error));\r\n    failureHandler(error);\r\n  });\r\n}\r\n\r\n/**\r\n * Signs up to the Vastus Application using the given fields in the sign up flow.\r\n *\r\n * @param {string} username The given (unique) username for the User to identify with.\r\n * @param {string} password The password for the User to log in with.\r\n * @param {string} name The display name for the User to show.\r\n * @param {string} email The User's email address.\r\n * @param {string} enterpriseID The potential enterprise ID given for a User for their enterprise account.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function signUp(username, password, name, email, enterpriseID) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    // TODO Check the enterprise ID and then use it in the Creation!\r\n    UserFunctions.createUser(null, appUserItemType, name, email, username, (data) => {\r\n      Auth.signUp(username, password, name, email, () => {\r\n        dispatch(authSignUp());\r\n        dispatch(setIsNotLoading());\r\n      }, (error) => {\r\n        dispatch(setError(error));\r\n        dispatch(setIsNotLoading());\r\n        // Delete the User after operation fails...\r\n        UserFunctions.deleteUser(data.data, appUserItemType, data.data);\r\n      });\r\n    }, (error) => {\r\n      err && console.error(\"REDUX: Creating new client failed...\");\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Confirms the Sign up from the verification code sent to the User's email.\r\n *\r\n * @param {string} username The username of the User.\r\n * @param {string} confirmationCode The confirmation code for the user to input.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function confirmSignUp(username, confirmationCode) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    // Auth.confirmSignUp(username, confirmationCode).then((authUser) => {\r\n    Auth.confirmSignUp(username, confirmationCode, () => {\r\n      dispatch(closeSignUpModal());\r\n      dispatch(authConfirmSignUp());\r\n      dispatch(setIsNotLoading());\r\n    }, (error) => {\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Triggers the forgot password flow, allowing the user to have a reset password token sent to their email.\r\n *\r\n * @param {string} username The username of the User.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function forgotPassword(username) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    // Auth.forgotPassword(username).then(() => {\r\n    Auth.forgotPassword(username, () => {\r\n      dispatch(authForgotPassword());\r\n      dispatch(setIsNotLoading());\r\n    }, (error) => {\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Resets the User's password after receiving the forgot password confirmation code.\r\n *\r\n * @param {string} username The User's identifying username.\r\n * @param {string} confirmationCode The confirmation code that the User received from the email.\r\n * @param {string} newPassword The new password the want to give to their account.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function confirmForgotPassword(username, confirmationCode, newPassword) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    // Auth.forgotPasswordSubmit(username, confirmationCode, newPassword).then(() => {\r\n    Auth.confirmForgotPassword(username, confirmationCode, newPassword, () => {\r\n      log && console.log(\"REDUX: Successfully submitted forgot password!\");\r\n      dispatch(authConfirmForgotPassword());\r\n      // dispatch(closeForgotPasswordModal());\r\n      dispatch(setIsNotLoading());\r\n    }, (error) => {\r\n      err && console.error(\"REDUX: Failed submitting forgot password...\");\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Changes the User's password.\r\n *\r\n * @param {string} oldPassword The old password of the User.\r\n * @param {string} newPassword The new password to give to the current User.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function changePassword(oldPassword, newPassword) {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    Auth.changePassword(oldPassword, newPassword, () => {\r\n      log&&console.log(\"REDUX: Successfully changed password!\");\r\n      dispatch(setIsNotLoading());\r\n    }, (error) => {\r\n      err && console.error(\"REDUX: Failed changing password...\");\r\n      dispatch(setError(error));\r\n      dispatch(setIsNotLoading());\r\n    });\r\n  }\r\n}\r\n\r\n// =========================================================================================================\r\n// ~ Low-Level Auth Actions\r\n// =========================================================================================================\r\n\r\nexport function openSignUpModal() {\r\n  return {\r\n    type: 'OPEN_SIGN_UP_MODAL'\r\n  };\r\n}\r\n\r\nexport function closeSignUpModal() {\r\n  return {\r\n    type: 'CLOSE_SIGN_UP_MODAL'\r\n  };\r\n}\r\n\r\nexport function openForgotPasswordModal() {\r\n  return {\r\n    type: 'OPEN_FORGOT_PASSWORD_MODAL'\r\n  };\r\n}\r\n\r\nexport function closeForgotPasswordModal() {\r\n  return {\r\n    type: 'CLOSE_FORGOT_PASSWORD_MODAL'\r\n  };\r\n}\r\n\r\nfunction authLogIn() {\r\n  return {\r\n    type: 'LOG_IN'\r\n  };\r\n}\r\n\r\nfunction federatedAuthLogIn() {\r\n  return {\r\n    type: 'FEDERATED_LOG_IN'\r\n  }\r\n}\r\n\r\nfunction authLogOut() {\r\n  return {\r\n    type: 'LOG_OUT'\r\n  };\r\n}\r\n\r\nfunction authSignUp() {\r\n  return {\r\n    type: 'SIGN_UP'\r\n  };\r\n}\r\n\r\nfunction authConfirmSignUp() {\r\n  return {\r\n    type: 'CONFIRM_SIGN_UP'\r\n  };\r\n}\r\n\r\nfunction authForgotPassword() {\r\n  return {\r\n    type: 'FORGOT_PASSWORD'\r\n  };\r\n}\r\n\r\nfunction authConfirmForgotPassword() {\r\n  return {\r\n    type: 'CONFIRM_FORGOT_PASSWORD'\r\n  };\r\n}\r\n","import React from 'react';\r\nimport {Button} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport {logOut} from \"../../redux/actions/authActions\";\r\n\r\n/**\r\n * The log out button to allow the User to sign out of their account. Handles the logic of it too.\r\n *\r\n * @param {{}} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst LogOutButton = (props) => (\r\n  <Button circular primary style={{color: 'white'}} size=\"large\" onClick={() => props.logOut()} width={5}>Log Out</Button>\r\n);\r\n\r\nconst mapStateToProps = state => ({});\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    logOut: () => {\r\n      dispatch(logOut());\r\n    }\r\n  }\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LogOutButton);","import React, {useState} from 'react'\nimport {connect} from \"react-redux\";\nimport {Button, Card, Modal, Dimmer, Loader, Input, Icon, Grid, Popup} from 'semantic-ui-react'\nimport ChallengeList from \"../../vastuscomponents/components/lists/ChallengeList\";\nimport DatabaseObjectList from \"../../vastuscomponents/components/lists/DatabaseObjectList\";\nimport ProfileImage from \"../../vastuscomponents/components/props/ProfileImage\";\nimport LogOutButton from \"../../vastuscomponents/components/manager/LogOutButton\";\nimport Calendar from \"./Calendar.js\";\n\n/**\n * Displays either the name or an input to change the name if the page is in an editing state.\n *\n * @param {boolean} isEditing If the profile is currently in the editing phase.\n * @param {string} name The name of the user for the profile.\n * @returns {*} The React JSX used to display the component.\n */\nfunction displayName(isEditing, name) {\n  if (!isEditing) {\n    return (\n      <Card.Header as=\"h2\" style={{\"margin\": \"12px 0 0\", color: 'purple'}}>{name}</Card.Header>\n    );\n  } else {\n    return (\n      <Input color='white' style={{color: 'white', background: 'white'}} defaultValue={name}/>\n    );\n  }\n}\n\n/**\n * This function controls the state of the edit button depending on whether the page is currently being edited or not.\n *\n * @param {boolean} isEditing If the profile is being edited or not.\n * @param {function(boolean)} setIsEditing {boolean} Function for setting the edit boolean.\n * @returns {*} The React JSX used to display the component.\n */\nfunction editButton(isEditing, setIsEditing) {\n  if (!isEditing) {\n    return (\n      <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon color={'purple'}>\n        <Icon name='edit outline'/>\n      </Button>\n    );\n  } else {\n    return (\n      <div>\n        <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon color={'purple'}>\n          <Icon name='save'/>\n        </Button>\n        <Button onClick={() => setIsEditing(p => !p)} floated='left' circular icon>\n          <Icon name='cancel'/>\n        </Button>\n      </div>\n    );\n  }\n}\n\n// function saveChanges(setIsEditing, name) {\n//     setIsEditing(p => !p);\n// }\n\n/**\n * This is the profile page which displays information about the current user.\n *\n * @param {Props} props The given props to the component.\n * @returns {*} The React JSX used to display the component.\n * @constructor\n */\nconst ProfileTab = (props) => {\n  const [isEditing, setIsEditing] = useState(false);\n\n  if (!props.user) {\n    return (\n      <Dimmer>\n        <Loader/>\n      </Dimmer>\n    )\n  }\n  return (\n    <Card fluid raised style={{marginTop: '50px'}}>\n      <Card.Content textAlign=\"center\">\n        {editButton(isEditing, setIsEditing)}\n        <Popup style={{marginTop: '-70px'}}\n          trigger={<Button floated='right' circular icon color={'#7F47AE'}>\n            <Icon name='cog'/>\n          </Button>}\n          content={<LogOutButton/>}\n          on='click'\n          position='bottom right'\n          basic\n          style={{background: 'white', color: 'white'}}\n        />\n        <ProfileImage userID={props.user.id} profileImage={props.user.profileImage}\n                      profileImagePaths={props.user.profileImagePaths} profileImages={props.user.profileImages}\n                      editable={isEditing} />\n        <Grid columns={1}>\n          <Grid.Row>\n            <Grid.Column>\n              {displayName(isEditing, props.user.name)}\n              <Card.Meta style={{marginBottom: '20px', color: '#D4AF37'}}\n              >Challenge Wins: {props.user.challengesWon ? props.user.challengesWon.length : 0}</Card.Meta>\n\n              <Modal basic size='mini' closeIcon\n                     trigger={<Button primary circular icon size=\"massive\"><Icon name=\"bookmark outline\"/></Button>}>\n                <Modal.Content>\n                  <ChallengeList challengeIDs={props.user.completedChallenges}\n                                 noChallengesMessage={\"No completed challenges yet!\"}/>\n                </Modal.Content>\n              </Modal>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </Card.Content>\n    </Card>\n  );\n};\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps)(ProfileTab);\n\n/*<Modal size='large' closeIcon\n       trigger={<Button primary circular icon size=\"massive\"><Icon name=\"users\"/></Button>}>\n    <Modal.Header>Buddy List</Modal.Header>\n    <Modal.Content image>\n        <Modal.Description>\n            <DatabaseObjectList\n                ids={props.user.friends}\n                noObjectsMessage={\"No friends yet!\"}\n                acceptedItemTypes={[\"Client\", \"Trainer\"]}\n                randomized\n            />\n        </Modal.Description>\n    </Modal.Content>\n</Modal>\n<div>Buddy List</div>*/\n\n/*<Modal size='large' closeIcon\n       trigger={<Button primary circular icon size=\"massive\">\n           <Icon name=\"calendar\" style={{marginLeft: '-10px'}}/></Button>}>\n    <Modal.Header>Scheduled Challenges</Modal.Header>\n    <Modal.Content image>\n        <Modal.Description>\n            <Calendar/>\n        </Modal.Description>\n    </Modal.Content>\n</Modal>\n<div>Calendar</div>*/\n\n/*<Grid columns={2}>\n    <Grid.Row>\n        <Grid.Column>\n            <Modal basic size='mini' closeIcon\n                   trigger={<Button primary circular icon size=\"massive\">\n                       <Icon name=\"trophy\"/>\n                   </Button>}>\n                <Modal.Content>\n                    <DatabaseObjectList\n                        ids={props.user.ownedChallenges}\n                        noObjectsMessage={\"No Owned Challenges yet!\"}\n                        acceptedItemTypes={[\"Challenge\"]}\n                        randomized\n                    />\n                </Modal.Content>\n            </Modal>\n            <div>Owned Challenges</div>\n        </Grid.Column>*/","import React, {useState, useEffect, Fragment} from 'react'\r\nimport _ from 'lodash'\r\nimport {Visibility} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux';\r\nimport {fetchTrainerQuery} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {log, err} from \"../../../Constants\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport TrainerCard, {TrainerCardInfo} from \"../cards/TrainerCard\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\nconst trainerFeedLength = 10;\r\n\r\ntype Props = {\r\n  filter: any\r\n};\r\n\r\n/**\r\n * Fetches another set of Trainers with a query for the feed.\r\n *\r\n * @param {{}} filter The GraphQL filter to dictate how the query filters the objects.\r\n * @param {string|null} nextToken The next token from the previous query or null if it's the first query.\r\n * @param {boolean} isFinished If the querying has finished and there are no more objects to fetch.\r\n * @param {[string]} friends The friends list of the User viewing this Trainer Feed.\r\n * @param {function([string], {}, number, string, function({}), function(error))} fetchTrainerQuery The cache function\r\n * to fetch a Group query.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(boolean)} setIsFinished Sets the if finished state.\r\n * @param {function(string)} setNextToken Sets the next token state.\r\n * @param {function([{}])} setTrainers Sets the trainers state.\r\n */\r\nconst queryTrainers = (filter, nextToken, isFinished, friends, fetchTrainerQuery, setIsLoading, setIsFinished,\r\n                       setNextToken, setTrainers) => {\r\n  if (!isFinished) {\r\n    setIsLoading(true);\r\n    debugAlert(\"Fetching Trainer Feed Query\");\r\n    fetchTrainerQuery(TrainerCardInfo.fetchList, filter, trainerFeedLength, nextToken, (data) => {\r\n      if (!data.nextToken) {\r\n        setIsFinished(true);\r\n      }\r\n      if (data.items) {\r\n        for (let i = 0; i < data.items.length; i++) {\r\n          const trainer = data.items[i];\r\n          // Filter the results based on if we are able to see it\r\n          setTrainers(p => [...p, trainer]);\r\n        }\r\n        setNextToken(data.nextToken);\r\n      } else {\r\n        // TODO Came up with no trainers\r\n      }\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      err && console.error(\"Querying Groups failed!\");\r\n      err && console.error(error);\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Displays a feed of Trainers which are queried using the filter provided. Also uses the semantic ui react Visibility\r\n * module in order to delay fetching of Posts until directly requested.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst TrainerFeed = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n  const [nextToken, setNextToken] = useState(null);\r\n  const [trainers, setTrainers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (props.user.id) {\r\n      setTrainers([]);\r\n      queryTrainers(props.filter, nextToken, isFinished, props.user.friends, props.fetchTrainerQuery,\r\n        setIsLoading, setIsFinished, setNextToken, setTrainers);\r\n    }\r\n  }, [props.user.id]);\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   * @param calculations\r\n   */\r\n  const handleUpdate = (e, {calculations}) => {\r\n    log && console.log(calculations.bottomVisible);\r\n    if (calculations.bottomVisible && !isLoading) {\r\n      log && console.log(\"Next Token: \" + nextToken);\r\n      queryTrainers(props.filter, nextToken, isFinished, props.user.friends, props.fetchTrainerQuery,\r\n        setIsLoading, setIsFinished, setNextToken, setTrainers);\r\n    }\r\n  };\r\n\r\n  //This displays the rows in a grid format, with visibility enabled so that we know when the bottom of the page\r\n  //is hit by the user.\r\n  return (\r\n    <Visibility onUpdate={_.debounce(handleUpdate, 250)}>\r\n      {_.times(trainers.length, i => (\r\n        <Fragment key={i + 1}>\r\n          <TrainerCard trainer={trainers[i]}/>\r\n        </Fragment>\r\n      ))}\r\n      {!isFinished && <Spinner/>}\r\n    </Visibility>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchTrainerQuery: (variablesList, filter, limit, nextToken, dataHandler, failureHandler) => {\r\n      dispatch(fetchTrainerQuery(variablesList, filter, limit, nextToken, dataHandler, failureHandler));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TrainerFeed);\r\n","import React, {useState, useEffect, Fragment} from 'react'\nimport _ from 'lodash'\nimport {Visibility} from 'semantic-ui-react'\nimport PostCard, {PostCardInfo} from \"../cards/PostCard\";\nimport {connect} from 'react-redux';\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\nimport {\n  fetchPost,\n  fetchChallenge,\n  fetchClient,\n  fetchTrainer,\n  fetchPostQuery, fetchGroup\n} from \"../../redux/convenience/cacheItemTypeActions\";\nimport {fetchUserAttributes} from \"../../redux/actions/userActions\";\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\nimport {log, err} from \"../../../Constants\";\nimport ClientDetailCard from \"../cards/post_detail_cards/ClientDetailCard\";\nimport TrainerDetailCard from \"../cards/post_detail_cards/TrainerDetailCard\";\nimport PostDetailCard from \"../cards/post_detail_cards/PostDetailCard\";\nimport {GroupDetailCardInfo} from \"../cards/post_detail_cards/GroupDetailCard\";\nimport {EventDetailCardInfo} from \"../cards/post_detail_cards/EventDetailCard\";\nimport {ChallengeDetailCardInfo} from \"../cards/post_detail_cards/ChallengeDetailCard\";\nimport Spinner from \"../props/Spinner\";\n\nconst postFeedLength = 5;\n\ntype Props = {\n  filter: any\n};\n\n/**\n * Fetches another set of Posts with a query for the feed.\n *\n * @param {{}} filter The GraphQL filter to dictate how the query filters the objects.\n * @param {string|null} nextToken The next token from the previous query or null if it's the first query.\n * @param {boolean} isFinished If the querying has finished and there are no more objects to fetch.\n * @param {string} userID The ID of the User viewing this Post Feed.\n * @param {[string]} friends The friends list of the User viewing this Post Feed.\n * @param {function([string], {}, number, string, function({}), function(error))} fetchPostQuery The redux function to\n * fetch a Post query.\n * @param {function(string, [string], function({}), function(error))} fetchClient Cache function to fetch a Client.\n * @param {function(string, [string], function({}), function(error))} fetchTrainer Cache function to fetch a Trainer.\n * @param {function(string, [string], function({}), function(error))} fetchEvent Cache function to fetch a Event.\n * @param {function(string, [string], function({}), function(error))} fetchChallenge Cache function to fetch a Challenge.\n * @param {function(string, [string], function({}), function(error))} fetchPost Cache function to fetch a Post.\n * @param {function(string, [string], function({}), function(error))} fetchGroup Cache function to fetch a Group.\n * @param {function(boolean)} setIsLoading Sets the loading state.\n * @param {function(boolean)} setIsFinished Sets the if finished state.\n * @param {function(string)} setNextToken Sets the next token state.\n * @param {function([{}])} setPosts Sets the posts state.\n */\nconst queryPosts = (filter, nextToken, isFinished, userID, friends, fetchPostQuery, fetchClient, fetchTrainer, fetchEvent,\n                    fetchChallenge, fetchPost, fetchGroup, setIsLoading, setIsFinished, setNextToken, setPosts) => {\n  debugAlert(\"Querying posts! NT = \" + nextToken + \", isFinished = \" + isFinished);\n  if (!isFinished) {\n    setIsLoading(true);\n    debugAlert(\"Fetching Post Feed Query\");\n    fetchPostQuery(PostCardInfo.fetchList, filter, postFeedLength, nextToken, (data) => {\n      if (!data.nextToken) {\n        setIsFinished(true);\n      }\n      if (data.items && data.items.length > 0) {\n        for (let i = 0; i < data.items.length; i++) {\n          const post = data.items[i];\n          // Filter the results based on if we are able to see it\n          if (post.access === \"public\" || post.by === userID || (friends && friends.includes(post.by))) {\n            // Fetch the \"by\" information\n            const by = post.by;\n            const byItemType = getItemTypeFromID(by);\n            if (byItemType === \"Client\") {\n              debugAlert(\"Fetching Client for BY in post for Post Feed\");\n              fetchClient(by, [\"name\", \"profileImagePath\"]);\n            } else if (byItemType === \"Trainer\") {\n              debugAlert(\"Fetching Trainer for BY in post for Post Feed\");\n              fetchTrainer(by, [\"name\", \"profileImagePath\"]);\n            }\n            // Fetch the \"about\" information\n            const about = post.about;\n            const aboutItemType = getItemTypeFromID(about);\n            if (aboutItemType === \"Client\") {\n              debugAlert(\"Fetching Client for ABOUT in post for Post Feed\");\n              fetchClient(about, ClientDetailCard.fetchVariableList);\n            } else if (aboutItemType === \"Trainer\") {\n              debugAlert(\"Fetching Trainer for ABOUT in post for Post Feed\");\n              fetchTrainer(about, TrainerDetailCard.fetchVariableList);\n            } else if (aboutItemType === \"Event\") {\n              fetchEvent(about, EventDetailCardInfo.fetchList);\n            } else if (aboutItemType === \"Challenge\") {\n              // console.log(\"Fetching challenge for post in post feed\");\n              debugAlert(\"Fetching Challenge for ABOUT in post for Post Feed\");\n              fetchChallenge(about, ChallengeDetailCardInfo.fetchList);\n            } else if (aboutItemType === \"Post\") {\n              debugAlert(\"Fetching Post for ABOUT in post for Post Feed\");\n              fetchPost(about, PostDetailCard.fetchVariableList);\n            } else if (aboutItemType === \"Group\") {\n              debugAlert(\"Fetching Group for ABOUT in post for Post Feed\");\n              fetchGroup(about, GroupDetailCardInfo.fetchList);\n            }\n            setPosts(p => [...p, post]);\n          } else {\n            debugAlert(\"NOT SHOWING: \" + JSON.stringify(post));\n          }\n        }\n      }\n      setNextToken(data.nextToken);\n      // else {\n      //     // TODO Came up with no posts\n      //\n      // }\n      setIsLoading(false);\n    }, (error) => {\n      err && console.error(\"Querying Posts failed!\");\n      err && console.error(error);\n      setIsLoading(false);\n    });\n  }\n};\n\n/**\n * Displays a feed of Posts which are queried using the filter provided. Also uses the semantic ui react Visibility\n * module in order to delay fetching of Posts until directly requested.\n *\n * @param {Props} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst PostFeed = (props: Props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isFinished, setIsFinished] = useState(false);\n  const [nextToken, setNextToken] = useState(null);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    if (props.user.id) {\n      setPosts([]);\n      setNextToken(null);\n      setIsFinished(false);\n      queryPosts(props.filter, null, false, props.user.id, props.user.friends, props.fetchPostQuery,\n        props.fetchClient, props.fetchTrainer, props.fetchEvent, props.fetchChallenge,\n        props.fetchPost, props.fetchGroup, setIsLoading, setIsFinished, setNextToken, setPosts);\n    }\n  }, [props.user.id, props.user.ownedChallenges]);\n\n  /**\n   *\n   * @param e\n   * @param calculations\n   */\n  const handleUpdate = (e, {calculations}) => {\n    if (calculations.bottomVisible && !isLoading) {\n      log && console.log(\"Next Token: \" + nextToken);\n      queryPosts(props.filter, nextToken, isFinished, props.user.id, props.user.friends, props.fetchPostQuery,\n        props.fetchClient, props.fetchTrainer, props.fetchEvent, props.fetchChallenge,\n        props.fetchPost, props.fetchGroup, setIsLoading, setIsFinished, setNextToken, setPosts);\n    }\n  };\n\n  //This displays the rows in a grid format, with visibility enabled so that we know when the bottom of the page\n  //is hit by the user.\n  return (\n    <Visibility onUpdate={_.debounce(handleUpdate, 250)}>\n      {_.times(posts.length, i => (\n        <Fragment key={i + 1}>\n          <PostCard\n            post={posts[i]} /*by={getObject(posts[i].by, props.cache)} about={getObject(posts[i].about, props.cache)}*//>\n        </Fragment>\n      ))}\n      {!isFinished && <Spinner/>}\n    </Visibility>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  cache: state.cache\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchUserAttributes: (variablesList, dataHandler) => {\n      dispatch(fetchUserAttributes(variablesList, dataHandler));\n    },\n    fetchClient: (variablesList, dataHandler) => {\n      dispatch(fetchClient(variablesList, dataHandler));\n    },\n    fetchTrainer: (variablesList, dataHandler) => {\n      dispatch(fetchTrainer(variablesList, dataHandler));\n    },\n    fetchPost: (id, variablesList) => {\n      dispatch(fetchPost(id, variablesList));\n    },\n    fetchGroup: (id, variablesList) => {\n      dispatch(fetchGroup(id, variablesList));\n    },\n    fetchPostQuery: (variablesList, filter, limit, nextToken, dataHandler, failureHandler) => {\n      dispatch(fetchPostQuery(variablesList, filter, limit, nextToken, dataHandler, failureHandler));\n    },\n    fetchChallenge: (id, variablesList) => {\n      dispatch(fetchChallenge(id, variablesList));\n    },\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostFeed);\n","import React, {useState} from 'react'\nimport {\n  Grid,\n  Button,\n  Message,\n  Image,\n  Modal,\n  Form,\n  Container,\n  Checkbox,\n  Header,\n  Dropdown,\n  Icon\n} from 'semantic-ui-react';\nimport {connect} from \"react-redux\";\nimport {setError} from \"../../redux/actions/infoActions\";\nimport {fetchChallenge} from \"../../redux/convenience/cacheItemTypeActions\";\nimport ChallengeFunctions from \"../../database_functions/ChallengeFunctions\";\nimport {getNowTimeString} from \"../../logic/TimeHelper\";\nimport {addToUserAttribute} from \"../../redux/actions/userActions\";\nimport {clearItemQueryCache} from \"../../redux/actions/cacheActions\";\nimport {Storage} from 'aws-amplify';\nimport {err} from \"../../../Constants\";\n\n/**\n * Handles the actual creation of the Challenge given the inputted info from the User.\n *\n * @param {string} userID The ID of the User creating the Challenge.\n * @param {string} endDate The ISO string of the date that the Challenge ends.\n * @param {number} capacity The max number of members for the challenge.\n * @param {string} title The display title for the Challenge.\n * @param {string} goal The way for members to win the Challenge.\n * @param {[string]} tagsPressed The tags that are applied to the Challenge.\n * @param {string} access The access string for who can see the Challenge. (\"public\" or \"private\").\n * @param {string|null} restriction The restriction string for if Users can join without a request. (\"invite\" or null).\n * @param {string} prize The prize for winning the Challenge.\n * @param {string|null} challengeType The type of Challenge this will be, how to win it. (\"streak\" or null).\n * @param {string|null} streakUpdateSpanType The update span type, \"hourly\", \"daily\", ...\n * @param {string|null} streakUpdateInterval How many update span types pass for a streak cycle.\n * @param {number|null} streakN The number of submissions to do to maintain the streak.\n * @param {function(boolean)} setIsLoading Sets the loading state.\n * @param {function(error)} setError Sets the error state.\n * @param {function(true)} setShowSuccessModal Sets the showing of success modal state.\n * @param {{}} props The props of the component that hold the redux automatic updating functions.\n */\nconst handleSubmit = (userID, endDate, capacity, title, goal, tagsPressed, access, restriction, prize, challengeType,\n                      streakUpdateSpanType, streakUpdateInterval, streakN, setIsLoading, setError, setShowSuccessModal, props) => {\n  //this.setState({isSubmitLoading: true});\n  alert(\"Current user: \" + userID);\n  const tags = [];\n  for (const key in tagsPressed) {\n    if (tagsPressed.hasOwnProperty(key) && tagsPressed[key]) {\n      tags.push(key);\n    }\n  }\n  // TODO Check to see if valid inputs!\n  if (capacity && title && goal && tags && prize) {\n    if (Number.isInteger(+capacity)) {\n      alert(prize);\n      ChallengeFunctions.createChallengeOptional(userID, userID, endDate, capacity, title, goal, null,\n        null, null, tags, access, restriction, prize, null, null, null,\n        streakN, () => {\n          console.log(\"Successfully created a challenge!\");\n          setIsLoading(false);\n          setShowSuccessModal(true);\n          // this.closeModal();\n          // this.setState({showSuccessLabel: true});\n          // this.setState({showModal: false});\n        }, (error) => {\n          //console.log(JSON.stringify(error));\n          setIsLoading(false);\n          setError(\"*\" + JSON.stringify(error))\n          // this.setState({submitError: \"*\" + JSON.stringify(error)});\n          // this.setState({isSubmitLoading: false});\n        }, props);\n    } else {\n      setIsLoading(false);\n      setError(\"Capacity needs to be an integer!\");\n      // this.setState({isSubmitLoading: false, submitError: \"Capacity needs to be an integer!\"});\n    }\n  } else {\n    setIsLoading(false);\n    setError(\"All fields need to be filled out!\");\n    // this.setState({isSubmitLoading: false, submitError: \"All fields need to be filled out!\"});\n  }\n};\n\n/**\n * Shows a success label based on the given info.\n *\n * @param {boolean} show Whether the User has successfully created a Challenge or not.\n * @return {*} The React JSX to display the success label or null if not applicable.\n */\nexport const createSuccessLabel = (show) => {\n  if (show) {\n    return (<Message positive>\n      <Message.Header>Success!</Message.Header>\n      <p>\n        You just created a new Challenge!\n      </p>\n    </Message>);\n  } else {\n    return null;\n  }\n};\n\n/**\n * Displays an error message if applicable.\n *\n * @param {string} error The error message string.\n * @return {*} The React JSX to show the error message.\n */\nexport const displayError = (error) => {\n  if (error !== \"\") {\n    return (<Message negative>\n      <Message.Header>Sorry!</Message.Header>\n      <p>{error}</p>\n    </Message>);\n  }\n};\n\nconst setPictureURL = (event, userID, setTempPictures, setPrize, prizes) => {\n  let index = prizes.length;\n  prizes.push(event.target.files[0]);\n  alert(\"Just Pushed: \" + prizes[0]);\n  const path = \"/\" + userID + \"/temp/pictures/\" + index;\n  Storage.put(path, event.target.files[0], {contentType: \"video/*;image/*\"})\n    .then(() => {\n      Storage.get(path).then((url) => {\n        setTempPictures(url);\n      }).catch((error) => {\n        err && console.error(error);\n      })\n    }).catch((error) => {\n    err && console.error(error);\n  });\n};\n\nconst displayCurrentImage = (picture) => {\n  if (picture) {\n    //console.log(\"Running cur image\");\n    return (\n      <Image src={picture}/>\n    );\n  }\n  return null;\n}\n\n/**\n * This is the modal for creating Challenges. Every input is in the form of a normal text input.\n * Inputting the time and date utilizes the Semantic-ui Calendar React library which isn't vanilla Semantic.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst CreateChallengeProp = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [tagsPressed, setTagsPressed] = useState({\n    HIIT: false,\n    Strength: false,\n    Performance: false,\n    Endurance: false\n  });\n  const [title, setTitle] = useState(\"\");\n  const [endTime, setEndTime] = useState(getNowTimeString());\n  const [capacity, setCapacity] = useState(25);\n  const [goal, setGoal] = useState(\"\");\n  const [prize, setPrize] = useState([]);\n  const [restriction, setRestriction] = useState(null);\n  const [access, setAccess] = useState(\"public\");\n  const [showSuccessLabel, setShowSuccessLabel] = useState(false);\n  const [challengeType, setChallengeType] = useState(\"streak\");\n  const [streakUpdateSpanType, setStreakUpdateSpanType] = useState(null);\n  const [streakUpdateInterval, setStreakUpdateInterval] = useState(null);\n  const [streakN, setStreakN] = useState(null);\n  const [tempPictures, setTempPictures] = useState(null);\n\n  function setPicture(image) {\n    setPictureURL(image, props.user.id, setTempPictures, setPrize, prize);\n    alert(\"Image URL: \" + image);\n  }\n\n  function getLatestPrizePic() {\n    const pictures = {};\n    for (let i = 0; i < this.state.pictures.length; i++) {\n      pictures[\"pictures/\" + i] = prize[i];\n    }\n    if (this.state.pictures.length > 0) {\n      return [pictures[pictures.length - 1]];\n    }\n    return null;\n  }\n\n  return (\n    <div align='center'>\n      <Form onSubmit={() => handleSubmit(props.user.id, endTime, capacity, title, goal, tagsPressed,\n        access, restriction, prize[0], challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\n        setIsLoading, setError, setShowSuccessLabel)}>\n        <Header as='h3'>\n          <Form.Input fluid type=\"text\" name=\"title\" placeholder={props.user.name + \"\\'s Challenge\"}\n                      onChange={value => setTitle(value.target.value)}/>\n        </Header>\n        <div align='center'>\n          <Grid align='center'>\n            <Grid.Row>\n              <Grid.Column width={8}>\n                <Button color={tagsPressed.HIIT ? \"purple\" : \"black\"} inverted={tagsPressed.HIIT}\n                        basic={!tagsPressed.HIIT}>\n                  <Image size='medium' src={require('../../img/vastus-tech-icons-03.svg')}\n                         onClick={() => setTagsPressed(p => ({...p, HIIT: !p.HIIT}))}/>\n                  <div style={{color: 'white'}}>HIIT</div>\n                </Button>\n              </Grid.Column>\n              <Grid.Column width={8}>\n                <Button color={tagsPressed.Strength ? \"purple\" : \"black\"} inverted={tagsPressed.Strength}\n                        basic={!tagsPressed.Strength}>\n                  <Image size='medium' src={require('../../img/vastus-tech-icons-04.svg')}\n                         onClick={() => setTagsPressed(p => ({...p, Strength: !p.Strength}))}/>\n                  <div style={{color: 'white'}}>Strength</div>\n                </Button>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column width={8}>\n                <Button color={tagsPressed.Performance ? \"purple\" : \"black\"} inverted={tagsPressed.Performance}\n                        basic={!tagsPressed.Performance}>\n                  <Image size='medium' src={require('../../img/vastus-tech-icons-02.svg')}\n                         onClick={() => setTagsPressed(p => ({...p, Performance: !p.Performance}))}/>\n                  <div style={{color: 'white'}}>Performance</div>\n                </Button>\n              </Grid.Column>\n              <Grid.Column width={8}>\n                <Button color={tagsPressed.Endurance ? \"purple\" : \"black\"} inverted={tagsPressed.Endurance}\n                        basic={!tagsPressed.Endurance}>\n                  <Image size='medium' src={require('../../img/vastus-tech-icons-01.svg')}\n                         onClick={() => setTagsPressed(p => ({...p, Endurance: !p.Endurance}))}/>\n                  <div style={{color: 'white'}}>Endurance</div>\n                </Button>\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              {/*<UploadImage\n                                    imageURL={prize ? prize.image : null}\n                                    callback={(picture) => {setPrize(picture)}}/>*/}\n              {displayCurrentImage(tempPictures)}\n              <Button as='label' for='picUpload'>\n                <Icon name='camera' size=\"large\" style={{marginLeft: '8px'}}/>\n                <input type=\"file\" accept=\"image/*;video/*;capture=camcorder\" id=\"picUpload\" hidden='true'\n                       onChange={e => setPicture(e)}/>\n              </Button>\n            </Grid.Row>\n          </Grid>\n          <Container align='center'>\n            <Grid centered>\n              <Grid.Row centered>\n                <Grid.Column>\n                  {/*<Form.Input fluid label=\"Capacity\" type=\"text\" name=\"capacity\" placeholder=\"Number of allowed attendees... \" onChange={value => setCapacity(value.target.value)}/>*/}\n                  <div className=\"field\">\n                    <label>End Date & Time</label>\n                    <input type=\"datetime-local\" name=\"challengeDate\" onChange={value => {\n                      setEndTime(value.target.value);\n                    }}/>\n                  </div>\n                  <Form.Input fluid type=\"text\" name=\"goal\" placeholder=\"Challenge Goal...\"\n                              onChange={value => setGoal(value.target.value)}/>\n                  <div key={0} className=\"field\" align=\"center\">\n                    {/*<Header as=\"h1\">{streakUpdateInfo(streakN, streakUpdateInterval, streakUpdateSpanType)}</Header>*/}\n                    <Header as='h3'>\n                      <Grid columns={5}>\n\n                      </Grid>\n\n                    </Header>\n                  </div>\n                  {/*<Form.Field>\n                                        <div className=\"field\" width={5}>\n                                            <label>Difficulty</label>\n                                            <Rating icon='star' defaultRating={1} maxRating={3} />\n                                        </div>\n                                    </Form.Field>*/}\n                  {/*Form.Field width={12}>\n                                        <Checkbox toggle\n                                                  onClick={() => {setChallengeType(p => p ? null : \"streak\");\n                                                  setStreakN(1); setStreakUpdateInterval(1); setStreakUpdateSpanType(\"daily\")}}\n                                                  checked={challengeType === \"streak\"}\n                                                  label={challengeType ? challengeType : \"streak off\"} />\n                                    </Form.Field>*/}\n                  <Form.Field width={12}>\n                    <Checkbox toggle\n                              onClick={() => setAccess(p => p === \"public\" ? \"private\" : \"public\")}\n                              checked={access === \"public\"}\n                              label={access}/>\n                  </Form.Field>\n                  {/*<Form.Field width={12}>\n                                        <Checkbox toggle\n                                                  onClick={() => setRestriction(p => p ? null : \"restricted\")}\n                                                  checked={restriction}\n                                                  label={restriction ? restriction : \"unrestricted\"}/>\n                                    </Form.Field>*/}\n                  <div>{displayError(error)}{createSuccessLabel(showSuccessLabel)}</div>\n\n                </Grid.Column>\n              </Grid.Row>\n            </Grid>\n          </Container>\n        </div>\n        <Modal.Actions>\n          <Button loading={isLoading} disabled={isLoading} primary size=\"big\" type='button'\n                  onClick={() => handleSubmit(props.user.id, endTime, 1000, title, goal, tagsPressed, access,\n                    restriction, prize, challengeType, streakUpdateSpanType, streakUpdateInterval, streakN,\n                    setIsLoading, setError, setShowSuccessLabel, props)}>Submit</Button>\n        </Modal.Actions>\n        {createSuccessLabel(showSuccessLabel)}\n      </Form>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  info: state.info,\n  cache: state.cache\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    fetchChallenge: (id, variablesList) => {\n      dispatch(fetchChallenge(id, variablesList));\n    },\n    addToUserAttribute: (attributeName, attributeValue) => {\n      dispatch(addToUserAttribute(attributeName, attributeValue));\n    },\n    clearItemQueryCache: (itemType) => {\n      dispatch(clearItemQueryCache(itemType));\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateChallengeProp);\n","import React, {useState, useEffect, Fragment} from 'react'\r\nimport {Message} from 'semantic-ui-react';\r\nimport ChallengeCard, {ChallengeCardInfo} from \"../cards/ChallengeCard\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport {fetchChallenges} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {parseISOString, timeLeft} from \"../../logic/TimeHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\n/**\r\n * Calculates the next challenge for the current User. Bases on which end time is the closest to now without being over.\r\n *\r\n * @param {{}} props  The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst NextChallengeProp = props => {\r\n  const [nextChallenge, setNextChallenge] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setNextChallenge(null);\r\n    setIsLoading(true);\r\n    if (props.user.challenges && props.user.challenges.length > 0) {\r\n      props.fetchChallenges(props.user.challenges, ChallengeCardInfo.fetchList, 0, props.user.challenges.length, (challenges) => {\r\n        for (let i = 0; i < challenges.length; i++) {\r\n          const challenge = challenges[i];\r\n          if (challenge && challenge.endTime) {\r\n            setNextChallenge(p => {\r\n              const challengeTimeLeft = timeLeft(parseISOString(challenge.endTime));\r\n              if (p) {\r\n                if (timeLeft(parseISOString(p.endTime)) < challengeTimeLeft && challengeTimeLeft > 0) {\r\n                  return challenge;\r\n                }\r\n                return p;\r\n              }\r\n              return challengeTimeLeft > 0 ? challenge : null;\r\n            });\r\n          }\r\n        }\r\n        setIsLoading(false);\r\n      }, (error) => {\r\n\r\n      });\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [props.user.challenges]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    );\r\n  } else if (nextChallenge) {\r\n    return (\r\n      <Fragment key={0}>\r\n        <Message>\r\n          <ChallengeCard challenge={nextChallenge}/>\r\n        </Message>\r\n      </Fragment>\r\n    );\r\n  } else {\r\n    // Then it's empty, no next scheduled event\r\n    return (\r\n      <Message style={{color: 'purple', background: 'white', border: '1px solid purple'}}>Join a challenge below!</Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchUserAttributes: (attributeList, dataHandler) => {\r\n      dispatch(fetchUserAttributes(attributeList, dataHandler));\r\n    },\r\n    fetchChallenges: (ids, variableList, startIndex, maxFetch, dataHandler, failureHandler) => {\r\n      dispatch(fetchChallenges(ids, variableList, startIndex, maxFetch, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NextChallengeProp);\r\n","import React from \"react\";\r\nimport {Header, Modal, Button, Grid} from \"semantic-ui-react\";\r\nimport PostFeedProp from \"../../vastuscomponents/components/feeds/PostFeed\";\r\nimport NextChallengeProp from \"../../vastuscomponents/components/info/NextChallenge\";\r\nimport QL from \"../../vastuscomponents/api/GraphQL\";\r\nimport CreateChallengeProp from \"../../vastuscomponents/components/manager/CreateChallenge\";\r\n\r\n/**\r\n * Displays a feed of all posts visible to the current user.\r\n *\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst MainTab = () => {\r\n  return (\r\n    <div>\r\n      <Header sub style={{color: 'purple', marginBottom: '10px', marginTop: '10px'}}>Upcoming Challenges:</Header>\r\n      <PostFeedProp filter={\r\n        QL.generateFilter({\r\n          and: [{\r\n            or: [{\r\n              postType: {\r\n                eq: \"$postType1\"\r\n              }\r\n            }, {\r\n              postType: {\r\n                eq: \"$postType2\"\r\n              }\r\n            }]\r\n          }\r\n          ]\r\n        }, {\r\n          postType1: \"Challenge\",\r\n          postType2: \"newChallenge\",\r\n        })\r\n      }/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainTab;","import React from 'react';\r\nimport {Card, Grid, Header, Modal, Label} from \"semantic-ui-react\";\r\nimport MessageBoard from \"./MessageBoard\";\r\n\r\ntype Props = {\r\n  messageBoardTitle: string,\r\n  messageBoardProPic: string,\r\n  messageBoardLastMessage: string,\r\n  messageBoardID: string,\r\n  unread: boolean,\r\n  onClickCard: any\r\n};\r\n\r\n/**\r\n * The Message Board Card as it appears in the board feed. Shows preview information, user information and the unread\r\n * status of the board to the user.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst MessageBoardCard = (props: Props) => {\r\n  if (props.unread) {\r\n    return (\r\n      <Modal trigger={\r\n        <Card fluid color='purple' raised onClick={() =>\r\n          props.onClickCard()\r\n        }>\r\n          <Card.Content>\r\n            <Grid columns={3} verticalAlign='middle'>\r\n              <Grid.Column width={1}>\r\n                {props.unread ? <Label empty size='mini' circular color='purple'/> : null}\r\n              </Grid.Column>\r\n              <Grid.Column width={2}>\r\n                <div className=\"u-avatar u-avatar--small\"\r\n                     style={{backgroundImage: `url(${props.messageBoardProPic})`}}>\r\n                </div>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Grid.Row style={{marginBottom: '10px'}}>\r\n                  <Header size='medium'>{props.messageBoardTitle}</Header>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                  <div>{props.messageBoardLastMessage}</div>\r\n                </Grid.Row>\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Card.Content>\r\n        </Card>\r\n      } closeIcon>\r\n        <MessageBoard board={props.messageBoardID}/>\r\n      </Modal>\r\n    );\r\n  } else {\r\n    return (\r\n      <Modal trigger={\r\n        <Card fluid raised onClick={() =>\r\n          props.onClickCard()\r\n        }>\r\n          {props.unread ? <Label circular color='purple' floating/> : null}\r\n          <Card.Content>\r\n            <Grid columns={3}>\r\n              <Grid.Column width={1}>\r\n              </Grid.Column>\r\n              <Grid.Column width={2}>\r\n                <div className=\"u-avatar u-avatar--small\"\r\n                     style={{backgroundImage: `url(${props.messageBoardProPic})`}}>\r\n                </div>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Grid.Row style={{marginBottom: '10px'}}>\r\n                  <Header size='medium'>{props.messageBoardTitle}</Header>\r\n                </Grid.Row>\r\n                <Grid.Row>\r\n                  <div>{props.messageBoardLastMessage}</div>\r\n                </Grid.Row>\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Card.Content>\r\n        </Card>\r\n      } closeIcon>\r\n        <MessageBoard board={props.messageBoardID}/>\r\n      </Modal>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MessageBoardCard;","import React, {useState, useEffect} from 'react';\r\nimport {Header, Grid} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport Spinner from \"../../components/props/Spinner\";\r\nimport MessageBoardCard from \"./MessageBoardCard\";\r\nimport {fetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport {err, log} from \"../../../Constants\";\r\nimport {getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport {fetchItem} from \"../../redux/actions/cacheActions\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport {queryNextMessagesFromBoard, setBoardRead} from \"../../redux/actions/messageActions\";\r\nimport MessageFunctions from \"../../database_functions/MessageFunctions\";\r\nimport {getIDsFromMessageBoard, ifMessageUnreadFor} from \"../../logic/MessageHelper\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\n\r\n/**\r\n * Sets the board to seen once the card is clicked.\r\n *\r\n * @param {string} userID The ID of the User viewing the message board feed.\r\n * @param {string} board The name of the board to set the unread status for.\r\n * @param {{}} cacheBoards The cache of boards in the app.\r\n * @param {function(string, string)} setBoardRead Message function for updating the read status of a board.\r\n */\r\nconst clickCard = (userID, board, cacheBoards, setBoardRead) => {\r\n  debugAlert(\"Reading boardID = \" + board);\r\n  if (unreadFor(userID, board, cacheBoards)) {\r\n    debugAlert(\"Actually Reading boardID = \" + board);\r\n    //alert(\"SENDING LAMBDA FOR UNREAD\");\r\n    MessageFunctions.addLastSeen(userID, board, cacheBoards[board][0].id, userID, () => {\r\n      setBoardRead(board, userID);\r\n      log && console.log(\"Updated message board read status successfully!\");\r\n    }, (error) => {\r\n      err && console.error(\"Could not update read status for message board!\");\r\n      err && console.error(error);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Gets the last message of the board.\r\n *\r\n * @param {string} board The name of the board to set the unread status for.\r\n * @param {{}} cacheBoards The cache of boards in the app.\r\n * @return {{}} The message last sent to the board.\r\n */\r\nconst lastMessage = (board, cacheBoards) => {\r\n  const messages = cacheBoards[board];\r\n  if (messages && messages.length > 0) {\r\n    return messages[0].message;\r\n  }\r\n  return \"\";\r\n};\r\n\r\n/**\r\n * Gets the title for the board.\r\n *\r\n * @param {string} userID The ID of the User viewing the message board feed.\r\n * @param {string} board The name of the board to set the unread status for.\r\n * @param {{}} cache The cache of all objects stored in the app.\r\n * @return {string} The title for the board.\r\n */\r\nconst boardTitle = (userID, board, cache) => {\r\n  const ids = getIDsFromMessageBoard(board);\r\n  if (ids.length === 1) {\r\n    // challenge / event / group ? Will these be here? Actually totally yes!\r\n  } else if (ids.length === 2) {\r\n    // other user(s)\r\n    // single chat\r\n    for (const key in ids) {\r\n      if (ids.hasOwnProperty(key) && userID !== ids[key]) {\r\n        return getObjectAttribute(ids[key], \"name\", cache);\r\n      }\r\n    }\r\n  } else {\r\n    // Multi-group chat\r\n  }\r\n  return \"\";\r\n};\r\n\r\n/**\r\n * Get\r\n *\r\n * @param {string} userID The ID of the User viewing the message board feed.\r\n * @param {string} board The name of the board to set the unread status for.\r\n * @param {{}} cache The cache of all objects stored in the app.\r\n * @return {*} The profile picture for the board.\r\n */\r\nconst boardProfilePicture = (userID, board, cache) => {\r\n  const ids = getIDsFromMessageBoard(board);\r\n  if (ids.length === 1) {\r\n    // challenge / event / group ? Will these be here? Actually totally yes!\r\n  } else if (ids.length === 2) {\r\n    // other user(s)\r\n    // single chat\r\n    for (const key in ids) {\r\n      if (ids.hasOwnProperty(key) && userID !== ids[key]) {\r\n        return getObjectAttribute(ids[key], \"profileImage\", cache);\r\n      }\r\n    }\r\n  } else {\r\n    // Multi-group chat\r\n  }\r\n  return \"\";\r\n};\r\n\r\n/**\r\n * Calculates whether the board has been read by the given user or not.\r\n *\r\n * @param {string} userID The ID of the User viewing the message board feed.\r\n * @param {string} board The name of the board to set the unread status for.\r\n * @param {{}} cacheBoards The cache of boards in the app.\r\n * @return {boolean} If the board has not been read yet.\r\n */\r\nconst unreadFor = (userID, board, cacheBoards) => {\r\n  if (board && cacheBoards[board] && cacheBoards[board].length > 0) {\r\n    return ifMessageUnreadFor(userID, cacheBoards[board][0]);\r\n  }\r\n  return false;\r\n};\r\n\r\n/**\r\n * Gets the message board cards for the boards that the User currently has.\r\n *\r\n * @param {string} userID The ID of the User viewing the message board feed.\r\n * @param {[string]} messageBoardIDs The message board IDs for the User.\r\n * @param {{}} cache The cache of all objects stored in the app.\r\n * @param {{}} cacheBoards The cache of boards in the app.\r\n * @param {function(string, string)} setBoardRead Message function for updating the read status of a board.\r\n * @return {*} The React JSX to display the message board cards.\r\n */\r\nconst messageBoardCards = (userID, messageBoardIDs, cache, cacheBoards, setBoardRead) => {\r\n  const cards = [];\r\n  for (let i = 0; i < messageBoardIDs.length; i++) {\r\n    const board = messageBoardIDs[i];\r\n    cards.push(\r\n      <MessageBoardCard\r\n        messageBoardProPic={boardProfilePicture(userID, board, cache)}\r\n        messageBoardTitle={boardTitle(userID, board, cache)}\r\n        messageBoardLastMessage={lastMessage(board, cacheBoards)}\r\n        messageBoardID={board}\r\n        unread={unreadFor(userID, board, cacheBoards)}\r\n        onClickCard={() => clickCard(userID, board, cacheBoards, setBoardRead)}\r\n      />\r\n    );\r\n  }\r\n  return cards;\r\n};\r\n\r\n/**\r\n * This class will display all the Message boards we are currently a part of\r\n */\r\nconst MessageBoardFeed = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [messageBoards, setMessageBoards] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    props.fetchUserAttributes([\"messageBoards\"], (user) => {\r\n      setIsLoading(false);\r\n    });\r\n  }, [props.userID]);\r\n\r\n  useEffect(() => {\r\n    const user = props.user;\r\n    if (user.messageBoards) {\r\n      setMessageBoards(user.messageBoards);\r\n      for (const key in user.messageBoards) {\r\n        if (user.messageBoards.hasOwnProperty(key)) {\r\n          const board = user.messageBoards[key];\r\n          const ids = getIDsFromMessageBoard(board);\r\n          for (const key in ids) {\r\n            if (ids.hasOwnProperty(key) && ids[key] !== props.user.id) {\r\n              // fetch the attributes\r\n              const id = ids[key];\r\n              const itemType = getItemTypeFromID(id);\r\n              if (itemType === \"Client\" || itemType === \"Trainer\") {\r\n                props.fetchItem(id, itemType, [\"name\", \"profileImagePath\"]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [props.user.messageBoards]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    )\r\n  } else if (messageBoards && messageBoards.length > 0) {\r\n    return (\r\n      <Grid fluid>\r\n        <Header> Message Boards: </Header>\r\n        {messageBoardCards(props.user.id, messageBoards, props.cache, props.message.boards, props.setBoardRead)}\r\n      </Grid>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <Header> No Message Boards Yet! </Header>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache,\r\n  info: state.info,\r\n  message: state.message\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchUserAttributes: (variableList, dataHandler) => {\r\n      dispatch(fetchUserAttributes(variableList, dataHandler));\r\n    },\r\n    fetchItem: (itemType, id, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchItem(itemType, id, variableList, dataHandler, failureHandler));\r\n    },\r\n    queryNextMessagesFromBoard: (board, limit, dataHandler, failureHandler) => {\r\n      dispatch(queryNextMessagesFromBoard(board, limit, dataHandler, failureHandler));\r\n    },\r\n    setBoardRead: (board, userID) => {\r\n      dispatch(setBoardRead(board, userID));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageBoardFeed);","import React, {useState, useEffect} from 'react';\r\nimport {Button, Modal, Grid, Message} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchItem} from \"../../redux/actions/cacheActions\";\r\nimport {addToUserAttribute, fetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport {getMessageBoardName} from \"../../logic/MessageHelper\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport {UserCardInfo} from \"../cards/UserCard\";\r\nimport {err} from \"../../../Constants\";\r\nimport {addUniqueElementToArray, removeFromArray} from \"../../logic/ArrayHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport UserCard from \"../cards/UserCard\";\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: any\r\n};\r\n\r\n/**\r\n * Creates a Chat with another user / multiple users and adds it to your Message boards.\r\n *\r\n * @param {string} userID The ID of the User starting the chat.\r\n * @param {[string]} selectedIDs The IDs of the Users that the User is starting a chat with.\r\n * @param {function(string, string)} addToUserAttribute User function to add to the main User's attributes manually.\r\n * @param {function()} onClose Closes the modal.\r\n */\r\nconst createChat = (userID, selectedIDs, addToUserAttribute, onClose) => {\r\n  debugAlert(\"Creating chat with \" + JSON.stringify(selectedIDs));\r\n  const board = getMessageBoardName([userID, ...selectedIDs]);\r\n  debugAlert(board);\r\n  UserFunctions.addMessageBoard(userID, userID, board, () => {\r\n    console.log(\"Successfully added message board to chat\");\r\n    addToUserAttribute(\"messageBoards\", board);\r\n    onClose();\r\n  }, (error) => {\r\n    err && console.error(error);\r\n  });\r\n};\r\n\r\n/**\r\n * Gets the create button for the friend for starting the Chat. Includes logic for toggling the selected IDs.\r\n *\r\n * @param {string} friendID The ID of the User to create the button for.\r\n * @param {[string]} selectedFriends The IDs of the friends who are currently selected.\r\n * @param {function([string])} setSelectedFriends Sets the selected friends state.\r\n * @return {*} The React JSX to display the create button.\r\n */\r\nconst createButton = (friendID, selectedFriends, setSelectedFriends) => {\r\n  if (selectedFriends.includes(friendID)) {\r\n    return (\r\n      <Button negative onClick={() =>\r\n        setSelectedFriends(p => {\r\n          p = [...p];\r\n          removeFromArray(p, friendID);\r\n          return p;\r\n        })\r\n      }> Remove </Button>\r\n    );\r\n  } else {\r\n    return (\r\n      <Button primary onClick={() =>\r\n        setSelectedFriends(p => {\r\n          p = [...p];\r\n          addUniqueElementToArray(p, friendID);\r\n          return p;\r\n        })\r\n      }> Add </Button>\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Creates the list of Users with the buttons to select them for the chat.\r\n *\r\n * @param {[{id: string}]} friends The User objects for the friends.\r\n * @param {[string]} selectedFriends The IDs of the friends who are currently selected.\r\n * @param {function([string])} setSelectedFriends Sets the selected friends state.\r\n * @return {*} The React JSX to display the select chat ID buttons.\r\n */\r\nconst selectChatIDButtons = (friends, selectedFriends, setSelectedFriends) => {\r\n  const cards = [];\r\n  for (let i = 0; i < friends.length; i++) {\r\n    cards.push(\r\n      <Grid key={i} centered>\r\n        <Grid.Column>\r\n          <UserCard user={friends[i]}/>\r\n        </Grid.Column>\r\n        <Grid.Column>\r\n          {createButton(friends[i].id, selectedFriends, setSelectedFriends)}\r\n        </Grid.Column>\r\n      </Grid>\r\n    )\r\n  }\r\n  return cards;\r\n};\r\n\r\n/**\r\n * This component handles starting a chat with 1 or more other Users. Allows you to select the Users, then start the\r\n * chat, but only with Users that you are friends with.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst StartChatModal = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [friends, setFriends] = useState([]);\r\n  const [selectedFriends, setSelectedFriends] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    props.fetchUserAttributes([\"friends\"], (user) => {\r\n      if (user && user.friends) {\r\n        for (let i = 0; i < user.friends.length; i++) {\r\n          const itemType = getItemTypeFromID(user.friends[i]);\r\n          props.fetchItem(user.friends[i], itemType, UserCardInfo.fetchList, (friend) => {\r\n            if (friend) {\r\n              setFriends(p => [...p, friend]);\r\n            }\r\n          }, (error) => {\r\n            err && console.error(error);\r\n          });\r\n        }\r\n      }\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      err && console.error(error);\r\n      setIsLoading(false);\r\n    });\r\n  }, [props.user.id]);\r\n\r\n  // To choose someone to chat with, get the\r\n  if (isLoading) {\r\n    return (\r\n      <Spinner/>\r\n    )\r\n  }\r\n  if (friends && friends.length > 0) {\r\n    return (\r\n      <Modal open={props.open} onClose={() => props.onClose()} closeIcon fluid>\r\n        <Modal.Header> Choose friends to start the chat with! </Modal.Header>\r\n        <Modal.Content fluid>\r\n          {selectChatIDButtons(friends, selectedFriends, setSelectedFriends)}\r\n          <Grid fluid centered width={3}>\r\n            <Grid.Column>\r\n              <Button primary fluid onClick={() => createChat(props.user.id, selectedFriends,\r\n                props.addToUserAttribute, props.onClose)}> Create </Button>\r\n            </Grid.Column>\r\n            <Grid.Column/>\r\n            <Grid.Column>\r\n              <Button inverted fluid onClick={() => props.onClose()}> Cancel </Button>\r\n            </Grid.Column>\r\n          </Grid>\r\n        </Modal.Content>\r\n      </Modal>\r\n    );\r\n  } else {\r\n    return (<Message color='red'> Add a buddy to start a message board! </Message>);\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchUserAttributes: (variableList, dataHandler) => {\r\n      dispatch(fetchUserAttributes(variableList, dataHandler));\r\n    },\r\n    addToUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(addToUserAttribute(attributeName, attributeValue));\r\n    },\r\n    fetchItem: (id, itemType, variableList, dataHandler, failureHandler) => {\r\n      dispatch(fetchItem(id, itemType, variableList, dataHandler, failureHandler));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StartChatModal);","import React, {Component} from 'react'\nimport {Grid, Button, Message, Image, Modal, Form, Container, Checkbox, Header, Card, Icon} from 'semantic-ui-react';\nimport {connect} from \"react-redux\";\nimport {setError} from \"../../redux/actions/infoActions\";\nimport {fetchChallenge} from \"../../redux/convenience/cacheItemTypeActions\";\nimport GroupFunctions from \"../../database_functions/GroupFunctions\";\nimport {removeFromArray} from \"../../logic/ArrayHelper\";\nimport {appUserItemType} from \"../../../Constants\";\n\n// TODO Refactor\n\n/*type Props = {\n    queryChallenges: any\n}*/\n\n/*\n* Create Event Prop\n*\n* This is the modal for creating events. Every input is in the form of a normal text input.\n* Inputting the time and date utilizes the Semantic-ui Calendar React library which isn't vanilla Semantic.\n */\nclass CreateGroupProp extends Component {\n  state = {\n    checked: false,\n    checkedRest: false,\n    title: \"\",\n    motto: \"\",\n    isSubmitLoading: false,\n    showModal: false,\n    submitError: \"\",\n    showSuccessModal: false,\n    showSuccessLabel: false,\n    tags: [],\n    performancePressed: false,\n    endurancePressed: false,\n    hiitPressed: false,\n    strengthPressed: false,\n    restriction: null,\n    access: appUserItemType === \"Client\" ? 'private' : 'public',\n    pictures: [],\n    videos: [],\n    tempPictureURLs: [],\n    tempVideoURLs: [],\n  };\n\n  toggle = () => this.setState({checked: !this.state.checked});\n  toggleRest = () => this.setState({checkedRest: !this.state.checkedRest});\n\n  handleAccessSwitch = () => {\n    if (this.state.access === 'public') {\n      this.setState({access: 'private'})\n    } else if (this.state.access === 'private') {\n      this.setState({access: 'public'})\n    } else {\n      console.error(\"Event access should be public or private\");\n    }\n  };\n\n  handleRestrictionSwitch = () => {\n    if (this.state.restriction === 'invite') {\n      this.setState({restriction: null});\n    } else {\n      this.setState({restriction: 'invite'});\n    }\n  };\n\n  showRestriction() {\n    if (!this.state.restriction) {\n      return 'unrestricted';\n    } else {\n      return this.state.restriction;\n    }\n  }\n\n  handleTag(tag) {\n    if (tag === \"HIIT\" && !this.state.hiitPressed) {\n      this.setState({tags: this.state.tags.concat(tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({hiitPressed: true});\n    } else if (tag === \"Performance\" && !this.state.performancePressed) {\n      this.setState({tags: this.state.tags.concat(tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({performancePressed: true});\n    } else if (tag === \"Endurance\" && !this.state.endurancePressed) {\n      this.setState({tags: this.state.tags.concat(tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({endurancePressed: true});\n    } else if (tag === \"Strength\" && !this.state.strengthPressed) {\n      this.setState({tags: this.state.tags.concat(tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({strengthPressed: true});\n    } else if (tag === \"HIIT\" && this.state.hiitPressed) {\n      this.setState({tags: removeFromArray(this.state.tags, tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({hiitPressed: false});\n    } else if (tag === \"Performance\" && this.state.performancePressed) {\n      this.setState({tags: removeFromArray(this.state.tags, tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({performancePressed: false});\n    } else if (tag === \"Endurance\" && this.state.endurancePressed) {\n      this.setState({tags: removeFromArray(this.state.tags, tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({endurancePressed: false});\n    } else if (tag === \"Strength\" && this.state.strengthPressed) {\n      this.setState({tags: removeFromArray(this.state.tags, tag)},\n        () => console.log(JSON.stringify(this.state.tags)));\n      this.setState({strengthPressed: false});\n    }\n  }\n\n  handleSubmit = () => {\n    // TODO Make sure the dates are well formed?\n    /*\n    const year = parseInt(this.eventState.eventDate.substr(0, 4));\n    const month = parseInt(this.eventState.eventDate.substr(5, 2)) - 1;\n    const day = parseInt(this.eventState.eventDate.substr(8, 2));\n    const hour = parseInt(this.eventState.startTime.substr(0, 2));\n    const minute = parseInt(this.eventState.startTime.substr(3, 2));\n    let startDate = new Date(year, month, day, hour, minute);\n    let endDate = new Date(startDate.getTime() + (60000 * this.eventState.duration));\n    // console.log(endDate.toDateString());\n    // console.log(endDate.getMinutes());\n    // endDate.setMinutes(endDate.getMinutes() + this.eventState.duration);\n    // console.log(endDate.getMinutes());\n    // console.log(endDate.toDateString());\n\n\n\n    const time = startDate.toIsoString() + \"_\" + endDate.toIsoString();\n    */\n    this.setState({isSubmitLoading: true});\n\n    // TODO Check to see if valid inputs!\n    if (this.state.title && this.state.motto && this.state.tags) {\n      alert(\"Title: \" + this.state.title + \"Motto: \" + this.state.motto);\n      GroupFunctions.createGroupOptional(this.props.user.id, this.state.title, \"Default Description\", this.state.motto, this.state.pictures[0], [this.props.user.id], [this.props.user.id], this.state.tags, this.state.access,\n        this.state.restriction, (data) => {\n          console.log(\"Successfully created a group!\");\n          this.setState({isSubmitLoading: false});\n          this.closeModal();\n          this.setState({showSuccessLabel: true});\n          this.setState({showModal: false});\n        }, (error) => {\n          this.setState({submitError: \"*\" + JSON.stringify(error)});\n          this.setState({isSubmitLoading: false});\n        });\n    } else {\n      this.setState({isSubmitLoading: false, submitError: \"All fields need to be filled out!\"});\n    }\n  };\n\n  handleDurationChange = (e, data) => {\n    this.eventState.duration = data.value;\n    //console.log(this.eventState.duration);\n    // this.setState({\n    //     duration: data.value,\n    // }, () => {\n    //     console.log('value',this.state.duration);\n    // });\n  };\n\n  // static getTodayDateString() {\n  //     // This is annoying just because we need to work with time zones :(\n  //     const shortestTimeInterval = 5;\n  //     const date = new Date();\n  //     date.setMinutes(date.getMinutes() + (shortestTimeInterval - (date.getMinutes() % shortestTimeInterval)));\n  //     return date.toIsoString().substr(0, 10);\n  // }\n\n  // static getNowTimeString() {\n  //     // Sneaking some modular arithmetic in this ;) This is so that the time shown is always a nice lookin' number\n  //     const shortestTimeInterval = 5;\n  //     const date = new Date();\n  //     date.setMinutes(date.getMinutes() + (shortestTimeInterval - (date.getMinutes() % shortestTimeInterval)));\n  //     return date.toIsoString().substr(11, 5);\n  // }\n\n  closeModal = () => {\n    this.setState({showModal: false})\n  };\n\n  createSuccessModal() {\n    if (this.state.showSuccessModal) {\n      return (\n        <Modal open={this.state.showSuccessModal}>\n          <Modal.Header align='center'>You Just Created A New Group!</Modal.Header>\n          <Modal.Content>\n            <Button fluid negative size=\"small\" onClick={this.closeSuccessModal}>Ok</Button>\n          </Modal.Content>\n        </Modal>\n      );\n    }\n  }\n\n  createSuccessLabel() {\n    if (this.state.showSuccessLabel && this.state.showModal) {\n      this.setState({showSuccessLabel: false});\n    } else if (this.state.showSuccessLabel) {\n      return (<Message positive>\n        <Message.Header>Success!</Message.Header>\n        <p>\n          You just created a new Group!\n        </p>\n      </Message>);\n    } else {\n      return null;\n    }\n  }\n\n  closeSuccessModal = () => {\n    this.setState({showSuccessModal: false});\n  };\n\n  getPictures() {\n    const pictures = {};\n    for (let i = 0; i < this.state.pictures.length; i++) {\n      pictures[\"pictures/\" + i] = this.state.pictures[i];\n    }\n    if (this.state.pictures.length > 0) {\n      return pictures;\n    }\n    return null;\n  }\n\n  setPicture = (event) => {\n    // const index = this.state.pictures.length;\n    this.state.pictures.push(event.target.files[0]);\n    this.setState({});\n  };\n\n  displaySubmission() {\n    if (this.state.notifySubmission) {\n      return (\n        <Message positive>\n          <Message.Header>Success!</Message.Header>\n          <p>\n            You uploaded a group image!\n          </p>\n        </Message>\n      );\n    }\n  }\n\n  displayCurrentImage() {\n    if (this.state.tempPictureURLs && this.state.tempPictureURLs.length > 0) {\n      //console.log(\"Running cur image\");\n      return (\n        <Card>\n          <Image src={this.state.tempPictureURLs[0]}/>\n        </Card>\n      );\n    }\n    return null;\n  }\n\n\n  displayError() {\n    if (this.state.submitError !== \"\") {\n      return (<Message negative>\n        <Message.Header>Sorry!</Message.Header>\n        <p>{this.state.submitError}</p>\n      </Message>);\n    }\n  }\n\n  setMotto(value) {\n    this.setState({motto: value.target.value});\n    console.log(\"New Motto is equal to \" + value.target.value);\n  }\n\n  setTitle(value) {\n    this.setState({title: value.target.value});\n    console.log(\"New Title is equal to \" + value.target.value);\n  }\n\n  render() {\n\n    return (\n      <Container style={{marginBottom: '50px', marginTop: '10px'}}>\n        <Header align='center'>Group Builder</Header>\n        <Grid centered>\n          <Grid.Column>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Input fluid label=\"Title\" type=\"text\" name=\"title\" placeholder=\"Title\"\n                          onChange={value => this.setTitle(value)}/>\n              <Form.Input fluid label=\"Group Motto\" type=\"text\" name=\"motto\" placeholder=\"Add Motto Here...\"\n                          onChange={value => this.setMotto(value)}/>\n\n              <Grid centered rows='equal'>\n\n                <Grid.Row>\n                  {this.displayCurrentImage()}\n                </Grid.Row>\n                <Grid.Row>\n                  <Grid centered>\n                    <div className=\"uploadImage u-flex u-flex-align--center u-margin-top--2\" align='center'>\n                      <div floated=\"center\">\n                        <Button primary fluid as=\"label\" htmlFor=\"picUpload\" className=\"u-bg--primaryGradient\">\n                          <Icon name=\"camera\" className='u-margin-right--0' inverted/>\n                          Upload Group Photo\n                        </Button>\n                        <input type=\"file\" accept=\"image/*;capture=camcorder\" id=\"picUpload\" hidden={true}\n                               onChange={this.setPicture}/>\n                      </div>\n                    </div>\n                  </Grid>\n                </Grid.Row>\n                <Grid.Row>\n                  <div>{this.displaySubmission()}</div>\n                </Grid.Row>\n              </Grid>\n              <Grid centered>\n                <Form.Field width={12}>\n                  <Checkbox toggle onClick={this.handleRestrictionSwitch} onChange={this.toggleRest}\n                            checked={this.state.checkedRest} label={this.showRestriction()}/>\n                </Form.Field>\n                <div>{this.displayError()}</div>\n              </Grid>\n            </Form>\n          </Grid.Column>\n        </Grid>\n        <Grid centered>\n          <Modal.Actions>\n            <Button loading={this.state.isSubmitLoading} disabled={this.state.isSubmitLoading} primary size=\"big\"\n                    type='button' onClick={() => {\n              this.handleSubmit()\n            }}>Submit</Button>\n          </Modal.Actions>\n          {this.createSuccessLabel()}\n        </Grid>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  info: state.info,\n  cache: state.cache\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    fetchChallenge: (id, variablesList) => {\n      dispatch(fetchChallenge(id, variablesList));\n    },\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateGroupProp);","import React, {useState} from 'react';\nimport {Grid, Button} from \"semantic-ui-react\";\nimport MessageBoardFeed from \"../../vastuscomponents/components/messaging/MessageBoardFeed\";\nimport {connect} from \"react-redux\";\nimport StartChatModal from \"../../vastuscomponents/components/manager/StartChatModal\";\n\n/**\n * Displays all of the current conversations the user has going and allows the user to start new ones with other users.\n *\n * @param {Props} props The given props to the component.\n * @returns {*} The React JSX used to display the component.\n * @constructor\n */\nconst MessageTab = (props) => {\n  const [chatModalOpen, setChatModalOpen] = useState(false);\n  return (\n    <Grid centered>\n      <Grid.Row>\n        <Button primary onClick={() => chatModalOpen || setChatModalOpen(true)}>Start New Chat</Button>\n      </Grid.Row>\n      <Grid.Row>\n        <StartChatModal open={chatModalOpen} onClose={() => setChatModalOpen(false)}/>\n      </Grid.Row>\n      <Grid.Row>\n        <MessageBoardFeed userID={props.user.id}/>\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps)(MessageTab);","import React, {useEffect} from 'react';\r\nimport {Icon} from 'semantic-ui-react';\r\nimport {\r\n  peekAtFirstMessageFromBoard,\r\n} from \"../../redux/actions/messageActions\";\r\nimport {connect} from \"react-redux\";\r\nimport {ifMessageUnreadFor} from \"../../logic/MessageHelper\";\r\n\r\n/**\r\n * Calculates the number of unread boards the user has.\r\n *\r\n * @param {string} userID The ID of the User to find the number of unread boards for.\r\n * @param {{}} boardsCache The messages cache to get the boards from.\r\n * @param {[string]} userBoards The boards that the User is a part of.\r\n * @return {number} The number of unread boards the User has.\r\n */\r\nconst numUnread = (userID, boardsCache, userBoards) => {\r\n  let unread = 0;\r\n  if (userBoards) {\r\n    const numBoards = userBoards.length;\r\n    for (let i = 0; i < numBoards; i++) {\r\n      const board = boardsCache[userBoards[i]];\r\n      if (board && board.length > 0) {\r\n        if (ifMessageUnreadFor(userID, board[0])) {\r\n          unread++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return unread;\r\n};\r\n\r\n/**\r\n * Displays the Message Icon with the unread boards number next to the icon.\r\n *\r\n * @param {{}} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst MessageIcon = (props) => {\r\n  useEffect(() => {\r\n    const boards = props.user.messageBoards;\r\n    if (boards) {\r\n      const numBoards = boards.length;\r\n      for (let i = 0; i < numBoards; i++) {\r\n        const boardID = boards[i];\r\n        props.peekAtFirstMessageFromBoard(boardID);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  let unread = numUnread(props.user.id, props.message.boards, props.user.messageBoards);\r\n  if (unread > 0) {\r\n    return (\r\n      <div>\r\n        <Icon name='comment' size='large'/>\r\n        {unread}\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <Icon name='comment outline' size='large'/>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.user,\r\n  message: state.message,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    peekAtFirstMessageFromBoard: (board) => {\r\n      dispatch(peekAtFirstMessageFromBoard(board));\r\n    }\r\n  }\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageIcon);","import React, {useState, useEffect, Fragment} from 'react'\r\nimport _ from 'lodash'\r\nimport {Visibility} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux';\r\nimport {fetchGroupQuery} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {log, err} from \"../../../Constants\";\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport GroupCard, {GroupCardInfo} from \"../cards/GroupCard\";\r\nimport {arraysIntersect} from \"../../logic/ArrayHelper\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\nconst groupFeedLength = 50;\r\n\r\ntype Props = {\r\n  filter: any\r\n};\r\n\r\n/**\r\n * Fetches another set of Groups with a query for the feed.\r\n *\r\n * @param {{}} filter The GraphQL filter to dictate how the query filters the objects.\r\n * @param {string|null} nextToken The next token from the previous query or null if it's the first query.\r\n * @param {boolean} isFinished If the querying has finished and there are no more objects to fetch.\r\n * @param {string} userID The ID of the User viewing the Group Feed.\r\n * @param {[string]} friends The friends list of the User viewing this Group Feed.\r\n * @param {function([string], {}, number, string, function({}), function(error))} fetchGroupQuery The redux function to\r\n * fetch a Group query.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(boolean)} setIsFinished Sets the if finished state.\r\n * @param {function(string)} setNextToken Sets the next token state.\r\n * @param {function([{}])} setGroups Sets the groups state.\r\n */\r\nconst queryGroups = (filter, nextToken, isFinished, userID, friends, fetchGroupQuery, setIsLoading, setIsFinished, setNextToken,\r\n                     setGroups) => {\r\n  if (!isFinished) {\r\n    setIsLoading(true);\r\n    debugAlert(\"Fetching Group Feed Query\");\r\n    fetchGroupQuery(GroupCardInfo.fetchList, filter, groupFeedLength, nextToken, (data) => {\r\n      if (!data.nextToken) {\r\n        setIsFinished(true);\r\n      }\r\n      if (data.items) {\r\n        for (let i = 0; i < data.items.length; i++) {\r\n          const group = data.items[i];\r\n          // Filter the results based on if we are able to see it\r\n          if (group.access === \"public\" || (group.owner && group.owners.includes(userID)) || (friends && arraysIntersect(friends, group.owners))) {\r\n            // TODO Fetch any extra information about the groups (like owners and whatnot)!!!\r\n            setGroups(p => [...p, group]);\r\n          } else {\r\n            debugAlert(\"NOT SHOWING: \" + JSON.stringify(group));\r\n          }\r\n        }\r\n        setNextToken(data.nextToken);\r\n      } else {\r\n        // TODO Came up with no events\r\n      }\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      err && console.error(\"Querying Groups failed!\");\r\n      err && console.error(error);\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Displays a feed of Groups which are queried using the filter provided. Also uses the semantic ui react Visibility\r\n * module in order to delay fetching of Groups until directly requested.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst GroupFeed = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n  const [nextToken, setNextToken] = useState(null);\r\n  const [groups, setGroups] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (props.user.id) {\r\n      setGroups([]);\r\n      queryGroups(props.filter, nextToken, isFinished, props.user.id, props.user.friends, props.fetchGroupQuery,\r\n        setIsLoading, setIsFinished, setNextToken, setGroups);\r\n    }\r\n  }, [props.user.id]);\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   * @param calculations\r\n   */\r\n  const handleUpdate = (e, {calculations}) => {\r\n    log && console.log(calculations.bottomVisible);\r\n    if (calculations.bottomVisible && !isLoading) {\r\n      log && console.log(\"Next Token: \" + nextToken);\r\n      queryGroups(props.filter, nextToken, isFinished, props.user.id, props.user.friends, props.fetchGroupQuery,\r\n        setIsLoading, setIsFinished, setNextToken, setGroups);\r\n    }\r\n  };\r\n\r\n  //This displays the rows in a grid format, with visibility enabled so that we know when the bottom of the page\r\n  //is hit by the user.\r\n  return (\r\n    <Visibility onUpdate={_.debounce(handleUpdate, 250)} style={{minWidth: '300px', marginTop: '40px'}}>\r\n      {_.times(groups.length, i => (\r\n        <Fragment key={i + 1}>\r\n          <GroupCard group={groups[i]}/>\r\n        </Fragment>\r\n      ))}\r\n      {!isFinished && <Spinner/>}\r\n    </Visibility>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchGroupQuery: (variablesList, filter, limit, nextToken, dataHandler, failureHandler) => {\r\n      dispatch(fetchGroupQuery(variablesList, filter, limit, nextToken, dataHandler, failureHandler));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupFeed);\r\n","import React, {useState, useEffect, Fragment} from 'react'\r\nimport _ from 'lodash'\r\nimport {Visibility} from 'semantic-ui-react'\r\nimport {connect} from 'react-redux';\r\nimport {debugAlert} from \"../../logic/DebuggingHelper\";\r\nimport {log, err} from \"../../../Constants\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {fetchDealQuery, fetchSponsor} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport DealCard from \"../cards/DealCard\";\r\nimport {DealCardInfo} from \"../cards/DealCard\";\r\n\r\nconst dealFeedLength = 5;\r\n\r\ntype Props = {\r\n  filter: any\r\n};\r\n\r\n/**\r\n * Fetches another set of Deals with a query for the feed.\r\n *\r\n * @param {{}} filter The GraphQL filter to dictate how the query filters the objects.\r\n * @param {string|null} nextToken The next token from the previous query or null if it's the first query.\r\n * @param {boolean} isFinished If the querying has finished and there are no more objects to fetch.\r\n * @param {function([string], {}, number, string, function({}), function(error))} fetchDealQuery The redux function to\r\n * fetch a Post query.\r\n * @param {function} fetchSponsor Redux function to fetch a Sponsor.\r\n * @param {function(boolean)} setIsLoading Sets the loading state.\r\n * @param {function(boolean)} setIsFinished Sets the if finished state.\r\n * @param {function(string)} setNextToken Sets the next token state.\r\n * @param {function([{}])} setDeals Sets the deals state.\r\n */\r\nconst queryDeals = (filter, nextToken, fetchDealQuery, fetchSponsor, isFinished, setIsLoading, setNextToken, setIsFinished, setDeals) => {\r\n  debugAlert(\"Querying deals! NT = \" + nextToken + \", isFinished = \" + isFinished);\r\n  if (!isFinished) {\r\n    setIsLoading(true);\r\n    debugAlert(\"Fetching Post Feed Query\");\r\n    fetchDealQuery(DealCardInfo.fetchList, filter, dealFeedLength, nextToken, (data) => {\r\n      if (!data.nextToken) {\r\n        setIsFinished(true);\r\n      }\r\n      if (data.items && data.items.length > 0) {\r\n        for (let i = 0; i < data.items.length; i++) {\r\n          const deal = data.items[i];\r\n          // Fetch the \"sponsor\" information\r\n          const sponsor = deal.sponsor;\r\n          fetchSponsor(sponsor, [\"name\", \"profileImagePath\"]);\r\n          setDeals(p => [...p, deal]);\r\n        }\r\n      }\r\n      setNextToken(data.nextToken);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      err && console.error(\"Querying Deals failed!\");\r\n      err && console.error(error);\r\n      setIsLoading(false);\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Displays a feed of Deals which are queried using the filter provided. Also uses the semantic ui react Visibility\r\n * module in order to delay fetching of Deals until directly requested.\r\n *\r\n * @param {Props} props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst DealFeed = (props: Props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n  const [nextToken, setNextToken] = useState(null);\r\n  const [deals, setDeals] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (props.user.id) {\r\n      setDeals([]);\r\n      setNextToken(null);\r\n      setIsFinished(false);\r\n      queryDeals(props.filter, nextToken, props.fetchDealQuery, props.fetchSponsor, isFinished, setIsLoading, setNextToken,\r\n        setIsFinished, setDeals);\r\n    }\r\n  }, [props.user.id]);\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   * @param calculations\r\n   */\r\n  const handleUpdate = (e, {calculations}) => {\r\n    if (calculations.bottomVisible && !isLoading) {\r\n      log && console.log(\"Next Token: \" + nextToken);\r\n      queryDeals(props.filter, nextToken, props.fetchDealQuery, props.fetchSponsor, isFinished, setIsLoading, setNextToken,\r\n        setIsFinished, setDeals);\r\n    }\r\n  };\r\n\r\n  //This displays the rows in a grid format, with visibility enabled so that we know when the bottom of the page\r\n  //is hit by the user.\r\n  return (\r\n    <Visibility onUpdate={_.debounce(handleUpdate, 250)}>\r\n      {_.times(deals.length, i => (\r\n        <Fragment key={i + 1}>\r\n          <DealCard deal={deals[i]}/>\r\n        </Fragment>\r\n      ))}\r\n      {!isFinished && <Spinner/>}\r\n    </Visibility>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n  cache: state.cache\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchDealQuery: (variableList, filter, limit, nextToken, dataHandler, failureHandler) => {\r\n      dispatch(fetchDealQuery(variableList, filter, limit, nextToken, dataHandler, failureHandler))\r\n    },\r\n    fetchSponsor: (id, variableList, successHandler, failureHandler) => {\r\n      dispatch(fetchSponsor(id, variableList, successHandler, failureHandler));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DealFeed);\r\n","import {Fragment} from 'react';\nimport {Tab, Menu, Icon} from \"semantic-ui-react\";\nimport ProfileTab from \"./profile_tab/ProfileTab\";\nimport React from \"react\";\nimport TrainerTab from \"./trainer_tab/TrainerTab\";\nimport MainTab from \"./main_tab/MainTab\";\nimport MessageTab from \"./messaging_tab/MessageTab\";\nimport MessageIcon from \"../vastuscomponents/components/messaging/MessageIcon\";\nimport GroupFeed from \"./trainer_tab/CommunityTab\";\nimport DealTab from \"./deal_tab/DealTab\";\n\n/**\n * A bottom menu for all of the tabs in the app.\n * The app is currently split up into two sections: the main and profile tabs.\n *\n * @returns {*} The React JSX used to display the component.\n */\nexport default () => (\n  <Tab menu={{color: \"white\", fixed: \"bottom\", widths: 2, size: \"large\", inverted: true}} panes={\n    [\n      {\n        menuItem:\n          (<Menu.Item key={0}>\n            <Icon name='home' color='violet' size='large'/>\n          </Menu.Item>),\n        render: () =>\n          <Tab.Pane basic attached={false}>\n            <MainTab/>\n          </Tab.Pane>\n      },\n      {\n        menuItem: (\n          <Menu.Item key={1}>\n            <Icon name='user circle' color='violet' size='large'/>\n          </Menu.Item>),\n        render: () => <Tab.Pane basic attached={false}>\n          <ProfileTab/>\n        </Tab.Pane>\n      },\n      /*{\n          menuItem:\n              (<Menu.Item key={2}>\n                  <Icon name='group' size='large' />\n              </Menu.Item>),\n          render: () =>\n              <Tab.Pane basic attached={false}>\n                  <GroupFeed/>\n              </Tab.Pane>\n      },\n      {\n          menuItem: (\n              <Menu.Item key={3}>\n                  <Icon name='stopwatch' size='large' />\n              </Menu.Item>),\n          render: () => <Tab.Pane basic attached={false}>\n              <TrainerTab/>\n          </Tab.Pane>\n      },\n      {\n          menuItem: (\n              <Menu.Item key={4}>\n                  <MessageIcon/>\n              </Menu.Item>),\n          render: () => <Tab.Pane basic attached={false}>\n              <Fragment>\n                  <MessageTab/>\n              </Fragment>\n          </Tab.Pane>\n      },*/\n\n    ]\n  }/>\n);","import {setIsLoading, setIsNotLoading} from \"./infoActions\";\r\nimport QL from \"../../api/GraphQL\";\r\nimport {fetchItemQuery, putItem} from \"./cacheActions\";\r\nimport {err, log} from \"../../../Constants\";\r\nimport {\r\n  ENABLE_TYPE, DISABLE_SEARCH_BAR, ENABLE_SEARCH_BAR, RESET_QUERY, SET_TYPE_NEXT_TOKEN,\r\n  SET_SEARCH_QUERY, ADD_TYPE_RESULTS, DISABLE_TYPE, SET_TYPE_FILTER\r\n} from \"../reducers/searchReducer\";\r\n\r\n// =========================================================================================================\r\n// ~ High-Level Search Actions\r\n// =========================================================================================================\r\n\r\n/**\r\n * Clears the current search results and immediately starts a new search for the new search query.\r\n *\r\n * @param queryString The string to query for using the current search settings.\r\n * @param {number} minResults The least number of results to receive from the search, unless there are no more results\r\n * to receive.\r\n * @param {function([{}])} dataHandler The function to handle the received search results.\r\n * @return {function(function(*))} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function newSearch(queryString, minResults, dataHandler) {\r\n  return (dispatch) => {\r\n    dispatch(resetQuery());\r\n    // Use the current store settings to actually do the search\r\n    if (queryString && queryString.length > 0) {\r\n      dispatch(setSearchQuery(queryString));\r\n      dispatch(loadMoreResults(queryString, minResults, (data) => {\r\n        dataHandler && dataHandler(data);\r\n      }));\r\n    } else {\r\n      log && console.log(\"I refuse to search for an empty string\");\r\n      dataHandler && dataHandler([]);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Loads more results for the current search query and makes sure that it is still the same search query.\r\n *\r\n * @param searchQuery The string to query for using the current search settings.\r\n * @param {number} minResults The least number of results to receive from the search, unless there are no more results\r\n * to receive.\r\n * @param {function([{}])} dataHandler The function to handle the received search results.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function loadMoreResults(searchQuery, minResults, dataHandler) {\r\n  return (dispatch, getStore) => {\r\n    if (getStore().search.searchQuery === searchQuery && getStore().search.results.length < minResults &&\r\n      !getStore().search.ifFinished) {\r\n      // alert(\"Current results = \" + JSON.stringify(getStore().search.results));\r\n      dispatch(setIsLoading());\r\n      performAllQueries(searchQuery, dispatch, getStore, () => {\r\n        dispatch(setIsNotLoading());\r\n        dispatch(loadMoreResults(searchQuery, minResults, dataHandler));\r\n      });\r\n    } else {\r\n      dataHandler && dataHandler(getStore().search.results);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Performs every query for every single data type enabled in the search settings.\r\n *\r\n * @param {string} searchQuery The query string to search for in the database using the search settings.\r\n * @param {function(*)} dispatch The dispatch handler function to call a new redux action with.\r\n * @param {function()} getStore The get function for redux that receives the current store.\r\n * @param {function([{}])} dataHandler The function to handle the successfully fetched results from all item types.\r\n */\r\nfunction performAllQueries(searchQuery, dispatch, getStore, dataHandler) {\r\n  if (searchQuery && searchQuery.length > 0) {\r\n    let numResults = 0;\r\n    let results = [];\r\n    const numTypesEnabled = getStore().search.numTypesEnabled;\r\n    const typeQueries = getStore().search.typeQueries;\r\n    const getData = (type, data) => {\r\n      if (data.hasOwnProperty(\"items\") && data.hasOwnProperty(\"nextToken\")) {\r\n        dispatch(addTypeResults(type, data.items));\r\n        dispatch(setTypeNextToken(type, data.nextToken));\r\n        results.push(...data.items);\r\n      } else {\r\n        err && console.error(\"Received a weird value from query in the newSearch search redux function. \" +\r\n          \"Value = \" + JSON.stringify(data));\r\n      }\r\n      numResults++;\r\n      if (numTypesEnabled <= numResults) {\r\n        dataHandler && dataHandler(results);\r\n      }\r\n    };\r\n    const failData = () => {\r\n      numResults++;\r\n      if (numTypesEnabled <= numResults) {\r\n        dataHandler && dataHandler(results);\r\n      }\r\n    };\r\n    for (const type in typeQueries) {\r\n      if (typeQueries.hasOwnProperty(type)) {\r\n        // const typeQuery = getStore().search.typeQueries[type];\r\n        // if (typeQuery.enabled && (typeQuery.nextToken || typeQuery.ifFirst)) {\r\n        performQuery(type, dispatch, getStore, getData, failData);\r\n      }\r\n    }\r\n  } else {\r\n    // TODO What to do if we trying to do this? Set is not loading?\r\n  }\r\n}\r\n\r\n/**\r\n * Performs a query for a single item type based on the current search settings.\r\n *\r\n * @param {string} itemType The item type to perform the query for.\r\n * @param {function(*)} dispatch The dispatch handler function to call a new redux action with.\r\n * @param {function()} getStore The get function for redux that receives the current store.\r\n * @param {function([{}])} successHandler The function to handle the successfully received items.\r\n * @param {function(error)} failureHandler The function to handle any errors that may occur.\r\n */\r\nfunction performQuery(itemType, dispatch, getStore, successHandler, failureHandler) {\r\n  const searchQuery = getStore().search.searchQuery;\r\n  const typeQuery = getStore().search.typeQueries[itemType];\r\n  if (typeQuery.enabled) {\r\n    const variableList = typeQuery.variableList;\r\n    const filterJSON = typeQuery.filterJSON;\r\n    const filterParameters = {\r\n      ...typeQuery.filterParameters,\r\n      searchQuery,\r\n    };\r\n    const limit = typeQuery.limit;\r\n    const nextToken = typeQuery.nextToken;\r\n    const ifFirst = typeQuery.ifFirst;\r\n    log && console.log(\"nextToken = \" + nextToken);\r\n    if (nextToken || ifFirst) {\r\n      // Fetch the query for the items\r\n      fetchItemQuery(itemType, variableList, QL.generateFilter(filterJSON, filterParameters), limit, nextToken,\r\n        (data) => {\r\n          // console.log(\"Ay lmao it came back\");\r\n          if (data) {\r\n            dispatch(setTypeNextToken(itemType, data.nextToken));\r\n            successHandler(itemType, data);\r\n            if (data && data.items) {\r\n              for (let i = 0; i < data.items.length; i++) {\r\n                // dispatch(putItemFunction(data.items[i]));\r\n                dispatch(putItem(data.items[i], itemType));\r\n              }\r\n            }\r\n          } else {\r\n            err && console.error(\"Query function returned null?\");\r\n          }\r\n        }, (error) => {\r\n          if (failureHandler) {\r\n            failureHandler(error);\r\n          }\r\n        })(dispatch, getStore);\r\n    } else {\r\n      successHandler(itemType, {items: [], nextToken: null});\r\n    }\r\n  }\r\n}\r\n\r\n// =========================================================================================================\r\n// ~ Low-Level Search Actions\r\n// =========================================================================================================\r\n\r\nexport function enableType(type) {\r\n  return {\r\n    type: ENABLE_TYPE,\r\n    payload: type\r\n  };\r\n}\r\n\r\nexport function disableType(type) {\r\n  return {\r\n    type: DISABLE_TYPE,\r\n    payload: type\r\n  };\r\n}\r\n\r\nfunction setSearchQuery(searchQuery) {\r\n  return {\r\n    type: SET_SEARCH_QUERY,\r\n    payload: searchQuery\r\n  }\r\n}\r\n\r\nfunction addTypeResults(type, results) {\r\n  return {\r\n    type: ADD_TYPE_RESULTS,\r\n    payload: {\r\n      type,\r\n      results\r\n    }\r\n  };\r\n}\r\n\r\nexport function setTypeFilter(type, filterJSON, filterParameters) {\r\n  return {\r\n    type: SET_TYPE_FILTER,\r\n    payload: {\r\n      type,\r\n      filterJSON,\r\n      filterParameters\r\n    }\r\n  };\r\n}\r\n\r\nfunction setTypeNextToken(type, nextToken) {\r\n  return {\r\n    type: SET_TYPE_NEXT_TOKEN,\r\n    payload: {\r\n      type,\r\n      nextToken\r\n    }\r\n  }\r\n}\r\n\r\n// function resetTypeQuery(type) {\r\n//     return {\r\n//         type: RESET_TYPE_QUERY,\r\n//         payload: type\r\n//     };\r\n// }\r\nexport function resetQuery() {\r\n  return {\r\n    type: RESET_QUERY\r\n  };\r\n}\r\n\r\nexport function enableSearchBar() {\r\n  return {\r\n    type: ENABLE_SEARCH_BAR\r\n  }\r\n}\r\n\r\nexport function disableSearchBar() {\r\n  return {\r\n    type: DISABLE_SEARCH_BAR\r\n  }\r\n}\r\n","import _ from 'lodash'\nimport React, {useState, Fragment} from 'react'\nimport Fuse from \"fuse.js\";\nimport {Image, Search} from 'semantic-ui-react'\nimport EventDescriptionModal from \"../modals/EventDescriptionModal\";\nimport ClientModal from \"../modals/ClientModal\";\nimport TrainerModal from \"../modals/TrainerModal\";\nimport {connect} from \"react-redux\";\nimport {fetchClient, fetchEvent} from \"../../redux/convenience/cacheItemTypeActions\";\nimport {newSearch} from \"../../redux/actions/searchActions\";\nimport {switchReturnItemType} from \"../../logic/ItemType\";\nimport ChallengeDescriptionModal from \"../modals/ChallengeDescriptionModal\";\nimport PostDescriptionModal from \"../modals/PostDescriptionModal\";\nimport GroupDescriptionModal from \"../modals/GroupDescriptionModal\";\nimport Logo from '../../img/vt_gold_even_thicker_border.svg';\nimport OriginalLogo from '../../img/vt_new.svg';\n\n\nconst minimumSearchResults = 6;\n\n/**\n * Gets the selected modal from the search results, switching for the item type.\n *\n * @param {{item_type: string, id: string}} result The selected database object.\n * @param {boolean} resultModalOpen If the result modal is open.\n * @param {function(boolean)} setResultModalOpen Set's the component result modal open state.\n * @return {*} The React JSX to display the result modal.\n */\nexport const getResultModal = (result, resultModalOpen, setResultModalOpen) => {\n  if (!result) {\n    return null;\n  }\n  return switchReturnItemType(result.item_type,\n    <ClientModal open={resultModalOpen} onClose={() => setResultModalOpen(false)} clientID={result.id}/>,\n    <TrainerModal open={resultModalOpen} onClose={() => setResultModalOpen(false)} trainerID={result.id}/>,\n    null, null, null,\n    <EventDescriptionModal open={resultModalOpen} onClose={() => setResultModalOpen(false)} eventID={result.id}/>,\n    <ChallengeDescriptionModal open={resultModalOpen} onClose={() => setResultModalOpen(false)}\n                               challengeID={result.id}/>,\n    null,\n    <PostDescriptionModal open={resultModalOpen} onClose={() => setResultModalOpen(false)} postID={result.id}/>,\n    null,\n    <GroupDescriptionModal open={resultModalOpen} onClose={() => setResultModalOpen(false)} groupID={result.id}/>,\n    null, null, null, null, \"Item Type not implemented for Search Bar Result Modal\");\n};\n\n/**\n * Uses the search results in order to format them into a Semantic UI Search Bar usable format.\n *\n * @param {string} searchQuery The query search string for the search bar.\n * @param {[{}]} results The array of objects returned from the search redux operation.\n * @param {boolean} searchBarEnabled Whether the search bar is enabled or not.\n * @return {*} The formatted results for the Search Bar component.\n */\nexport const getFormattedResults = (searchQuery, results, searchBarEnabled) => {\n  const formattedResults = [];\n  if (searchBarEnabled) {\n    const resultTitles = [];\n    for (const i in results) {\n      if (results.hasOwnProperty(i)) {\n        const result = results[i];\n        // console.log(JSON.stringify(result));\n        if (result.hasOwnProperty(\"item_type\") && result.item_type) {\n          // alert(JSON.stringify(result));\n          let formattedResult = switchReturnItemType(result.item_type,\n            { // Client\n              title: result.name,\n              description: result.username,\n              resultcontent: result\n            },\n            { // Trainer\n              title: result.name,\n              description: result.username,\n              resultcontent: result\n            },\n            null,\n            null,\n            null,\n            { // Event\n              title: (result.title),\n              description: result.goal,\n              resultcontent: result\n            },\n            { // Challenge\n              title: (result.title),\n              description: result.description,\n              resultcontent: result\n            },\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            \"Handle search bar result type not implemented!\");\n\n          if (formattedResult) {\n            // TODO Insertsort this? By what basis though?\n            while (formattedResult.title && resultTitles.includes(formattedResult.title)) {\n              const len = formattedResult.title.length;\n              // log&&console.log(JSON.stringify(resultTitles));\n              // log&&console.log(formattedResult.title + \"~ -3: \" + formattedResult.title[len - 3] + \", -1: \" + formattedResult.title[len - 1]);\n              if (formattedResult.title[len - 3] === \"(\" && formattedResult.title[len - 1] === \")\") {\n                let num = parseInt(formattedResult.title[len - 2]);\n                num++;\n                formattedResult.title = formattedResult.title.substr(0, len - 3) + \"(\" + num + \")\";\n                // formattedResult.title[len - 2] = num;\n              } else {\n                formattedResult.title += \" (2)\";\n              }\n            }\n            // console.log(formattedResult.title + \" is not in \" + JSON.stringify(resultTitles));\n            formattedResults.push(formattedResult);\n            resultTitles.push(formattedResult.title);\n          }\n        }\n      }\n    }\n  }\n  // console.log(formattedResults.length);\n  if (searchQuery) {\n    const fuse = new Fuse(formattedResults, {\n      shouldSort: true,\n      // threshold: 0.6,\n      // location: 0,\n      // distance: 100,\n      maxPatternLength: 64,\n      minMatchCharLength: 1,\n      keys: [\n        \"resultcontent.name\",\n        \"resultcontent.goal\",\n        \"description\",\n        \"title\",\n        \"resultcontent.username\"\n      ]\n    });\n    return fuse.search(searchQuery);\n  } else {\n    return formattedResults;\n  }\n};\n\n/**\n * Handles a result's click and opens the result modal for it.\n *\n * @param {{resultcontent: *}} result The result from the search bar component.\n * @param {function(*)} setResult Sets the component's result state.\n * @param {function(boolean)} setResultModalOpen Set's the component's result modal open state.\n */\nconst handleResultSelect = (result, setResult, setResultModalOpen) => {\n  setResult(result.resultcontent);\n  setResultModalOpen(true);\n};\n\n/**\n * Retrieves search results from a new search query in the search bar.\n *\n * @param {string} searchQuery The string to search for in the database.\n * @param {function(string, number, function([{}]))} newSearch The redux function to start a new search in the reducer.\n * @param {function(boolean)} setIsLoading Sets the component's is loading state.\n */\nconst retrieveSearchResults = (searchQuery, newSearch, setIsLoading) => {\n  // alert(\"new search!\");\n  newSearch(searchQuery, minimumSearchResults, () => {\n    setIsLoading(false);\n  });\n};\n\n/**\n * Debounced retrieve search results function so that calling it multiple times will not actually activate it\n * more than once.\n *\n * @type {Function|*|void}\n */\nconst debouncedRetrieveSearchResults = _.debounce(retrieveSearchResults, 500);\n\n/**\n * TODO\n *\n * @param value\n * @param newSearch\n * @param setSearchQuery\n * @param setIsLoading\n */\nconst handleSearchChange = (value, newSearch, setSearchQuery, setIsLoading) => {\n  setSearchQuery(value);\n  setIsLoading(true);\n  // alert(\"1\");\n  // _.debounce(function() {alert(\"3\")}, 250);\n  // alert(\"retrieving search results\");\n  console.log(\"retrieve search results\");\n  debouncedRetrieveSearchResults(value, newSearch, setIsLoading);\n};\n\n/**\n * The search bar searches for things within our database based on the \"search\" redux settings. Search is global in\n * redux so that we can set the settings in the search modal. This also allows you to click any of the results and view\n * a modal for the object.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst SearchBarProp = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  // const [selectedResult, setSelectedResult] = useState(null);\n  const [result, setResult] = useState(null);\n  // const [resultModal, setResultModal] = useState(null);\n  const [resultModalOpen, setResultModalOpen] = useState(false);\n\n  // constructor(props) {\n  //     super(props);\n  //     this.handleResultSelect = this.handleResultSelect.bind(this);\n  //     this.openResultModal = this.openResultModal.bind(this);\n  //     this.closeResultModal = this.closeResultModal.bind(this);\n  //     this.retrieveSearchResults = _.debounce(this.retrieveSearchResults.bind(this), 500);\n  // }\n\n  // TODO Check to see that this is valid to do?\n  // console.log(\"Showing \" + this.state.searchResults.length + \" results\");\n  // const isLoading = (this.state.clientsLoading || this.state.eventsLoading);\n  // console.log(this.props.search.results.length);\n  /* <Fragment>\n      {getResultModal(result, resultModalOpen, setResultModalOpen)}\n      <Search\n          fluid\n          size=\"large\"\n          placeholder=\"Search for Users and Challenges\"\n          loading={isLoading}\n          onResultSelect={(e, {result}) => handleResultSelect(result, setResult, setResultModalOpen)}\n          onSearchChange={(e, {value}) => handleSearchChange(value, props.newSearch, setSearchQuery, setIsLoading)}\n          results={getFormattedResults(searchQuery, props.search.results, props.search.searchBarEnabled)}\n          value={searchQuery}\n          showNoResults={props.search.searchBarEnabled}\n      />\n  </Fragment> */\n  return (\n    <Image src={Logo} centered size='tiny' style={{marginTop: '-10px', marginBottom: '-10px'}}/>\n  )\n};\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  cache: state.cache,\n  search: state.search\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchClient: (id, variablesList) => {\n      dispatch(fetchClient(id, variablesList));\n    },\n    fetchEvent: (id, variablesList) => {\n      dispatch(fetchEvent(id, variablesList));\n    },\n    newSearch: (queryString, minResults, dataHandler) => {\n      dispatch(newSearch(queryString, minResults, dataHandler));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBarProp);","import React, {useState, useEffect} from 'react'\nimport {Icon, Grid} from 'semantic-ui-react'\nimport {fetchUserAttributes, forceFetchUserAttributes} from \"../../redux/actions/userActions\";\nimport {connect} from 'react-redux';\nimport {fetchChallenge, fetchEvent, fetchGroup, fetchInvite} from \"../../redux/convenience/cacheItemTypeActions\";\n\n/**\n * Displays the notification info about the User, specifically how many pending notifications the User has.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst NotificationBell = (props) => {\n  const [numNotifications, setNumNotifications] = useState(0);\n\n  useEffect(() => {\n    const fetchAndAddReceivedInvites = (itemType, id) => {\n      let fetchFunction;\n      if (itemType === \"Event\") {\n        fetchFunction = props.fetchEvent;\n      }\n      if (itemType === \"Challenge\") {\n        fetchFunction = props.fetchChallenge;\n      }\n      if (itemType === \"Group\") {\n        fetchFunction = props.fetchGroup;\n      }\n      fetchFunction(id, [\"receivedInvites\"], (data) => {\n        if (data.hasOwnProperty(\"receivedInvites\") && data.receivedInvites) {\n          setNumNotifications((prevNumNotifications) => (prevNumNotifications + data.receivedInvites.length));\n        }\n      });\n    };\n    const data = props.user;\n    if (data) {\n      if (data.hasOwnProperty(\"receivedInvites\") && data.receivedInvites) {\n        setNumNotifications((prevNumNotifications) => (prevNumNotifications + data.receivedInvites.length));\n      }\n      if (data.hasOwnProperty(\"ownedEvents\") && data.ownedEvents) {\n        for (let i = 0; i < data.ownedEvents.length; i++) {\n          fetchAndAddReceivedInvites(\"Event\", data.ownedEvents[i]);\n        }\n      }\n      if (data.hasOwnProperty(\"ownedChallenges\") && data.ownedChallenges) {\n        // console.log(\"Grabbing \" + data.ownedChallenges.length + \" challenges for notification bell\");\n        for (let i = 0; i < data.ownedChallenges.length; i++) {\n          fetchAndAddReceivedInvites(\"Challenge\", data.ownedChallenges[i]);\n        }\n      }\n      if (data.hasOwnProperty(\"ownedGroups\") && data.ownedGroups) {\n        for (let i = 0; i < data.ownedGroups.length; i++) {\n          fetchAndAddReceivedInvites(\"Group\", data.ownedGroups[i]);\n        }\n      }\n    }\n    return () => {\n      setNumNotifications(0);\n    }\n  }, [props.user.receivedInvites, props.user.ownedEvents, props.user.ownedChallenges, props.user.ownedGroups]);\n\n  const {fetchInvite, fetchGroup, fetchChallenge, fetchEvent, forceFetchUserAttributes, fetchUserAttributes, ...otherProps} = props;\n  if (numNotifications > 0) {\n    return (\n      <Grid style={{marginTop: \"6px\"}} centered>\n        <div {...otherProps}>\n          <Icon name='bell' size='big'/>\n          {numNotifications}\n        </div>\n      </Grid>\n    );\n  } else {\n    return (\n      <Grid style={{marginTop: \"6px\"}} centered>\n        <div {...otherProps}>\n          <Icon name='bell outline' size='big'/>\n        </div>\n      </Grid>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchUserAttributes: (attributesList, dataHandler) => {\n      dispatch(fetchUserAttributes(attributesList, dataHandler));\n    },\n    forceFetchUserAttributes: (attributeList) => {\n      dispatch(forceFetchUserAttributes(attributeList));\n    },\n    fetchEvent: (id, variablesList, dataHandler) => {\n      dispatch(fetchEvent(id, variablesList, dataHandler));\n    },\n    fetchChallenge: (id, variablesList, dataHandler) => {\n      dispatch(fetchChallenge(id, variablesList, dataHandler));\n    },\n    fetchGroup: (id, variablesList, dataHandler) => {\n      dispatch(fetchGroup(id, variablesList, dataHandler));\n    },\n    fetchInvite: (id, variablesList, dataHandler) => {\n      dispatch(fetchInvite(id, variablesList, dataHandler));\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationBell);\n","import React, {useState} from 'react'\r\nimport {Button, Card, Feed, Divider, Dimmer} from 'semantic-ui-react'\r\nimport ClientModal from \"../modals/ClientModal\";\r\nimport TrainerModal from \"../modals/TrainerModal\";\r\nimport EventDescriptionModal from \"../modals/EventDescriptionModal\";\r\nimport ChallengeDescriptionModal from \"../modals/ChallengeDescriptionModal\";\r\nimport {connect} from \"react-redux\";\r\nimport UserFunctions from \"../../database_functions/UserFunctions\";\r\nimport InviteFunctions from \"../../database_functions/InviteFunctions\";\r\nimport {getItemTypeFromID, switchReturnItemType} from \"../../logic/ItemType\";\r\nimport Spinner from \"../props/Spinner\";\r\nimport {getAttributeFromObject, getObjectAttribute} from \"../../logic/CacheRetrievalHelper\";\r\nimport {err} from \"../../../Constants\";\r\nimport GroupDescriptionModal from \"../modals/GroupDescriptionModal\";\r\nimport type Invite from \"../../types/Invite\";\r\nimport {\r\n  addToItemAttribute,\r\n  removeFromItemAttribute, /*removeFromItemAttribute, */\r\n  removeItem\r\n} from \"../../redux/actions/cacheActions\";\r\nimport {addToUserAttribute, removeFromUserAttribute} from \"../../redux/actions/userActions\";\r\n\r\n/**\r\n * All of the different fetchLists used for the different types of cards.\r\n *\r\n * @type {{fetchList: string[], fromInfo: {clientFetchList: string[], trainerFetchList: string[]},\r\n * toInfo: {clientFetchList: string[], trainerFetchList: string[], eventFetchList: string[],\r\n * challengeFetchList: string[], groupFetchList: string[]}, aboutInfo: {clientFetchList: string[],\r\n * trainerFetchList: string[], eventFetchList: string[], challengeFetchList: string[], groupFetchList: string[]},\r\n * ifSubscribe: boolean}}\r\n */\r\nexport const InviteCardInfo = {\r\n  fetchList: [\"time_created\", \"from\", \"to\", \"inviteType\", \"about\", \"description\"],\r\n  fromInfo: {\r\n    clientFetchList: [\"id\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\"],\r\n    trainerFetchList: [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"],\r\n  },\r\n  toInfo: {\r\n    clientFetchList: [\"id\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\"],\r\n    trainerFetchList: [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"],\r\n    eventFetchList: [\"id\", \"title\", \"time\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\"],\r\n    challengeFetchList: [\"id\", \"title\", \"endTime\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\"],\r\n    groupFetchList: [\"id\", \"title\"],\r\n  },\r\n  aboutInfo: {\r\n    clientFetchList: [\"id\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\"],\r\n    trainerFetchList: [\"id\", \"name\", \"gender\", \"birthday\", \"profileImagePath\", \"profileImagePaths\"],\r\n    eventFetchList: [\"id\", \"title\", \"time\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\"],\r\n    challengeFetchList: [\"id\", \"title\", \"endTime\", \"time_created\", \"owner\", \"members\", \"capacity\", \"difficulty\", \"restriction\"],\r\n    groupFetchList: [\"id\", \"title\"],\r\n  },\r\n  ifSubscribe: false\r\n};\r\n\r\ntype Props = {\r\n  invite: Invite\r\n};\r\n\r\n/**\r\n * Checks if the request contains all of the ids it requires.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the attribute that the request references.\r\n * @param {string} fromID The id of the user that is sending the request.\r\n * @param {string} toID The id of the user that the request is being sent to.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport const isValidRequest = (userID, inviteID, aboutID, fromID, toID) => (userID && inviteID && aboutID && fromID && toID);\r\n\r\n/**\r\n * Checks if the response has all of the necessary props.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the attribute that the request references.\r\n * @param {string} fromID The id of the user that is sending the request.\r\n * @param {string} toID The id of the user that the request is being sent to.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {function(function(), function())} responseHandler The handler for the finished or failed response.\r\n * @param {boolean} ifDelete Whether the response is a delete or not.\r\n */\r\nexport const checkResponse = (userID, inviteID, aboutID, fromID, toID, setIsLoading, responseHandler, ifDelete) => {\r\n  setIsLoading(true);\r\n  if (isValidRequest(userID, inviteID, aboutID, fromID, toID)) {\r\n    responseHandler(() => {\r\n      if (ifDelete) {\r\n        setIsLoading(false);\r\n      }\r\n    }, (error) => {\r\n      console.log(error);\r\n      setIsLoading(false);\r\n    });\r\n  } else {\r\n    err && console.error(\"Request doesn't have all the necessary props!\");\r\n    setIsLoading(false);\r\n  }\r\n};\r\n\r\n/**\r\n * The action for deleting requests.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst deleteRequest = (userID, inviteID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, {}, {}, {}, setIsLoading,\r\n    (successHandler, failureHandler) => {\r\n      InviteFunctions.delete(userID, inviteID, successHandler, failureHandler, props);\r\n    }, true);\r\n};\r\n\r\n/**\r\n * Accepts a friend request for the current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the user that the request is being sent to\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptFriendRequest = (userID, inviteID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, {}, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addFriend(userID, userID, aboutID, inviteID, successHandler, failureHandler, props);\r\n  });\r\n};\r\n\r\n/**\r\n * Declines a friend request for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineFriendRequest = deleteRequest;\r\n\r\n/**\r\n * Accepts the invite to an event for the current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the user that the request is being sent to\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptEventInvite = (userID, inviteID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, {}, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addEvent(userID, userID, aboutID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines an invite to an event for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineEventInvite = deleteRequest;\r\n\r\n/**\r\n * Accepts invite to challenge for current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the user that the request is being sent to\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptChallengeInvite = (userID, inviteID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, {}, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addChallenge(userID, userID, aboutID, inviteID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines invite to challenge for current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineChallengeInvite = deleteRequest;\r\n\r\n/**\r\n * Accepts the invite to a group for the current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} aboutID The id of the group that corresponds to the invite.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptGroupInvite = (userID, inviteID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, {}, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addGroup(userID, userID, aboutID, inviteID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines an invite to a group for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineGroupInvite = deleteRequest;\r\n\r\n/**\r\n * Accepts the request to a event to an event for the current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} toID The id of the user that the event request is being sent to.\r\n * @param {string} aboutID The id of the event that corresponds to the request.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptEventRequest = (userID, inviteID, toID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, toID, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addEvent(userID, aboutID, toID, inviteID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines an invite to an event for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineEventRequest = deleteRequest;\r\n\r\n/**\r\n * Accepts a challenge invite for the current user.\r\n *\r\n * @param {string} userID The current user's id.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} toID The id of the user that the event request is being sent to.\r\n * @param {string} aboutID The id of the event that corresponds to the request.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptChallengeRequest = (userID, inviteID, toID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, toID, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addChallenge(userID, aboutID, toID, inviteID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines a challenge invite for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineChallengeRequest = deleteRequest;\r\n\r\n/**\r\n * Accepts a group invite for the current user.\r\n *\r\n * @param {string} userID The id of the author.\r\n * @param {string} inviteID The id that represents the invite itself.\r\n * @param {string} toID The id of the user being sent the invite.\r\n * @param {string} aboutID The id of the group that the user is being invited to.\r\n * @param {function(boolean)} setIsLoading Sets isLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n */\r\nconst handleAcceptGroupRequest = (userID, inviteID, toID, aboutID, setIsLoading, props) => {\r\n  checkResponse(userID, inviteID, aboutID, {}, toID, setIsLoading, (successHandler, failureHandler) => {\r\n    UserFunctions.addGroup(userID, aboutID, toID, successHandler, failureHandler, props);\r\n  }, false);\r\n};\r\n\r\n/**\r\n * Declines a group invite for the current user.\r\n *\r\n * @type {deleteRequest}\r\n */\r\nconst handleDeclineGroupRequest = deleteRequest;\r\n\r\n/**\r\n * Displays the modal of the user who sent the invite.\r\n *\r\n * @param {string} fromID The id of the user who sent the invite.\r\n * @param {boolean} fromModalOpen Determines if the modal of the sender is open or not\r\n * @param {function()} setFromModalOpen Sets the open attribute of the from modal to open.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport const fromModal = (fromID, fromModalOpen, setFromModalOpen) => {\r\n  const fromItemType = getItemTypeFromID(fromID);\r\n  return switchReturnItemType(fromItemType,\r\n    <ClientModal open={fromModalOpen} onClose={() => setFromModalOpen(false)}\r\n                 clientID={fromID}/>,\r\n    <TrainerModal trainerID={fromID} open={fromModalOpen}\r\n                  onClose={() => setFromModalOpen(false)}/>,\r\n    null, null, null, null, null, null, null, null, null, null, null, null, \"INVITE FROM MODAL\");\r\n};\r\n\r\n/**\r\n * The modal relating to the client that the invite is to.\r\n *\r\n * @param {string} toID The id of the client that the invite is being sent to.\r\n * @param {function()} toModalOpen Opens the modal for the client being sent the invite.\r\n * @param {function(boolean)} setToModalOpen Sets the open attribute of the to modal to true.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport const toModal = (toID, toModalOpen, setToModalOpen) => {\r\n  const toItemType = getItemTypeFromID(toID);\r\n  return switchReturnItemType(toItemType,\r\n    <ClientModal open={toModalOpen} onClose={() => toModalOpen(false)}\r\n                 clientID={toID}/>,\r\n    <TrainerModal trainerID={toID} open={toModalOpen}\r\n                  onClose={() => setToModalOpen(false)}/>,\r\n    null, null, null,\r\n    <EventDescriptionModal eventID={toID} open={toModalOpen}\r\n                           onClose={() => setToModalOpen(false)}/>,\r\n    <ChallengeDescriptionModal challengeID={toID} open={toModalOpen}\r\n                               onClose={() => setToModalOpen(false)}/>,\r\n    null, null, null,\r\n    <GroupDescriptionModal open={toModalOpen} onClose={() => setToModalOpen(false)}\r\n                           groupID={toID}/>,\r\n    null, null, null, null, \"INVITE TO MODAL\");\r\n};\r\n\r\n/**\r\n * Displays the modal for the element that the invite is about.\r\n *\r\n * @param {String} aboutID The id of the element that the invite is about.\r\n * @param {function()} aboutModalOpen Opens the about modal.\r\n * @param {function(boolean)} setAboutModalOpen Sets the open attribute of the about modal to true.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport const aboutModal = (aboutID, aboutModalOpen, setAboutModalOpen) => {\r\n  const aboutItemType = getItemTypeFromID(aboutID);\r\n  return switchReturnItemType(aboutItemType,\r\n    <ClientModal open={aboutModalOpen} onClose={() => aboutModalOpen(false)}\r\n                 clientID={aboutID}/>,\r\n    <TrainerModal trainerID={aboutID} open={aboutModalOpen}\r\n                  onClose={() => setAboutModalOpen(false)}/>,\r\n    null, null, null,\r\n    <EventDescriptionModal eventID={aboutID} open={aboutModalOpen}\r\n                           onClose={() => setAboutModalOpen(false)}/>,\r\n    <ChallengeDescriptionModal challengeID={aboutID} open={aboutModalOpen}\r\n                               onClose={() => setAboutModalOpen(false)}/>,\r\n    null, null, null,\r\n    <GroupDescriptionModal open={aboutModalOpen} onClose={() => setAboutModalOpen(false)}\r\n                           groupID={aboutID}/>,\r\n    null, null, null, null, \"INVITE ABOUT MODAL\");\r\n};\r\n\r\n/**\r\n * Gets the details of the invite function.\r\n *\r\n * @param {string} userID The id of the current user.\r\n * @param {function()} getInviteAttribute *\r\n * @param {function()} getFromAttribute *\r\n * @param {function()} getToAttribute *\r\n * @param {function()} getAboutAttribute *\r\n * @param {boolean} fromModalOpen Determines if the from modal is open.\r\n * @param {function(string, function(), function())} setFromModalOpen\r\n * @param {function()} toModalOpen Sets the open attribute of the to modal to open.\r\n * @param {function(boolean)} setToModalOpen Sets modal of the recipient client open attribute to true.\r\n * @param {function(boolean)} aboutModalOpen Sets the open attribute of the about modal to open.\r\n * @param {function(boolean)} setAboutModalOpen Sets the open attribute for the about model to open.\r\n * @param {boolean} acceptLoading Shows whether the accept button is loading or not.\r\n * @param {function(boolean)} setAcceptLoading Sets acceptLoading to the given boolean.\r\n * @param {boolean} denyLoading Shows whether the deny button is loading or not.\r\n * @param {function(boolean)} setDenyLoading Sets denyLoading to the given boolean.\r\n * @param {{}} props The component props to use all of the automatic update functions.\r\n * @returns {*} The React JSX used to display the component.\r\n */\r\nexport const getInviteDetails = (userID, getInviteAttribute, getFromAttribute, getToAttribute, getAboutAttribute,\r\n                                 fromModalOpen, setFromModalOpen, toModalOpen, setToModalOpen, aboutModalOpen,\r\n                                 setAboutModalOpen, acceptLoading, setAcceptLoading, denyLoading, setDenyLoading, props) => {\r\n  const type = getInviteAttribute(\"inviteType\");\r\n  if (type === \"friendRequest\") {\r\n    return [\r\n      <Card.Content key={0} textAlign='center'>\r\n        <Card.Header onClick={() => setFromModalOpen(true)}>\r\n          {getFromAttribute(\"name\")}\r\n        </Card.Header>\r\n        {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n        <Card.Description>\r\n          has sent you a buddy request {/*Insert Invite Sent Time Here*/}\r\n        </Card.Description>\r\n      </Card.Content>,\r\n      <Card.Content key={1} extra textAlign='center'>\r\n        <Button.Group fluid>\r\n          <Button loading={denyLoading} disabled={denyLoading}\r\n                  onClick={() => handleDeclineFriendRequest(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n          <Button loading={acceptLoading} disabled={acceptLoading} primary\r\n                  onClick={() => handleAcceptFriendRequest(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n        </Button.Group>\r\n      </Card.Content>\r\n    ];\r\n  } else if (type === \"eventInvite\") {\r\n    return [\r\n      <Card.Content>\r\n        <Feed>\r\n          <Feed.Event>\r\n            <Feed.Content>\r\n              <Feed.Summary>\r\n                You were invited to{' '}\r\n                <Feed.User onClick={() => setAboutModalOpen(true)}>\r\n                  {getAboutAttribute(\"title\")}\r\n                </Feed.User>\r\n                {aboutModal(getInviteAttribute(\"about\"), aboutModalOpen, setAboutModalOpen)}\r\n                {' '}by{' '}\r\n                <Feed.User onClick={() => setFromModalOpen(true)}>\r\n                  {getFromAttribute(\"name\")}\r\n                </Feed.User>\r\n                {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n                <Feed.Date>{/*Insert Invite Sent Time Here*/}</Feed.Date>\r\n              </Feed.Summary>\r\n              <Divider/>\r\n              <Feed.Extra>\r\n                <Button inverted loading={denyLoading} disabled={denyLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleDeclineEventInvite(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n                <Button primary loading={acceptLoading} disabled={acceptLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleAcceptEventInvite(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n              </Feed.Extra>\r\n            </Feed.Content>\r\n          </Feed.Event>\r\n        </Feed>\r\n      </Card.Content>\r\n    ];\r\n  } else if (type === \"challengeInvite\") {\r\n    return [\r\n      <Card.Content key={0} textAlign='center'>\r\n        <Card.Header onClick={() => setFromModalOpen(true)}>\r\n          {getFromAttribute(\"name\")}\r\n        </Card.Header>\r\n        {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n        <Card.Description>\r\n          has invited you to {/*Insert Invite Sent Time Here*/}\r\n          <Feed.User onClick={setAboutModalOpen(true)}>\r\n            {getAboutAttribute(\"title\")}\r\n          </Feed.User>\r\n          {aboutModal(getInviteAttribute(\"about\"), aboutModalOpen, setAboutModalOpen)}\r\n        </Card.Description>\r\n      </Card.Content>,\r\n      <Card.Content key={1} extra textAlign='center'>\r\n        <Button.Group fluid>\r\n          <Button loading={denyLoading} disabled={denyLoading}\r\n                  onClick={() => handleDeclineChallengeInvite(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n          <Button loading={acceptLoading} disabled={acceptLoading} primary\r\n                  onClick={() => handleAcceptChallengeInvite(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n        </Button.Group>\r\n      </Card.Content>\r\n    ];\r\n  } else if (type === \"groupInvite\") {\r\n    return [\r\n      <Card.Content key={0} textAlign='center'>\r\n        <Card.Header onClick={() => setFromModalOpen(true)}>\r\n          {getFromAttribute(\"name\")}\r\n        </Card.Header>\r\n        {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n        <Card.Description>\r\n          has invited you to {/*Insert Invite Sent Time Here*/}\r\n          <Feed.User onClick={() => setAboutModalOpen(true)}>\r\n            {getAboutAttribute(\"title\")}\r\n          </Feed.User>\r\n          {aboutModal(getInviteAttribute(\"about\"), aboutModalOpen, setAboutModalOpen)}\r\n        </Card.Description>\r\n      </Card.Content>,\r\n      <Card.Content key={1} extra textAlign='center'>\r\n        <Button.Group fluid>\r\n          <Button loading={denyLoading} disabled={denyLoading}\r\n                  onClick={() => handleDeclineGroupInvite(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n          <Button loading={acceptLoading} disabled={acceptLoading} primary\r\n                  onClick={() => handleAcceptGroupInvite(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n        </Button.Group>\r\n      </Card.Content>\r\n    ];\r\n  } else if (type === \"eventRequest\") {\r\n    return [\r\n      <Card.Content>\r\n        <Feed>\r\n          <Feed.Event>\r\n            <Feed.Content>\r\n              <Feed.Summary>\r\n                <Feed.User onClick={() => setFromModalOpen(true)}>\r\n                  {getAboutAttribute(\"name\")}\r\n                </Feed.User>\r\n                {aboutModal(getInviteAttribute(\"about\"), aboutModalOpen, setAboutModalOpen)}\r\n                Would like to join {' '}\r\n                <Feed.User onClick={() => setToModalOpen(true)}>\r\n                  {getToAttribute(\"title\")}\r\n                </Feed.User>\r\n                {toModal(getInviteAttribute(\"to\"), toModalOpen, setToModalOpen)}\r\n                <Feed.Date>{/*Insert Invite Sent Time Here*/}</Feed.Date>\r\n              </Feed.Summary>\r\n              <Divider/>\r\n              <Feed.Extra>\r\n                <Button inverted loading={denyLoading} disabled={denyLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleDeclineEventRequest(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n                <Button primary loading={acceptLoading} disabled={acceptLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleAcceptEventRequest(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"to\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n              </Feed.Extra>\r\n            </Feed.Content>\r\n          </Feed.Event>\r\n        </Feed>\r\n      </Card.Content>\r\n    ];\r\n  } else if (type === \"challengeRequest\") {\r\n    return [\r\n      <Card.Content key={0} textAlign='center'>\r\n        <Card.Header onClick={() => setFromModalOpen(true)}>\r\n          {getFromAttribute(\"name\")}\r\n        </Card.Header>\r\n        {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n        <Card.Description>\r\n          would like to join {/*Insert Invite Sent Time Here*/}\r\n          <Feed.User onClick={() => setToModalOpen(true)}>\r\n            {getToAttribute(\"title\")}\r\n          </Feed.User>\r\n          {toModal(getInviteAttribute(\"to\"), toModalOpen, setToModalOpen)}\r\n        </Card.Description>\r\n      </Card.Content>,\r\n      <Card.Content key={1} extra textAlign='center'>\r\n        <Button.Group fluid>\r\n          <Button loading={denyLoading} disabled={denyLoading}\r\n                  onClick={() => handleDeclineChallengeRequest(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n          <Button primary loading={acceptLoading} disabled={acceptLoading}\r\n                  onClick={() => handleAcceptChallengeRequest(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"to\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n        </Button.Group>\r\n      </Card.Content>\r\n    ]\r\n  } else if (type === \"groupRequest\") {\r\n    return [\r\n      <Card.Content>\r\n        <Feed>\r\n          <Feed.Event>\r\n            <Feed.Content>\r\n              <Feed.Summary>\r\n                <Feed.User onClick={() => setFromModalOpen(true)}>\r\n                  {getFromAttribute(\"name\")}\r\n                </Feed.User>\r\n                {fromModal(getInviteAttribute(\"from\"), fromModalOpen, setFromModalOpen)}\r\n                Would like to join {' '}\r\n                <Feed.User onClick={() => setToModalOpen(true)}>\r\n                  {getToAttribute(\"title\")}\r\n                </Feed.User>\r\n                {toModal(getInviteAttribute(\"to\"), toModalOpen, setToModalOpen)}\r\n                <Feed.Date>{/*Insert Invite Sent Time Here*/}</Feed.Date>\r\n              </Feed.Summary>\r\n              <Divider/>\r\n              <Feed.Extra>\r\n                <Button inverted loading={denyLoading} disabled={denyLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleDeclineGroupRequest(userID, getInviteAttribute(\"id\"), setDenyLoading, props)}>Deny</Button>\r\n                <Button primary loading={acceptLoading} disabled={acceptLoading} floated=\"right\"\r\n                        size=\"small\"\r\n                        onClick={() => handleAcceptGroupRequest(userID, getInviteAttribute(\"id\"), getInviteAttribute(\"to\"), getInviteAttribute(\"about\"), setAcceptLoading, props)}>Accept</Button>\r\n              </Feed.Extra>\r\n            </Feed.Content>\r\n          </Feed.Event>\r\n        </Feed>\r\n      </Card.Content>\r\n    ];\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * The card for displaying different kinds of invites the user can receive.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst InviteCard = (props: Props) => {\r\n  const [fromModalOpen, setFromModalOpen] = useState(false);\r\n  const [toModalOpen, setToModalOpen] = useState(false);\r\n  const [aboutModalOpen, setAboutModalOpen] = useState(false);\r\n  const [acceptLoading, setAcceptLoading] = useState(false);\r\n  const [denyLoading, setDenyLoading] = useState(false);\r\n\r\n  const getInviteAttribute = (attributeName) => {\r\n    return getAttributeFromObject(props.invite, attributeName);\r\n  };\r\n  const getFromAttribute = (attributeName) => {\r\n    return getObjectAttribute(getInviteAttribute(\"from\"), attributeName, props.cache);\r\n  };\r\n  const getToAttribute = (attributeName) => {\r\n    return getObjectAttribute(getInviteAttribute(\"to\"), attributeName, props.cache);\r\n  };\r\n  const getAboutAttribute = (attributeName) => {\r\n    return getObjectAttribute(getInviteAttribute(\"about\"), attributeName, props.cache);\r\n  };\r\n  // const getTimeSinceInvite = () => {\r\n  //     let today = new Date();\r\n  //     let time = today.getHours();\r\n  //     let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n  //     let inviteTime = getInviteAttribute(\"time_created\");\r\n  //     if(time > 24) {\r\n  //         return date;\r\n  //     }\r\n  //     else {\r\n  //         return inviteTime;\r\n  //     }\r\n  // };\r\n\r\n  if (!props.invite) {\r\n    return (\r\n      <Dimmer>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  return (\r\n    <Card fluid raised centered>\r\n      <div className=\"u-container\">\r\n        <div className=\"u-avatar u-avatar--large u-margin-bottom--neg2 u-margin-x--auto\"\r\n             style={{backgroundImage: `url(${getFromAttribute(\"profileImage\")})`}}/>\r\n      </div>\r\n      {getInviteDetails(props.user.id, getInviteAttribute, getFromAttribute, getToAttribute, getAboutAttribute,\r\n        fromModalOpen, setFromModalOpen, toModalOpen, setToModalOpen, aboutModalOpen, setAboutModalOpen,\r\n        acceptLoading, setAcceptLoading, denyLoading, setDenyLoading, props)}\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  cache: state.cache,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    removeItem: (id, itemType) => {\r\n      dispatch(removeItem(id, itemType));\r\n    },\r\n    addToUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(addToUserAttribute(attributeName, attributeValue));\r\n    },\r\n    removeFromUserAttribute: (attributeName, attributeValue) => {\r\n      dispatch(removeFromUserAttribute(attributeName, attributeValue));\r\n    },\r\n    addToItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(addToItemAttribute(id, attributeName, attributeValue));\r\n    },\r\n    removeFromItemAttribute: (id, attributeName, attributeValue) => {\r\n      dispatch(removeFromItemAttribute(id, attributeName, attributeValue));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InviteCard);\r\n","import React, {useState, useEffect, Fragment} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Grid, Checkbox, Modal} from \"semantic-ui-react\";\r\nimport {disableType, enableType} from \"../../redux/actions/searchActions\";\r\n\r\n/**\r\n * Constructs the visual checkboxes list of components using the search redux information.\r\n *\r\n * @param {{}} filterTypes The checked status of each of the filter types.\r\n * @param {function({})} setFilterTypes Sets the filter types state.\r\n * @param {function(string)} enableType Search redux function to enable a type for searching.\r\n * @param {function(string)} disableType Search redux function to disable a type for searching.\r\n * @return {[*]} The React JSX components for the check boxes.\r\n */\r\nconst getCheckBoxes = (filterTypes, setFilterTypes, enableType, disableType) => {\r\n  const checkBoxes = [];\r\n  for (const type in filterTypes) {\r\n    if (filterTypes.hasOwnProperty(type)) {\r\n      checkBoxes.push(\r\n        <Grid.Column key={type}>\r\n          <Checkbox label={type}\r\n                    checked={filterTypes[type]}\r\n                    onChange={() => toggleTypeCheckbox(type, setFilterTypes, enableType, disableType)}/>\r\n        </Grid.Column>\r\n      )\r\n    }\r\n  }\r\n  return checkBoxes;\r\n};\r\n\r\n/**\r\n * Toggles a type checkbox, based on which type is clicked.\r\n *\r\n * @param {string} type The type of the checkbox clicked.\r\n * @param {function({})} setFilterTypes Sets the filter types state.\r\n * @param {function(string)} enableType Search redux function to enable a type for searching.\r\n * @param {function(string)} disableType Search redux function to disable a type for searching.\r\n */\r\nconst toggleTypeCheckbox = (type, setFilterTypes, enableType, disableType) => {\r\n  setFilterTypes(p => {\r\n    if (p[type]) {\r\n      // Disable type\r\n      disableType(type);\r\n    } else {\r\n      // Enable type\r\n      enableType(type);\r\n    }\r\n    return {\r\n      ...p,\r\n      [type]: !p[type]\r\n    }\r\n  });\r\n  // alert(JSON.stringify(event.target.checked))\r\n};\r\n\r\n/**\r\n * The Modal to filter out results from the search bar. Chooses which item types to include in the actual search\r\n * functionality.\r\n *\r\n * @param props The props passed into the component.\r\n * @return {*} The React JSX to display the component.\r\n * @constructor\r\n */\r\nconst FilterScreen = (props) => {\r\n  const [filterTypes, setFilterTypes] = useState({});\r\n\r\n  useEffect(() => {\r\n    setFilterTypes({});\r\n    const types = props.search.typeQueries;\r\n    for (const type in types) {\r\n      if (types.hasOwnProperty(type)) {\r\n        if ([\"Client\", \"Trainer\", \"Event\", \"Challenge\", \"Group\"].includes(type)) {\r\n          setFilterTypes(p => ({\r\n            ...p,\r\n            [type]: types[type].enabled\r\n          }));\r\n        }\r\n      }\r\n    }\r\n  }, [props.search]);\r\n\r\n  return (\r\n    <Modal.Content>\r\n      <Grid rows={2}>\r\n        <Grid.Row>\r\n          Choose which item types show up in the search!\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <Fragment>\r\n            <Grid centered stackable columns={4}>\r\n              {getCheckBoxes(filterTypes, setFilterTypes, props.enableType, props.disableType)}\r\n            </Grid>\r\n          </Fragment>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </Modal.Content>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  search: state.search\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    enableType: (type) => {\r\n      dispatch(enableType(type));\r\n    },\r\n    disableType: (type) => {\r\n      dispatch(disableType(type));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterScreen);\r\n","import React, {useState, useEffect, Fragment} from 'react'\r\nimport _ from 'lodash'\r\nimport {Dimmer, Message} from 'semantic-ui-react'\r\nimport InviteCard, {InviteCardInfo} from \"../cards/InviteCard\";\r\nimport {fetchUserAttributes, forceFetchUserAttributes} from \"../../redux/actions/userActions\";\r\nimport {connect} from 'react-redux';\r\nimport {\r\n  fetchInvite,\r\n  fetchEvent,\r\n  fetchChallenge,\r\n  fetchGroup,\r\n  fetchClient,\r\n  fetchTrainer\r\n} from \"../../redux/convenience/cacheItemTypeActions\";\r\nimport {getItemTypeFromID} from \"../../logic/ItemType\";\r\nimport {err, log} from \"../../../Constants\";\r\nimport Spinner from \"../props/Spinner\";\r\n\r\n/**\r\n * Fetches the about and from info for an invite so that the InviteCard can properly display the information.\r\n *\r\n * @param {Invite} invite The invite object to fetch the info for.\r\n * @param {function(string, [string])} fetchClient The function to fetch a Client from the database.\r\n * @param {function(string, [string])} fetchTrainer The function to fetch a Trainer from the database.\r\n * @param {function(string, [string])} fetchEvent The function to fetch an Event from the database.\r\n * @param {function(string, [string])} fetchChallenge The function to fetch a Challenge from the database.\r\n * @param {function(string, [string])} fetchGroup The function to fetch a Group from the database.\r\n */\r\nconst fetchAboutAndFromInfo = (invite, fetchClient, fetchTrainer, fetchEvent, fetchChallenge, fetchGroup) => {\r\n  // TODO We don't need this much stuff....\r\n  if (invite && invite.from && invite.to && invite.inviteType && invite.about) {\r\n    // Fetch from user information\r\n    const fromItemType = getItemTypeFromID(invite.from);\r\n    if (fromItemType === \"Client\") {\r\n      fetchClient(invite.from, InviteCardInfo.fromInfo.clientFetchList);\r\n    } else if (fromItemType === \"Trainer\") {\r\n      fetchTrainer(invite.from, InviteCardInfo.fromInfo.trainerFetchList);\r\n    } else if (fromItemType === \"Gym\") {\r\n      // TODO FETCH THIS?\r\n      log && console.log(\"not implemented!\");\r\n    } else {\r\n      log && console.error(\"ITEM TYPE NOT RECOGNIZED FOR INVITE?\");\r\n    }\r\n\r\n    const toItemType = getItemTypeFromID(invite.to);\r\n    if (toItemType === \"Client\") {\r\n      fetchClient(invite.to, InviteCardInfo.toInfo.clientFetchList);\r\n    } else if (toItemType === \"Trainer\") {\r\n      fetchTrainer(invite.to, InviteCardInfo.toInfo.trainerFetchList);\r\n    } else if (toItemType === \"Gym\") {\r\n      // TODO FETCH THIS?\r\n      log && console.log(\"not implemented!\");\r\n    } else if (toItemType === \"Event\") {\r\n      fetchEvent(invite.to, InviteCardInfo.toInfo.eventFetchList);\r\n    } else if (toItemType === \"Challenge\") {\r\n      fetchChallenge(invite.to, InviteCardInfo.toInfo.challengeFetchList);\r\n    } else if (toItemType === \"Group\") {\r\n      fetchGroup(invite.to, InviteCardInfo.toInfo.groupFetchList);\r\n    } else {\r\n      err && console.error(\"ITEM TYPE NOT RECOGNIZED FOR INVITE?\");\r\n    }\r\n    // Fetch about item information\r\n    const aboutItemType = getItemTypeFromID(invite.about);\r\n    if (aboutItemType === \"Client\") {\r\n      fetchClient(invite.about, InviteCardInfo.aboutInfo.clientFetchList);\r\n    } else if (aboutItemType === \"Trainer\") {\r\n      fetchTrainer(invite.about, InviteCardInfo.aboutInfo.trainerFetchList);\r\n    } else if (aboutItemType === \"Gym\") {\r\n      // TODO FETCH THIS?\r\n      log && console.log(\"not implemented!\");\r\n    } else if (aboutItemType === \"Event\") {\r\n      fetchEvent(invite.about, InviteCardInfo.aboutInfo.eventFetchList);\r\n    } else if (aboutItemType === \"Challenge\") {\r\n      fetchChallenge(invite.about, InviteCardInfo.aboutInfo.challengeFetchList);\r\n    } else if (aboutItemType === \"Group\") {\r\n      fetchGroup(invite.about, InviteCardInfo.aboutInfo.groupFetchList);\r\n    } else {\r\n      err && console.error(\"ITEM TYPE NOT RECOGNIZED FOR INVITE?\");\r\n    }\r\n  } else {\r\n    // TODO FIll in the invite with bum info?\r\n  }\r\n};\r\n\r\n/*\r\n* NotificationCard Feed\r\n*\r\n* This is a feed which contains all of the buddy (friend) requests that have been sent to the current user.\r\n */\r\nconst InviteFeed = (props) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (props.user.id) {\r\n      setIsLoading(true);\r\n      props.fetchUserAttributes([\"receivedInvites\", \"ownedEvents\", \"ownedChallenges\", \"ownedGroups\"], () => {\r\n        setIsLoading(false);\r\n      });\r\n    }\r\n  }, [props.user.id]);\r\n\r\n  useEffect(() => {\r\n    const fetchAndAddInvite = (inviteID) => {\r\n      props.fetchInvite(inviteID, InviteCardInfo.fetchList, (data) => {\r\n        setNotifications(p => [\r\n          ...p,\r\n          data\r\n        ]);\r\n        fetchAboutAndFromInfo(data, props.fetchClient, props.fetchTrainer, props.fetchEvent,\r\n          props.fetchChallenge, props.fetchGroup);\r\n        setIsLoading(false);\r\n      });\r\n    };\r\n    const fetchAndAddReceivedInvites = (itemType, id) => {\r\n      let fetchFunction;\r\n      if (itemType === \"Event\") {\r\n        fetchFunction = props.fetchEvent;\r\n      }\r\n      if (itemType === \"Challenge\") {\r\n        fetchFunction = props.fetchChallenge;\r\n      }\r\n      if (itemType === \"Group\") {\r\n        fetchFunction = props.fetchGroup;\r\n      }\r\n      fetchFunction(id, [\"receivedInvites\"], (data) => {\r\n        if (data.receivedInvites && data.receivedInvites.length > 0) {\r\n          for (let i = 0; i < data.receivedInvites.length; i++) {\r\n            fetchAndAddInvite(data.receivedInvites[i]);\r\n          }\r\n          setIsLoading(false);\r\n        } else {\r\n          setIsLoading(false);\r\n        }\r\n      });\r\n    };\r\n    setNotifications([]);\r\n    const user = props.user;\r\n    if (user.hasOwnProperty(\"receivedInvites\") && user.receivedInvites) {\r\n      for (let i = 0; i < user.receivedInvites.length; i++) {\r\n        setIsLoading(true);\r\n        fetchAndAddInvite(user.receivedInvites[i]);\r\n      }\r\n    }\r\n    if (user.hasOwnProperty(\"ownedEvents\") && user.ownedEvents) {\r\n      for (let i = 0; i < user.ownedEvents.length; i++) {\r\n        setIsLoading(true);\r\n        fetchAndAddReceivedInvites(\"Event\", user.ownedEvents[i]);\r\n      }\r\n    }\r\n    if (user.hasOwnProperty(\"ownedChallenges\") && user.ownedChallenges) {\r\n      for (let i = 0; i < user.ownedChallenges.length; i++) {\r\n        setIsLoading(true);\r\n        fetchAndAddReceivedInvites(\"Challenge\", user.ownedChallenges[i]);\r\n      }\r\n    }\r\n    if (user.hasOwnProperty(\"ownedGroups\") && user.ownedGroups) {\r\n      for (let i = 0; i < user.ownedGroups.length; i++) {\r\n        setIsLoading(true);\r\n        fetchAndAddReceivedInvites(\"Group\", user.ownedGroups[i]);\r\n      }\r\n    }\r\n  }, [props.user.receivedInvites, props.user.ownedEvents, props.user.ownedChallenges, props.user.ownedGroups]);\r\n\r\n  //The buddy requests consists of a profile picture with the name of the user who has sent you a request.\r\n  //To the right of the request is two buttons, one to accept and one to deny the current request.\r\n  if (isLoading) {\r\n    return (\r\n      <Dimmer>\r\n        <Spinner/>\r\n      </Dimmer>\r\n    );\r\n  }\r\n  if (notifications && notifications.length && notifications.length > 0) {\r\n    return (\r\n      <Fragment>\r\n        {_.times(notifications.length, i => (\r\n          <InviteCard key={i} invite={notifications[i]}/>\r\n        ))}\r\n      </Fragment>\r\n    );\r\n  } else {\r\n    return (\r\n      <Message>\r\n        <div align=\"center\">No Notifications!</div>\r\n      </Message>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchUserAttributes: (attributesList, dataHandler) => {\r\n      dispatch(fetchUserAttributes(attributesList, dataHandler));\r\n    },\r\n    forceFetchUserAttributes: (attributeList) => {\r\n      dispatch(forceFetchUserAttributes(attributeList));\r\n    },\r\n    fetchInvite: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchInvite(id, variablesList, dataHandler));\r\n    },\r\n    fetchClient: (id, variablesList) => {\r\n      dispatch(fetchClient(id, variablesList));\r\n    },\r\n    fetchTrainer: (id, variablesList) => {\r\n      dispatch(fetchTrainer(id, variablesList));\r\n    },\r\n    fetchEvent: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchEvent(id, variablesList, dataHandler));\r\n    },\r\n    fetchChallenge: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchChallenge(id, variablesList, dataHandler));\r\n    },\r\n    fetchGroup: (id, variablesList, dataHandler) => {\r\n      dispatch(fetchGroup(id, variablesList, dataHandler));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InviteFeed);\r\n\r\n","import React from 'react';\r\nimport {Modal} from \"semantic-ui-react\";\r\nimport FilterScreen from \"../../vastuscomponents/components/props/FilterScreen\";\r\n\r\ntype Props = {\r\n  open: boolean,\r\n  onClose: () => void\r\n};\r\n\r\n/**\r\n * The modal that contains the search bar filtering controls.\r\n *\r\n * @param {Props} props The given props to the component.\r\n * @returns {*} The React JSX used to display the component.\r\n * @constructor\r\n */\r\nconst FilterModal = (props: Props) => (\r\n  <Modal size='large' open={props.open} onClose={props.onClose} closeIcon>\r\n    <Modal.Header align='center'>Filter</Modal.Header>\r\n    <FilterScreen/>\r\n  </Modal>\r\n);\r\n\r\nexport default FilterModal;","import React, {useState} from 'react';\nimport './App.css';\nimport Tabs from './screens/Tabs.js';\nimport {Menu, Container, Icon, Grid, Modal, Label, Button, Image} from \"semantic-ui-react\";\nimport SearchBarProp from \"./vastuscomponents/components/props/SearchBar\";\nimport {connect} from \"react-redux\";\nimport NotificationBellProp from \"./vastuscomponents/components/info/NotificationBell\";\nimport NotificationFeed from \"./screens/notification_bell/NotificationBellFeed\";\nimport Breakpoint from \"react-socks\";\nimport FilterModal from \"./screens/filter/FilterModal\";\nimport Logo from \"../src/vastuscomponents/img/VC_logo.svg\"\n\n/**\n * Auth App\n *\n * This file contains the general outline of the app in a grid based format.\n */\nconst AuthApp = (props) => {\n  const [filterModalOpen, setFilterModalOpen] = useState(false);\n\n  return [\n    <Menu borderless inverted vertical fluid widths={1} fixed=\"top\" style={{background: 'rgba(256, 256, 256, 0.5)'}}>\n          <Menu.Item style={{background: 'rgba(256, 256, 256, 0.5)'}}>\n            <Container fluid>\n              {/*<Breakpoint large up>*/}\n              <Grid columns=\"equal\" centered style={{background: 'rgba(256, 256, 256, 0.5)', border: '2px solid rebeccapurple'}}>\n                <Grid.Row stretched>\n                  <Grid.Column style={{minWidth: '401px'}}>\n                    <SearchBarProp/>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n                <Button floated='right' primary circular style={{marginRight: '20px', marginTop: '-25px'}}>\n                    <Image src={Logo} size='mini'\n                           style={{marginRight: '-5px', marginBottom: '-2px', marginTop: '-2px'}}/>\n                    7\n                </Button>\n              {/*<Breakpoint medium>\n                                <Grid columns=\"equal\" centered>\n                                    <Grid.Row stretched>\n                                        <Grid.Column width={2}>\n                                            <Grid onClick={() => setFilterModalOpen(true)} style={{marginTop: \"6px\", marginLeft: \"-40px\"}} centered>\n                                                <Icon name=\"filter\" size=\"big\"/>\n                                            </Grid>\n                                        </Grid.Column>\n                                        <Grid.Column width={12}>\n                                            <SearchBarProp />\n                                        </Grid.Column>\n                                        <Grid.Column width={2}>\n                                            <Modal trigger={<NotificationBellProp/>} closeIcon>\n                                                <Modal.Header align='center'>Notifications</Modal.Header>\n                                                <Modal.Content>\n                                                    <NotificationFeed/>\n                                                </Modal.Content>\n                                            </Modal>\n                                        </Grid.Column>\n                                    </Grid.Row>\n                                </Grid>\n                            </Breakpoint>\n                            <Breakpoint small down>\n                                <Grid columns=\"equal\" centered>\n                                    <Grid.Row stretched>\n                                        <Grid.Column style={{marginTop: \"6px\", marginLeft: \"12px\", marginRight: \"-12px\"}}>\n                                            <Grid onClick={() => setFilterModalOpen(true)} style={{marginTop: \"3px\", marginLeft: \"-60px\"}} centered>\n                                                <Icon name=\"filter\" size=\"big\"/>\n                                            </Grid>\n                                        </Grid.Column>\n                                        <Grid.Column width={9}>\n                                            <SearchBarProp />\n                                        </Grid.Column>\n                                        <Grid.Column style={{marginTop: \"3px\", marginLeft: \"-6px\"}}>\n                                            <Modal trigger={<NotificationBellProp/>} closeIcon>\n                                                <Modal.Header align='center'>Notifications</Modal.Header>\n                                                <Modal.Content>\n                                                    <NotificationFeed/>\n                                                </Modal.Content>\n                                            </Modal>\n                                        </Grid.Column>\n                                    </Grid.Row>\n                                </Grid>\n                            </Breakpoint>*/}\n            </Container>\n          </Menu.Item>\n        </Menu>,\n        <FilterModal open={filterModalOpen} onClose={() => setFilterModalOpen(false)}/>,\n        <Tabs user={props.user}/>\n  ];\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps)(AuthApp);\n","import React, {useState} from 'react';\nimport {Modal, Button, Form, Message, Dimmer, Loader, Popup, Divider} from 'semantic-ui-react';\nimport {closeSignUpModal, confirmSignUp, openSignUpModal, signUp} from \"../vastuscomponents/redux/actions/authActions\";\nimport {connect} from \"react-redux\";\nimport {clearError, setError} from \"../vastuscomponents/redux/actions/infoActions\";\nimport {err} from \"../Constants\";\n\n/**\n * Changes the text of the state for the component.\n *\n * @param {string} key The attribute name of the part of the state to update.\n * @param {{target: {value: string}}} value The value object from the input.\n * @param {{}} setStates The setState functions mapped from the attribute names they update.\n */\nconst setStateText = (key, value, setStates) => {\n  const setState = setStates[key];\n  if (setState) {\n    setState(value.target.value);\n  } else {\n    err && console.error(\"Setting non-handled set state case: \" + key);\n  }\n};\n\n/**\n * Handles what happens when the User tries to finish the sign up.\n *\n * @param {string} username The username the User has Chosen.\n * @param {string} password The password the User wants.\n * @param {string} confirmPassword The password confirmation.\n * @param {string} name The display name for the user\n * @param {string} email The email of the User.\n * @param {string} enterpriseID The optional enterprise ID for the sign up.\n * @param {function(error)} setError The function for setting the error of the component.\n * @param {function(string, string, string, string, string)} signUp Auth flow function for signing up.\n */\nconst handleCreateButton = (username, password, confirmPassword, name, email, enterpriseID, setError, signUp) => {\n  // console.log(\"Setting state with isConfirming is true\");\n  // TODO Do extra checking for the specifications of the account!\n  if (fieldsAreFilledCorrectly(username, password, confirmPassword, name, email, setError)) {\n    signUp(username, password, name, email, enterpriseID);\n  }\n};\n\n/**\n * Handles the confirmation of the sign up, from a confirmation code sent through email.\n *\n * @param {string} username The username of the User.\n * @param {string} confirmationCode The confirmation code received by the User.\n * @param {function(string, string)} confirmSignUp The Auth Flow function to complete the sign up process.\n * @param {function(error)} setError The function for setting the error of the component.\n */\nconst handleConfirmButton = (username, confirmationCode, confirmSignUp, setError) => {\n  // TODO Is there a chance that the username could be lost here?\n  if (confirmationCode) {\n    confirmSignUp(username, confirmationCode);\n  } else {\n    setError(new Error(\"Confirmation code cannot be empty\"));\n  }\n};\n\n/**\n * Cancels the sign up flow. Clears fields, but allows the User to continue the Sign up flow if confirming.\n *\n * @param {function()} clearError Clears the component state error.\n * @param {function()} closeSignUpModal Closes the sign up modal.\n */\nconst handleCancelButton = (clearError, closeSignUpModal) => {\n  // TODO Have a confirmation like are you sure ya wanna close?\n  clearError();\n  closeSignUpModal();\n};\n\n/**\n * Checks all the values to ensure that they are filled correctly and can be sent through the Auth flow functions.\n *\n * @param {string} username The inputted username for the User.\n * @param {string} password The inputted password for the User.\n * @param {string} confirmPassword The confirmed inputted password for the User.\n * @param {string} name The display name of the User.\n * @param {string} email The email of the User.\n * @param {function(error)} setError The function for setting the error of the component.\n * @return {boolean} Whether or not the fields are filled correctly.\n */\nconst fieldsAreFilledCorrectly = (username, password, confirmPassword, name, email, setError) => {\n  // console.log(\"Setting state with isConfirming is true\");\n  // TODO Do extra checking for the specifications of the account!\n  if (username && password && confirmPassword && name && email) {\n    if (password !== confirmPassword) {\n      setError(new Error(\"Password and confirm password do not match!\"));\n    } else if (!email.includes(\"@\") || !email.includes(\".\")) {\n      setError(new Error(\"Email needs to be properly formed!\"));\n    } else if (username.includes(\" \")) {\n      setError(new Error(\"Username cannot contain spaces!\"));\n    }\n    // Password checking: minLength = 8, needs a number, a lowercase letter, and an uppercase letter\n    else if (!properlyFormedPassword(password)) {\n      setError(new Error(\"Password must be longer than 8 characters, must need a number, a lower case letter, and an upper case letter\"));\n    } else {\n      return true;\n    }\n  } else {\n    setError(new Error(\"All fields need to be filled in!\"));\n  }\n  return false;\n};\n\n/**\n * Ensures that the password is properly formatted for the Cognito User Pool.\n *\n * @param {string} password The inputted password from the User.\n * @return {boolean} Whether the password is properly formed or not.\n */\nconst properlyFormedPassword = (password) => {\n  return (password.length > 8 && /\\d/.test(password) && (password.toUpperCase() !== password) && (password.toLowerCase() !== password));\n};\n\n/**\n * Displays an error message for any potential component errors.\n *\n * @param {{message: string}} error The error object to display.\n * @return {*} The React JSX for displaying the error message.\n */\nconst errorMessage = (error) => {\n  if (error && error.message) {\n    return (\n      <Modal.Description>\n        <Message color='red'>\n          <h1>Error!</h1>\n          <p>{error.message}</p>\n        </Message>\n      </Modal.Description>\n    );\n  }\n};\n\n/**\n * Generates a loading graphic based on the current loading state of the component.\n *\n * @param {boolean} isLoading Whether the app is loading or not.\n * @return {*} The React JSX to display the loading component.\n */\nconst loadingProp = (isLoading) => {\n  if (isLoading) {\n    return (\n      <Dimmer active>\n        <Loader/>\n      </Dimmer>\n    );\n  }\n  return null;\n};\n\n/**\n * The Sign Up Modal handles the whole signing up flow: inputting User info, then confirming the email.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst SignUpModal = (props) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  // const [gender, setGender] = useState(\"\");\n  // const [birthday, setBirthday] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [confirmationCode, setConfirmationCode] = useState(\"\");\n  const [enterpriseID, setEnterpriseID] = useState(\"\");\n  const setStates = {\n    username: setUsername,\n    password: setPassword,\n    confirmPassword: setConfirmPassword,\n    name: setName,\n    // gender: setGender,\n    // birthday: setBirthday,\n    email: setEmail,\n    confirmationCode: setConfirmationCode,\n    enterpriseID: setEnterpriseID\n  };\n\n  if (props.auth.confirmingSignUp) {\n    return (\n      <div>\n        <Modal open={props.auth.signUpModalOpen} onClose={() => (false)}\n               trigger={<Button fluid color='red' onClick={() => props.openSignUpModal()} inverted> Sign Up </Button>}\n               size='tiny'>\n          {loadingProp(props.info.isLoading)}\n          <Modal.Header>Check your email to confirm the sign up!</Modal.Header>\n          {errorMessage(props.info.error)}\n          <Modal.Actions>\n            <div>\n              <Form>\n                <label>Confirm Username!</label>\n                <Form.Input type=\"text\" name=\"username\" placeholder=\" Username \"\n                            onChange={value => setStateText(\"username\", value, setStates)}/>\n                <label>Confirmation Code</label>\n                <Form.Input type=\"text\" name=\"confirmationCode\" placeholder=\" XXXXXX \"\n                            onChange={value => setStateText(\"confirmationCode\", value, setStates)}/>\n              </Form>\n            </div>\n            <div>\n              <Button\n                onClick={() => handleConfirmButton(username, confirmationCode, props.confirmSignUp, props.setError)}\n                color='blue'>Confirm Your Account</Button>\n            </div>\n          </Modal.Actions>\n        </Modal>\n      </div>\n    );\n  }\n  return (\n    <Modal open={props.auth.signUpModalOpen}\n           trigger={<Button size=\"large\" fluid inverted onClick={() => props.openSignUpModal()}\n           primary style={{color: 'white'}}> Sign Up </Button>}\n           size='tiny' style={{background: 'white'}}>\n      {loadingProp(props.info.isLoading)}\n      <Modal.Header style={{background: 'white', color: 'purple'}}>Create Account to Join</Modal.Header>\n      {errorMessage(props.info.error)}\n      <Modal.Actions style={{borderTop: 'none', background: 'white'}}>\n        <Form style={{background: 'white'}}>\n          {/* TODO WE SHOULD USE A QUERY TO FIND OUT IF THAT USERNAME HAS ALREADY BEEN TAKEN */}\n          <Form.Input type=\"text\" iconPosition='left' icon='user' name=\"username\" placeholder=\"Username\"\n                      onChange={value => setStateText(\"username\", value, setStates)}\n                      style={{background: 'white', color: 'purple'}} color='white'/>\n          <Popup position=\"left center\"\n                 trigger={<Form.Input iconPosition='left' icon='lock' type=\"password\" name=\"password\"\n                                      placeholder=\"Password\"\n                                      onChange={value => setStateText(\"password\", value, setStates)} color='white'/>}>\n            Password must be at least 8 characters long, contains lower and upper case letters, contain at least one\n            number.\n          </Popup>\n          {/* <Form.Input type=\"password\" label=\"Password\" name=\"password\" placeholder=\"Password\" onChange={value => this.changeStateText(\"password\", value)}/> */}\n          <Form.Input type=\"password\" iconPosition='left' icon='lock' name=\"confirmPassword\"\n                      placeholder=\"Confirm Password\"\n                      onChange={value => setStateText(\"confirmPassword\", value, setStates)}\n                      style={{background: 'white', color: 'purple'}}/>\n          <Divider/>\n          <Popup position=\"left center\"\n                 trigger={<Form.Input type=\"text\" iconPosition='left' icon='user circle' name=\"name\"\n                                      placeholder=\"Screen Name\"\n                                      onChange={value => setStateText(\"name\", value, setStates)}/>}>\n            This will be what your friends will see your name as.\n          </Popup>\n          {/*<Form.Input type=\"text\" iconPosition='left' icon='male' name=\"gender\" placeholder=\"Gender\" onChange={value => this.changeStateText(\"gender\", value)}/>*/}\n          {/*<Divider />*/}\n          {/*<Form.Input type=\"date\" iconPosition='left' icon='calendar alternate outline' name=\"birthdate\" onChange={value => this.changeStateText(\"birthday\", value)}/>*/}\n          <Form.Input type=\"text\" iconPosition='left' icon='mail' name=\"email\" placeholder=\"Email\"\n                      onChange={value => setStateText(\"email\", value, setStates)}\n                      style={{background: 'white', color: 'purple'}}/>\n          {/*<Divider />*/}\n          {/*<Popup position=\"left center\" trigger={<Form.Input type=\"text\" iconPosition='left' icon='id card' name='enterprise code' placeHolder=\"Company ID\" onChange={value => setStateText(\"enterpriseID\", value, setStates)}/>}>*/}\n          {/*If you are signing up with your company, input the given ID here.*/}\n          {/*</Popup>*/}\n          <div className=\"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2\">\n            <Button negative\n                    onClick={() => handleCancelButton(props.clearError, props.closeSignUpModal)}>Cancel</Button>\n            <Button positive color='green'\n                    onClick={() => handleCreateButton(username, password, confirmPassword, name, email, enterpriseID, props.setError, props.signUp)}>Create</Button>\n          </div>\n        </Form>\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signUp: (username, password, name, gender, birthday, email) => {\n      dispatch(signUp(username, password, name, gender, birthday, email));\n    },\n    confirmSignUp: (username, confirmationCode) => {\n      dispatch(confirmSignUp(username, confirmationCode));\n    },\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    clearError: () => {\n      dispatch(clearError());\n    },\n    openSignUpModal: () => {\n      dispatch(openSignUpModal());\n    },\n    closeSignUpModal: () => {\n      dispatch(closeSignUpModal());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpModal);\n","import React, {useState} from 'react';\nimport {Modal, Button, Form, Message, Dimmer} from 'semantic-ui-react';\nimport {\n  closeForgotPasswordModal,\n  confirmForgotPassword,\n  forgotPassword, openForgotPasswordModal,\n} from \"../vastuscomponents/redux/actions/authActions\";\nimport {connect} from \"react-redux\";\nimport {setError} from \"../vastuscomponents/redux/actions/infoActions\";\nimport Spinner from \"../vastuscomponents/components/props/Spinner\";\n\n/**\n * Changes the text of the state for the component.\n *\n * @param {string} key The attribute name of the part of the state to update.\n * @param {{target: {value: string}}} value The value object from the input.\n * @param {{}} setStates The setState functions mapped from the attribute names they update.\n */\nconst changeStateText = (key, value, setStates) => {\n  // TODO Sanitize this input?\n  setStates[key](value.target.value);\n};\n\n/**\n * Submits the forgot password Auth function and continues the auth flow.\n *\n * @param {string} username The inputted username to reset the password for.\n * @param {function(string)} forgotPassword The function to submit the forgot password call.\n */\nconst handleSubmitButton = (username, forgotPassword) => {\n  forgotPassword(username);\n};\n\n/**\n * Handles the confirm button after the User received the confirmation code. Checks the inputs as well to make sure that\n * the passwords are the same.\n *\n * @param {string} username The username for the User.\n * @param {string} confirmationCode The confirmation code that the User received from their email.\n * @param {string} newPassword The new password they want to reset their account to.\n * @param {string} confirmNewPassword The new password again, to confirm correct input.\n * @param {function(error)} setError Sets the error for the component.\n * @param {function(string, string, string)} confirmForgotPassword Completes the forgot password reset.\n */\nconst handleConfirmButton = (username, confirmationCode, newPassword, confirmNewPassword, setError, confirmForgotPassword) => {\n  if (newPassword !== confirmNewPassword) {\n    console.log(\"Failed to make a new password :(\");\n    console.log(\"Passwords did not match\");\n    setError(new Error(\"Password and confirm password do not match!\"));\n  } else if (!(username && confirmationCode && newPassword && confirmNewPassword)) {\n    setError(new Error(\"All fields need to be filled in!\"));\n  } else {\n    confirmForgotPassword(username, confirmationCode, newPassword);\n  }\n};\n\n/**\n * Handles the cancel button and navigates away from modal.\n *\n * @param {function()} closeForgotPasswordModal Closes the forgot password modal.\n */\nconst handleCancelButton = (closeForgotPasswordModal) => {\n  // TODO Have a are you sure? thing attached to this\n  // this.setState({error: null, isConfirming: false});\n  closeForgotPasswordModal();\n};\n\n/**\n * Generates an error message based on the current error state of the component.\n *\n * @param error The error object of the component.\n * @return {*} The React JSX to display the error message.\n */\nfunction errorMessage(error) {\n  if (error) {\n    return (\n      <Modal.Description>\n        <Message color='red'>\n          <h1>Error!</h1>\n          <p>{JSON.stringify(error)}</p>\n        </Message>\n      </Modal.Description>\n    );\n  }\n}\n\n/**\n * Generates a loading graphic based on the current loading state of the component.\n *\n * @param {boolean} isLoading Whether the app is loading or not.\n * @return {*} The React JSX to display the loading component.\n */\nfunction loadingProp(isLoading) {\n  if (isLoading) {\n    return (\n      <Dimmer active>\n        <Spinner/>\n      </Dimmer>\n    );\n  }\n  return null;\n}\n\n/**\n * The Modal responsible for handling the resetting of passwords if a User forgets their password. Inputs a username\n * and sends an email to the User which then they use to reset their password.\n *\n * @param {{}} props The given props to the component.\n * @return {*} The React JSX to display this component.\n * @constructor\n */\nconst ForgotPasswordModal = (props) => {\n  const [username, setUsername] = useState(\"\");\n  const [confirmationCode, setConfirmationCode] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmNewPassword, setConfirmNewPassword] = useState(\"\");\n\n  // Make an object to set the state dynamically\n  const setStates = {\n    username: setUsername,\n    confirmationCode: setConfirmationCode,\n    newPassword: setNewPassword,\n    confirmNewPassword: setConfirmNewPassword\n  };\n\n  if (props.auth.confirmingForgotPassword) {\n    return (\n      <Modal open={props.auth.forgotPasswordModalOpen} onClose={() => (false)}\n             trigger={<Button onClick={() => props.openForgotPasswordModal()} primary style={{color: 'white'}}>\n                 Forgot Password?</Button>} size='tiny'>\n        {loadingProp(props.info.isLoading)}\n        <Modal.Header>Confirm your email and choose your new password!</Modal.Header>\n        {errorMessage(props.info.error)}\n        <Modal.Content>\n          <p>Enter your username to retrieve your information</p>\n        </Modal.Content>\n        <Modal.Actions style={{borderTop: 'none'}}>\n          <Form>\n            <Form.Input type=\"text\" label=\"Confirmation Code from your Email\" name=\"confirmationCode\"\n                        placeholder=\"XXXXXX\" onChange={value => changeStateText(\"confirmationCode\", value, setStates)}/>\n            <Form.Input type=\"password\" label=\"New Password\" name=\"newPassword\" placeholder=\"new password\"\n                        onChange={value => changeStateText(\"newPassword\", value, setStates)}/>\n            <Form.Input type=\"password\" name=\"confirmNewPassword\" placeholder=\"confirm new password\"\n                        onChange={value => changeStateText(\"confirmNewPassword\", value, setStates)}/>\n            <div className=\"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2\">\n              <Button negative onClick={() => handleCancelButton(props.closeForgotPasswordModal)}>Cancel</Button>\n              <Button positive color='green'\n                      onClick={() => handleConfirmButton(username, confirmationCode, newPassword, confirmNewPassword, props.setError, props.confirmForgotPassword)}>Confirm</Button>\n            </div>\n          </Form>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n  return (\n    <Modal open={props.auth.forgotPasswordModalOpen} onClose={() => (false)}\n           trigger={<Button size=\"large\" fluid inverted onClick={() => props.openForgotPasswordModal()} primary\n           style={{color: 'white'}}>Forgot\n             Password?</Button>} size='tiny'>\n      {loadingProp(props.info.isLoading)}\n      <Modal.Header style={{borderBottom: 'none', color: 'purple', background: 'white'}}>Forgot Password?</Modal.Header>\n      {errorMessage(props.info.error)}\n      <Modal.Content style={{background: 'white', color: 'purple'}}>\n        <p>Enter your username to retrieve your information</p>\n      </Modal.Content>\n      <Modal.Actions style={{borderTop: 'none', background: 'white', color: 'purple'}}>\n        <Form>\n          <Form.Input type=\"text\" name=\"username\" placeholder=\"username\"\n                      onChange={value => changeStateText(\"username\", value, setStates)}/>\n          <div className=\"u-flex u-flex-justify--space-between u-padding-y--2 u-margin-top--2\">\n            <Button negative onClick={() => handleCancelButton(props.closeForgotPasswordModal)}>Cancel</Button>\n            <Button positive color='green'\n                    onClick={() => handleSubmitButton(username, props.forgotPassword)}>Submit</Button>\n          </div>\n        </Form>\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    forgotPassword: (username) => {\n      dispatch(forgotPassword(username));\n    },\n    confirmForgotPassword: (username, confirmationCode, newPassword) => {\n      dispatch(confirmForgotPassword(username, confirmationCode, newPassword));\n    },\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    openForgotPasswordModal: () => {\n      dispatch(openForgotPasswordModal());\n    },\n    closeForgotPasswordModal: () => {\n      dispatch(closeForgotPasswordModal());\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ForgotPasswordModal);\n","import React from 'react';\nimport {Button, Icon} from 'semantic-ui-react';\nimport {connect} from 'react-redux';\nimport {googleSignIn} from \"../vastuscomponents/redux/actions/authActions\";\n\n// TODO Refactor to functional?\n\n// To federated sign in from Google\n/*\nSo for Google, it will only be a Google Sign up! Then you should sign in with the normal password and stuff\n */\nclass GoogleSignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.signIn = this.signIn.bind(this);\n  }\n\n  componentDidMount() {\n    const ga = window.gapi && window.gapi.auth2 ?\n      window.gapi.auth2.getAuthInstance() :\n      null;\n    if (!ga) this.createScript();\n  }\n\n  signIn() {\n    const ga = window.gapi.auth2.getAuthInstance();\n    ga.signIn().then(\n      googleUser => {\n        this.props.googleSignIn(googleUser);\n        // this.getAWSCredentials(googleUser);\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }\n\n  createScript() {\n    // load the Google SDK\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/platform.js';\n    script.async = true;\n    script.onload = this.initGapi;\n    document.body.appendChild(script);\n  }\n\n  initGapi() {\n    // init the Google SDK client\n    const g = window.gapi;\n    g.load('auth2', function () {\n      g.auth2.init({\n        client_id: '308108761903-qfc4dsbnjicjs0dpqao5ofh2c5u2636k.apps.googleusercontent.com',\n        // authorized scopes\n        scope: 'profile email openid'\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Button fluid color=\"green\" onClick={this.signIn}> <Icon name=\"google\"> </Icon>Google Sign In</Button>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    googleSignIn: (googleUser) => {\n      dispatch(googleSignIn(googleUser));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GoogleSignUp);\n","import React, {useState} from 'react';\nimport {\n  Grid, Form, Header, Button, Image, Segment, Message, Dimmer, Loader, Divider, List, Container, Icon\n} from 'semantic-ui-react';\nimport {connect} from \"react-redux\";\nimport SignUpModal from './SignUpModal';\nimport ForgotPasswordModal from \"./ForgotPasswordModal\";\nimport Logo from '../vastuscomponents/img/vt_gold_even_thicker_border.svg';\nimport {logIn, openForgotPasswordModal, openSignUpModal} from \"../vastuscomponents/redux/actions/authActions\";\nimport {setError} from \"../vastuscomponents/redux/actions/infoActions\";\nimport GoogleSignUp from \"./GoogleSignUp\";\n\n/**\n * Changes the text of the state for the component.\n *\n * @param {string} key The attribute name of the part of the state to update.\n * @param {{target: {value: string}}} value The value object from the input.\n * @param {{}} setStates The setState functions mapped from the attribute names they update.\n */\nconst changeStateText = (key, value, setStates) => {\n  // inspect(value);\n  setStates[key](value.target.value);\n};\n\n/**\n * Inputs the User's sign in credentials and attempts to sign into the application.\n *\n * @param {string} username The inputted username by the User.\n * @param {string} password The inputted password by the User.\n * @param {function(string, string)} logIn The Auth Flow function to attempt the log in.\n * @param {function(error)} setError Function to set the component's error state.\n */\nconst vastusSignIn = (username, password, logIn, setError) => {\n  // TODO Check to see if the input fields are put in correctly\n  if (username && password) {\n    logIn(username, password);\n  } else {\n    setError(new Error(\"Username and password must be filled!\"));\n  }\n};\n\n/**\n * Displays an error message for any potential component errors.\n *\n * @param {{message: string}} error The error object to display.\n * @return {*} The React JSX for displaying the error message.\n */\nconst errorMessage = (error) => {\n  if (error) {\n    return (\n      <Message color='red' style={{marginTop: '100px'}}>\n        <h1>Error!</h1>\n        <p>{error.message}</p>\n      </Message>\n    );\n  }\n};\n\n/**\n * Generates a loading graphic based on the current loading state of the component.\n *\n * @param {boolean} isLoading Whether the app is loading or not.\n * @return {*} The React JSX to display the loading component.\n */\nconst loadingProp = (isLoading) => {\n  if (isLoading) {\n    return (\n      <Dimmer active>\n        <Loader/>\n      </Dimmer>\n    );\n  }\n  return null;\n};\n\n/**\n * The Sign in page that displays the Logo and welcomes the User to the app. Handles all the signing in logic and\n * contains the rest of the Auth Flow components.\n *\n * @param {{}} props The props passed into the component.\n * @return {*} The React JSX to display the component.\n * @constructor\n */\nconst SignInPage = (props) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const setStates = {\n    username: setUsername,\n    password: setPassword\n  };\n\n  return (\n    <Container className='login-form' style={{color: \"#FFFFFF\", background: 'white'}}>\n      {loadingProp(props.info.isLoading)}\n      <Grid centered textAlign='center' style={{background: 'white'}}>\n        <Segment raised padded inverted style={{minWidth: 340, maxWidth: 570, marginBottom: '-60px',\n            background: \"white\", border: '1px solid purple'}}>\n          <Button floated='right' circular icon color={'purple'}\n                  onClick={() => window.open(\"https://vastustech.com\", \"_blank\")}>\n            <Icon name='info'/>\n          </Button>\n          <Segment basic>\n            <Image src={Logo} size=\"small\" centered/>\n            <Header as='h2' inverted textAlign='center' style={{color: 'purple'}}>\n              Join Below\n            </Header>\n          </Segment>\n          <Form size='large'>\n            <Form.Input fluid icon='user' iconPosition='left' placeholder='Username'\n                        onChange={value => changeStateText(\"username\", value, setStates)}/>\n            <Form.Input\n              fluid\n              icon='lock'\n              iconPosition='left'\n              placeholder='Password'\n              type='password'\n              onChange={value => changeStateText(\"password\", value, setStates)}\n            />\n            <Button primary fluid size='large'\n                    onClick={() => vastusSignIn(username, password, props.logIn, props.setError)}>\n              Log in\n            </Button>\n          </Form>\n          <Divider horizontal inverted>or</Divider>\n          <List>\n            <List.Item>\n              <SignUpModal/>\n            </List.Item>\n            <List.Item>\n              <ForgotPasswordModal/>\n            </List.Item>\n            <GoogleSignUp/>\n          </List>\n        </Segment>\n      </Grid>\n        {errorMessage(props.info.error)}\n    </Container>\n  );\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  info: state.info\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    logIn: (username, password) => {\n      dispatch(logIn(username, password));\n    },\n    setError: (error) => {\n      dispatch(setError(error));\n    },\n    openSignUpModal: () => {\n      dispatch(openSignUpModal());\n    },\n    openForgotPasswordModal: () => {\n      dispatch(openForgotPasswordModal());\n    }\n  }\n};\n//\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInPage);\n","import React, {Component} from 'react';\nimport {Segment, Grid} from 'semantic-ui-react';\nimport {connect} from \"react-redux\";\nimport {logOut} from \"../vastuscomponents/redux/actions/authActions\";\nimport SignInPage from './SignInPage';\nimport Breakpoint from \"react-socks\";\n\n// const transition = 'browse';\n\n// TODO Get Blake to refactor this so he gets practice.\n\nclass OpeningScreen extends Component {\n  state = {\n    visible: true,\n    slideNum: 0,\n    reactSwipeEl: null,\n    circles: ['circle', 'circle outline', 'circle outline'],\n    active: true\n  };\n\n  // swipeRight = (reactSwipeEl) => {\n  //     if(this.state.slideNum === 0) {\n  //         this.setState({slideNum: this.state.slideNum + 1});\n  //         this.setState({circles: ['circle outline', 'circle', 'circle outline']});\n  //     }\n  //     if(this.state.slideNum === 1) {\n  //         this.setState({slideNum: this.state.slideNum + 1});\n  //         this.setState({circles: ['circle outline', 'circle outline', 'circle']});\n  //     }\n  //     reactSwipeEl.next();\n  // }\n  //\n  // swipeLeft = (reactSwipeEl) => {\n  //     if(this.state.slideNum === 2) {\n  //         this.setState({slideNum: this.state.slideNum - 1});\n  //         this.setState({circles: ['circle outline', 'circle', 'circle outline']});\n  //     }\n  //     if(this.state.slideNum === 1) {\n  //         this.setState({slideNum: this.state.slideNum - 1});\n  //         this.setState({circles: ['circle', 'circle outline', 'circle outline']});\n  //     }\n  //     reactSwipeEl.prev();\n  // }\n  //\n  // displayPage = () => {\n  //     return _.times(3, i => (\n  //         <Grid.Column width={1} key={i}>\n  //             <Icon name={this.state.circles[i]}/>\n  //         </Grid.Column>\n  //     ));\n  // };\n  //\n  // adjustCircles(index) {\n  //     if(0 <= index <= 2) {\n  //         this.setState({slideNum: index});\n  //     }\n  //\n  //     if(index === 0) {\n  //         this.setState({circles: ['circle', 'circle outline', 'circle outline']});\n  //     }\n  //     else if(index === 1) {\n  //         this.setState({circles: ['circle outline', 'circle', 'circle outline']});\n  //     }\n  //     else if(index === 2) {\n  //         this.setState({circles: ['circle outline', 'circle outline', 'circle']});\n  //     }\n  //     alert(index);\n  // }\n  //\n  // toggleVisibility = () => this.setState({ visible: !this.state.visible });\n  //\n  // handleContextRef = contextRef => this.setState({ contextRef });\n  //\n  // handleToggle = () => this.setState({ active: !this.state.active });\n\n  render() {\n    // const { active, contextRef } = this.state;\n    // let reactSwipeEl;\n    // let self = this;\n    // const { visible } = this.state;\n    return (\n      <div>\n        <Breakpoint small down>\n          <div>\n            <Grid textAlign='center' centered\n                  style={{marginLeft: '30px', marginRight: '30px', marginTop: '5px', height: 610}}>\n              <Segment inverted style={{maxWidth: 430, background: 'white'}}>\n                <SignInPage/>\n              </Segment>\n            </Grid>\n          </div>\n        </Breakpoint>\n\n        <Breakpoint medium up>\n          <div>\n            <Grid textAlign='center' centered\n                  style={{marginLeft: '30px', marginRight: '30px', marginTop: '5px', marginBottom: '50px'}}>\n              <Segment inverted style={{marginTop: '10px', maxWidth: 430, minHeight: 660, background: 'white'}}>\n                <SignInPage/>\n              </Segment>\n            </Grid>\n          </div>\n        </Breakpoint>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    logOut: () => {\n      dispatch(logOut());\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OpeningScreen);","import React, {Component} from 'react';\nimport OpeningScreen from './authscreens/OpeningScreen';\n\nclass UnauthApp extends Component {\n  // This defines the passed function for use\n  authenticate = (user) => {\n  };\n\n  render() {\n    // Maybe this would be to have a sort of advertisement for our website?\n    return (\n      <div>\n        <OpeningScreen/>\n      </div>\n    );\n  }\n}\n\n// const mapStateToProps = state => ({\n//     auth: state.auth\n// });\n\nexport default UnauthApp;\n\n","import React  from 'react';\nimport './App.css';\nimport './video-react-copy.css';\nimport { connect } from 'react-redux';\nimport AuthApp from './AuthApp';\nimport UnauthApp from './UnauthApp';\n\n// function requestNotificationPermission() {\n    // Some browsers don't support Notification yet. I'm looking at you iOS Safari\n    // if (\"Notification\" in window) {\n    //     if (\n    //         Notification.permission !== \"denied\" &&\n    //         Notification.permission !== \"granted\"\n    //     ) {\n    //         Notification.requestPermission();\n    //     }\n    // }\n// }\n\nconst App = (props) => (props.auth.loggedIn ? <AuthApp/> : <UnauthApp/>);\n\nconst mapStateToProps = (state) => ({auth: state.auth,});\n\nexport default connect(mapStateToProps)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nimport {err} from \"./Constants\";\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    // console.log(\"passed first check\");\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      //   console.log(\"public url is on a different origin\");\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      // console.log(\"We're actually getting in the event listener for load\");\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      err && console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {createStore, combineReducers, applyMiddleware, compose} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport logger from 'redux-logger';\r\nimport asyncDispatch from './middleware/AsyncDispatchMiddleware';\r\nimport user from \"./reducers/userReducer\";\r\nimport cache from \"./reducers/cacheReducer\";\r\nimport auth from \"./reducers/authReducer\";\r\nimport info from \"./reducers/infoReducer\";\r\nimport search from \"./reducers/searchReducer\";\r\nimport ably from \"./reducers/ablyReducer\";\r\nimport message from \"./reducers/messageReducer\";\r\nimport {reduxLog} from \"../../Constants\";\r\n\r\nlet middleware;\r\nif (reduxLog) {\r\n  middleware = applyMiddleware(logger, thunk, asyncDispatch);\r\n} else {\r\n  middleware = applyMiddleware(thunk, asyncDispatch);\r\n}\r\n\r\nconst composeEnhancers =\r\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(combineReducers({\r\n    user,\r\n    cache,\r\n    info,\r\n    auth,\r\n    search,\r\n    ably,\r\n    message,\r\n  }),\r\n  composeEnhancers(middleware)\r\n);\r\n\r\nexport default store;","import React, {useEffect} from \"react\";\r\nimport {Segment, Image, Header, Grid} from \"semantic-ui-react\";\r\nimport {connect} from \"react-redux\";\r\nimport {updateAuth} from \"../vastuscomponents/redux/actions/authActions\";\r\nimport Logo from '../vastuscomponents/img/vt_gold_even_thicker_border.svg';\r\n\r\nconst loadingScreen = () => (\r\n  <Grid verticalAlign=\"middle\" centered textAlign='center'>\r\n    <Grid.Row>\r\n      <Segment raised padded inverted style={{minWidth: 340, maxWidth: 800, marginBottom: '-60px', marginTop: '120px',\r\n      background: 'white', color: 'purple'}}>\r\n        <Segment basic>\r\n          <Image src={Logo} size=\"medium\" centered/>\r\n          <Header as='h2' inverted textAlign='center' style={{color: 'purple'}}>\r\n            Loading...\r\n          </Header>\r\n        </Segment>\r\n      </Segment>\r\n    </Grid.Row>\r\n  </Grid>\r\n);\r\n\r\nconst SplashScreen = (props) => {\r\n  useEffect(() => {\r\n    props.updateAuth();\r\n  }, []);\r\n\r\n  return props.info.appIsLoading ? loadingScreen() : props.children\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  info: state.info\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    updateAuth: () => {\r\n      dispatch(updateAuth());\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SplashScreen);\r\n\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BreakpointProvider} from 'react-socks';\n\n// Redux\nimport {Provider} from 'react-redux';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport store from './vastuscomponents/redux/store';\nimport AWSConfig from \"./AppConfig\";\nimport {theme, ifCallLambdaAtStart} from \"./Constants\";\nimport Lambda from \"./vastuscomponents/api/Lambda\";\nimport SplashScreen from \"./authscreens/SplashScreen\";\nimport lightTheme from \"./vastuscomponents/semantic/semantic-light-theme/dist/semantic.min.css\";\n\n// switch (theme) {\n//   case \"light\":\n//     require('./vastuscomponents/semantic/semantic-light-theme/dist/semantic.min.css');\n//     break;\n//   case \"dark\":\n//     require('./vastuscomponents/semantic/semantic-dark-theme/dist/semantic.min.css');\n//     break;\n//   default:\n//     require('./vastuscomponents/semantic/semantic-light-theme/dist/semantic.min.css');\n//     break;\n// }\n\n// window.LOG_LEVEL='DEBUG';\n\nrequire('./vastuscomponents/api/Ably');\n\nAWSConfig();\n\nif (ifCallLambdaAtStart) {\n  Lambda.ping();\n}\n\nReactDOM.render(\n  <BreakpointProvider>\n    <Provider store={store}>\n      <SplashScreen>\n        <div style={lightTheme}>\n          <App/>\n        </div>\n      </SplashScreen>\n    </Provider>\n  </BreakpointProvider>,\n  document.getElementById('root')\n);\n\nregisterServiceWorker();\n","module.exports = __webpack_public_path__ + \"static/media/vt_gold_even_thicker_border.5c686307.svg\";","module.exports = __webpack_public_path__ + \"static/media/roundProfile.7bc5f809.png\";","// This is from https://lazamar.github.io/dispatching-from-inside-of-reducers/\r\n// We are using this in order to schedule a dispatch from within a reducer!\r\nexport default store => next => action => {\r\n  let syncActivityFinished = false;\r\n  let actionQueue = [];\r\n\r\n  function flushQueue() {\r\n    actionQueue.forEach(a => store.dispatch(a)); // flush queue\r\n    actionQueue = [];\r\n  }\r\n\r\n  function asyncDispatch(asyncAction) {\r\n    actionQueue = actionQueue.concat([asyncAction]);\r\n\r\n    if (syncActivityFinished) {\r\n      flushQueue();\r\n    }\r\n  }\r\n\r\n  const actionWithAsyncDispatch = Object.assign({}, action, {asyncDispatch});\r\n\r\n  next(actionWithAsyncDispatch);\r\n  syncActivityFinished = true;\r\n  flushQueue();\r\n};","import {err} from \"../../Constants\";\r\n\r\n// Handles the item type logic for the application.\r\n\r\nconst ItemType = {\r\n  Client: \"Client\",\r\n  Trainer: \"Trainer\",\r\n  Gym: \"Gym\",\r\n  Workout: \"Workout\",\r\n  Review: \"Review\",\r\n  Event: \"Event\",\r\n  Challenge: \"Challenge\",\r\n  Invite: \"Invite\",\r\n  Post: \"Post\",\r\n  Submission: \"Submission\",\r\n  Group: \"Group\",\r\n  Comment: \"Comment\",\r\n  Sponsor: \"Sponsor\",\r\n  Message: \"Message\",\r\n  Streak: \"Streak\",\r\n  Deal: \"Deal\",\r\n  Product: \"Product\",\r\n  Admin: \"Admin\",\r\n};\r\n\r\n// Construct the prefixes object to get O(1) prefix item type\r\nconst numPrefix = 2;\r\nconst prefixes = {};\r\nfor (const key in ItemType) {\r\n  if (ItemType.hasOwnProperty(key)) {\r\n    const type = ItemType[key];\r\n    prefixes[type.substring(0, numPrefix).toUpperCase()] = type;\r\n  }\r\n}\r\n\r\n/**\r\n * Gets the item type from the ID given the prefix of the ID.\r\n *\r\n * @param {string} id The object id in question.\r\n * @return {string|null} The name of the item type that corresponds to the ID or null if not found.\r\n */\r\nexport function getItemTypeFromID(id) {\r\n  if (id) {\r\n    const prefix = prefixes[id.substring(0, numPrefix)];\r\n    return prefix ? prefix : null;\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Succinctly chooses action based on the potential values and the given item type. Returns which one the item type\r\n * corresponds to.\r\n *\r\n * @param {string} itemType The item type to switch.\r\n * @param {string} clientValue The _ value.\r\n * @param {string} trainerValue The Trainer value.\r\n * @param {string} gymValue The Gym value.\r\n * @param {string} workoutValue The Workout value.\r\n * @param {string} reviewValue The Review value.\r\n * @param {string} eventValue The Event value.\r\n * @param {string} challengeValue The Challenge value.\r\n * @param {string} inviteValue The Invite value.\r\n * @param {string} postValue The Post value.\r\n * @param {string} submissionValue The Submission value.\r\n * @param {string} groupValue The Group value.\r\n * @param {string} commentValue The Comment value.\r\n * @param {string} sponsorValue The Sponsor value.\r\n * @param {string} messageValue The Message value.\r\n * @param {string} streakValue The Streak value.\r\n * @param {string} dealValue The Deal value.\r\n * @param {string} productValue The Product value.\r\n * @param {string} adminValue The Admin value.\r\n * @param {string} errorMessage The error message to console if the item is unrecognized.\r\n * @return {*} The specific item type value.\r\n */\r\nexport function switchReturnItemType(itemType, clientValue, trainerValue, gymValue, workoutValue, reviewValue,\r\n                                     eventValue, challengeValue, inviteValue, postValue, submissionValue, groupValue,\r\n                                     commentValue, sponsorValue, messageValue, streakValue, dealValue, productValue,\r\n                                     adminValue, errorMessage) {\r\n  let returnValue = null;\r\n  switch (itemType) {\r\n    case \"Client\":\r\n      returnValue = clientValue;\r\n      break;\r\n    case \"Trainer\":\r\n      returnValue = trainerValue;\r\n      break;\r\n    case \"Gym\":\r\n      returnValue = gymValue;\r\n      break;\r\n    case \"Workout\":\r\n      returnValue = workoutValue;\r\n      break;\r\n    case \"Review\":\r\n      returnValue = reviewValue;\r\n      break;\r\n    case \"Event\":\r\n      returnValue = eventValue;\r\n      break;\r\n    case \"Challenge\":\r\n      returnValue = challengeValue;\r\n      break;\r\n    case \"Invite\":\r\n      returnValue = inviteValue;\r\n      break;\r\n    case \"Post\":\r\n      returnValue = postValue;\r\n      break;\r\n    case \"Submission\":\r\n      returnValue = submissionValue;\r\n      break;\r\n    case \"Group\":\r\n      returnValue = groupValue;\r\n      break;\r\n    case \"Comment\":\r\n      returnValue = commentValue;\r\n      break;\r\n    case \"Sponsor\":\r\n      returnValue = sponsorValue;\r\n      break;\r\n    case \"Message\":\r\n      returnValue = messageValue;\r\n      break;\r\n    case \"Streak\":\r\n      returnValue = streakValue;\r\n      break;\r\n    case \"Deal\":\r\n      returnValue = dealValue;\r\n      break;\r\n    case \"Product\":\r\n      returnValue = dealValue;\r\n      break;\r\n    case \"Admin\":\r\n      returnValue = adminValue;\r\n      break;\r\n    default:\r\n      returnValue = null;\r\n      break;\r\n  }\r\n  if (returnValue) {\r\n    return returnValue;\r\n  } else {\r\n    err && console.error(errorMessage + \" ~ itemType = \" + itemType + \" not recognized...\");\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Succinctly chooses action based on the potential values and the given item type. Handles with handler the item type\r\n * corresponds to.\r\n *\r\n * @param {string} itemType The item type to switch.\r\n * @param {string} clientHandler The Client value.\r\n * @param {string} trainerHandler The Trainer value.\r\n * @param {string} gymHandler The Gym value.\r\n * @param {string} workoutHandler The Workout value.\r\n * @param {string} reviewHandler The Review value.\r\n * @param {string} eventHandler The Event value.\r\n * @param {string} challengeHandler The Challenge value.\r\n * @param {string} inviteHandler The Invite value.\r\n * @param {string} postHandler The Post value.\r\n * @param {string} submissionHandler The Submission value.\r\n * @param {string} groupHandler The Group value.\r\n * @param {string} commentHandler The Comment value.\r\n * @param {string} sponsorHandler The Sponsor value.\r\n * @param {string} messageHandler The Message value.\r\n * @param {string} streakHandler The Streak value.\r\n * @param {string} dealHandler The Deal value.\r\n * @param {string} productHandler The Product value.\r\n * @param {string} adminHandler The Admin value.\r\n * @param errorMessage The error message to console if the item type is unrecognized.\r\n */\r\nexport function switchHandleItemType(itemType, clientHandler, trainerHandler, gymHandler, workoutHandler, reviewHandler,\r\n                                     eventHandler, challengeHandler, inviteHandler, postHandler, submissionHandler,\r\n                                     groupHandler, commentHandler, sponsorHandler, messageHandler, streakHandler,\r\n                                     dealHandler, productHandler, adminHandler, errorMessage) {\r\n  let itemHandler = null;\r\n  switch (itemType) {\r\n    case \"Client\":\r\n      itemHandler = clientHandler;\r\n      break;\r\n    case \"Trainer\":\r\n      itemHandler = trainerHandler;\r\n      break;\r\n    case \"Gym\":\r\n      itemHandler = gymHandler;\r\n      break;\r\n    case \"Workout\":\r\n      itemHandler = workoutHandler;\r\n      break;\r\n    case \"Review\":\r\n      itemHandler = reviewHandler;\r\n      break;\r\n    case \"Event\":\r\n      itemHandler = eventHandler;\r\n      break;\r\n    case \"Challenge\":\r\n      itemHandler = challengeHandler;\r\n      break;\r\n    case \"Invite\":\r\n      itemHandler = inviteHandler;\r\n      break;\r\n    case \"Post\":\r\n      itemHandler = postHandler;\r\n      break;\r\n    case \"Submission\":\r\n      itemHandler = submissionHandler;\r\n      break;\r\n    case \"Group\":\r\n      itemHandler = groupHandler;\r\n      break;\r\n    case \"Comment\":\r\n      itemHandler = commentHandler;\r\n      break;\r\n    case \"Sponsor\":\r\n      itemHandler = sponsorHandler;\r\n      break;\r\n    case \"Message\":\r\n      itemHandler = messageHandler;\r\n      break;\r\n    case \"Streak\":\r\n      itemHandler = streakHandler;\r\n      break;\r\n    case \"Deal\":\r\n      itemHandler = dealHandler;\r\n      break;\r\n    case \"Product\":\r\n      itemHandler = productHandler;\r\n      break;\r\n    case \"Admin\":\r\n      itemHandler = adminHandler;\r\n      break;\r\n    default:\r\n      itemHandler = null;\r\n      break;\r\n  }\r\n  if (itemHandler) {\r\n    return itemHandler();\r\n  } else {\r\n    err && console.error(errorMessage + \" ~ itemType = \" + itemType + \" not recognized...\");\r\n  }\r\n}\r\n\r\nexport default ItemType;","// import { Realtime } from 'ably/browser/static/ably-commonjs.js';\r\nimport {Realtime} from \"ably\";\r\nimport {err, log} from \"../../Constants\";\r\nimport TestHelper from \"../testing/TestHelper\";\r\n\r\n/**\r\n * Class to handle all the Ably channel management and callback handling.\r\n */\r\nclass Ably {\r\n  static ablyRef: Realtime = TestHelper.ifTesting ? null : new Realtime('RP1cGg.cc8qow:DdzJi7vkBxuLzK03');\r\n\r\n  /**\r\n   * Subscribes to an Ably channel and sets the main handler to the passed in messageHandler.\r\n   *\r\n   * @param {string} channel The name of the channel to subscribe to.\r\n   * @param {function({})} messageHandler The handler for each message that comes through the channel.\r\n   * @return {*} Debug info for the Ably operation.\r\n   */\r\n  static subscribeToChannel(channel, messageHandler) {\r\n    TestHelper.ifTesting || Ably.ablyRef.channels.get(channel).subscribe(messageHandler, (error) => {\r\n      if (error) {\r\n        err && console.error(\"Failed to subscribe to the channel \" + channel + \"!\");\r\n        err && console.error(error);\r\n      } else {\r\n        log && console.log(\"SUCCESSFULLY SUBSCRIBED TO CHANNEL = \" + channel);\r\n        // log&&alert(\"SUCCESSFULLY SUBSCRIBED TO CHANNEL = \" + channel);\r\n      }\r\n    });\r\n    return channel;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribes from an Ably channel to longer receive messages on that channel.\r\n   *\r\n   * @param {string} channel The channel name that is currently subscribed.\r\n   * @param {function()} successHandler The function to call once the channel has been successfully unsubscribed from.\r\n   * @param {function()} failureHandler The function called if anything goes wrong with the unsubscribe.\r\n   * @return {*} Debug info for the Ably operation.\r\n   */\r\n  static unsubscribeFromChannel(channel, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Ably.ablyRef.channels.get(channel).unsubscribe((error) => {\r\n      if (error) {\r\n        err && console.error(\"Ably could not unsubscribe from \" + channel + \"!\");\r\n        err && console.error(error);\r\n        if (failureHandler) {\r\n          failureHandler();\r\n        }\r\n      } else {\r\n        log && console.log(\"Ably successfully unsubscribed from \" + channel + \"!\");\r\n        if (successHandler) {\r\n          successHandler();\r\n        }\r\n      }\r\n    });\r\n    return channel;\r\n  }\r\n\r\n  /**\r\n   * Sends a message with a message name and a payload to an Ably channel directly.\r\n   *\r\n   * @param {string} channel The name of the channel.\r\n   * @param {string} messageName The event name for the message to send to the channel.\r\n   * @param {{}} payload The payload of the object to send through the channel.\r\n   * @param {function()} successHandler The function to call once the message has been successfully published.\r\n   * @param {function()} failureHandler The function called if anything goes wrong with the message.\r\n   */\r\n  static sendMessageToChannel(channel, messageName, payload, successHandler, failureHandler) {\r\n    TestHelper.ifTesting || Ably.ablyRef.channels.get(channel).publish(messageName, payload, function (err) {\r\n      if (err) {\r\n        failureHandler && failureHandler();\r\n      } else {\r\n        successHandler && successHandler();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Closes the connection to Ably.\r\n   */\r\n  static close() {\r\n    TestHelper.ifTesting || Ably.ablyRef.close();\r\n  }\r\n}\r\n\r\nexport default Ably;","export const LOG_IN = 'LOG_IN';\r\nexport const FEDERATED_LOG_IN = 'FEDERATED_LOG_IN';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const SIGN_UP = 'SIGN_UP';\r\nexport const CONFIRM_SIGNUP = 'CONFIRM_SIGNUP';\r\nexport const FORGOT_PASSWORD = 'FORGOT_PASSWORD';\r\nexport const CONFIRM_FORGOT_PASSWORD = 'CONFIRM_FORGOT_PASSWORD';\r\nexport const OPEN_SIGN_UP_MODAL = 'OPEN_SIGN_UP_MODAL';\r\nexport const CLOSE_SIGN_UP_MODAL = 'CLOSE_SIGN_UP_MODAL';\r\nexport const OPEN_FORGOT_PASSWORD_MODAL = 'OPEN_FORGOT_PASSWORD_MODAL';\r\nexport const CLOSE_FORGOT_PASSWORD_MODAL = 'CLOSE_FORGOT_PASSWORD_MODAL';\r\n\r\ntype AuthReducer = {\r\n  loggedIn: boolean,\r\n  confirmingSignUp: boolean,\r\n  confirmingForgotPassword: boolean,\r\n  signUpModalOpen: boolean,\r\n  forgotPasswordModalOpen: boolean,\r\n  ifFederatedSignIn: boolean\r\n};\r\n\r\n/**\r\n * The initial state for the Auth reducer.\r\n *\r\n * @type {AuthReducer}\r\n */\r\nconst initialState = {\r\n  loggedIn: false,\r\n  confirmingSignUp: false,\r\n  confirmingForgotPassword: false,\r\n  signUpModalOpen: false,\r\n  forgotPasswordModalOpen: false,\r\n  ifFederatedSignIn: false\r\n};\r\n\r\n/**\r\n * Auth Reducer:\r\n *\r\n * Used to maintain the authentication flow of the application. Keeps track of which modals are open and if they are\r\n * signed in or not.\r\n *\r\n * @param {AuthReducer} state The current state of the auth reducer.\r\n * @param {{type: string, payload: *}} action The action to specify how to update the reducer.\r\n * @return {AuthReducer} The next state for the reducer.\r\n */\r\nexport default (state: AuthReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOG_IN:\r\n      state = {\r\n        loggedIn: true,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: false,\r\n      };\r\n      break;\r\n    case FEDERATED_LOG_IN:\r\n      state = {\r\n        loggedIn: true,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: true,\r\n      };\r\n      break;\r\n    case LOG_OUT:\r\n      state = {\r\n        loggedIn: false,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: false\r\n      };\r\n      break;\r\n    case SIGN_UP:\r\n      state = {\r\n        loggedIn: false,\r\n        confirmingSignUp: true,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: true,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: false\r\n      };\r\n      break;\r\n    case CONFIRM_SIGNUP:\r\n      state = {\r\n        loggedIn: false,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: false\r\n      };\r\n      break;\r\n    case FORGOT_PASSWORD:\r\n      state = {\r\n        loggedIn: false,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: true,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: true,\r\n        ifFederatedSignIn: false\r\n      };\r\n      break;\r\n    case CONFIRM_FORGOT_PASSWORD:\r\n      state = {\r\n        loggedIn: false,\r\n        confirmingSignUp: false,\r\n        confirmingForgotPassword: false,\r\n        signUpModalOpen: false,\r\n        forgotPasswordModalOpen: false,\r\n        ifFederatedSignIn: false\r\n      };\r\n      break;\r\n    case OPEN_SIGN_UP_MODAL:\r\n      state = {\r\n        ...state,\r\n        signUpModalOpen: true\r\n      };\r\n      break;\r\n    case CLOSE_SIGN_UP_MODAL:\r\n      state = {\r\n        ...state,\r\n        signUpModalOpen: false\r\n      };\r\n      break;\r\n    case OPEN_FORGOT_PASSWORD_MODAL:\r\n      state = {\r\n        ...state,\r\n        forgotPasswordModalOpen: true\r\n      };\r\n      break;\r\n    case CLOSE_FORGOT_PASSWORD_MODAL:\r\n      state = {\r\n        ...state,\r\n        forgotPasswordModalOpen: false\r\n      };\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return state;\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","import configureStore from 'redux-mock-store';\r\nimport thunk from 'redux-thunk';\r\nimport asyncDispatch from '../redux/middleware/AsyncDispatchMiddleware';\r\nimport promisify from \"../redux/middleware/PromisifyMiddleware\";\r\n\r\n/**\r\n * Class used for testing certain parts of the code that may try to connect to AWS in order to complete. Run this when\r\n * we are automatically running a test.\r\n */\r\nexport default class TestHelper {\r\n  static ifTesting = false;\r\n\r\n  static setTest() {\r\n    TestHelper.ifTesting = true;\r\n  }\r\n\r\n  static unsetTest() {\r\n    TestHelper.ifTesting = false;\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param initialState\r\n * @return {{dispatch: Function, getActions: Function}} The store object for the mock redux store.\r\n */\r\nexport function store(initialState) {\r\n  if (initialState) {\r\n    return configureStore([promisify, thunk, asyncDispatch])(initialState);\r\n  } else {\r\n    return configureStore([promisify, thunk, asyncDispatch])({});\r\n  }\r\n}\r\n\r\nexport const funCompWrapper = (component) => () => component;\r\n\r\n\r\n/**\r\n * Gets the entire redux store components given for initializing a mock store. Allows you to only initialize what you\r\n * need to for the test.\r\n *\r\n * TODO Edit if we use more reducers.\r\n *\r\n * @param {[string]} storeTypes The strings for the types of the redux store to initialize.\r\n * @return {{ably: *, auth: *, cache: *, info: *, message: *, user: *, search: *}}\r\n */\r\nexport const getInitialReduxStore = (storeTypes) => {\r\n  const ably = require(\"../redux/reducers/ablyReducer\");\r\n  const auth = require(\"../redux/reducers/authReducer\");\r\n  const cache = require(\"../redux/reducers/cacheReducer\");\r\n  const info = require(\"../redux/reducers/infoReducer\");\r\n  const message = require(\"../redux/reducers/messageReducer\");\r\n  const search = require(\"../redux/reducers/searchReducer\");\r\n  const user = require(\"../redux/reducers/userReducer\");\r\n  return {\r\n    ably: !storeTypes || storeTypes.includes(\"ably\") ? ably.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    auth: !storeTypes || storeTypes.includes(\"auth\") ? auth.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    cache: !storeTypes || storeTypes.includes(\"cache\") ? cache.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    info: !storeTypes || storeTypes.includes(\"info\") ? info.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    message: !storeTypes || storeTypes.includes(\"message\") ? message.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    user: !storeTypes || storeTypes.includes(\"user\") ? user.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n    search: !storeTypes || storeTypes.includes(\"search\") ? search.default(undefined, {type: \"__NOT_A_REAL_ACTION__\"}) : null,\r\n  }\r\n};","// Helpful and optimized functions for dealing with arrays\r\n\r\n/**\r\n * Deletes all the elements present in \"minusArray\" from \"originalArray\". Cannot be array of objects.\r\n *\r\n * @param originalArray The original array to be subtracted from.\r\n * @param minusArray The array from which the remove elements will be taken.\r\n */\r\nexport function subtractArray(originalArray, minusArray) {\r\n  for (let i = minusArray.length - 1; i >= 0; i--) {\r\n    removeFromArray(originalArray, minusArray[i]);\r\n  }\r\n  return originalArray;\r\n}\r\n\r\n// Does the same thing but doesn't affect the array\r\nexport function subtractedArray(array, minusArray) {\r\n  return subtractArray([...array], minusArray);\r\n}\r\n\r\n/**\r\n * Removes all instances of a single element from the original array. Cannot be object.\r\n *\r\n * @param originalArray The original array to be altered.\r\n * @param element The element to remove from the array.\r\n */\r\nexport function removeFromArray(originalArray, element) {\r\n  const indexOf = originalArray.indexOf(element);\r\n  if (indexOf !== -1) {\r\n    originalArray.splice(indexOf, 1);\r\n  }\r\n  return originalArray;\r\n}\r\n\r\n/**\r\n * Adds the elements not already in the original array from the newArray. Cannot be array of objects.\r\n *\r\n * @param {[*]} originalArray The array to be added to.\r\n * @param {[*]} newArray The array of elements to be added to the original array.\r\n * @return {[*]} the original array that is updated.\r\n */\r\nexport function addUniqueToArray(originalArray, newArray) {\r\n  for (let i = 0; i < newArray.length; i++) {\r\n    const e = newArray[i];\r\n    addUniqueElementToArray(originalArray, e);\r\n  }\r\n  return originalArray;\r\n}\r\n\r\n/**\r\n * Returns a new list with the new list and the unique elements from the second list added onto it. Does not affect the\r\n * list.\r\n *\r\n * @param {[*]} originalArray The array to be added to.\r\n * @param {[*]} newArray The array of elements to be added to the original array.\r\n * @return {[*]} the new array that is has the unique elements added to it.\r\n */\r\nexport function withUniqueAdded(originalArray, newArray) {\r\n  return addUniqueToArray([...originalArray], newArray);\r\n}\r\n\r\n/**\r\n * Adds the element if it is not already in the given already. Element cannot be an object.\r\n *\r\n * @param {[*]} originalArray The array to be added to.\r\n * @param {*} element The element to add uniquely.\r\n */\r\nexport function addUniqueElementToArray(originalArray, element) {\r\n  // Aborts if index is not -1\r\n  originalArray.indexOf(element) === -1 && originalArray.push(element);\r\n}\r\n\r\n/**\r\n * Returns whether there is any overlap between the two arrays. Uses pure === for equality checks.\r\n *\r\n * @param {[*]} array1 The first array to check for overlap.\r\n * @param {[*]} array2 The second array to check for overlap.\r\n * @return {boolean} Whether there is overlap between the two arrays.\r\n */\r\nexport function arraysIntersect(array1, array2) {\r\n  for (let i = 0; i < array1.length; i++) {\r\n    if (array2.indexOf(array1[i]) !== -1) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Returns the intersection between the two arrays.\r\n *\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arrayIntersection(array1, array2) {\r\n  const returnArray = [...array1];\r\n  return returnArray.filter(v => array2.includes(v));\r\n}\r\n\r\n/**\r\n * Shuffles a given array based on the Fisher-Yates implementation.\r\n *\r\n * @param array The array to be mutated and shuffled.\r\n */\r\nexport const shuffleArray = (array) => {\r\n  for (let i = array.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [array[i], array[j]] = [array[j], array[i]];\r\n  }\r\n};\r\n\r\n/**\r\n * Calculates whether the two arrays are equal in the set sense. That is, if they are subsets of each other.\r\n *\r\n * @param {[*]} array1 The first array to check set equality for.\r\n * @param {[*]} array2 The seconds array to check set equality for.\r\n * @return {boolean} Whether the two arrays are set equal.\r\n */\r\nexport const setEquals = (array1, array2) => {\r\n  return isSubset(array1, array2) && isSubset(array2, array1);\r\n};\r\n\r\n/**\r\n * Finds out if an array is a subset of another array by making sure all the elements in the subset array are also\r\n * present in the original array.\r\n *\r\n * @param {[*]} array The original array to check.\r\n * @param {[*]} subsetArray The array to check all the elements for being in the original array.\r\n * @return {boolean} If the second array is a subset of the first array.\r\n */\r\nexport const isSubset = (array, subsetArray) => {\r\n  for (let i = 0; i < subsetArray.length; i++) {\r\n    if (!array.includes(subsetArray[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};","module.exports = __webpack_public_path__ + \"static/media/vastus-tech-icons-03.29489f5b.svg\";","module.exports = __webpack_public_path__ + \"static/media/vastus-tech-icons-04.79abcccc.svg\";","module.exports = __webpack_public_path__ + \"static/media/vastus-tech-icons-02.c1906ff5.svg\";","module.exports = __webpack_public_path__ + \"static/media/vastus-tech-icons-01.3cbad399.svg\";","module.exports = __webpack_public_path__ + \"static/media/Endurance_icon.9bb9149b.png\";","module.exports = __webpack_public_path__ + \"static/media/HIIT_icon.1019cd01.png\";","module.exports = __webpack_public_path__ + \"static/media/Performance_icon.9f5a7a08.png\";","module.exports = __webpack_public_path__ + \"static/media/Strength_icon.f874a811.png\";","import {setIsLoading, setIsNotLoading} from \"./infoActions\";\r\nimport {log} from \"../../../Constants\";\r\nimport {ADD_HANDLER, REMOVE_CHANNEL, SET_PERMANENT_HANDLER, SET_HANDLER, CLEAR_CHANNELS} from \"../reducers/ablyReducer\";\r\n\r\n// =========================================================================================================\r\n// ~ High-Level Ably Actions\r\n// =========================================================================================================\r\n\r\n/**\r\n * Adds a handler and and unsubscription handler to a channel from the ably reducer.\r\n *\r\n * @param {string} channelName The name of the channel to add a handler to.\r\n * @param {function({})} handler The handler to call when the channel receives a message.\r\n * @param {function()} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function addHandlerAndUnsubscription(channelName, handler, unsubscriptionHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(addHandler(channelName, handler, unsubscriptionHandler, getMessageHandler(channelName, getStore)));\r\n    dispatch(setIsNotLoading());\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the handler and and unsubscription handler for a channel from the ably reducer. Maintains only a single handler\r\n * for a given channel.\r\n *\r\n * @param {string} channelName The name of the channel to set the handler for.\r\n * @param {function({})} handler The handler to call when the channel receives a message.\r\n * @param {function()} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setHandlerAndUnsubscription(channelName, handler, unsubscriptionHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(setHandler(channelName, handler, unsubscriptionHandler, getMessageHandler(channelName, getStore)));\r\n    dispatch(setIsNotLoading());\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a permanent handler in the app that will never be unsubscribed from from a cache eviction.\r\n *\r\n * @param {string} channelName The name of the channel to set the permanent handler for.\r\n * @param {function({})} handler The handler to call when the channel receives a message.\r\n * @param {function()} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function setPermanentHandlerAndUnsubscription(channelName, handler, unsubscriptionHandler) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(setPermanentHandler(channelName, handler, unsubscriptionHandler, getMessageHandler(channelName, getStore)));\r\n    dispatch(setIsNotLoading());\r\n  }\r\n}\r\n\r\n/**\r\n * Removes the subscription from a specific channel.\r\n *\r\n * @param {string} channelName The name of the channel to remove the channel subscription from.\r\n * @return {function(function(*), function())} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeChannelSubscription(channelName) {\r\n  return (dispatch, getStore) => {\r\n    dispatch(setIsLoading());\r\n    if (getStore().ably.subscribedChannels[channelName]) {\r\n      dispatch(removeChannel(channelName));\r\n    } else {\r\n      log && console.log(\"No channel to remove!\");\r\n    }\r\n    dispatch(setIsNotLoading());\r\n  }\r\n}\r\n\r\n// export function addHandlerToNotifications(handler) {\r\n//     return (dispatch, getStore) => {\r\n//         dispatch(setIsLoading());\r\n//         if (getStore().user.id) {\r\n//             const channelName = getStore().user.id + \"-Notifications\";\r\n//             // subscribeToChannelOnlyOnce(channelName, dispatch, getStore);\r\n//             dispatch(addHandler(channelName, handler));\r\n//         }\r\n//         else {\r\n//         }\r\n//         dispatch(setIsNotLoading());\r\n//     };\r\n// }\r\n\r\n/**\r\n * Removes all the handlers from all the channels, regardless of their permanent status.\r\n *\r\n * @return {function(function(*))} The given function to dispatch a new action in the redux system.\r\n */\r\nexport function removeAllHandlers() {\r\n  return (dispatch) => {\r\n    dispatch(setIsLoading());\r\n    dispatch(clearChannels());\r\n    dispatch(setIsNotLoading());\r\n  };\r\n}\r\n\r\n/**\r\n * Gets the specific message handler for the channel. This handler receives all the notification handlers for the\r\n * channel from the current store and handles them using the message.\r\n *\r\n * @param {string} channelName The name of the channel to get the overall message handler of.\r\n * @param {function()} getStore The function to obtain the current state of the store.\r\n * @return {function({})} The message handler for the specific channel.\r\n */\r\nfunction getMessageHandler(channelName, getStore) {\r\n  return (message) => {\r\n    log && console.log(\"RECEIVED ABLY MESSAGE = \" + JSON.stringify(message));\r\n    const handlers = getStore().ably.notificationHandlers[channelName];\r\n    if (handlers && handlers.length > 0) {\r\n      for (let i = 0; i < handlers.length; i++) {\r\n        handlers[i](message);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// =========================================================================================================\r\n// ~ Low-Level Ably Actions\r\n// =========================================================================================================\r\n\r\nfunction addHandler(channel, handler, unsubscriptionHandler, messageHandler) {\r\n  return {\r\n    type: ADD_HANDLER,\r\n    payload: {\r\n      channel,\r\n      handler,\r\n      unsubscriptionHandler,\r\n      messageHandler\r\n    }\r\n  };\r\n}\r\n\r\nfunction setHandler(channel, handler, unsubscriptionHandler, messageHandler) {\r\n  return {\r\n    type: SET_HANDLER,\r\n    payload: {\r\n      channel,\r\n      handler,\r\n      unsubscriptionHandler,\r\n      messageHandler\r\n    }\r\n  };\r\n}\r\n\r\nfunction setPermanentHandler(channel, handler, unsubscriptionHandler, messageHandler) {\r\n  return {\r\n    type: SET_PERMANENT_HANDLER,\r\n    payload: {\r\n      channel,\r\n      handler,\r\n      unsubscriptionHandler,\r\n      messageHandler\r\n    }\r\n  };\r\n}\r\n\r\nfunction removeChannel(channel) {\r\n  return {\r\n    type: REMOVE_CHANNEL,\r\n    payload: {\r\n      channel\r\n    }\r\n  }\r\n}\r\n\r\nfunction clearChannels() {\r\n  return {\r\n    type: CLEAR_CHANNELS,\r\n  }\r\n}\r\n\r\n","import {err} from \"../../../Constants\";\r\nimport {removeChannelSubscription} from \"../actions/ablyActions\";\r\nimport {subtractedArray, withUniqueAdded} from \"../../logic/ArrayHelper\";\r\nimport {switchReturnItemType} from \"../../logic/ItemType\";\r\nimport type Client from \"../../types/Client\";\r\nimport type Trainer from \"../../types/Trainer\";\r\nimport type Gym from \"../../types/Gym\";\r\nimport type Workout from \"../../types/Workout\";\r\nimport type Review from \"../../types/Review\";\r\nimport type Event from \"../../types/Event\";\r\nimport type Challenge from \"../../types/Challenge\";\r\nimport type Invite from \"../../types/Invite\";\r\nimport type Post from \"../../types/Post\";\r\nimport type Submission from \"../../types/Submission\";\r\nimport type Group from \"../../types/Group\";\r\nimport type Comment from \"../../types/Comment\";\r\nimport type Sponsor from \"../../types/Sponsor\";\r\nimport type Streak from \"../../types/Streak\";\r\nimport type Deal from \"../../types/Deal\";\r\nimport type Product from \"../../types/Product\";\r\nimport type Admin from \"../../types/Admin\";\r\n\r\n/**\r\n * Gets the object channel Ably name from the given id.\r\n *\r\n * @param id The id of the object to get the channel of.\r\n * @return {string} The name of the channel.\r\n */\r\nexport function getObjectChannelName(id) {\r\n  return id + \"-Updates\";\r\n}\r\n\r\n// This is where we will store all the retrieved database items and use a LRU cache to rid them if necessary\r\nexport const PUT_ITEM = \"PUT_ITEM\";\r\nexport const SET_ITEM_ATTRIBUTE_INDEX = \"SET_ITEM_ATTRIBUTE_INDEX\";\r\nexport const ADD_TO_ITEM_ATTRIBUTES = \"ADD_TO_ITEM_ATTRIBUTES\";\r\nexport const REMOVE_FROM_ITEM_ATTRIBUTES = \"REMOVE_FROM_ITEM_ATTRIBUTES\";\r\nexport const REMOVE_ITEM_ATTRIBUTE_INDEX = \"REMOVE_ITEM_ATTRIBUTE_INDEX\";\r\nexport const REMOVE_ITEM = \"REMOVE_ITEM\";\r\nexport const PUT_ITEM_QUERY = \"PUT_ITEM_QUERY\";\r\nexport const CLEAR_NORMALIZED_ITEM_QUERY = \"CLEAR_NORMALIZED_ITEM_QUERY\";\r\nexport const CLEAR_ITEM_CACHE = \"CLEAR_ITEM_CACHE\";\r\nexport const CLEAR_ITEM_QUERY_CACHE = \"CLEAR_ITEM_QUERY_CACHE\";\r\n\r\n\r\n// TODO Play around with these values maybe? How do we decide this?\r\nconst clientCacheSize = 100;\r\nconst trainerCacheSize = 100;\r\nconst gymCacheSize = 100;\r\nconst workoutCacheSize = 100;\r\nconst reviewCacheSize = 100;\r\nconst eventCacheSize = 2000;\r\nconst challengeCacheSize = 2000;\r\nconst inviteCacheSize = 100;\r\nconst postCacheSize = 2000;\r\nconst submissionCacheSize = 1000;\r\nconst groupCacheSize = 100;\r\nconst commentCacheSize = 1000;\r\nconst sponsorCacheSize = 100;\r\nconst streakCacheSize = 100;\r\nconst dealCacheSize = 100;\r\nconst productCacheSize = 100;\r\nconst adminCacheSize = 100;\r\n\r\n// TODO The query cache sizes might be important if the user is searching for a lot\r\nconst clientQueryCacheSize = 5;\r\nconst trainerQueryCacheSize = 5;\r\nconst gymQueryCacheSize = 5;\r\nconst workoutQueryCacheSize = 5;\r\nconst reviewQueryCacheSize = 5;\r\nconst eventQueryCacheSize = 10;\r\nconst challengeQueryCacheSize = 5;\r\nconst inviteQueryCacheSize = 5;\r\nconst postQueryCacheSize = 5;\r\nconst submissionQueryCacheSize = 5;\r\nconst groupQueryCacheSize = 5;\r\nconst commentQueryCacheSize = 5;\r\nconst sponsorQueryCacheSize = 5;\r\nconst streakQueryCacheSize = 10;\r\nconst dealQueryCacheSize = 10;\r\nconst productQueryCacheSize = 10;\r\nconst adminQueryCacheSize = 10;\r\n\r\nconst getItemCacheSize = (itemType) => {\r\n  return switchReturnItemType(itemType, clientCacheSize, trainerCacheSize, gymCacheSize, workoutCacheSize,\r\n    reviewCacheSize, eventCacheSize, challengeCacheSize, inviteCacheSize, postCacheSize, submissionCacheSize,\r\n    groupCacheSize, commentCacheSize, sponsorCacheSize, null, streakCacheSize, dealCacheSize,\r\n    productCacheSize, adminCacheSize, \"GET ITEM CACHE SIZE CACHE REDUCER\");\r\n};\r\n\r\nconst getItemQueryCacheSize = (itemType) => {\r\n  return switchReturnItemType(itemType, clientQueryCacheSize, trainerQueryCacheSize, gymQueryCacheSize,\r\n    workoutQueryCacheSize, reviewQueryCacheSize, eventQueryCacheSize, challengeQueryCacheSize, inviteQueryCacheSize,\r\n    postQueryCacheSize, submissionQueryCacheSize, groupQueryCacheSize, commentQueryCacheSize, sponsorQueryCacheSize,\r\n    null, streakQueryCacheSize, dealQueryCacheSize, productQueryCacheSize, adminQueryCacheSize,\r\n    \"GET ITEM QUERY CACHE SIZE\");\r\n};\r\n\r\ntype CacheReducer = {\r\n  clients: Object<string, Client>,\r\n  trainers: Object<string, Trainer>,\r\n  gyms: Object<string, Gym>,\r\n  workouts: Object<string, Workout>,\r\n  reviews: Object<string, Review>,\r\n  events: Object<string, Event>,\r\n  challenges: Object<string, Challenge>,\r\n  invites: Object<string, Invite>,\r\n  posts: Object<string, Post>,\r\n  submissions: Object<string, Submission>,\r\n  groups: Object<string, Group>,\r\n  comments: Object<string, Comment>,\r\n  sponsors: Object<string, Sponsor>,\r\n  streaks: Object<string, Streak>,\r\n  deals: Object<string, Deal>,\r\n  products: Object<string, Product>,\r\n  admins: Object<string, Admin>,\r\n  clientLRUHandler: [string],\r\n  trainerLRUHandler: [string],\r\n  gymLRUHandler: [string],\r\n  workoutLRUHandler: [string],\r\n  reviewLRUHandler: [string],\r\n  eventLRUHandler: [string],\r\n  challengeLRUHandler: [string],\r\n  inviteLRUHandler: [string],\r\n  postLRUHandler: [string],\r\n  submissionLRUHandler: [string],\r\n  groupLRUHandler: [string],\r\n  commentLRUHandler: [string],\r\n  sponsorLRUHandler: [string],\r\n  streakLRUHandler: [string],\r\n  dealLRUHandler: [string],\r\n  productLRUHandler: [string],\r\n  adminLRUHandler: [string],\r\n  clientQueries: Object<string, string>,\r\n  trainerQueries: Object<string, string>,\r\n  gymQueries: Object<string, string>,\r\n  workoutQueries: Object<string, string>,\r\n  reviewQueries: Object<string, string>,\r\n  eventQueries: Object<string, string>,\r\n  challengeQueries: Object<string, string>,\r\n  inviteQueries: Object<string, string>,\r\n  postQueries: Object<string, string>,\r\n  submissionQueries: Object<string, string>,\r\n  groupQueries: Object<string, string>,\r\n  commentQueries: Object<string, string>,\r\n  sponsorQueries: Object<string, string>,\r\n  streakQueries: Object<string, string>,\r\n  dealQueries: Object<string, string>,\r\n  productQueries: Object<string, string>,\r\n  adminQueries: Object<string, string>,\r\n  clientQueryLRUHandler: [string],\r\n  trainerQueryLRUHandler: [string],\r\n  gymQueryLRUHandler: [string],\r\n  workoutQueryLRUHandler: [string],\r\n  reviewQueryLRUHandler: [string],\r\n  eventQueryLRUHandler: [string],\r\n  challengeQueryLRUHandler: [string],\r\n  inviteQueryLRUHandler: [string],\r\n  postQueryLRUHandler: [string],\r\n  submissionQueryLRUHandler: [string],\r\n  groupQueryLRUHandler: [string],\r\n  commentQueryLRUHandler: [string],\r\n  sponsorQueryLRUHandler: [string],\r\n  streakQueryLRUHandler: [string],\r\n  dealQueryLRUHandler: [string],\r\n  productQueryLRUHandler: [string],\r\n  adminQueryLRUHandler: [string],\r\n}\r\n\r\n/**\r\n * The initial state of the cache reducer.\r\n *\r\n * @type {CacheReducer}\r\n */\r\nconst initialState = {\r\n  // ID --> DatabaseObject\r\n  clients: {},\r\n  trainers: {},\r\n  gyms: {},\r\n  workouts: {},\r\n  reviews: {},\r\n  events: {},\r\n  challenges: {},\r\n  invites: {},\r\n  posts: {},\r\n  submissions: {},\r\n  groups: {},\r\n  comments: {},\r\n  sponsors: {},\r\n  streaks: {},\r\n  deals: {},\r\n  products: {},\r\n  admins: {},\r\n\r\n  // List of IDs in order of least recently used\r\n  clientLRUHandler: [],\r\n  trainerLRUHandler: [],\r\n  gymLRUHandler: [],\r\n  workoutLRUHandler: [],\r\n  reviewLRUHandler: [],\r\n  eventLRUHandler: [],\r\n  challengeLRUHandler: [],\r\n  inviteLRUHandler: [],\r\n  postLRUHandler: [],\r\n  submissionLRUHandler: [],\r\n  groupLRUHandler: [],\r\n  commentLRUHandler: [],\r\n  sponsorLRUHandler: [],\r\n  streakLRUHandler: [],\r\n  dealLRUHandler: [],\r\n  productLRUHandler: [],\r\n  adminLRUHandler: [],\r\n\r\n  // TODO Consider changing this to be more like the message board queries where they just hold a list of results and\r\n  // TODO there are other objects that hold next tokens / ifFinished's ...\r\n  // Cached queries.\r\n  clientQueries: {},\r\n  trainerQueries: {},\r\n  gymQueries: {},\r\n  workoutQueries: {},\r\n  reviewQueries: {},\r\n  eventQueries: {},\r\n  challengeQueries: {},\r\n  inviteQueries: {},\r\n  postQueries: {},\r\n  submissionQueries: {},\r\n  groupQueries: {},\r\n  commentQueries: {},\r\n  sponsorQueries: {},\r\n  streakQueries: {},\r\n  dealQueries: {},\r\n  productQueries: {},\r\n  adminQueries: {},\r\n\r\n  clientQueryLRUHandler: [],\r\n  trainerQueryLRUHandler: [],\r\n  gymQueryLRUHandler: [],\r\n  workoutQueryLRUHandler: [],\r\n  reviewQueryLRUHandler: [],\r\n  eventQueryLRUHandler: [],\r\n  challengeQueryLRUHandler: [],\r\n  inviteQueryLRUHandler: [],\r\n  postQueryLRUHandler: [],\r\n  submissionQueryLRUHandler: [],\r\n  groupQueryLRUHandler: [],\r\n  commentQueryLRUHandler: [],\r\n  sponsorQueryLRUHandler: [],\r\n  streakQueryLRUHandler: [],\r\n  dealQueryLRUHandler: [],\r\n  productQueryLRUHandler: [],\r\n  adminQueryLRUHandler: [],\r\n};\r\n\r\n/**\r\n * Deeply copies the redux state to be edited for the next action.\r\n *\r\n * TODO How bad is this performance-wise?\r\n *\r\n * @param {CacheReducer} state The cache state to be copied.\r\n * @return {CacheReducer} The deeply copied state to update.\r\n */\r\nconst copyState = (state) => {\r\n  return {\r\n    clients: {...state.clients},\r\n    trainers: {...state.trainers},\r\n    gyms: {...state.gyms},\r\n    workouts: {...state.workouts},\r\n    reviews: {...state.reviews},\r\n    events: {...state.events},\r\n    challenges: {...state.challenges},\r\n    invites: {...state.invites},\r\n    posts: {...state.posts},\r\n    submissions: {...state.submissions},\r\n    groups: {...state.groups},\r\n    comments: {...state.comments},\r\n    sponsors: {...state.sponsors},\r\n    streaks: {...state.streaks},\r\n    deals: {...state.deals},\r\n    products: {...state.products},\r\n    admins: {...state.admins},\r\n    clientLRUHandler: [...state.clientLRUHandler],\r\n    trainerLRUHandler: [...state.trainerLRUHandler],\r\n    gymLRUHandler: [...state.gymLRUHandler],\r\n    workoutLRUHandler: [...state.workoutLRUHandler],\r\n    reviewLRUHandler: [...state.reviewLRUHandler],\r\n    eventLRUHandler: [...state.eventLRUHandler],\r\n    challengeLRUHandler: [...state.challengeLRUHandler],\r\n    inviteLRUHandler: [...state.inviteLRUHandler],\r\n    postLRUHandler: [...state.postLRUHandler],\r\n    submissionLRUHandler: [...state.submissionLRUHandler],\r\n    groupLRUHandler: [...state.groupLRUHandler],\r\n    commentLRUHandler: [...state.commentLRUHandler],\r\n    sponsorLRUHandler: [...state.sponsorLRUHandler],\r\n    streakLRUHandler: [...state.streakLRUHandler],\r\n    dealLRUHandler: [...state.dealLRUHandler],\r\n    productLRUHandler: [...state.productLRUHandler],\r\n    adminLRUHandler: [...state.adminLRUHandler],\r\n    clientQueries: {...state.clientQueries},\r\n    trainerQueries: {...state.trainerQueries},\r\n    gymQueries: {...state.gymQueries},\r\n    workoutQueries: {...state.workoutQueries},\r\n    reviewQueries: {...state.reviewQueries},\r\n    eventQueries: {...state.eventQueries},\r\n    challengeQueries: {...state.challengeQueries},\r\n    inviteQueries: {...state.inviteQueries},\r\n    postQueries: {...state.postQueries},\r\n    submissionQueries: {...state.submissionQueries},\r\n    groupQueries: {...state.groupQueries},\r\n    commentQueries: {...state.commentQueries},\r\n    sponsorQueries: {...state.sponsorQueries},\r\n    streakQueries: {...state.streakQueries},\r\n    dealQueries: {...state.dealQueries},\r\n    productQueries: {...state.productQueries},\r\n    adminQueries: {...state.adminQueries},\r\n    clientQueryLRUHandler: [...state.clientQueryLRUHandler],\r\n    trainerQueryLRUHandler: [...state.trainerQueryLRUHandler],\r\n    gymQueryLRUHandler: [...state.gymQueryLRUHandler],\r\n    workoutQueryLRUHandler: [...state.workoutQueryLRUHandler],\r\n    reviewQueryLRUHandler: [...state.reviewQueryLRUHandler],\r\n    eventQueryLRUHandler: [...state.eventQueryLRUHandler],\r\n    challengeQueryLRUHandler: [...state.challengeQueryLRUHandler],\r\n    inviteQueryLRUHandler: [...state.inviteQueryLRUHandler],\r\n    postQueryLRUHandler: [...state.postQueryLRUHandler],\r\n    submissionQueryLRUHandler: [...state.submissionQueryLRUHandler],\r\n    groupQueryLRUHandler: [...state.groupQueryLRUHandler],\r\n    commentQueryLRUHandler: [...state.commentQueryLRUHandler],\r\n    sponsorQueryLRUHandler: [...state.sponsorQueryLRUHandler],\r\n    streakQueryLRUHandler: [...state.streakQueryLRUHandler],\r\n    dealQueryLRUHandler: [...state.dealQueryLRUHandler],\r\n    productQueryLRUHandler: [...state.productQueryLRUHandler],\r\n    adminQueryLRUHandler: [...state.adminQueryLRUHandler],\r\n  };\r\n};\r\n\r\n/**\r\n * Gets the item cache for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {Object<string, Object>} Returns the item cache for the item type.\r\n */\r\nconst getItemCache = (state, itemType) => {\r\n  return switchReturnItemType(itemType, state.clients, state.trainers, state.gyms, state.workouts, state.reviews,\r\n    state.events, state.challenges, state.invites, state.posts, state.submissions, state.groups, state.comments,\r\n    state.sponsors, null, state.streaks, state.deals, state.products, state.admins,\r\n    \"GET ITEM CACHE CACHE REDUCER\");\r\n};\r\n\r\n/**\r\n * Gets the item LRU Handler for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {[string]} Returns the item LRU handler for the item type.\r\n */\r\nconst getItemLRUHandler = (state, itemType) => {\r\n  return switchReturnItemType(itemType, state.clientLRUHandler, state.trainerLRUHandler, state.gymLRUHandler,\r\n    state.workoutLRUHandler, state.reviewLRUHandler, state.eventLRUHandler, state.challengeLRUHandler,\r\n    state.inviteLRUHandler, state.postLRUHandler, state.submissionLRUHandler, state.groupLRUHandler,\r\n    state.commentLRUHandler, state.sponsorLRUHandler, null, state.streakLRUHandler, state.dealLRUHandler,\r\n    state.productLRUHandler, state.adminLRUHandler, \"GET ITEM LRU HANDLER\");\r\n};\r\n\r\n/**\r\n * Gets the item query cache for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {Object<string, Object>} Returns the item query cache for the item type.\r\n */\r\nconst getItemQueryCache = (state, itemType) => {\r\n  return switchReturnItemType(itemType, state.clientQueries, state.trainerQueries, state.gymQueries,\r\n    state.workoutQueries, state.reviewQueries, state.eventQueries, state.challengeQueries, state.inviteQueries,\r\n    state.postQueries, state.submissionQueries, state.groupQueries, state.commentQueries, state.sponsorQueries,\r\n    null, state.streakQueries, state.dealQueries, state.productQueries, state.adminQueries,\r\n    \"GET ITEM QUERY CACHE CACHE REDUCER\");\r\n};\r\n\r\n/**\r\n * Gets the item query cache name for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {string} Returns the item query cache name for the item type.\r\n */\r\nconst getItemQueryCacheName = (state, itemType) => {\r\n  return switchReturnItemType(itemType, \"clientQueries\", \"trainerQueries\", \"gymQueries\",\r\n    \"workoutQueries\", \"reviewQueries\", \"eventQueries\", \"challengeQueries\",\r\n    \"inviteQueries\", \"postQueries\", \"submissionQueries\", \"groupQueries\",\r\n    \"commentQueries\", \"sponsorQueries\", null, \"streakQueries\",\r\n    \"dealQueries\", \"productQueries\", \"adminQueries\",\r\n    \"GET ITEM QUERY CACHE CACHE REDUCER\");\r\n};\r\n\r\n/**\r\n * Gets the item query LRU Handler for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {[string]} Returns the item query LRU handler for the item type.\r\n */\r\nconst getItemQueryLRUHandler = (state, itemType) => {\r\n  return switchReturnItemType(itemType, state.clientQueryLRUHandler, state.trainerQueryLRUHandler,\r\n    state.gymQueryLRUHandler, state.workoutQueryLRUHandler, state.reviewQueryLRUHandler, state.eventQueryLRUHandler,\r\n    state.challengeQueryLRUHandler, state.inviteQueryLRUHandler, state.postQueryLRUHandler,\r\n    state.submissionQueryLRUHandler, state.groupQueryLRUHandler, state.commentQueryLRUHandler,\r\n    state.sponsorQueryLRUHandler, null, state.streakQueryLRUHandler, state.dealQueryLRUHandler,\r\n    state.productQueryLRUHandler, state.adminQueryLRUHandler, \"GET ITEM QUERY LRU HANDLER CACHE REDUCER\");\r\n};\r\n\r\n/**\r\n * Gets the item query LRU Handler name for the specified item type.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} itemType The type of item to receive the cache for.\r\n * @return {string} Returns the item query LRU handler name for the item type.\r\n */\r\nconst getItemQueryLRUHandlerName = (state, itemType) => {\r\n  return switchReturnItemType(itemType, \"clientQueryLRUHandler\", \"trainerQueryLRUHandler\",\r\n    \"gymQueryLRUHandler\", \"workoutQueryLRUHandler\", \"reviewQueryLRUHandler\",\r\n    \"eventQueryLRUHandler\", \"challengeQueryLRUHandler\", \"inviteQueryLRUHandler\",\r\n    \"postQueryLRUHandler\", \"submissionQueryLRUHandler\", \"groupQueryLRUHandler\",\r\n    \"commentQueryLRUHandler\", \"sponsorQueryLRUHandler\", null,\r\n    \"streakQueryLRUHandler\", \"dealQueryLRUHandler\", \"productQueryLRUHandler\",\r\n    \"adminQueryLRUHandler\", \"GET ITEM QUERY LRU HANDLER CACHE REDUCER\");\r\n};\r\n\r\n/**\r\n * Cache Reducer:\r\n *\r\n * This reducer handles all the cache-ing of data and updating of all database data shown within the application.\r\n * Handles all object permanence, LRU cache eviction, and query handling. Also can update the database manually using\r\n * specific functions.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {{type: string, payload: *, asyncDispatch: Function}} action The action to specify how to update the reducer.\r\n * @return {CacheReducer} The next state for the reducer.\r\n */\r\nexport default (state: CacheReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    case PUT_ITEM:\r\n      state = copyState(state);\r\n      addItemToCache(state, action.payload.id, action.payload.itemType, action.payload.item, action.asyncDispatch);\r\n      break;\r\n    case SET_ITEM_ATTRIBUTE_INDEX:\r\n      state = copyState(state);\r\n      setAttributeIndex(state, action.payload.id, action.payload.itemType, action.payload.attributeName,\r\n        action.payload.index, action.payload.attributeValue);\r\n      break;\r\n    case ADD_TO_ITEM_ATTRIBUTES:\r\n      state = copyState(state);\r\n      addToAttributes(state, action.payload.id, action.payload.itemType, action.payload.attributes);\r\n      break;\r\n    case REMOVE_FROM_ITEM_ATTRIBUTES:\r\n      state = copyState(state);\r\n      removeFromAttributes(state, action.payload.id, action.payload.itemType, action.payload.attributes);\r\n      break;\r\n    case REMOVE_ITEM_ATTRIBUTE_INDEX:\r\n      state = copyState(state);\r\n      removeAttributeIndex(state, action.payload.id, action.payload.itemType, action.payload.attributeName,\r\n        action.payload.index);\r\n      break;\r\n    case REMOVE_ITEM:\r\n      state = copyState(state);\r\n      removeItem(state, action.payload.id, action.payload.itemType, action.asyncDispatch);\r\n      break;\r\n    case PUT_ITEM_QUERY:\r\n      state = copyState(state);\r\n      addQueryToCache(state, action.payload.itemType, action.payload.normalizedQueryString,\r\n        action.payload.nextToken, action.payload.queryResult);\r\n      break;\r\n    case CLEAR_NORMALIZED_ITEM_QUERY:\r\n      state = copyState(state);\r\n      clearNormalizedCache(state, action.payload.itemType, action.payload.normalizedQueryString);\r\n      break;\r\n    case CLEAR_ITEM_CACHE:\r\n      state = copyState(state);\r\n      clearCache(state, action.payload.itemType, action.asyncDispatch);\r\n      break;\r\n    case CLEAR_ITEM_QUERY_CACHE:\r\n      state = copyState(state);\r\n      clearQueryCache(state, action.payload.itemType);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return state;\r\n};\r\n\r\n/**\r\n * Adds an item to the cache, making it accessible to the whole app, and evicts items if necessary.\r\n *\r\n * @param {CacheReducer} state The state of the cache reducer.\r\n * @param {string} id The id of the item to add to the cache.\r\n * @param {string} itemType The type of the item to add to the cache.\r\n * @param {*} item The item to add into the cache.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nconst addItemToCache = (state, id, itemType, item, dispatch) => {\r\n  if (!id || !itemType) {\r\n    err && console.error(\"Adding item to cache does not include the id and/or itemType!!!\");\r\n  }\r\n  const itemCache = getItemCache(state, itemType);\r\n  const LRUHandler = getItemLRUHandler(state, itemType);\r\n  if (!itemCache[id]) {\r\n    // Add the object\r\n    LRUHandler.unshift(id);\r\n    itemCache[id] = item;\r\n    if (LRUHandler.length >= getItemCacheSize(itemType)) {\r\n      // Then we have to pop something out\r\n      const deleteObjectID = LRUHandler.pop();\r\n      delete [deleteObjectID];\r\n      dispatch(removeChannelSubscription(getObjectChannelName(deleteObjectID)));\r\n    }\r\n  } else {\r\n    // Update the object\r\n    let index = LRUHandler.indexOf(id);\r\n    if (index > -1) {\r\n      LRUHandler.splice(index, 1);\r\n    }\r\n    LRUHandler.unshift(id);\r\n    // Then we update the object with the additional fields that it may have (if this came from the other function)\r\n    itemCache[id] = {\r\n      ...itemCache[id],\r\n      ...item\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Adds an object to the cache, allowing its contents to be viewed and referenced in the same query again.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} itemType The type of the item query cache to put the query into.\r\n * @param {string} normalizedQueryString The normalized query string to input, without the next token variable.\r\n * @param {string} nextToken The next token string to determine which section of the query to retrieve.\r\n * @param {[object]} queryResult The result of the query, the list of items returned.\r\n * @return {CacheReducer} The new state of the cache reducer after the addition.\r\n */\r\nconst addQueryToCache = (state, itemType, normalizedQueryString, nextToken, queryResult) => {\r\n  const queryCache = getItemQueryCache(state, itemType);\r\n  const queryLRUHandler = getItemQueryLRUHandler(state, itemType);\r\n  if (!queryCache[normalizedQueryString]) {\r\n    queryCache[normalizedQueryString] = {};\r\n  }\r\n  const queryResults = queryCache[normalizedQueryString];\r\n  if (!queryCache[normalizedQueryString][nextToken]) {\r\n    // It's not in the cache yet\r\n    queryLRUHandler.unshift({normalizedQueryString, nextToken});\r\n    queryResults[nextToken] = queryResult;\r\n    if (queryLRUHandler.length >= getItemQueryCacheSize(itemType)) {\r\n      // Then we have to pop something out\r\n      const entry = queryLRUHandler.pop();\r\n      delete queryCache[entry.normalizedQueryString][entry.nextToken];\r\n    }\r\n  } else {\r\n    // Update the object\r\n    let addingEntry = {normalizedQueryString, nextToken};\r\n    let index = -1;\r\n    for (let i = 0; i < queryLRUHandler.length; i++) {\r\n      const entry = queryLRUHandler[i];\r\n      if (entry.normalizedQueryString === normalizedQueryString && entry.nextToken === nextToken) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n    if (index > -1) {\r\n      queryLRUHandler.splice(index, 1);\r\n    }\r\n    queryLRUHandler.unshift(addingEntry);\r\n    // Then we update the object with the additional fields that it may have (if this came from the other function)\r\n    queryCache[normalizedQueryString][nextToken] = queryResult;\r\n  }\r\n};\r\n\r\n/**\r\n * Sets the attribute index of a certain attribute list in an object inside the cache to a different value.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} id The id of the item to update.\r\n * @param {string} itemType The type of the item to update.\r\n * @param {string} attributeName The name of the attribute to update.\r\n * @param {number} index The index of the list to set.\r\n * @param {*} attributeValue The value to set the list index to.\r\n * @return {CacheReducer} The new state of the cache reducer after the addition.\r\n */\r\nfunction setAttributeIndex(state, id, itemType, attributeName, index, attributeValue) {\r\n  const itemCache = getItemCache(state, itemType);\r\n  if (!itemCache[id]) {\r\n    err && console.error(\"Cannot update an item not yet in the database!\");\r\n    return;\r\n  }\r\n  const attribute = itemCache[id][attributeName];\r\n  if (!attribute) {\r\n    err && console.error(\"The item does not have the attribute to update yet!\");\r\n    return;\r\n  }\r\n  if (!Array.isArray(attribute)) {\r\n    err && console.error(\"TRYING TO SET ATTRIBUTE OF A NOT ARRAY!!!! PROBLEM. AttributeName: \" + attributeName);\r\n    return;\r\n  }\r\n  const newAttribute = [...attribute];\r\n  newAttribute[index] = attributeValue;\r\n  itemCache[id][attributeName] = newAttribute;\r\n}\r\n\r\n/**\r\n * Adds attributes to a attribute list in an item in cache already.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} id The id of the item to update.\r\n * @param {string} itemType The type of the item to update.\r\n * @param {Object<string, [*]>} attributes The attribute values to add to the object's attribute list.\r\n * @return {CacheReducer} The new state of the cache reducer after the addition.\r\n */\r\nfunction addToAttributes(state, id, itemType, attributes) {\r\n  const itemCache = getItemCache(state, itemType);\r\n  if (!itemCache[id]) {\r\n    err && console.error(\"Cannot update an item not yet in the database!\");\r\n    return;\r\n  }\r\n  for (const attributeName in attributes) {\r\n    if (attributes.hasOwnProperty(attributeName)) {\r\n      const attribute = itemCache[id][attributeName];\r\n      const addAttribute = attributes[attributeName];\r\n      if (!attribute) {\r\n        itemCache[id][attributeName] = addAttribute;\r\n      } else if (!Array.isArray(attribute)) {\r\n        err && console.error(\"TRYING TO ADD ATTRIBUTES TO A NOT ARRAY!!!! PROBLEM. AttributeName: \" + attributeName);\r\n      } else {\r\n        itemCache[id][attributeName] = withUniqueAdded(attribute, addAttribute);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Removes an index from a object list attribute. Shortens the list by exactly one if valid.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} id The id of the item to update.\r\n * @param {string} itemType The type of the item to update.\r\n * @param {string} attributeName The name of the attribute in the object containing the list.\r\n * @param {number} index The index of the list to remove the element from.\r\n * @return {CacheReducer} The new state of the cache reducer after the removal.\r\n */\r\nfunction removeAttributeIndex(state, id, itemType, attributeName, index) {\r\n  const itemCache = getItemCache(state, itemType);\r\n  if (!itemCache[id]) {\r\n    err && console.error(\"Cannot update an item not yet in the database!\");\r\n    return;\r\n  }\r\n  const attribute = itemCache[id][attributeName];\r\n  if (!attribute) {\r\n    err && console.error(\"The item does not have the attribute to update yet!\");\r\n    return;\r\n  }\r\n  if (!Array.isArray(attribute)) {\r\n    err && console.error(\"TRYING TO REMOVE ATTRIBUTES TO A NOT ARRAY!!!! PROBLEM. AttributeName: \" + attributeName);\r\n    return;\r\n  }\r\n  const newAttribute = [...attribute];\r\n  newAttribute.splice(index, 1);\r\n  itemCache[id][attributeName] = newAttribute;\r\n}\r\n\r\n/**\r\n * Removes one or more attributes from an object list attribute, using the value of the object inside the list.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} id The id of the object to update.\r\n * @param {string} itemType The type of the item to update.\r\n * @param {Object<string, [*]>} attributes The map of attribute names of lists to attribute values to remove from them.\r\n */\r\nconst removeFromAttributes = (state, id, itemType, attributes) => {\r\n  const itemCache = getItemCache(state, itemType);\r\n  if (!itemCache[id]) {\r\n    err && console.error(\"Cannot update an item not yet in the database!\");\r\n    return;\r\n  }\r\n  for (const attributeName in attributes) {\r\n    if (attributes.hasOwnProperty(attributeName)) {\r\n      const attribute = itemCache[id][attributeName];\r\n      const removeAttribute = attributes[attributeName];\r\n      if (!attribute) {\r\n        // Nothing to remove\r\n        err && console.error(\"Attribute not recognized in item, cannot remove from it.\");\r\n      } else if (!Array.isArray(attribute)) {\r\n        err && console.error(\"TRYING TO REMOVE ATTRIBUTES FROM A NOT ARRAY!!!! PROBLEM. AttributeName: \" + attributeName);\r\n      } else {\r\n        itemCache[id][attributeName] = subtractedArray(attribute, removeAttribute);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Removes an object from the cache and removes the potential channel unsubscription associated.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} id The id of the object to remove.\r\n * @param {string} itemType The item type of the item to remove.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nconst removeItem = (state, id, itemType, dispatch) => {\r\n  // Once you remove an object, simply unsubscribe\r\n  dispatch(removeChannelSubscription(getObjectChannelName(id)));\r\n  const LRUHandler = getItemLRUHandler(state, itemType);\r\n  const index = LRUHandler.indexOf(id);\r\n  if (index !== -1) {\r\n    LRUHandler.splice(index, 1);\r\n  }\r\n  delete getItemCache(state, itemType)[id];\r\n};\r\n\r\n/**\r\n * Clears a cache entirely of all objects inside of it.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} itemType The type of the cache to clear.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction clearCache(state, itemType, dispatch) {\r\n  const itemCache = getItemCache(state, itemType);\r\n  for (const id in itemCache) {\r\n    if (itemCache.hasOwnProperty(id)) {\r\n      removeItem(state, id, itemType, dispatch)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Clear the entire query cache for a item type so that all queries for that type need to be re-queried.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} itemType The item type of the query cache to clear.\r\n */\r\nfunction clearQueryCache(state, itemType) {\r\n  state[getItemQueryCacheName(state, itemType)] = {};\r\n  state[getItemQueryLRUHandlerName(state, itemType)] = [];\r\n}\r\n\r\n/**\r\n * Clears a query cache of the specific normalized query within it.\r\n *\r\n * @param {CacheReducer} state The current state of the cache reducer.\r\n * @param {string} itemType The type of the cache that holds the normalized query.\r\n * @param {string} normalizedQuery The query string of the query to clear.\r\n */\r\nfunction clearNormalizedCache(state, itemType, normalizedQuery) {\r\n  const queryLRUHandler = getItemQueryLRUHandler(state, itemType);\r\n  const queryResults = getItemQueryCache(state, itemType)[normalizedQuery];\r\n  for (const nextToken in queryResults) {\r\n    if (queryResults.hasOwnProperty(nextToken)) {\r\n      let index = -1;\r\n      for (let i = 0; i < queryLRUHandler.length; i++) {\r\n        const entry = queryLRUHandler[i];\r\n        if (entry.normalizedQueryString === normalizedQuery && entry.nextToken === nextToken) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        queryLRUHandler.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  delete getItemQueryCache(state, itemType)[normalizedQuery];\r\n}\r\n","import {subtractedArray} from \"../../logic/ArrayHelper\";\r\n\r\nexport const ENABLE_TYPE = 'ENABLE_TYPE';\r\nexport const DISABLE_TYPE = 'DISABLE_TYPE';\r\nexport const SET_SEARCH_QUERY = 'SET_SEARCH_QUERY';\r\nexport const SET_TYPE_FILTER = 'SET_TYPE_FILTER';\r\nexport const SET_TYPE_NEXT_TOKEN = 'SET_TYPE_NEXT_TOKEN';\r\nexport const ADD_TYPE_RESULTS = 'ADD_TYPE_RESULTS';\r\nexport const RESET_TYPE_QUERY = 'RESET_TYPE_QUERY';\r\nexport const RESET_QUERY = 'RESET_QUERY';\r\nexport const ENABLE_SEARCH_BAR = 'ENABLE_SEARCH_BAR';\r\nexport const DISABLE_SEARCH_BAR = 'DISABLE_SEARCH_BAR';\r\n// const CLEAR_TYPE_RESULTS = 'CLEAR_TYPE_RESULTS';\r\n// const CLEAR_ALL_RESULTS = 'CLEAR_ALL_RESULTS';\r\n\r\n// At most how many objects should be grabbed from a query at one time\r\nconst queryLimit = 100;\r\n\r\n// TODO This will determine the ratios of which objects to get out of the\r\n// const typeRatios = {\r\n//     Client: 2, Trainer: 3, Gym: 5, Workout: 1, Review: 1, Event: 5, Challenge: 10, Invite: 1, Post: 15\r\n// };\r\n\r\n/**\r\n * The Search Type State for the Search Reducer.\r\n *\r\n * @property {boolean} enabled Whether or not the type state is enabled.\r\n * @property {[string]} variableList The variable list to query for in the type.\r\n * @property {Object} filterJSON The JSON object to filter the type query with.\r\n * @property {Map<string, string>} filterParameters The parameters to filter the search with.\r\n * @property {string|null} nextToken The previous next token given from a query.\r\n * @property {boolean} ifFirst If the type state has not been queried yet.\r\n * @property {number} limit The limit of items to retrieve from the database.\r\n * @property {[Object]} results The results received from the database for this type.\r\n */\r\ntype SearchTypeState = {\r\n  enabled: boolean,\r\n  variableList: [string],\r\n  filterJSON: Object,\r\n  filterParameters: Map<string, string>,\r\n  nextToken: string | null,\r\n  ifFirst: boolean,\r\n  limit: number,\r\n  results: [Object],\r\n};\r\n\r\n/**\r\n * The initial state for a type in the search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialTypeState = {\r\n  enabled: false,\r\n  variableList: [],\r\n  filterJSON: {},\r\n  filterParameters: {},\r\n  nextToken: null,\r\n  ifFirst: true,\r\n  limit: queryLimit,\r\n  results: [],\r\n};\r\n\r\n/**\r\n * Deeply copies the type state in order to edit the state.\r\n *\r\n * @param {SearchTypeState} typeState The state to copy.\r\n * @return {SearchTypeState} The copied state to update.\r\n */\r\nconst copyTypeState = (typeState) => {\r\n  typeState = {...typeState};\r\n  typeState.filterParameters = {...typeState.filterParameters};\r\n  typeState.results = [...typeState.results];\r\n  return typeState;\r\n};\r\n\r\n// Initial states of each kind of search\r\n/**\r\n * The initial state for the Client search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialClientState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: true,\r\n  variableList: [\"id\", \"item_type\", \"username\", \"gender\", \"birthday\", \"name\", \"friends\", \"challengesWon\", \"scheduledEvents\", \"profileImagePath\", /*\"profilePicture\"*/ \"friendRequests\"],\r\n  filterJSON: {\r\n    or: [{\r\n      username: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      name: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      email: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }]\r\n  },\r\n  limit: queryLimit,\r\n};\r\n\r\n/**\r\n * The initial state for the Trainer search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialTrainerState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: true,\r\n  variableList: [\"id\", \"name\", \"username\", \"item_type\", \"gender\", \"birthday\", \"profileImagePath\", /*\"profilePicture\", */\"profileImagePaths\", \"subscribers\", \"friendlinessRating\", \"\" +\r\n  \"effectivenessRating\", \"posts\"],\r\n  filterJSON: {\r\n    or: [{\r\n      username: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      name: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      email: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }]\r\n  },\r\n  limit: queryLimit,\r\n};\r\n\r\n/**\r\n * The initial state for the Gym search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialGymState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n  variableList: [],\r\n  filterJSON: {\r\n    or: [{\r\n      username: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      name: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }, {\r\n      email: {\r\n        contains: \"$searchQuery\"\r\n      }\r\n    }]\r\n  },\r\n  limit: queryLimit,\r\n};\r\n\r\n/**\r\n * The initial state for the Workout search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialWorkoutState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n};\r\n\r\n/**\r\n * The initial state for the Review search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialReviewState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n};\r\n\r\n/**\r\n * The initial state for the Event search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialEventState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n  variableList: [],\r\n  filterJSON: {\r\n    and: [{\r\n      or: [{\r\n        title: {\r\n          contains: \"$searchQuery\"\r\n        }\r\n      }, {\r\n        description: {\r\n          contains: \"$searchQuery\"\r\n        }\r\n      }]\r\n    }, {\r\n      access: {\r\n        eq: \"$access\"\r\n      }\r\n    }]\r\n  },\r\n  filterParameters: {\r\n    access: \"public\",\r\n  },\r\n  limit: queryLimit,\r\n};\r\n\r\n/**\r\n * The initial state for the Challenge search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialChallengeState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: true,\r\n  variableList: [\"id\", \"item_type\", \"title\", \"endTime\", \"time_created\", \"owner\", \"ifCompleted\", \"members\", \"capacity\", \"goal\", \"access\", \"description\", \"restriction\", \"tags\", \"prize\", \"submissions\"],\r\n  filterJSON: {\r\n    and: [{\r\n      or: [{\r\n        title: {\r\n          contains: \"$searchQuery\"\r\n        }\r\n      }, {\r\n        description: {\r\n          contains: \"$searchQuery\"\r\n        }\r\n      }]\r\n    }, {\r\n      access: {\r\n        eq: \"$access\"\r\n      }\r\n    }]\r\n  },\r\n  filterParameters: {\r\n    access: \"public\",\r\n  },\r\n  limit: queryLimit,\r\n};\r\n\r\n/**\r\n * The initial state for the Invite search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialInviteState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n};\r\n\r\n/**\r\n * The initial state for the Post search.\r\n *\r\n * @type {SearchTypeState}\r\n */\r\nconst initialPostState = {\r\n  ...copyTypeState(initialTypeState),\r\n  enabled: false,\r\n};\r\n\r\n/**\r\n * The state for the Search Reducer at any given moment.\r\n *\r\n * @property {string} searchQuery The string to search for using the search bar.\r\n * @property {[Object]} results The total results for the given search query.\r\n * @property {number} limit The limit of objects to receive from the database in a query.\r\n * @property {number} numTypesEnabled The number of types that are currently enabled for searching.\r\n * @property {boolean} ifFinished If the search query has no more results to get with the search configuration.\r\n * @property {boolean} searchBarEnabled If the search bar is currently enabled for searching.\r\n * @property {Map<string, SearchTypeState>} typeQueries The individual Type settings for searching.\r\n */\r\ntype SearchReducer = {\r\n  searchQuery: string,\r\n  results: [Object],\r\n  limit: number,\r\n  numTypesEnabled: number,\r\n  ifFinished: boolean,\r\n  searchBarEnabled: boolean,\r\n  typeQueries: {\r\n    Client: SearchTypeState,\r\n    Trainer: SearchTypeState,\r\n    Gym: SearchTypeState,\r\n    Workout: SearchTypeState,\r\n    Review: SearchTypeState,\r\n    Event: SearchTypeState,\r\n    Challenge: SearchTypeState,\r\n    Invite: SearchTypeState,\r\n    Post: SearchTypeState\r\n  }\r\n};\r\n\r\n/**\r\n * The initial state for the Search Reducer.\r\n *\r\n * @type {SearchReducer}\r\n */\r\nconst initialState = {\r\n  searchQuery: \"\",\r\n  results: [],\r\n  limit: 100, // This should be computed dynamically, based on how many types we're querying to maintain a certain number\r\n  numTypesEnabled: 3,\r\n  ifFinished: false,\r\n  searchBarEnabled: true,\r\n  typeQueries: {\r\n    Client: initialClientState,\r\n    Trainer: initialTrainerState,\r\n    Gym: initialGymState,\r\n    Workout: initialWorkoutState,\r\n    Review: initialReviewState,\r\n    Event: initialEventState,\r\n    Challenge: initialChallengeState,\r\n    Invite: initialInviteState,\r\n    Post: initialPostState\r\n  }\r\n};\r\n\r\n/**\r\n * Search Reducer:\r\n *\r\n * Handles the search of the application, potentially searching through all the items in the database. Allows to update\r\n * the kind of search that will happen through certain actions. Also handles the query, in order to search more than\r\n * once (as in loading a new page of results).\r\n *\r\n * @param {SearchReducer} state The current state of the search reducer.\r\n * @param {{type: string, payload: *}} action The action to specify how to update the reducer.\r\n * @return {SearchReducer} The next state for the reducer.\r\n */\r\nexport default (state: SearchReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    // TODO Update the retrieval limits based on what is enabled and not\r\n    case ENABLE_TYPE:\r\n      state = {\r\n        ...state,\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload]: {\r\n            ...state.typeQueries[action.payload],\r\n            enabled: true\r\n          }\r\n        },\r\n      };\r\n      state.numTypesEnabled = getNumTypesEnabled(state);\r\n      break;\r\n    case DISABLE_TYPE:\r\n      state = {\r\n        ...state,\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload]: {\r\n            ...state.typeQueries[action.payload],\r\n            enabled: false\r\n          }\r\n        },\r\n      };\r\n      state.numTypesEnabled = getNumTypesEnabled(state);\r\n      break;\r\n    case SET_SEARCH_QUERY:\r\n      state = {\r\n        ...state,\r\n        searchQuery: action.payload\r\n      };\r\n      break;\r\n    case SET_TYPE_FILTER:\r\n      state = {\r\n        ...state,\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload.type]: {\r\n            ...state.typeQueries[action.payload.type],\r\n            filterJSON: action.payload.filterJSON,\r\n            filterParameters: action.payload.filterParameters\r\n          }\r\n        },\r\n      };\r\n      break;\r\n    case SET_TYPE_NEXT_TOKEN:\r\n      state = {\r\n        ...state,\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload.type]: {\r\n            ...state.typeQueries[action.payload.type],\r\n            nextToken: action.payload.nextToken,\r\n            ifFirst: false\r\n          }\r\n        },\r\n      };\r\n      state.ifFinished = getIfFinished(state);\r\n      break;\r\n    case ADD_TYPE_RESULTS:\r\n      const results = action.payload.results ? action.payload.results : [];\r\n      // console.log(action.payload.type + \"\\n\" + JSON.stringify(results) + \"\\n\" + JSON.stringify(state.typeQueries[action.payload.type].results));\r\n      // TODO InSERT SORT THESE INTO THE RESULTS?\r\n      state = {\r\n        ...state,\r\n        results: [...state.results, ...results],\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload.type]: {\r\n            ...state.typeQueries[action.payload.type],\r\n            results: [\r\n              ...state.typeQueries[action.payload.type].results,\r\n              ...results\r\n            ]\r\n          }\r\n        }\r\n      };\r\n      state.ifFinished = getIfFinished(state);\r\n      break;\r\n    case RESET_QUERY:\r\n      state = {\r\n        ...state,\r\n        results: [],\r\n        ifFinished: false\r\n      };\r\n      for (const type in state.typeQueries) {\r\n        if (state.typeQueries.hasOwnProperty(type)) {\r\n          state.typeQueries[type].results = [];\r\n          state.typeQueries[type].nextToken = null;\r\n          state.typeQueries[type].ifFirst = true;\r\n        }\r\n      }\r\n      break;\r\n    case RESET_TYPE_QUERY:\r\n      state = {\r\n        ...state,\r\n        results: subtractedArray(state.results, state.typeQueries[action.payload].results),\r\n        typeQueries: {\r\n          ...state.typeQueries,\r\n          [action.payload]: {\r\n            ...state.typeQueries[action.payload],\r\n            results: [],\r\n            nextToken: null,\r\n            ifFirst: true,\r\n          }\r\n        }\r\n      };\r\n      break;\r\n    case ENABLE_SEARCH_BAR:\r\n      state = {\r\n        ...state,\r\n        searchBarEnabled: true\r\n      };\r\n      break;\r\n    case DISABLE_SEARCH_BAR:\r\n      state = {\r\n        ...state,\r\n        searchBarEnabled: false\r\n      };\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  // console.log(\"INFO: Did \" + action.type + \" and now state is = \" + JSON.stringify(state));\r\n  return state;\r\n}\r\n\r\n/**\r\n * Gets the current number of types that are enabled for search within the reducer.\r\n *\r\n * @param {SearchReducer} state The current state of the search reducer.\r\n * @return {number} The number of types enabled for search.\r\n */\r\nfunction getNumTypesEnabled(state) {\r\n  let numTypesEnabled = 0;\r\n  for (const key in state.typeQueries) {\r\n    if (state.typeQueries.hasOwnProperty(key)) {\r\n      if (state.typeQueries[key].enabled === true) {\r\n        numTypesEnabled++;\r\n      }\r\n    }\r\n  }\r\n  return numTypesEnabled;\r\n}\r\n\r\n/**\r\n * Gets if the entire query is finished. Based on if all the types that are enabled are not at the first query and do\r\n * not have a next token.\r\n *\r\n * @param {SearchReducer} state The current state of the search reducer.\r\n * @return {boolean}\r\n */\r\nfunction getIfFinished(state) {\r\n  for (const key in state.typeQueries) {\r\n    if (state.typeQueries.hasOwnProperty(key)) {\r\n      const query = state.typeQueries[key];\r\n      // A query is finished if it's not first and and the nextToken is null\r\n      if (query.enabled && (query.ifFirst === true || query.nextToken !== null)) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n","var map = {\n\t\"./Endurance_icon.png\": 377,\n\t\"./HIIT_icon.png\": 378,\n\t\"./Performance_icon.png\": 379,\n\t\"./Strength_icon.png\": 380\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 72;","import {err} from \"../../../Constants\";\r\n\r\nexport const SET_ERROR = 'SET_ERROR';\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR';\r\nexport const SET_IS_LOADING = 'SET_IS_LOADING';\r\nexport const SET_IS_NOT_LOADING = 'SET_IS_NOT_LOADING';\r\nexport const TOGGLE_IS_LOADING = 'TOGGLE_IS_LOADING';\r\nexport const SET_APP_IS_NOT_LOADING = 'SET_APP_IS_NOT_LOADING';\r\n\r\ntype InfoReducer = {\r\n  isLoading: boolean,\r\n  appIsLoading: boolean,\r\n  error: Error\r\n};\r\n\r\n/**\r\n * The Initial State for the Info Reducer\r\n *\r\n * @type {InfoReducer}\r\n */\r\nconst initialState = {\r\n  isLoading: false,\r\n  appIsLoading: true,\r\n  error: null\r\n};\r\n\r\n/**\r\n * Info Reducer:\r\n *\r\n * This reducer handles all the global states of the application. This includes global errors and global loading states.\r\n * This might be more helpful later when we have a more integrated system.\r\n *\r\n * @param {InfoReducer} state The current state of the info reducer.\r\n * @param {{type: string, payload: *}} action The action to specify how to update the reducer.\r\n * @return {InfoReducer} The next state for the reducer.\r\n */\r\nexport default (state: InfoReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ERROR:\r\n      err && console.error(\"Error inside a redux action/reducer! (Leo wrote this) \" + action.payload);\r\n      state = {\r\n        ...state,\r\n        error: action.payload\r\n      };\r\n      break;\r\n    case CLEAR_ERROR:\r\n      state = {\r\n        ...state,\r\n        error: null\r\n      };\r\n      break;\r\n    case SET_IS_LOADING:\r\n      state = {\r\n        ...state,\r\n        isLoading: true\r\n      };\r\n      break;\r\n    case SET_IS_NOT_LOADING:\r\n      state = {\r\n        ...state,\r\n        isLoading: false\r\n      };\r\n      break;\r\n    case TOGGLE_IS_LOADING:\r\n      state = {\r\n        ...state,\r\n        isLoading: !state.isLoading\r\n      };\r\n      break;\r\n    case SET_APP_IS_NOT_LOADING:\r\n      state = {\r\n        ...state,\r\n        appIsLoading: false\r\n      };\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  // console.log(\"INFO: Did \" + action.type + \" and now state is = \" + JSON.stringify(state));\r\n  return state;\r\n}\r\n\r\n","import {removeChannelSubscription} from \"../actions/ablyActions\";\r\nimport {err} from \"../../../Constants\";\r\n\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\nexport const ADD_QUERY = 'ADD_QUERY';\r\nexport const SET_BOARD_READ = 'SET_BOARD_READ';\r\nexport const CLEAR_BOARD = 'CLEAR_BOARD';\r\nexport const CLEAR_ALL_BOARDS = 'CLEAR_ALL_BOARDS';\r\nexport const UNSUBSCRIBE_FROM_BOARD = 'UNSUBSCRIBE_FROM_BOARD';\r\n\r\n/**\r\n * Gets the Ably Channel name for the given board.\r\n *\r\n * @param {string} board The board to get the Ably channel of.\r\n * @returns {string} The channel name.\r\n */\r\nexport function getBoardChannel(board) {\r\n  return board + \"-Board\";\r\n}\r\n\r\n// This is the number of MESSAGES that the cache can hold (not boards)!\r\nconst messageCacheSize = 1000;\r\n\r\ntype MessageReducer = {\r\n  boards: Map<string, [Object]>,\r\n  boardLRUHandler: [string],\r\n  boardNextTokens: Map<string, string>,\r\n  boardIfFirsts: Map<string, boolean>,\r\n  boardIfSubscribed: Map<string, boolean>,\r\n  numMessages: number,\r\n}\r\n\r\n// How to make sure that this doesn't get out of control?\r\n/**\r\n * The initial state for the Message Reducer.\r\n *\r\n * @type {MessageReducer}\r\n */\r\nconst initialState = {\r\n  boards: {},\r\n  boardLRUHandler: [],\r\n  boardNextTokens: {},\r\n  boardIfFirsts: {},\r\n  boardIfSubscribed: {},\r\n  numMessages: 0,\r\n};\r\n\r\n/**\r\n * Deeply copies the state of the Message reducer.\r\n *\r\n * @param {MessageReducer} state The current state of the Message Reducer.\r\n * @return {MessageReducer} The newly copied reducer.\r\n */\r\nconst copyState = (state) => {\r\n  state = {...state};\r\n  state.boards = {...state.boards};\r\n  state.boardLRUHandler = [...state.boardLRUHandler];\r\n  state.boardNextTokens = {...state.boardNextTokens};\r\n  state.boardIfFirsts = {...state.boardIfFirsts};\r\n  state.boardIfSubscribed = {...state.boardIfSubscribed};\r\n  return state;\r\n};\r\n\r\n/**\r\n * Message Reducer:\r\n *\r\n * Handles all the message logic for the application. Basically the same as cache reducer, but more integrated and\r\n * optimized because Message objects are in a different table and need to handled differently.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {{type: string, payload: *, asyncDispatch: Function}} action The action to specify how to update the reducer.\r\n * @return {MessageReducer} The next state for the reducer.\r\n */\r\nexport default (state: MessageReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_MESSAGE:\r\n      state = copyState(state);\r\n      addMessage(state, action.payload.board, action.payload.message, action.asyncDispatch);\r\n      break;\r\n    case ADD_QUERY:\r\n      state = copyState(state);\r\n      addQuery(state, action.payload.board, action.payload.messages, action.payload.nextToken, action.payload.ifSubscribed, action.asyncDispatch);\r\n      break;\r\n    case SET_BOARD_READ:\r\n      state = copyState(state);\r\n      setBoardRead(state, action.payload.board, action.payload.userID);\r\n      break;\r\n    case CLEAR_BOARD:\r\n      state = copyState(state);\r\n      clearBoard(state, action.payload.board, action.asyncDispatch);\r\n      break;\r\n    case CLEAR_ALL_BOARDS:\r\n      state = copyState(state);\r\n      clearAllBoards(state, action.asyncDispatch);\r\n      break;\r\n    case UNSUBSCRIBE_FROM_BOARD:\r\n      state = copyState(state);\r\n      unsubscribeFromBoard(state, action.payload.board, action.asyncDispatch);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return state;\r\n}\r\n\r\n/**\r\n * Adds a message to the beginning of the board and potentially deletes other messages to make room for it. This is\r\n * used whenever a NEW message has been discovered through Ably.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board to add the message to.\r\n * @param {*} message The message object to add to the board.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction addMessage(state, board, message, dispatch) {\r\n  // When we add a message, we update the LRU Handler for that cache, and we potentially throw away some.\r\n  clearBoardsForMessages(state, board, 1, dispatch);\r\n  if (!state.boards[board]) {\r\n    state.boards[board] = [message];\r\n  } else {\r\n    state.boards[board].unshift(message);\r\n  }\r\n  state.numMessages += 1;\r\n  updateLRUBoard(state, board);\r\n}\r\n\r\n/**\r\n * Adds a new query of messages to the end of the board and potentially deletes other messages to make room for them.\r\n * This is used whenever another query of Messages is added to a board from an earlier time.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board to add the messages to.\r\n * @param {[*]} messages The list of messages to add to the board.\r\n * @param {string} nextToken The next token string received from the query.\r\n * @param {boolean} ifSubscribed If the query is subscribed to its Ably channel.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction addQuery(state, board, messages, nextToken, ifSubscribed, dispatch) {\r\n  state.boardIfFirsts[board] = false;\r\n  state.boardNextTokens[board] = nextToken;\r\n  state.boardIfSubscribed[board] = ifSubscribed;\r\n  clearBoardsForMessages(state, board, messages.length, dispatch);\r\n  if (state.boards[board]) {\r\n    state.boards[board] = [...state.boards[board], ...messages];\r\n  } else {\r\n    state.boards[board] = messages;\r\n  }\r\n  state.numMessages += messages.length;\r\n  updateLRUBoard(state, board);\r\n}\r\n\r\n/**\r\n * Sets the board read for a specific board by a certain user. This sets the read status of this board.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} boardName The name of the board to update the read status.\r\n * @param {string} userID The id of user to update the read status for.\r\n */\r\nfunction setBoardRead(state, boardName, userID) {\r\n  const board = state.boards[boardName];\r\n  if (board && board.length > 0) {\r\n    const message = board[0];\r\n    if (message.lastSeenFor) {\r\n      message.lastSeenFor = [\r\n        ...board[0].lastSeenFor,\r\n        userID,\r\n      ]\r\n    } else {\r\n      message.lastSeenFor = [userID];\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Clears boards in order to make room for a number of messages that are going to be added to the cache.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board that the messages will be added to.\r\n * @param {number} messagesLength The number of messages about to be added.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction clearBoardsForMessages(state, board, messagesLength, dispatch) {\r\n  // Make room for the messages and make sure that you don't delete the board we're adding to\r\n  while (messageCacheSize < messagesLength + state.numMessages\r\n  && (state.boardLRUHandler.length !== 1 || state.boardLRUHandler[0] !== board)) {\r\n    // Delete the last board to get rid of messages!\r\n    removeLastBoard(state, dispatch);\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the LRU status of a board within the cache. Puts it to the front of the LRU handler.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board to update the LRU status of.\r\n */\r\nfunction updateLRUBoard(state, board) {\r\n  const index = state.boardLRUHandler.indexOf(board);\r\n  if (index !== -1) {\r\n    // already in here\r\n    state.boardLRUHandler.splice(index, 1);\r\n  }\r\n  // put in here\r\n  state.boardLRUHandler.unshift(board);\r\n}\r\n\r\n/**\r\n * Removes the last board in the LRU handler from the state and unsubscribes from Ably.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction removeLastBoard(state, dispatch) {\r\n  const board = state.boardLRUHandler.pop();\r\n  state.numMessages -= state.boards[board].length;\r\n  delete state.boardNextTokens[board];\r\n  delete state.boardIfFirsts[board];\r\n  delete state.boards[board];\r\n  dispatch(removeChannelSubscription(getBoardChannel(board)));\r\n}\r\n\r\n/**\r\n * Clears a board of the messages and removes it from the handlers involved. Also unsubscribes from the channel and\r\n * handles the unsubscription.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board to clear.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction clearBoard(state, board, dispatch) {\r\n  const index = state.boardLRUHandler.indexOf(board);\r\n  if (index !== -1) {\r\n    state.boardLRUHandler.splice(index, 1);\r\n  } else {\r\n    err && console.error(\"Clearing board that isn't here?\");\r\n    return;\r\n  }\r\n  state.numMessages -= state.boards[board].length;\r\n  delete state.boardNextTokens[board];\r\n  delete state.boardIfFirsts[board];\r\n  delete state.boards[board];\r\n  delete state.boardIfSubscribed[board];\r\n  dispatch(removeChannelSubscription(getBoardChannel(board)));\r\n}\r\n\r\n/**\r\n * Clears every single board from the cache.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction clearAllBoards(state, dispatch) {\r\n  while (state.boardLRUHandler.length > 0) {\r\n    removeLastBoard(state, dispatch);\r\n  }\r\n}\r\n\r\n/**\r\n * Unsubscribes from a board without clearing it, and handles the unsubscription handlers.\r\n *\r\n * @param {MessageReducer} state The current state of the message reducer.\r\n * @param {string} board The name of the board to unsubscribe from.\r\n * @param {function({})} dispatch The asynchronous dispatch function for redux.\r\n */\r\nfunction unsubscribeFromBoard(state, board, dispatch) {\r\n  state.boardIfSubscribed[board] = false;\r\n  dispatch(removeChannelSubscription(getBoardChannel(board)));\r\n}\r\n","import {\r\n  SET_ERROR,\r\n  TOGGLE_IS_LOADING,\r\n  SET_IS_NOT_LOADING,\r\n  SET_IS_LOADING,\r\n  CLEAR_ERROR,\r\n  SET_APP_IS_NOT_LOADING\r\n} from \"../reducers/infoReducer\";\r\n\r\nexport function setError(error) {\r\n  return {\r\n    type: SET_ERROR,\r\n    payload: error\r\n  };\r\n}\r\n\r\nexport function clearError() {\r\n  return {\r\n    type: CLEAR_ERROR\r\n  }\r\n}\r\n\r\nexport function setIsLoading() {\r\n  return {\r\n    type: SET_IS_LOADING\r\n  }\r\n}\r\n\r\nexport function setIsNotLoading() {\r\n  return {\r\n    type: SET_IS_NOT_LOADING\r\n  }\r\n}\r\n\r\nexport function toggleIsLoading() {\r\n  return {\r\n    type: TOGGLE_IS_LOADING\r\n  }\r\n}\r\n\r\nexport function setAppIsNotLoading() {\r\n  return {\r\n    type: SET_APP_IS_NOT_LOADING\r\n  }\r\n}\r\n","import Ably from \"../../api/Ably\";\r\nimport {err} from \"../../../Constants\";\r\n\r\nexport const ADD_HANDLER = 'ADD_HANDLER';\r\nexport const SET_HANDLER = 'SET_HANDLER';\r\nexport const SET_PERMANENT_HANDLER = 'ADD_PERMANENT_CHANNEL';\r\nexport const REMOVE_CHANNEL = 'REMOVE_CHANNEL';\r\nexport const CLEAR_CHANNELS = 'CLEAR_CHANNELS';\r\n\r\n// The max number of channels we can be subscribed to at any given moment\r\nconst channelCacheSize = 10;\r\n\r\ntype AblyReducer = {\r\n  subscribedChannels: Map<string, string>,\r\n  subscribedChannelLRUHandler: [Function],\r\n  notificationHandlers: Map<string, [Function]>,\r\n  unsubscriptionHandlers: Map<string, [Function]>,\r\n  numPermanentHandlers: number\r\n}\r\n\r\n/**\r\n * The initial state for the Ably reducer.\r\n *\r\n * @type {AblyReducer}\r\n */\r\nconst initialState = {\r\n  subscribedChannels: {},\r\n  subscribedChannelLRUHandler: [],\r\n  notificationHandlers: {},\r\n  unsubscriptionHandlers: {},\r\n  numPermanentHandlers: 0\r\n};\r\n\r\n/**\r\n * Deeply copies the reducer state for the next reducer state.\r\n *\r\n * @param {AblyReducer} state The state of the Ably Reducer at the time.\r\n * @return {AblyReducer} The deeply copied state to be updated.\r\n */\r\nconst copyState = (state) => {\r\n  state = {...state};\r\n  state.subscribedChannels = {...state.subscribedChannels};\r\n  state.subscribedChannelLRUHandler = [...state.subscribedChannelLRUHandler];\r\n  state.notificationHandlers = {...state.notificationHandlers};\r\n  state.unsubscriptionHandlers = {...state.unsubscriptionHandlers};\r\n  return state;\r\n};\r\n\r\n/**\r\n * Ably Reducer:\r\n *\r\n * This reducer essentially handles all of the Ably channel subscriptions and real time updating. This reducer\r\n * specifically maintains the list of channels that one is subscribed to at any moment so that it doesn't exceed too\r\n * high a number. Also maintains a list of unsubscription handlers to call once the channels are automatically\r\n * unsubscribed from.\r\n *\r\n * @param {AblyReducer} state The current state of the ably reducer.\r\n * @param {{type: string, payload: *, asyncDispatch: function}} action The action to specify how to update the reducer.\r\n * @return {AblyReducer} The next state for the reducer.\r\n */\r\nexport default (state: AblyReducer = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_HANDLER:\r\n      state = copyState(state);\r\n      addHandler(\r\n        state,\r\n        action.payload.channel,\r\n        action.payload.handler,\r\n        action.payload.unsubscriptionHandler,\r\n        action.payload.messageHandler\r\n      );\r\n      break;\r\n    case SET_HANDLER:\r\n      state = copyState(state);\r\n      setHandler(\r\n        state,\r\n        action.payload.channel,\r\n        action.payload.handler,\r\n        action.payload.unsubscriptionHandler,\r\n        action.payload.messageHandler\r\n      );\r\n      break;\r\n    case SET_PERMANENT_HANDLER:\r\n      state = copyState(state);\r\n      setPermanentHandler(\r\n        state,\r\n        action.payload.channel,\r\n        action.payload.handler,\r\n        action.payload.unsubscriptionHandler,\r\n        action.payload.messageHandler\r\n      );\r\n      break;\r\n    case REMOVE_CHANNEL:\r\n      state = copyState(state);\r\n      removeChannelAndHandlers(state, action.payload.channel, action.asyncDispatch);\r\n      break;\r\n    case CLEAR_CHANNELS:\r\n      state = copyState(state);\r\n      clearAllChannels(state, action.asyncDispatch);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return state;\r\n}\r\n\r\n/**\r\n * Updates the Redux state object to add a handler to an Ably channel. Will automatically subscribe if hasn't already\r\n * and will unsubscribe the Least-recently-used channel if the cache is at capacity.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {string} channel The channel to add the handler to.\r\n * @param {function({})} handler The handler to receive messages with.\r\n * @param {function(string)} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @param {function({})} messageHandler The overall message handler passed from ablyActions.js, uses getStore to get all handlers.\r\n */\r\nfunction addHandler(state, channel, handler, unsubscriptionHandler, messageHandler) {\r\n  // Check to see if we have already subscribed to the channel\r\n  if (!state.subscribedChannels[channel]) {\r\n    // If we haven't subscribed to this yet, then we subscribe to the channel directly\r\n    subscribeToChannel(channel, messageHandler);\r\n    state.subscribedChannels[channel] = channel;\r\n    // Then, we also add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel] = [handler];\r\n    state.unsubscriptionHandlers[channel] = [unsubscriptionHandler];\r\n    addLRUChannel(state, channel);\r\n  } else {\r\n    // Otherwise, we just add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel].push(handler);\r\n    state.unsubscriptionHandlers[channel].push(unsubscriptionHandler);\r\n    updateLRUChannel(state, channel);\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the ably redux state to set a single handler for a channel. Will overwrite any existing handlers and ensure\r\n * that there is only one handler (both message and unsubscribe) for the channel.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {string} channel The channel to set the handler of.\r\n * @param {function({})} handler The message handler for the channel.\r\n * @param {function(string)} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @param {function({})} messageHandler The overall message handler passed from ablyActions.js, uses getStore to get all handlers.\r\n */\r\nfunction setHandler(state, channel, handler, unsubscriptionHandler, messageHandler) {\r\n  // Check to see if we have already subscribed to the channel\r\n  if (!state.subscribedChannels[channel]) {\r\n    // If we haven't subscribed to this yet, then we subscribe to the channel directly\r\n    subscribeToChannel(channel, messageHandler);\r\n    state.subscribedChannels[channel] = channel;\r\n    // Then, we also add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel] = [handler];\r\n    state.unsubscriptionHandlers[channel] = [unsubscriptionHandler];\r\n    addLRUChannel(state, channel);\r\n  } else {\r\n    // Otherwise, we just add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel] = [handler];\r\n    state.unsubscriptionHandlers[channel] = [unsubscriptionHandler];\r\n    updateLRUChannel(state, channel);\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the ably redux state to set a single handler for a permanent channel. This channel will not be affected by\r\n * any logic in the LRU cache and will always stay in the app.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {string} channel The channel to set the handler of.\r\n * @param {function({})} handler The message handler for the channel.\r\n * @param {function(string)} unsubscriptionHandler The handler to call when the channel is unsubscribed from.\r\n * @param {function({})} messageHandler The overall message handler passed from ablyActions.js, uses getStore to get all handlers.\r\n */\r\nfunction setPermanentHandler(state, channel, handler, unsubscriptionHandler, messageHandler) {\r\n  // Check to see if we have already subscribed to the channel\r\n  if (!state.subscribedChannels[channel]) {\r\n    // If we haven't subscribed to this yet, then we subscribe to the channel directly\r\n    subscribeToChannel(channel, messageHandler);\r\n    state.subscribedChannels[channel] = channel;\r\n    // Then, we also add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel] = [handler];\r\n    state.unsubscriptionHandlers[channel] = [unsubscriptionHandler];\r\n    // We keep track of how many permanent handlers we have\r\n    state.numPermanentHandlers++;\r\n  } else {\r\n    // Otherwise, we just add to the notification/unsubscription handlers\r\n    state.notificationHandlers[channel] = [handler];\r\n    state.unsubscriptionHandlers[channel] = [unsubscriptionHandler];\r\n  }\r\n}\r\n\r\n/**\r\n * Removes a single channel and its handlers and calls the unsubscription handlers as well.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {string} channel The channel to remove and unsubscribe from.\r\n * @param {function({})} asyncDispatch The asyncDispatch function scheduling a dispatch after the reducer finishes.\r\n */\r\nfunction removeChannelAndHandlers(state, channel, asyncDispatch) {\r\n  removeChannel(state, channel, asyncDispatch);\r\n  const index = state.subscribedChannelLRUHandler.indexOf(channel);\r\n  if (index !== -1) {\r\n    state.subscribedChannelLRUHandler.splice(index, 1);\r\n  } else {\r\n    err && console.error(\"REMOVING CHANNEL THAT DOESN'T EXIST!\");\r\n  }\r\n}\r\n\r\n/**\r\n * Adds the channel to the LRU Cache and potentially throws away a channel and unsubscribes from it.\r\n *\r\n * @param {AblyReducer} state The ably redux state.\r\n * @param {string} channel The channel to add to the LRU Cache.\r\n */\r\nfunction addLRUChannel(state, channel) {\r\n  const lru = state.subscribedChannelLRUHandler;\r\n  if (lru.length >= (channelCacheSize - state.numPermanentHandlers)) {\r\n    // Then we also have to remove the last channel from the lru and remove it from the redux state\r\n    removeChannel(state, lru.pop());\r\n  }\r\n  // In either case, we add the channel.\r\n  lru.unshift(channel);\r\n}\r\n\r\n/**\r\n * Updates the redux ably state to push the LRU channel to the front of the LRU Cache list.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {string} channel The channel to update in the LRU cache.\r\n */\r\nfunction updateLRUChannel(state, channel) {\r\n  const lru = state.subscribedChannelLRUHandler;\r\n  // We find the channel in the LRU and then put it to the front\r\n  const index = lru.indexOf(channel);\r\n  if (index !== -1) {\r\n    lru.splice(index, 1);\r\n    lru.unshift(channel);\r\n  } else {\r\n    err && console.error(\"ABLY CHANNEL NOT FOUND IN LRU, PROBLEM WITH IMPL.\");\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the redux state to remove the channel from the ably redux fields (except for LRU Handler).\r\n *\r\n * @param {AblyReducer} state The ably redux state.\r\n * @param {string} channel The channel to remove from the state.\r\n * @param {function({})} asyncDispatch The asynchronous dispatch to call within an unsubscription handler.\r\n */\r\nfunction removeChannel(state, channel, asyncDispatch) {\r\n  // Unsubscribe from the channel, then remove from the redux state\r\n  const unsubscriptionHandlers = state.unsubscriptionHandlers[channel];\r\n  unsubscribeFromChannel(asyncDispatch, channel, unsubscriptionHandlers);\r\n  delete state.subscribedChannels[channel];\r\n  delete state.notificationHandlers[channel];\r\n  delete state.unsubscriptionHandlers[channel];\r\n}\r\n\r\n/**\r\n * Clears all the channels from the ably state. Ends up with a clean ably state. Handles unsubscription too.\r\n *\r\n * @param {AblyReducer} state The redux ably state.\r\n * @param {function({})} asyncDispatch The asyncDispatch function scheduling a dispatch after the reducer finishes.\r\n */\r\nfunction clearAllChannels(state, asyncDispatch) {\r\n  const channels = state.subscribedChannels;\r\n  for (const channel in channels) {\r\n    if (channels.hasOwnProperty(channel)) {\r\n      removeChannel(state, channel, asyncDispatch);\r\n    }\r\n  }\r\n  state.subscribedChannelLRUHandler = [];\r\n  state.numPermanentHandlers = 0;\r\n}\r\n\r\n/**\r\n * Subscribes to an Ably channel and sets the main handler to the passed in messageHandler. This will be pulled from\r\n * ablyActions.js and most likely will contain \"getStore\"\r\n *\r\n * @param {string} channel The name of the channel to subscribe to.\r\n * @param {function({})} messageHandler The handler for each message that comes through the channel.\r\n */\r\nfunction subscribeToChannel(channel, messageHandler) {\r\n  Ably.subscribeToChannel(channel, messageHandler);\r\n}\r\n\r\n/**\r\n * Uses Ably to unsubscribe from the channel and calls the unsubscribe handlers. Does not change state!\r\n *\r\n * @param {string} channel The channel name that is currently subscribed\r\n * @param {[function(function({}))]} unsubscriptionHandlers The unsubscription handlers to call after un-subscribing.\r\n * @param {function({})} asyncDispatch The asynchronous dispatch to call within unsubscription handlers.\r\n */\r\nfunction unsubscribeFromChannel(asyncDispatch, channel, unsubscriptionHandlers) {\r\n  Ably.unsubscribeFromChannel(channel, () => {\r\n    if (unsubscriptionHandlers) {\r\n      for (let i = 0; i < unsubscriptionHandlers.length; i++) {\r\n        // Handle the un-subscription\r\n        unsubscriptionHandlers[i](asyncDispatch);\r\n      }\r\n    } else {\r\n      err && console.error(\"Channel \" + channel + \" did not specify any unsubscribe handlers????\");\r\n    }\r\n  });\r\n}","module.exports = __webpack_public_path__ + \"static/media/VC_logo.798ed7fc.svg\";","export const SET_USER = 'SET_USER';\r\nexport const FORCE_SET_USER = 'FORCE_SET_USER';\r\nexport const CLEAR_USER = 'CLEAR_USER';\r\n\r\nconst initialState = {\r\n  id: null,\r\n};\r\n\r\n/**\r\n * User Reducer:\r\n *\r\n * The reducer to essentially store the current user's information directly. Essentially updates using the cache reducer\r\n * and keeps the state consistent. Convenience mostly and for maintaining who the user is.\r\n *\r\n * @param {{}} state The current state of the user reducer.\r\n * @param {{type: string, payload: *}} action The action to specify how to update the reducer.\r\n * @return {{}} The next state for the reducer.\r\n */\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    // For the user, we want to be able to store all the pertinent information\r\n    case SET_USER:\r\n      // console.log(\"REDUX SET USER, INIT STATE = \" + JSON.stringify(state) + \", ACTION PAYLOAD = \" + JSON.stringify(action.payload));\r\n      state = {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n      // console.log(\"STATE AFTER SET USER = \" + JSON.stringify(state));\r\n      break;\r\n    case FORCE_SET_USER:\r\n      state = {\r\n        ...initialState,\r\n        ...action.payload\r\n      };\r\n      break;\r\n    case CLEAR_USER:\r\n      state = {\r\n        ...initialState\r\n      };\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  // console.log(\"USER: Did \" + action.type + \" and now state is = \" + JSON.stringify(state));\r\n  return state;\r\n};\r\n"],"sourceRoot":""}